<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>

    <script src="http://cdn.speedr.io/speeder.js"></script>
    <script>speeder('55730cc6','df9');</script>
    
    <meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
    <meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
    <meta name="y_key" content="265502be3db4fb6e" />

    <link rel="icon" type="image/png" href="../img/favicon.png">

    <title>Variable Evaluation in PHP - PHundamental PHP Best Practices -</title>

    <link href="../css/nyphp2.css" rel="stylesheet" media="screen" type="text/css" />
    <link href="../css/nyphp2_print.css" rel="stylesheet" media="print" type="text/css" />

    <meta name="robots" content="index,follow" />
    <meta name="description" content="Variable Evaluation in PHP - PHP best practices and LAMP stack strategy." />
    <meta name="author" content="Stackware Web Development - http://stackware.com" />
</head>


<body>


<div id="GlobalContainer">

    <div id="Header">
        
<div class="HeaderContainer">
    <div class="HeaderLeft">
        <a href="../index.html"><img src="../img/new_york_php.gif" alt="New York PHP User Group Community" /></a>
    </div>
    <div class="HeaderRight">
        <h1><a href="http://stackware.com/nyc-php-training">PHP Training</a></h1>
    </div>
    <div class="HeaderFirstBar" style="padding: 0; margin: 0 0 0 -6px;">
    <ul>
        <li>
            <a  href="../index.html" title="Home">Home</a>
        </li>
        <li>
            <a  href="../mailing-lists.html" title="PHP Mailing Lists">Mailing Lists</a>
        </li>
        <li>
            <a style="text-decoration: underline;" href="../phunny/err_sample_include.php.html" title="PHundamentals">PHundamentals</a>
        </li>
        <li>
            <a  href="../php-presentations/index.html" title="Presentations">Presentations</a>
        </li>
        <li>
            <a href="../php-presentations/82_Online-PHP-Forums.html" title="NY PHP Meetup">Contact Us</a>
        </li>
    </ul>
    </div>

    <div class="HeaderSecondBar">
        <div style="margin: 11px 0 0 -4px; padding: 0;">
        <small>don't forget to</small>
        <a style="font-weight: bold;" href="https://www.facebook.com/groups/367255050049061/">facebook friend</a> -
        <a style="font-weight: bold;" href="http://twitter.com/nyphp">twitter follow</a> -
        <a style="font-weight: bold;" href="../php-presentations/82_Online-PHP-Forums.html">NYC PHP meetup</a>
        </div>
    </div>
</div>



    </div>

    <div id="MainLayout">
    <div id="TwoColumn">
        <div id="LeftColumn">
            
<div class="LeftNav">

    <div class="NowLinks">


        <div class="ShowParticipation">
        <a href="../show-participation.html">Show Your Participation
        <img style="margin: 2px;" alt="NYPHP Member" src="../img/nyphporgmember.gif" />
        Click for Details</a>
        </div>

        <div style="height: 15px;"></div>

    </div>

    <div style="height: 15px;"></div>

<div class="LeftNavSection">

    <div class="LeftNavSubSection">
        <a target="_blank" href="https://www.meetup.com/tampa-bay-php/">
            <img width="120px" src="../img/tbphp.gif" alt="Tampa Bay Florida PHP" title="Tampa Bay Florida PHP" />
        </a>
        <a target="_blank" title="Tampa Bay Florida PHP" href="http://www.tbphp.org/">
            Tampa Bay<br />Florida PHP
        </a>
    </div>


    <div class="LeftNavSubSection">
        <a href="http://www.flickr.com/groups/nyphp/">
        <img src="../img/flickr.logo.gif" alt="NYPHP flickr Group" title="New York PHP flickr Group" />
        </a>
        Browse and upload photos of events, at the
        <a href="http://www.flickr.com/groups/nyphp/">NYPHP flickr Group</a>.
    </div>
    <div class="LeftNavSubSection">
        <a href="http://www.linkedin.com/e/gis/110439">
        <img src="../img/linkedin.logo.gif" alt="PHP Community" title="New York PHP Community LinkedIn" />
        </a>
        Link up with NYPHP at the
        <a href="http://www.linkedin.com/groups?about=&amp;gid=110439">PHP LinkedIn Group</a>.
    </div>

</div>


<div class="BoxLinks" style="text-align: left;">
    <p class="BoxLinkHeader">About NYPHP</p>
    <p><a href="../about-us/charter.html">&raquo; Charter</a></p>
    <p><a href="../about-us/mission.html">&raquo; Mission</a></p>
    <p><a href="../about-us/index.html">&raquo; What is NYPHP?</a></p>
    <p><a href="../about-us/principals.html">&raquo; Principals</a></p>
    <p><a href="../about-us/sponsors.html">&raquo; Sponsors</a></p>
</div>


</div>

            <div class="SubLeftColumn">
            
<div class="Event">

<h1>Various ways of evaluating a variable</h1>
<h2>NYPHP - <span style="color: rgb(0, 0, 153);">PH</span>undamentals</h2>

<p>
Evaluating a variable, whether it is generated by a script or input by a user, 
turns out to be somewhat more complicated than one might suspect.  The focus here
will be on determining whether the variable contains something; if it does, then 
additional tests will normally be necessary to determine whether it contains 
something meaningful.
</p>

<p>
Among the techniques that might be considered are the following:
</p>
<pre>
1.  <em>if (!$var)</em>
2.  <em>if (empty($var))</em>
3.  <em>if ($var=='')</em>
4.  <em>if ($var==='')</em>
5.  <em>if (isset($var))</em>
6.  <em>if strlen($var)==0</em>
7.  <em>if (is_string($var))</em>
</pre>

<p>
Among the possible values that a variable might possess are the following:
</p>
<pre>
1.  a string value, 'something'
2.  a numerical value, 12345
3.  the empty value, ''
4.  the integers 1 or 0
5.  the boolean constants TRUE or FALSE
6.  NULL
</pre>
<p>
Or a variable might be unset.
</p>

<h3>Variables set by user input in a form</h3>
<p>
User input in response to a form can exist only as a string value.
If the user inputs a number, it will be treated as a string for evaluation.
</p>

<p>
An array or a text variable coming from a form via checkbox or radio will be unset if the user
doesn&#8217;t check anything.  But no text variable coming from a form via input can be unset.
If the user doesn&#8217;t input a value, the variable will be empty (='').
</p>

<p>
Thus, TRUE/FALSE and NULL are impossible values for form-generated variables, 
as are the integers (as opposed to the strings) 1 and 0.  
</p>

<h3>Variables set by a script</h3>
<p>
A variable generated by a script might have any of the possible
values.  A variable that is conditionally generated might be unset.
</p>

<p>
This table shows how each of these possible values is evaluated by each technique
(note that &#8220;unset&#8221; is not actually a value):
</p>


<table border="1px" class="mono">
<tr>
<td>&nbsp;&nbsp;typical use&#8594;</td><td colspan="3">variables usually with forms</td><td colspan="4">variables usually with scripts</td>
</tr>
<tr>
<td>&#8595;test | value&#8594;</td><td>something</td><td>12345</td><td>''</td><td>0</td><td>FALSE</td><td>NULL</td><td>[unset]</td></tr>

<tr><td>!$var</td><td><span class="red">false</span></td><td><span class="red">false</span></td><td><span class="green">true</span></td><td><span class="green">true</span></td><td><span class="green">true</span></td><td><span class="green">true</span></td><td><span class="green">true</span></td></tr><tr><td>empty($var)</td><td><span class="red">false</span></td><td><span class="red">false</span></td><td><span class="green">true</span></td><td><span class="green">true</span></td><td><span class="green">true</span></td><td><span class="green">true</span></td><td><span class="green">true</span></td></tr><tr><td>$var==''</td><td><span class="red">false</span></td><td><span class="red">false</span></td><td><span class="green">true</span></td><td><span class="green">true</span></td><td><span class="green">true</span></td><td><span class="green">true</span></td><td><span class="green">true</span></td></tr><tr><td>$var===''</td><td><span class="red">false</span></td><td><span class="red">false</span></td><td><span class="green">true</span></td><td><span class="red">false</span></td><td><span class="red">false</span></td><td><span class="red">false</span></td><td><span class="red">false</span></td></tr><tr><td>isset($var)</td><td><span class="green">true</span></td><td><span class="green">true</span></td><td><span class="green">true</span></td><td><span class="green">true</span></td><td><span class="green">true</span></td><td><span class="red">false</span></td><td><span class="red">false</span></td></tr><tr><td>strlen($var)==0</td><td><span class="green">true</span></td><td><span class="green">true</span></td><td><span class="green">true</span></td><td><span class="red">false</span></td><td><span class="green">true</span></td><td><span class="green">true</span></td><td><span class="green">true</span></td></tr><tr><td>is_string($var)</td><td><span class="green">true</span></td><td><span class="red">false</span></td><td><span class="green">true</span></td><td><span class="red">false</span></td><td><span class="red">false</span></td><td><span class="red">false</span></td><td><span class="red">false</span></td></tr></table>

<p>
This table demonstrates somewhat surprising results:
</p>

<ul>
<li>For values like 0 (the integer), FALSE, and NULL, tests for falseness or emptiness
like <em>!$var</em> or <em>empty($var)</em> or <em>$var==''</em> will return true.</li>

<li>A test like <em>strlen($var)==0</em> returns false when $var=0 (the integer) but true when $var=FALSE or 12345.
This is particularly confusing, since none of these variables is in fact a string, and two of them
are equivalent in meaning even though they are different types.</li>
</ul>

<p>
What conclusions can we draw?
</p>

<ul>
<li>When testing user input from a form, the <strong>only</strong> reliable
test that the user has entered something is <em>if($var==='')</em>.  But if
you are expecting an array back, you need to test that it has been set,
with <em>if(array())</em> (the <em>isset</em> test will not work with an array).</li>

<li>When testing a conditionally set variable, you <strong>must</strong> check
whether the variable has been set with <em>isset($var)</em> before any further
processing, because some tests return true even with an unset variable.</li>

<li>There are extremely subtle differences among these tests.  These are often caused 
by mixing types in comparisons, like <em>if(strlen($var))</em> when $var=0 (the integer).  
Therefore, when testing a variable set by a script, you should consider carefully 
exactly which test will provide the results you want.  Do strict rather than loose 
comparisons if possible.  More than one test will probably be necessary.</li>

<li>Always use the values TRUE/FALSE for boolean testing, never 1/0.</li>

<li>For a function that is expected to return a value, consider setting a return value 
($var=FALSE or $var='') in case the function fails.</li>

<li>The tests <em>if (!$var)</em> and <em>if (empty($var))</em> and <em>if ($var=='')</em> are 
completely interchangeable, and equally confusing.  Each returns true for a variable that is
empty or nonexistent in a general sense (either unset or ''), but also for a variable that is 
equal to 0 (which might be 0 the integer or FALSE the boolean, neither of which is empty or 
nonexistent in a general sense).</li>
</ul>

<h4>A metaphysical digression</h4>
<p>
Analyzing exactly why a test like <em>if (!$var)</em> returns true when $var=FALSE
gets us into metaphysics:  can &#8220;nothing&#8221; nevertheless
be something by virtue of being the thing &#8220;nothing&#8221;?  To put it another way, if
0 and FALSE and NULL are in fact some sort of values, how can the variables containing them be considered
false or empty?  Apparently, in some cases they are recognized as not being empty:
</p>
<ul>
<li>A test like <em>isset($var)</em> returns true for the values 0 (the integer) and FALSE, 
which are thus set even though supposedly they are nothing.</li>
<li>A test like <em>strlen($var)==0</em> similarly returns false for the value 0 (the integer),
which thus does have some length even though supposedly it is nothing.</li>
</ul>

<p>
Once again, most of these problems can be avoided by using strict comparisons, with 
careful attention to types so that no mixing takes place.
</p>

<hr />
<p>
Information from <em>The PHP Manual</em>  on type comparison can be found <a href="http://www.php.net/manual/en/types.comparisons.php">here</a>.
</p>

<hr />
<p>
Contributors to this note include the following:<br />
Chris Snyder<br />
Dan Convissor<br />
Chris Shiflett<br />
Brian Pang<br />
Phil Powell<br />
John Lacey<br />
Jeff Knight<br />
Emmanuel Decarie<br />
the PHundamentals team:  Jeff Siegel and Mike Southwell<br />
</p>

</div>

            </div>

        </div>
        <div id="RightColumn">
            

<div class="RightColumnContent">

   
   
       <div class="MiniCal" style="margin: 0px 0 15px 0;">

        <h2>RELATED ARTICLES</h2>
               <div class="MiniCalOdd">
            <p>
                <a title="From Zero to AMP with XAMPP - Installing PHP and MySQL on Windows with XAMPP" href="../PHundamentals/0_Zero-AMP-XAMPP-Installing-PHP-MySQL-Windows.html">From Zero to AMP with XAMPP - Installing PHP and MySQL on Windows with XAMPP</a>
            </p>
        </div>
               <div class="MiniCalEven">
            <p>
                <a title="PHP Initialization and php.ini" href="../PHundamentals/1_PHP-Initialization-phpini.html">PHP Initialization and php.ini</a>
            </p>
        </div>
               <div class="MiniCalOdd">
            <p>
                <a title="Virtual Hosting with PHP" href="../PHundamentals/2_Virtual-Hosting-PHP.html">Virtual Hosting with PHP</a>
            </p>
        </div>
               <div class="MiniCalEven">
            <p>
                <a title="PHP Site Structure: Where to Locate Includes?" href="../PHundamentals/3_PHP-Site-Structure-Where-Locate-Includes.html">PHP Site Structure: Where to Locate Includes?</a>
            </p>
        </div>
               <div class="MiniCalOdd">
            <p>
                <a title="Variable Evaluation in PHP" href="../PHundamentals/4_Variable-Evaluation-in-PHP.html">Variable Evaluation in PHP</a>
            </p>
        </div>
               <div class="MiniCalEven">
            <p>
                <a title="Storing Data Submitted From a Form and Displaying Data from a Database" href="../PHundamentals/5_Storing-Data-Submitted-Form-Displaying-Database.html">Storing Data Submitted From a Form and Displaying Data from a Database</a>
            </p>
        </div>
               <div class="MiniCalOdd">
            <p>
                <a title="Spoofed Form Submissions" href="../PHundamentals/6_Spoofed-Form-Submissions.html">Spoofed Form Submissions</a>
            </p>
        </div>
               <div class="MiniCalEven">
            <p>
                <a title="PHP Error Handling" href="../PHundamentals/7_PHP-Error-Handling.html">PHP Error Handling</a>
            </p>
        </div>
               <div class="MiniCalOdd">
            <p>
                <a title="Preventing Email Header Injection" href="../PHundamentals/8_Preventing-Email-Header-Injection.html">Preventing Email Header Injection</a>
            </p>
        </div>
    </div>
   


    <div class="RightColumnSubSection" style="text-align: center; margin: 35px 0 25px 0; ">
        <a href="http://cnvyr.io/">
        <img src="../img/cnvyrio.logo.sm.png" alt="CSS JS minify thumbnail maker online API" title="CSS JS minify thumbnail maker online API" />
        </a>
        <p><a href="http://cnvyr.io/">free PHP thumbnail maker CSS &amp; Javascript minify gzip pipeline online API and console</a>
        <br />
        <br />Free API and developer tools console for PageSpeed optimization.
        </p>
    </div>



   
</div>

        </div>
    </div>
    </div>

    <div id="Footer">
        
<div style="float: left;">
11.8</div>

<a href="http://www.meetup.com/new-york-php">NYC PHP Meetup Community </a>
    </div>

</div>

</body>
</html>

