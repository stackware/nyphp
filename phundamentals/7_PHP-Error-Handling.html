<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>

    <script src="http://cdn.speedr.io/speeder.js"></script>
    <script>speeder('55730cc6','df9');</script>
    
    <meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
    <meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
    <meta name="y_key" content="265502be3db4fb6e" />

    <link rel="icon" type="image/png" href="../img/favicon.png">

    <title>PHP Error Handling - PHundamental PHP Best Practices -</title>

    <link href="../css/nyphp2.css" rel="stylesheet" media="screen" type="text/css" />
    <link href="../css/nyphp2_print.css" rel="stylesheet" media="print" type="text/css" />

    <meta name="robots" content="index,follow" />
    <meta name="description" content="PHP Error Handling - PHP best practices and LAMP stack strategy." />
    <meta name="author" content="Stackware Web Development - http://stackware.com" />
</head>


<body>


<div id="GlobalContainer">

    <div id="Header">
        
<div class="HeaderContainer">
    <div class="HeaderLeft">
        <a href="../index.html"><img src="../img/new_york_php.gif" alt="New York PHP User Group Community" /></a>
    </div>
    <div class="HeaderRight">
        <h1><a href="http://stackware.com/nyc-php-training">PHP Training</a></h1>
    </div>
    <div class="HeaderFirstBar" style="padding: 0; margin: 0 0 0 -6px;">
    <ul>
        <li>
            <a  href="../index.html" title="Home">Home</a>
        </li>
        <li>
            <a  href="../mailing-lists.html" title="PHP Mailing Lists">Mailing Lists</a>
        </li>
        <li>
            <a style="text-decoration: underline;" href="../phunny/err_sample_include.php.html" title="PHundamentals">PHundamentals</a>
        </li>
        <li>
            <a  href="../php-presentations/index.html" title="Presentations">Presentations</a>
        </li>
        <li>
            <a href="../php-presentations/82_Online-PHP-Forums.html" title="NY PHP Meetup">Contact Us</a>
        </li>
    </ul>
    </div>

    <div class="HeaderSecondBar">
        <div style="margin: 11px 0 0 -4px; padding: 0;">
        <small>don't forget to</small>
        <a style="font-weight: bold;" href="https://www.facebook.com/groups/367255050049061/">facebook friend</a> -
        <a style="font-weight: bold;" href="http://twitter.com/nyphp">twitter follow</a> -
        <a style="font-weight: bold;" href="../php-presentations/82_Online-PHP-Forums.html">NYC PHP meetup</a>
        </div>
    </div>
</div>



    </div>

    <div id="MainLayout">
    <div id="TwoColumn">
        <div id="LeftColumn">
            
<div class="LeftNav">

    <div class="NowLinks">


        <div class="ShowParticipation">
        <a href="../show-participation.html">Show Your Participation
        <img style="margin: 2px;" alt="NYPHP Member" src="../img/nyphporgmember.gif" />
        Click for Details</a>
        </div>

        <div style="height: 15px;"></div>

    </div>

    <div style="height: 15px;"></div>

<div class="LeftNavSection">

    <div class="LeftNavSubSection">
        <a target="_blank" href="https://www.meetup.com/tampa-bay-php/">
            <img width="120px" src="../img/tbphp.gif" alt="Tampa Bay Florida PHP" title="Tampa Bay Florida PHP" />
        </a>
        <a target="_blank" title="Tampa Bay Florida PHP" href="http://www.tbphp.org/">
            Tampa Bay<br />Florida PHP
        </a>
    </div>


    <div class="LeftNavSubSection">
        <a href="http://www.flickr.com/groups/nyphp/">
        <img src="../img/flickr.logo.gif" alt="NYPHP flickr Group" title="New York PHP flickr Group" />
        </a>
        Browse and upload photos of events, at the
        <a href="http://www.flickr.com/groups/nyphp/">NYPHP flickr Group</a>.
    </div>
    <div class="LeftNavSubSection">
        <a href="http://www.linkedin.com/e/gis/110439">
        <img src="../img/linkedin.logo.gif" alt="PHP Community" title="New York PHP Community LinkedIn" />
        </a>
        Link up with NYPHP at the
        <a href="http://www.linkedin.com/groups?about=&amp;gid=110439">PHP LinkedIn Group</a>.
    </div>

</div>


<div class="BoxLinks" style="text-align: left;">
    <p class="BoxLinkHeader">About NYPHP</p>
    <p><a href="../about-us/charter.html">&raquo; Charter</a></p>
    <p><a href="../about-us/mission.html">&raquo; Mission</a></p>
    <p><a href="../about-us/index.html">&raquo; What is NYPHP?</a></p>
    <p><a href="../about-us/principals.html">&raquo; Principals</a></p>
    <p><a href="../about-us/sponsors.html">&raquo; Sponsors</a></p>
</div>


</div>

            <div class="SubLeftColumn">
            
<div class="Event">
<h1>PHP Error Handling</h1>
<h2>NYPHP - <span style="color: rgb(0, 0, 153);">PH</span>undamentals</h2>

<h3>PROBLEM:</h3>
<p>
Every well-constructed PHP application should have error handling. While there is no
definitive method for handling errors since it varies depending on application
needs and a developer's
style, nonetheless, there are some "best practices" that
should be implemented in all PHP applications.
</p>
<h3>WHAT IS AN ERROR?</h3>
<p>The answer may seem straightforward but actually requires a bit of discussion.
An "error" is an expected or unexpected event that occurs when your
PHP code is running. An "expected" error can be a database query that
returns no result or an html form that is missing values for designated required
fields. An "unexpected" error is one that assumes a particular application state
which, for some as yet unknown reason, does not exist. The most obvious unexpected error is
a database that is not running or a missing file that one of your scripts expects to find.
</p>
<h3>ERROR HANDLING ENVIRONMENT</h3>
<p>
The recommended "best practice" has three parts:
</p>
<ol>
<li>The developer should be alerted to all errors, notices, warnings, etc. both during development and when
the PHP application goes into production.</li>
<li>The developer should be able to choose how to be notified of these problems.</li>
<li>No errors, notices, warnings, etc. should ever be displayed to the user.
Even in development, errors dumped to the browser can be bad because they can become hidden in the HTML.
In production, you should display
a generic page that says "System down for maintenance" or some other
generic message. At no time do you want to tip off a hacker as to what went wrong,
nor do you want to display the details of what went wrong. That information is for you alone.
Although some developers feel that errors should be displayed during development and even in
a production environment - modified, of course, so as not to tip off a hacker -
we will assume here that errors will never be displayed.
</li>
</ol>

<p>
<br/>
We can set these three parameters in one of two ways.
</p>

<ol>
  <li>If you have control over the <em>php.ini</em> file then set the following parameters:<br/>
<em>(<a href="7_PHP-Error-Handling.html#note1">See Note 1</a>)</em>
<br/>
<br/>
<code>
<font color="#00b">
error_reporting = E_ALL<br />
log_errors = On<br />
display_errors = Off<br />
<br />
</font>
</code>
</li>

  <li>If you don't have control over <em>php.ini</em>, then at the beginning of your script
you can set the same parameters using the following:
<br/><br/>
<code>
<font color="#0000bb">
error_reporting</font><font color="#007700">(</font><font color="#0000bb">E_ALL</font><font color="#007700">);
<br />   </font><font color="#0000bb">ini_set</font><font color="#007700">(</font><font color="#dd0000">'log_errors'</font><font color="#007700">,</font><font color="#dd0000">'1'</font><font color="#007700">);

<br />   </font><font color="#0000bb">ini_set</font><font color="#007700">(</font><font color="#dd0000">'display_errors'</font><font color="#007700">,</font><font color="#dd0000">'0'</font><font color="#007700">);</font>

</code>
<br />
</li>
</ol>
<br />
<p>
When "log_errors" is set to "On", errors will go into
one of two places:
</p>

<ol>
  <li>The Apache error log file<br />
    If you control your own server, you can view the Apache error
    logs using the following command:
    <pre>    tail -f /path/to/your/log/error_log<br />    </pre>

    The " -f " setting will show the errors as they are appended to the file.
    If the error has already occurred, you can use the following command to view the
last 100 lines of the log.
<i>tail -100 error_log | more </i>
The number "100" can be changed to any number of lines you may want to view and piping the
output to the <em>more</em> command will show a screen's worth of data at a time.<br /><br  type="_moz"/>
</li>

  <li>In a shared hosting environment, to a specified file within your designated directory.
    In this environment, you may need to download the error log file in order to view it.
    </li>
</ol>
<br />
<p>
In either case, the file that PHP will write its errors to can be changed in either the <em >php.ini</em> file
in the "Error Handling and Logging" section, specifically, <em >error_log = filename</em> or,
if you do not have control over <em>php.ini</em>, you can set the file in your code by
using the following:
<br/><br/>
<code><font color="#0000bb">
ini_set</font><font color="#007700">(</font><font color="#dd0000">'error_log'</font><font color="#007700">, </font><font color="#dd0000">'/full/path/to/your/file/my-errors.log'</font><font color="#007700">);</font>

</code>

</p>
<br/>
<h3>EXPECTED ERRORS</h3>
<p>
This type of error can be the the result of something a website
visitor has done such as providing invalid form input (the visitor omitted some values or entered letters
in a field that is expecting numbers) or it can be a database query that returns no records.
For example, you may have a form that requires that particular fields be completed before submitting or
particular fields may
require a particular type of input such as only numbers and dashes in a field that captures phone numbers.

Therefore, your PHP code should <strong>ALWAYS</strong> check for acceptable values.
</p>
Illustrated below is a simple example that illustrates the concept.
<a href="../phunny/err_trap_form.php.html" target="_blank">Click here</a> to see
it in action.
<br/><br/>
<code><font color="#000000">
<font color="#0000bb">&lt;?php
<br/></font><font color="#ff8000">/**************************************************************
<br/>&nbsp;Check values entered by user.
<br/>&nbsp;The code shown here is meant solely to illustrate the concept
<br/>&nbsp;in the main article. There are many different coding methods
<br/>&nbsp;that one can use to validate form input.
<br/>***************************************************************/

<br/>
<br/>//Initialize array to an empty array
<br/></font><font color="#0000bb">$errMsg </font><font color="#007700">= array();
<br/>
<br/></font><font color="#ff8000">/*
<br/>&nbsp;Check to see if the form has been posted. If true, then
<br/>&nbsp;check values.
<br/>*/
<br/></font><font color="#007700">if (isset(</font><font color="#0000bb">$_POST</font><font color="#007700">[</font><font color="#dd0000">'submit'</font><font color="#007700">])){
<br/>&nbsp;if (</font><font color="#0000bb">trim</font><font color="#007700">(</font><font color="#0000bb">$_POST</font><font color="#007700">[</font><font color="#dd0000">'Name'</font><font color="#007700">]) === </font><font color="#dd0000">''</font><font color="#007700">){

<br/>&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">$errMsg</font><font color="#007700">[] = </font><font color="#dd0000">'Please enter your name'</font><font color="#007700">;
<br/>&nbsp;&nbsp;}
<br/>&nbsp;&nbsp;</font><font color="#ff8000">//We want to make sure that the phone number is in the format we want
<br/>&nbsp;&nbsp;</font><font color="#007700">if (!</font><font color="#0000bb">preg_match</font><font color="#007700">(</font><font color="#dd0000">"/^</font><font color="#007700">[</font><font color="#dd0000">0-9</font><font color="#007700">]{</font><font color="#dd0000">3</font><font color="#007700">}[</font><font color="#dd0000">-</font><font color="#007700">]{</font><font color="#dd0000">1,1</font><font color="#007700">}[</font><font color="#dd0000">0-9</font><font color="#007700">]{</font><font color="#dd0000">4</font><font color="#007700">}$</font><font color="#dd0000">/"</font><font color="#007700">, </font><font color="#0000bb">$_POST</font><font color="#007700">[</font><font color="#dd0000">'Phone'</font><font color="#007700">])){

<br/>&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">$errMsg</font><font color="#007700">[] = </font><font color="#dd0000">'Phone number should be entered as digits in the following format: ###-####'</font><font color="#007700">;
<br/>&nbsp;&nbsp;}
<br/>&nbsp;&nbsp;</font><font color="#ff8000">/*
<br/>&nbsp;&nbsp;If an error has occurred, the array "$errMsg" will have a count greater than zero
<br/>&nbsp;&nbsp;so display our error message to the user
<br/>&nbsp;&nbsp;*/
<br/>&nbsp;&nbsp;</font><font color="#007700">if (</font><font color="#0000bb">count</font><font color="#007700">(</font><font color="#0000bb">$errMsg</font><font color="#007700">)!== </font><font color="#0000bb">0</font><font color="#007700">){
<br/>&nbsp;&nbsp;&nbsp;&nbsp;foreach (</font><font color="#0000bb">$errMsg </font><font color="#007700">as </font><font color="#0000bb">$key </font><font color="#007700">=&gt; </font><font color="#0000bb">$value</font><font color="#007700">){

<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">$tmp </font><font color="#007700">.= </font><font color="#dd0000">"&lt;li&gt;$value&lt;/li&gt;"</font><font color="#007700">;
<br/>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;
<br/>&nbsp;&nbsp;&nbsp;&nbsp;echo </font><font color="#dd0000">"An error has occurred:&lt;ul&gt;$tmp&lt;/ul&gt;"</font><font color="#007700">;

<br/>&nbsp;&nbsp;} else {
<br/>&nbsp;&nbsp;&nbsp;&nbsp;echo </font><font color="#dd0000">"Congratulations! You successfully entered your Name and Phone Number!"</font><font color="#007700">;
<br/>&nbsp;&nbsp;}
<br/>}
<br/></font><font color="#ff8000">//Note below that we are echoing back to the user any values already entered and we are
<br/>//making those values browser-safe with the "htmlentities" function
<br/>//(<a href="7_PHP-Error-Handling.html#note2">See Note 2</a>)
<br/></font><font color="#0000bb">?&gt;</font>
</font>
<br/>
<br/><font color="#007700">&lt;</font><font color="#0000bb">form name</font><font color="#007700">=</font><font color="#dd0000">"myForm" </font><font color="#0000bb">method</font><font color="#007700">=</font><font color="#dd0000">"POST" </font><font color="#0000bb">action</font><font color="#007700">=</font><font color="#dd0000">"&lt;?php echo $_SERVER</font><font color="#007700">[</font><font color="#dd0000">'PHP_SELF'</font><font color="#007700">]</font><font color="#dd0000">?&gt;"</font><font color="#007700">&gt;

<br/></font><font color="#0000bb">Name</font><font color="#007700">: &lt;</font><font color="#0000bb">input name</font><font color="#007700">=</font><font color="#dd0000">"Name" </font><font color="#0000bb">type</font><font color="#007700">=</font><font color="#dd0000">"text" </font><font color="#0000bb">value</font><font color="#007700">=</font><font color="#dd0000">"&lt;?php echo htmlentities($_POST</font><font color="#007700">[</font><font color="#dd0000">'Name'</font><font color="#007700">]</font><font color="#dd0000">)?&gt;"</font><font color="#007700">&gt;

<br/>&lt;</font><font color="#0000bb">br </font><font color="#007700">/&gt;
<br/></font><font color="#0000bb">Phone</font><font color="#007700">: &lt;</font><font color="#0000bb">input name</font><font color="#007700">=</font><font color="#dd0000">"Phone" </font><font color="#0000bb">type</font><font color="#007700">=</font><font color="#dd0000">"text" </font><font color="#0000bb">value</font><font color="#007700">=</font><font color="#dd0000">"&lt;?php echo htmlentities($_POST</font><font color="#007700">[</font><font color="#dd0000">'Phone'</font><font color="#007700">]</font><font color="#dd0000">)?&gt;"</font><font color="#007700">&gt;

<br/>&lt;</font><font color="#0000bb">input type</font><font color="#007700">=</font><font color="#dd0000">"submit" </font><font color="#0000bb">name</font><font color="#007700">=</font><font color="#dd0000">"submit" </font><font color="#0000bb">value</font><font color="#007700">=</font><font color="#dd0000">"Submit"</font><font color="#007700">&gt;
<br/>&lt;/</font><font color="#0000bb">form</font><font color="#007700">&gt;</font>

</code>
<br/>
<br/>
<h3>UNEXPECTED ERRORS</h3>
<p>
Unexpected errors are errors that are not part of the normal operation of your PHP application such
as a database that suddenly stops running. When an unexpected error occurs, you want to:
</p><ol>
  <li>know the state of the application</li>
  <li>know when it happened</li>
  <li>know that it happened</li>
  <li>have a record of the above three items</li>
	<li>prevent the user from knowing any of the details of what happened
	<em>(<a href="7_PHP-Error-Handling.html#note3">See Note 3</a>)</em></li>
</ol>
<br/>

<p>
Below are general guidelines for implementing our recommended best practices for notifying the developer of unexpected errors.
<br/>
</p><ol>
  <li>In the top level include file for your application, set the error handler
      for your application to your own error handler by using
			<code>
			<font color="#0000bb">
			<br/>
			<br/>set_error_handler</font><font color="#007700">(</font><font color="#dd0000">'myErrHandler'</font><font color="#007700">);</font>


			</code>
			<br/><br/>
      You could simply place this statement at the beginning of all of your PHP scripts but
			using an "include" file makes it easier to maintain your code.
			See <a href="http://php.net/require_once" target="_blank">
			<em>require_once</em></a> and related functions and the PHundamentals article
			<a href="3_Site-Structure--Where-to-Locate-Includes.html">
			Site Structure: Where to Locate Includes?</a>.


      </li>
  <li>When an error occurs, trigger the error handler, e.g.,

<code>
<font color="#0000bb">
<br/>
<br/></font><font color="#007700">
if(!</font><font color="#0000bb">mysql_connect</font><font color="#007700">(</font><font color="#dd0000">"myDatabase"</font><font color="#007700">,</font><font color="#dd0000">"myUser"</font><font color="#007700">,</font><font color="#dd0000">"myPassword"</font><font color="#007700">)){
&nbsp;&nbsp;<br/>  </font><font color="#0000bb">trigger_error</font><font color="#007700">(</font><font color="#dd0000">'Can not connect to database'</font><font color="#007700">,</font><font color="#0000bb">E_USER_ERROR</font><font color="#007700">);
<br/>}</font>

</code>
<br/><br/>
  </li>
</ol>

<p>
So what should your error handler look like? We've provided a sample error handler though the exact
error handler you use is solely up to you. However, the sample code below fulfills the five
basic requirements of an error handler as noted above.
</p><ol>
  <li>The error handler lets you know the "state" of the application (handled by <i>trigger_dump()</i>)</li>
  <li>The error handler lets you know when it happened (handled by  <i>date()</i>)
  </li><li>The error handler lets you know that it happened (handled by  <i>mail()</i>)
  </li><li>The error handler records all three of the items above (handled by  <i>error_log()</i>)
 	</li><li>You need to prevent the user from knowing any of the details of what happened, except that it
happened (handled by <i>header</i>)</li>

</ol>

<br/>
<code><font color="#000000">
<font color="#0000bb">&lt;?php
<br/></font><font color="#007700">function </font><font color="#0000bb">myErrHandler</font><font color="#007700">(</font><font color="#0000bb">$code</font><font color="#007700">, </font><font color="#0000bb">$message</font><font color="#007700">, </font><font color="#0000bb">$errFile</font><font color="#007700">, </font><font color="#0000bb">$errLine</font><font color="#007700">) {

<br/>&nbsp;&nbsp;</font><font color="#ff8000">//Set message/log info
<br/>&nbsp;&nbsp;</font><font color="#0000bb">$subject  </font><font color="#007700">= </font><font color="#dd0000">"$message: MAJOR PROBLEM at " </font><font color="#007700">. </font><font color="#0000bb">APP_NAME </font><font color="#007700">. </font><font color="#dd0000">': ' </font><font color="#007700">.  </font><font color="#0000bb">date</font><font color="#007700">(</font><font color="#dd0000">"F j, Y, g:i a"</font><font color="#007700">);
<br/>&nbsp;&nbsp;</font><font color="#0000bb">$body     </font><font color="#007700">= </font><font color="#dd0000">"errFile: $errFile</font><font color="#007700">\r\n</font><font color="#dd0000">"

<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">. </font><font color="#dd0000">"errLine: $errLine</font><font color="#007700">\r\n</font><font color="#dd0000">"
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">. </font><font color="#0000bb">trigger_dump</font><font color="#007700">(</font><font color="#0000bb">$GLOBALS</font><font color="#007700">);
<br/>
<br/>&nbsp;&nbsp;</font><font color="#ff8000">&nbsp;&nbsp;/*
<br/>&nbsp;&nbsp;&nbsp;&nbsp;An email will be sent to the site administrator.
<br/>&nbsp;&nbsp;&nbsp;&nbsp;Its subject line will have the date and time it occurred while
<br/>&nbsp;&nbsp;&nbsp;&nbsp;the body will contain the state of all of the global variables. This information
<br/>&nbsp;&nbsp;&nbsp;&nbsp;is obtained through the function trigger_dump.
<br/>&nbsp;&nbsp;*/

<br/>&nbsp;&nbsp;</font><font color="#0000bb">mail</font><font color="#007700">(</font><font color="#0000bb">ADMIN_EMAIL_ADDR</font><font color="#007700">,</font><font color="#0000bb">$subject</font><font color="#007700">,</font><font color="#0000bb">$body</font><font color="#007700">);
<br/>
<br/>
<br/>&nbsp;&nbsp;</font><font color="#ff8000">//The same subject line and body of the email will get written to the error log.
<br/>&nbsp;&nbsp;</font><font color="#0000bb">error_log</font><font color="#007700">(</font><font color="#dd0000">"$subject</font><font color="#007700">\r\n</font><font color="#dd0000"> $body"</font><font color="#007700">);

<br/>
<br/>
<br/>  </font><font color="#ff8000">&nbsp;&nbsp;/*
<br/>&nbsp;&nbsp;&nbsp;&nbsp;We don't want users to know the true nature of the problem so
<br/>&nbsp;&nbsp;&nbsp;&nbsp;we just redirect them to a generic error page that has been created.
<br/>&nbsp;&nbsp;&nbsp;&nbsp;The generic page should have a simple message, such as "System down
<br/>&nbsp;&nbsp;&nbsp;&nbsp;for maintenance." The key idea is not to let any potentially malicious
<br/>&nbsp;&nbsp;&nbsp;&nbsp;user learn about the actual problem that had occurred.
<br/>&nbsp;&nbsp;*/
<br/>&nbsp;&nbsp;</font><font color="#0000bb">header </font><font color="#007700">(</font><font color="#dd0000">"Location: http://</font><font color="#007700">{</font><font color="#dd0000">$_SERVER</font><font color="#007700">[</font><font color="#dd0000">'HTTP_HOST'</font><font color="#007700">]}</font><font color="#dd0000">/"</font><font color="#007700">. </font><font color="#0000bb">GENERIC_ERR_PAGE </font><font color="#007700">);

<br/>&nbsp;&nbsp;exit;
<br/>}
<br/>
<br/>  </font><font color="#ff8000">&nbsp;&nbsp;/*
<br/>&nbsp;&nbsp;&nbsp;&nbsp;The function below is called by the mail
<br/>&nbsp;&nbsp;&nbsp;&nbsp;and error_log calls above.
<br/>&nbsp;&nbsp;*/
<br/>
<br/></font><font color="#007700">function </font><font color="#0000bb">trigger_dump</font><font color="#007700">( </font><font color="#0000bb">$mixed</font><font color="#007700">,</font><font color="#0000bb">$type </font><font color="#007700">= </font><font color="#0000bb">0 </font><font color="#007700">) {

<br/>  </font><font color="#ff8000">&nbsp;&nbsp;/*
<br/>&nbsp;&nbsp;&nbsp;&nbsp;$mixed will handle whatever you may decide to pass to it.
<br/>&nbsp;&nbsp;&nbsp;&nbsp;$type will determine what this function should do with the
<br/>&nbsp;&nbsp;&nbsp;&nbsp;information obtained by var_dump
<br/>&nbsp;&nbsp;*/
<br/>&nbsp;&nbsp;</font><font color="#007700">switch( (int) </font><font color="#0000bb">$type </font><font color="#007700">) {
<br/>&nbsp;&nbsp;&nbsp;&nbsp;case </font><font color="#0000bb">0</font><font color="#007700">:
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#ff8000">/*
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Grab the contents of the output buffer
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;when you want to send the information
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;back to the calling function
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">ob_start</font><font color="#007700">();

<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">var_dump</font><font color="#007700">(</font><font color="#0000bb">$mixed</font><font color="#007700">);
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#ff8000">//If you are using PHP ver. 4.3 use the
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//code below:
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">return </font><font color="#0000bb">ob_get_clean</font><font color="#007700">();
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#ff8000">//If you are using an earlier version
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//of PHP, then use the code below:
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">$ob_contents </font><font color="#007700">= </font><font color="#0000bb">ob_get_contents</font><font color="#007700">();
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">ob_end_clean</font><font color="#007700">();

<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return </font><font color="#0000bb">$ob_contents</font><font color="#007700">;
<br/>&nbsp;&nbsp;&nbsp;&nbsp;case </font><font color="#0000bb">1</font><font color="#007700">:
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#ff8000">/*
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  When you want to display the information to the browser
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">print </font><font color="#dd0000">'&lt;pre&gt;'</font><font color="#007700">;
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">var_dump</font><font color="#007700">(</font><font color="#0000bb">$mixed</font><font color="#007700">);

<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print </font><font color="#dd0000">'&lt;/pre&gt;'</font><font color="#007700">;
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
<br/>&nbsp;&nbsp;&nbsp;&nbsp;case </font><font color="#0000bb">2</font><font color="#007700">:
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#ff8000">//When you want your error handler to deal with the information
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">ob_start</font><font color="#007700">();
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">var_dump</font><font color="#007700">(</font><font color="#0000bb">$mixed</font><font color="#007700">);

<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#ff8000">//If you are using PHP ver. 4.3 use the
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//code below:
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">trigger_error</font><font color="#007700">(</font><font color="#0000bb">ob_get_clean</font><font color="#007700">());
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#ff8000">//If you are using an earlier version
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//of PHP, then use the code below:
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">$ob_contents </font><font color="#007700">= </font><font color="#0000bb">ob_get_contents</font><font color="#007700">();
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">ob_end_clean</font><font color="#007700">();

<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">trigger_error</font><font color="#007700">(</font><font color="#0000bb">$ob_contents</font><font color="#007700">);
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
<br/>&nbsp;&nbsp;&nbsp;&nbsp;}
<br/>}
<br/></font><font color="#0000bb">?&gt;</font>
</font>
</code>
<br/>
<br/>
<p>
The constants used in the sample code are part of a sample include file.
<a href="../phunny/err_sample_include.php.html" target="_blank">Click here to view the file</a>.<br/>
Case 2 will always send the output of <em>var_dump</em> to your own error handler,
via the <em>trigger_dump</em> function.
For additional information see <a href="http://php.net/var_dump" target="_blank">var_dump</a>
and also <a href="http://php.net/trigger_error" target="_blank">trigger_error</a>.


</p><h3>NOTES:</h3>
<p>
<a name="note1">1</a> - For additional information on <em>php.ini</em> settings, see the latest version of
</a><a href="http://cvs.php.net/cvs.php/php-src/php.ini-recommended" target="_blank">
php.ini-recommended</a>. See also the
PHundamentals article
<a href="1_PHP-Initialization.html">PHP Initialization</a>.
A list of configuration settings that can be changed via <em>ini_set</em> can be
<a href="http://php.net/ini_set" target="_blank">found here</a>.
<br/>
<br/>
<a name="note2">2</a> - For additional information on the use of <i>htmlentities</i> see the PHundamentals
article
</a><a href="5_Storing-Data-Submitted-From-a-Form-and-Displaying-Data-from-a-Database.html">
"Storing Data Submitted From a Form and Displaying Data from a Database"</a>.
While you can use JavaScript to trap form-related user errors, you should NEVER
solely rely on it. Users can intentionally turn off JavaScript and thereby bypass your error checking.
For a discussion of
other form-related issues, see the PHundamentals article
<a href="6_Spoofed-Form-Submissions.html">Spoofed Form Submissions</a>.
<br/>
<br/>
<a name="note3">3</a> - Whether to show a generic "System down for maintenance" message or not is, of course, a
judgement call on the part of the developer. For example, one could simply redirect the user to the home page
which would be a visual indicator (to the user) that something had gone awry but it does not
tip off the user as to "what" went awry. In the case of "expected" errors,
such as a search function that uses URL parameters, you might want to implement a set of
"default" search parameters.
For example, your site might have a URL like the following:
<em>http://mydomain.com/search.php?location=USA</em>. If a user should alter the search
parameter, e.g., <em>location=123</em>, your code could handle this by automatically substituting
the default search parameters. Alternately, you could display a message such as "No records were
found. Please try again."
<br/>
<br/>
</a></p><hr/>
<p>
Contributors to this note include the following:<br/>
John F. Andrews<br/>
Mark Armendariz<br/>
David Mintz<br/>
Mitch Pirtle<br/>
Chris Shiflett<br/>
Hans Zaunere<br/>
the PHundamentals Team: Jeff Siegel, Michael Southwell<br/></a></p>

</div>
            </div>

        </div>
        <div id="RightColumn">
            

<div class="RightColumnContent">

   
   
       <div class="MiniCal" style="margin: 0px 0 15px 0;">

        <h2>RELATED ARTICLES</h2>
               <div class="MiniCalOdd">
            <p>
                <a title="From Zero to AMP with XAMPP - Installing PHP and MySQL on Windows with XAMPP" href="../PHundamentals/0_Zero-AMP-XAMPP-Installing-PHP-MySQL-Windows.html">From Zero to AMP with XAMPP - Installing PHP and MySQL on Windows with XAMPP</a>
            </p>
        </div>
               <div class="MiniCalEven">
            <p>
                <a title="PHP Initialization and php.ini" href="../PHundamentals/1_PHP-Initialization-phpini.html">PHP Initialization and php.ini</a>
            </p>
        </div>
               <div class="MiniCalOdd">
            <p>
                <a title="Virtual Hosting with PHP" href="../PHundamentals/2_Virtual-Hosting-PHP.html">Virtual Hosting with PHP</a>
            </p>
        </div>
               <div class="MiniCalEven">
            <p>
                <a title="PHP Site Structure: Where to Locate Includes?" href="../PHundamentals/3_PHP-Site-Structure-Where-Locate-Includes.html">PHP Site Structure: Where to Locate Includes?</a>
            </p>
        </div>
               <div class="MiniCalOdd">
            <p>
                <a title="Variable Evaluation in PHP" href="../PHundamentals/4_Variable-Evaluation-in-PHP.html">Variable Evaluation in PHP</a>
            </p>
        </div>
               <div class="MiniCalEven">
            <p>
                <a title="Storing Data Submitted From a Form and Displaying Data from a Database" href="../PHundamentals/5_Storing-Data-Submitted-Form-Displaying-Database.html">Storing Data Submitted From a Form and Displaying Data from a Database</a>
            </p>
        </div>
               <div class="MiniCalOdd">
            <p>
                <a title="Spoofed Form Submissions" href="../PHundamentals/6_Spoofed-Form-Submissions.html">Spoofed Form Submissions</a>
            </p>
        </div>
               <div class="MiniCalEven">
            <p>
                <a title="PHP Error Handling" href="../PHundamentals/7_PHP-Error-Handling.html">PHP Error Handling</a>
            </p>
        </div>
               <div class="MiniCalOdd">
            <p>
                <a title="Preventing Email Header Injection" href="../PHundamentals/8_Preventing-Email-Header-Injection.html">Preventing Email Header Injection</a>
            </p>
        </div>
    </div>
   


    <div class="RightColumnSubSection" style="text-align: center; margin: 35px 0 25px 0; ">
        <a href="http://cnvyr.io/">
        <img src="../img/cnvyrio.logo.sm.png" alt="CSS JS minify thumbnail maker online API" title="CSS JS minify thumbnail maker online API" />
        </a>
        <p><a href="http://cnvyr.io/">free PHP thumbnail maker CSS &amp; Javascript minify gzip pipeline online API and console</a>
        <br />
        <br />Free API and developer tools console for PageSpeed optimization.
        </p>
    </div>



   
</div>

        </div>
    </div>
    </div>

    <div id="Footer">
        
<div style="float: left;">
11.7</div>

<a href="http://www.meetup.com/new-york-php">NYC PHP Meetup Community </a>
    </div>

</div>

</body>
</html>

