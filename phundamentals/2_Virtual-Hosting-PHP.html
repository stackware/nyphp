<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>

    <script src="http://cdn.speedr.io/speeder.js"></script>
    <script>speeder('55730cc6','df9');</script>
    
    <meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
    <meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
    <meta name="y_key" content="265502be3db4fb6e" />

    <link rel="icon" type="image/png" href="../img/favicon.png">

    <title>Virtual Hosting with PHP - PHundamental PHP Best Practices -</title>

    <link href="../css/nyphp2.css" rel="stylesheet" media="screen" type="text/css" />
    <link href="../css/nyphp2_print.css" rel="stylesheet" media="print" type="text/css" />

    <meta name="robots" content="index,follow" />
    <meta name="description" content="Virtual Hosting with PHP - PHP best practices and LAMP stack strategy." />
    <meta name="author" content="Stackware Web Development - http://stackware.com" />
</head>


<body>


<div id="GlobalContainer">

    <div id="Header">
        
<div class="HeaderContainer">
    <div class="HeaderLeft">
        <a href="../index.html"><img src="../img/new_york_php.gif" alt="New York PHP User Group Community" /></a>
    </div>
    <div class="HeaderRight">
        <h1><a href="http://stackware.com/nyc-php-training">PHP Training</a></h1>
    </div>
    <div class="HeaderFirstBar" style="padding: 0; margin: 0 0 0 -6px;">
    <ul>
        <li>
            <a  href="../index.html" title="Home">Home</a>
        </li>
        <li>
            <a  href="../mailing-lists.html" title="PHP Mailing Lists">Mailing Lists</a>
        </li>
        <li>
            <a style="text-decoration: underline;" href="../phunny/err_sample_include.php.html" title="PHundamentals">PHundamentals</a>
        </li>
        <li>
            <a  href="../php-presentations/index.html" title="Presentations">Presentations</a>
        </li>
        <li>
            <a href="../php-presentations/82_Online-PHP-Forums.html" title="NY PHP Meetup">Contact Us</a>
        </li>
    </ul>
    </div>

    <div class="HeaderSecondBar">
        <div style="margin: 11px 0 0 -4px; padding: 0;">
        <small>don't forget to</small>
        <a style="font-weight: bold;" href="https://www.facebook.com/groups/367255050049061/">facebook friend</a> -
        <a style="font-weight: bold;" href="http://twitter.com/nyphp">twitter follow</a> -
        <a style="font-weight: bold;" href="../php-presentations/82_Online-PHP-Forums.html">NYC PHP meetup</a>
        </div>
    </div>
</div>



    </div>

    <div id="MainLayout">
    <div id="TwoColumn">
        <div id="LeftColumn">
            
<div class="LeftNav">

    <div class="NowLinks">


        <div class="ShowParticipation">
        <a href="../show-participation.html">Show Your Participation
        <img style="margin: 2px;" alt="NYPHP Member" src="../img/nyphporgmember.gif" />
        Click for Details</a>
        </div>

        <div style="height: 15px;"></div>

    </div>

    <div style="height: 15px;"></div>

<div class="LeftNavSection">

    <div class="LeftNavSubSection">
        <a target="_blank" href="https://www.meetup.com/tampa-bay-php/">
            <img width="120px" src="../img/tbphp.gif" alt="Tampa Bay Florida PHP" title="Tampa Bay Florida PHP" />
        </a>
        <a target="_blank" title="Tampa Bay Florida PHP" href="http://www.tbphp.org/">
            Tampa Bay<br />Florida PHP
        </a>
    </div>


    <div class="LeftNavSubSection">
        <a href="http://www.flickr.com/groups/nyphp/">
        <img src="../img/flickr.logo.gif" alt="NYPHP flickr Group" title="New York PHP flickr Group" />
        </a>
        Browse and upload photos of events, at the
        <a href="http://www.flickr.com/groups/nyphp/">NYPHP flickr Group</a>.
    </div>
    <div class="LeftNavSubSection">
        <a href="http://www.linkedin.com/e/gis/110439">
        <img src="../img/linkedin.logo.gif" alt="PHP Community" title="New York PHP Community LinkedIn" />
        </a>
        Link up with NYPHP at the
        <a href="http://www.linkedin.com/groups?about=&amp;gid=110439">PHP LinkedIn Group</a>.
    </div>

</div>


<div class="BoxLinks" style="text-align: left;">
    <p class="BoxLinkHeader">About NYPHP</p>
    <p><a href="../about-us/charter.html">&raquo; Charter</a></p>
    <p><a href="../about-us/mission.html">&raquo; Mission</a></p>
    <p><a href="../about-us/index.html">&raquo; What is NYPHP?</a></p>
    <p><a href="../about-us/principals.html">&raquo; Principals</a></p>
    <p><a href="../about-us/sponsors.html">&raquo; Sponsors</a></p>
</div>


</div>

            <div class="SubLeftColumn">
            
<div class="Event">

<h1>Virtual Hosting Setup - Windows 98/XP &amp; Linux with Apache</h1>
<h2>NYPHP - <span style="color: rgb(0, 0, 153);">PH</span>undamentals</h2>

<h3>PROBLEM:</h3>
<p>
You'd like to have two (or more) client projects located within the DocumentRoot directory (/var/www/html or 
whatever directory you may use for DocumentRoot) of your Linux server but you want to keep their files 
separate. So you place the files in separate subdirectories (/var/www/html/myproj1 and 
/var/www/html/myproj2). But you run into an interesting problem. In &quot;myproj1&quot; your web pages have a link to 
the project's home page and this home page is normally located, <strong>not</strong> in /var/www/html/myproj1 but in 
/var/www/html. That is, it is normally located in your default DocumentRoot directory. You could set all of 
the home page links to refer to this subdirectory but when you move your code from your development server 
to your client's server, all links referring to the &quot;home&quot; page will refer to the &quot;myproj1&quot; subdirectory and 
<strong>not</strong> the default DocumentRoot <a href="2_Virtual-Hosting-PHP.html#note1">(see Note 1)</a>. 
</p>
<p>
One way to handle this problem and to have all of your page links work correctly is to set up virtual hosts. 
Virtual hosts will resolve all of the different path issues and you can develop your project as if it were 
the only project on your server. You'll have eliminated the need to worry about your home page being in a 
subdirectory of DocumentRoot. Therefore, different projects will be in their own subdirectories under 
/var/www/html and the links will work correctly both on your development server and on your client's 
server.
</p>
<p>
The solution provided below assumes that you want to set up virtual hosting within a networked office and 
that your working environment (that is, your development environment) consists of: 
</p>
<ol start="1" type="a">
<li>Windows 98 or Windows XP on your desktop</li>
<li>A Linux server that is accessed through a fixed IP address. That is, you view projects through a 
	browser by accessing it with a single fixed IP address, e.g., http://192.168.1.111.</li>
</ol>
<h3>SOLUTION:</h3>
<p>
1. Make sure you have administrative rights on Windows XP and superuser (a/k/a &quot;root&quot;) access on the Linux server. 
</p>
<p>
2. You will need to change two files:
</p>
<ol start="1" type="a">
<li>On Windows XP: &quot;hosts,&quot; located in c:\windows\system32\drivers\etc\.
		(On Windows 98: the file is located in c:\windows\.)</li>
<li>On Linux: &quot;httpd.conf,&quot; located in /etc/httpd/conf.</li>
</ol>
<p>
3. In the &quot;hosts&quot; file the first line (localhost) already exists. Add
one or more lines with the IP address of your Linux box and the name
you want to use to access the project. For example, since my Linux box
has an IP address of 192.168.1.111, I added the line &quot;192.168.1.111
myproj1&quot; and then added &quot;192.168.1.111 myproj2&quot; for the second
project. <a href="2_Virtual-Hosting-PHP.html#note2">(see Note 2)</a>
</p>

<pre>
127.0.0.1&nbsp;localhost
192.168.1.111&nbsp;myproj1
192.168.1.111&nbsp;myproj2
</pre>

<p>
4. In httpd.conf you set the following:
</p>
<ol start="1" type="a">
<li>ServerName: Using my IP address as an example, this section of the Apache configuration file would read 
	&quot;ServerName 192.168.1.111:80&quot; where the IP address is the one for my Linux box and the &quot;80&quot; refers to the 
	standard Port 80 for http access.</li>
<li>NameVirtualHost: again, note the IP address and port number.
<br />&nbsp;&nbsp;&nbsp;NameVirtualHost 192.168.1.111:80</li>
<li>Virtual Host: The first listing below is the &quot;default&quot; virtual host. The other two listings represent 
	two different client projects.</li>
</ol>
<pre>
&lt;VirtualHost 192.168.1.111:80&gt;
        DocumentRoot /var/www/html
        ServerName linux
&lt;/VirtualHost&gt;

&lt;VirtualHost 192.168.1.111&gt;
        DocumentRoot /var/www/html/myproj1
        ServerName myproj1
&lt;/VirtualHost&gt;

&lt;VirtualHost 192.168.1.111&gt;
        DocumentRoot /var/www/html/jeff
        ServerName myproj2
&lt;/VirtualHost&gt;
</pre>
<p>
Note that the name of the subdirectory for &quot;myproj2&quot; does not match the subdirectory name. The DocumentRoot 
is just the actual path to the files whereas the ServerName is the name you would use in your browser to 
access the files. <a href="2_Virtual-Hosting-PHP.html#note3">(see Note 3)</a>
<strong>Safety Note:</strong> You may want to make a backup copy of your httpd.conf file in case you make a serious error. You 
can use the command &quot;cp httpd.conf httpd.conf.bak&quot; to make a copy of the configuration file.
<br />
<br />
5. Restart Apache. (You can use the command &quot;apachectl graceful&quot; to restart Apache.)
</p>
<h3>TESTING:</h3>
<p>Create two different PHP files (or regular HTML files) and place one in the directory /var/www/html/myproj1
and the other in the directory /var/www/html/jeff. If you set up everything correctly, you should be able to 
see the first web document using the URL http://myproj1 and the second web document using the URL 
http://myproj2.
</p>

<h3>Basic Definitions:</h3>
<p>
<strong>DocumentRoot:</strong> the default directory used by Apache to serve web documents. When a web browser points to a 
domain, whether it is accessed by a domain name such as &quot;http://www.mydomain.com&quot; or by an IP address such as 
&quot;http://192.168.1.111,&quot; Apache will send back to the web browser the document it finds in the DocumentRoot 
directory.
<br /><br />
<strong>VirtualHost:</strong> When more than one website is on a single web server, each website is handled by a &quot;virtual host.&quot; 
That is, from the perspective of the website visitor, it looks as if each website resides on its own 
webserver. In actuality, these virtual hosts reside in separate subdirectories on the very same webserver. 
The VirtualHost settings tell Apache that, when someone wants to view http://myproj1, its default 
DocumentRoot directory is /var/www/html/myproj1. When someone wants to view http://myproj2, they tell Apache 
that its default DocumentRoot directory is /var/www/html/jeff. 
<br /><br />
<strong>ServerName:</strong> The name you want to use when viewing the project through a browser. Therefore, while one of your 
projects may be physically located in the subdirectory &quot;/var/www/html/jeff&quot;, when you want to view the 
project through your web browser, you want the project to be referred to as &quot;myproj2.&quot;
</p>

<h3>Notes:</h3>
<p>
<a name="note1"></a>1- We are assuming that your client's server does not have virtual hosts set up.
<br />
<br />
<a name="note2"></a>2- When you enter a URL in your web browser, your browser first checks the list to see if there is an IP 
address associated with the URL you entered. In other words, if you entered the URL http://www.google.com your 
browser goes out to a DNS (Domain Name Server) to find the associated IP address (which happens to be 
216.239.53.100) and sends a request to the correct web server. So, in this case, when you enter the URL 
http://myproj1, the browser first checks the &quot;hosts&quot; file. If it finds a match the appropriate IP address is 
returned and a request is sent to the correct webserver.
<br />
<br />
<a name="note3"></a>3- Though this article has emphasized having the actual paths for the files under the DocumentRoot directory,
keep in mind that VirtualHosts do not necessarily have to be subdirectories of the original document root.
For example, one VirtualHost can have a DocumentRoot path of /home/var/www, while a different 
VirtualHost can have a DocumentRoot of /var/dev/site. 
</p>

<hr />
<p>Contributors to this note include the following:</p>
<ul>
<li>Jon Baer</li>
<li>Raymond DeRoo</li>
<li>Daniel Kushner</li>
<li>Chris Snyder</li>
<li>Michael Southwell</li>
<li>Marc Antony Vose</li>
<li>Hans Zaunere</li>
<li>the PHundamentals team: Jeff Siegel, Mike Southwell</li>
</ul>


</div>

            </div>

        </div>
        <div id="RightColumn">
            

<div class="RightColumnContent">

   
   
       <div class="MiniCal" style="margin: 0px 0 15px 0;">

        <h2>RELATED ARTICLES</h2>
               <div class="MiniCalOdd">
            <p>
                <a title="From Zero to AMP with XAMPP - Installing PHP and MySQL on Windows with XAMPP" href="../PHundamentals/0_Zero-AMP-XAMPP-Installing-PHP-MySQL-Windows.html">From Zero to AMP with XAMPP - Installing PHP and MySQL on Windows with XAMPP</a>
            </p>
        </div>
               <div class="MiniCalEven">
            <p>
                <a title="PHP Initialization and php.ini" href="../PHundamentals/1_PHP-Initialization-phpini.html">PHP Initialization and php.ini</a>
            </p>
        </div>
               <div class="MiniCalOdd">
            <p>
                <a title="Virtual Hosting with PHP" href="../PHundamentals/2_Virtual-Hosting-PHP.html">Virtual Hosting with PHP</a>
            </p>
        </div>
               <div class="MiniCalEven">
            <p>
                <a title="PHP Site Structure: Where to Locate Includes?" href="../PHundamentals/3_PHP-Site-Structure-Where-Locate-Includes.html">PHP Site Structure: Where to Locate Includes?</a>
            </p>
        </div>
               <div class="MiniCalOdd">
            <p>
                <a title="Variable Evaluation in PHP" href="../PHundamentals/4_Variable-Evaluation-in-PHP.html">Variable Evaluation in PHP</a>
            </p>
        </div>
               <div class="MiniCalEven">
            <p>
                <a title="Storing Data Submitted From a Form and Displaying Data from a Database" href="../PHundamentals/5_Storing-Data-Submitted-Form-Displaying-Database.html">Storing Data Submitted From a Form and Displaying Data from a Database</a>
            </p>
        </div>
               <div class="MiniCalOdd">
            <p>
                <a title="Spoofed Form Submissions" href="../PHundamentals/6_Spoofed-Form-Submissions.html">Spoofed Form Submissions</a>
            </p>
        </div>
               <div class="MiniCalEven">
            <p>
                <a title="PHP Error Handling" href="../PHundamentals/7_PHP-Error-Handling.html">PHP Error Handling</a>
            </p>
        </div>
               <div class="MiniCalOdd">
            <p>
                <a title="Preventing Email Header Injection" href="../PHundamentals/8_Preventing-Email-Header-Injection.html">Preventing Email Header Injection</a>
            </p>
        </div>
    </div>
   


    <div class="RightColumnSubSection" style="text-align: center; margin: 35px 0 25px 0; ">
        <a href="http://cnvyr.io/">
        <img src="../img/cnvyrio.logo.sm.png" alt="CSS JS minify thumbnail maker online API" title="CSS JS minify thumbnail maker online API" />
        </a>
        <p><a href="http://cnvyr.io/">free PHP thumbnail maker CSS &amp; Javascript minify gzip pipeline online API and console</a>
        <br />
        <br />Free API and developer tools console for PageSpeed optimization.
        </p>
    </div>



   
</div>

        </div>
    </div>
    </div>

    <div id="Footer">
        
<div style="float: left;">
11.8</div>

<a href="http://www.meetup.com/new-york-php">NYC PHP Meetup Community </a>
    </div>

</div>

</body>
</html>

