<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Searching an Entire MySQL Database
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2010-November/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Searching%20an%20Entire%20MySQL%20Database&In-Reply-To=%3C30E17DC80C7A46E1AC3DE67FF54953D9%40michelePC%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030364.html">
   <LINK REL="Next"  HREF="030367.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Searching an Entire MySQL Database</H1>
    <B>Michele Waldman</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Searching%20an%20Entire%20MySQL%20Database&In-Reply-To=%3C30E17DC80C7A46E1AC3DE67FF54953D9%40michelePC%3E"
       TITLE="[nycphp-talk] Searching an Entire MySQL Database">mmwaldman at nyc.rr.com
       </A><BR>
    <I>Thu Nov  4 11:03:06 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="030364.html">[nycphp-talk] Searching an Entire MySQL Database
</A></li>
        <LI>Next message: <A HREF="030367.html">[nycphp-talk] Searching an Entire MySQL Database
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30365">[ date ]</a>
              <a href="thread.html#30365">[ thread ]</a>
              <a href="subject.html#30365">[ subject ]</a>
              <a href="author.html#30365">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>And, make a backup.

Michele


From: Andrew Yochum 
Sent: Thursday, November 04, 2010 11:00 AM
To: NYPHP Talk 
Cc: NYPHP Talk 
Subject: Re: [nycphp-talk] Searching an Entire MySQL Database




On Nov 4, 2010, at 9:41 AM, Rob Marscher &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">rmarscher at beaffinitive.com</A>&gt; wrote:


      On 11/4/2010 08:32, <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">ps at blu-studio.com</A> wrote:
      &gt; I am wondering if anyone has had to search an entire database and do a
      &gt; search and replace on a string. That is to search in every table, in
      &gt; every row, in every field.
      export the entire database into a file
      use PHP (or a good editor) to make the replacement line by line
      drop the database
      re-create it by importing the modified file

  I've had to do something similar.  Yes, use mysqldump.  Then use sed (if you're on a *nix machine).  Sed does search and replace by streaming the file rather than buffering the whole thing so it won't run out of memory no matter how big your dump is.  You can send the output to a new file.  Definitely test out importing it back in on a non-production machine.


This is a sane method. But you probably want to either:
1. Run on a schema-only dump and make sure it doesn't touch any columns or table DDL before you run it on a data dump
2. Make sure your search pattern matches things within a SQL quoted string.


Dan's solution of looping over tables and columns works well too. Mysql has  regex funcs you can use if necessary.


HTH.


Regards,
Andrew


--------------------------------------------------------------------------------


_______________________________________________
New York PHP Users Group Community Talk Mailing List
<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>

<A HREF="http://www.nyphp.org/Show-Participation">http://www.nyphp.org/Show-Participation</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.nyphp.org/pipermail/talk/attachments/20101104/874e8e1e/attachment.html">http://lists.nyphp.org/pipermail/talk/attachments/20101104/874e8e1e/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030364.html">[nycphp-talk] Searching an Entire MySQL Database
</A></li>
	<LI>Next message: <A HREF="030367.html">[nycphp-talk] Searching an Entire MySQL Database
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30365">[ date ]</a>
              <a href="thread.html#30365">[ thread ]</a>
              <a href="subject.html#30365">[ subject ]</a>
              <a href="author.html#30365">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
