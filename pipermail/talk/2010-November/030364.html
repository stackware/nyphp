<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Searching an Entire MySQL Database
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2010-November/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Searching%20an%20Entire%20MySQL%20Database&In-Reply-To=%3CEF715D83-C6A5-4EE9-B230-1F48BB01E498%40plexpod.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030363.html">
   <LINK REL="Next"  HREF="030365.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Searching an Entire MySQL Database</H1>
    <B>Andrew Yochum</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Searching%20an%20Entire%20MySQL%20Database&In-Reply-To=%3CEF715D83-C6A5-4EE9-B230-1F48BB01E498%40plexpod.com%3E"
       TITLE="[nycphp-talk] Searching an Entire MySQL Database">andrew at plexpod.com
       </A><BR>
    <I>Thu Nov  4 11:00:12 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="030363.html">[nycphp-talk] Searching an Entire MySQL Database
</A></li>
        <LI>Next message: <A HREF="030365.html">[nycphp-talk] Searching an Entire MySQL Database
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30364">[ date ]</a>
              <a href="thread.html#30364">[ thread ]</a>
              <a href="subject.html#30364">[ subject ]</a>
              <a href="author.html#30364">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Nov 4, 2010, at 9:41 AM, Rob Marscher &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">rmarscher at beaffinitive.com</A>&gt; wrote:

&gt;&gt;<i> On 11/4/2010 08:32, <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">ps at blu-studio.com</A> wrote:
</I>&gt;&gt;<i> &gt; I am wondering if anyone has had to search an entire database and do a
</I>&gt;&gt;<i> &gt; search and replace on a string. That is to search in every table, in
</I>&gt;&gt;<i> &gt; every row, in every field.
</I>&gt;&gt;<i> export the entire database into a file
</I>&gt;&gt;<i> use PHP (or a good editor) to make the replacement line by line
</I>&gt;&gt;<i> drop the database
</I>&gt;&gt;<i> re-create it by importing the modified file
</I>&gt;<i> I've had to do something similar.  Yes, use mysqldump.  Then use sed (if you're on a *nix machine).  Sed does search and replace by streaming the file rather than buffering the whole thing so it won't run out of memory no matter how big your dump is.  You can send the output to a new file.  Definitely test out importing it back in on a non-production machine.
</I>
This is a sane method. But you probably want to either:
1. Run on a schema-only dump and make sure it doesn't touch any columns or table DDL before you run it on a data dump
2. Make sure your search pattern matches things within a SQL quoted string.

Dan's solution of looping over tables and columns works well too. Mysql has  regex funcs you can use if necessary.

HTH.

Regards,
Andrew
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.nyphp.org/pipermail/talk/attachments/20101104/d6b37840/attachment.html">http://lists.nyphp.org/pipermail/talk/attachments/20101104/d6b37840/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030363.html">[nycphp-talk] Searching an Entire MySQL Database
</A></li>
	<LI>Next message: <A HREF="030365.html">[nycphp-talk] Searching an Entire MySQL Database
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30364">[ date ]</a>
              <a href="thread.html#30364">[ thread ]</a>
              <a href="subject.html#30364">[ subject ]</a>
              <a href="author.html#30364">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
