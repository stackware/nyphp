<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] mysql connection
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2010-November/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20mysql%20connection&In-Reply-To=%3C126301cb82b1%242ea6d9a0%248bf48ce0%24%40com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030385.html">
   <LINK REL="Next"  HREF="030388.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] mysql connection</H1>
    <B>William Klein</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20mysql%20connection&In-Reply-To=%3C126301cb82b1%242ea6d9a0%248bf48ce0%24%40com%3E"
       TITLE="[nycphp-talk] mysql connection">willie at pdfsystems.com
       </A><BR>
    <I>Fri Nov 12 16:32:31 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="030385.html">[nycphp-talk] mysql connection
</A></li>
        <LI>Next message: <A HREF="030388.html">[nycphp-talk] mysql connection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30386">[ date ]</a>
              <a href="thread.html#30386">[ thread ]</a>
              <a href="subject.html#30386">[ subject ]</a>
              <a href="author.html#30386">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Yeah I understand that.  I can connect from the apache server with

mysql -u root -h 192.168.199.31 -p

 

but the php connect fails with 

 

Warning: mysql_connect() [function.mysql-connect
&lt;<A HREF="http://192.168.199.30/function.mysql-connect">http://192.168.199.30/function.mysql-connect</A>&gt; ]: Can't connect to MySQL
server on '192.168.199.31' (13) in /var/www/html/order/test.php on line 2
Could not connect number2003 error Can't connect to MySQL server on
'192.168.199.31' (13)

 

Error 2003 is permission denied and so is 13 but I'm using the same user:

Test code:

&lt;?phnk = mysql_connect('192.168.199.31:3306','root','xxxx');

if(!$link){

        die(&quot;Could not connect number&quot;. mysql_errno().&quot; error &quot;
.mysql_error());

}

?&gt;

 

Strange, which is why I was looking at the php complile.

The phpinfo() command does mention the mysql sock in /var/lib/mysql but no
mention of a tcp connection I thought perhaps there was a compile parameter
I'm missing.

 

From: Rob Marscher [mailto:<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">rmarscher at beaffinitive.com</A>] 
Sent: Friday, November 12, 2010 4:08 PM
To: NYPHP Talk
Subject: Re: [nycphp-talk] mysql connection

 

On Nov 12, 2010, at 4:02 PM, willie klein wrote:

Setting up a new server and finally splitting my apache server and mysql
server into 2 virtual boxes.

For some reason I can't connect to the remote server with php but I can
connect with mysql command line.

I think it must be some way I compiled php, tried just using rpms also.

 

I'm not sure it's your php compilation.  What about mysql permissions?  Can
you connect via mysql command line running on your apache server to the
mysql server?  Also want to make sure the port is open on the mysql server
(usually 3306) and that the mysql server doesn't have &quot;skip-networking&quot; in
it's my.cnf.  The permissions for mysql users includes the hostname that
user is allowed to connect from.  If you want to open up the permissions for
the user so they can connect from any server, you want to do something like
this:

 

CREATE USER 'username'@'%' IDENTIFIED BY 'password';
GRANT USAGE ON *.* TO 'username'@'%' IDENTIFIED BY 'password';
GRANT ALL PRIVILEGES ON `dbname` . * TO 'username'@'%';
FLUSH PRIVILEGES;

 

The % wildcard allows the user to connect from any host.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.nyphp.org/pipermail/talk/attachments/20101112/458f0905/attachment.html">http://lists.nyphp.org/pipermail/talk/attachments/20101112/458f0905/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030385.html">[nycphp-talk] mysql connection
</A></li>
	<LI>Next message: <A HREF="030388.html">[nycphp-talk] mysql connection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30386">[ date ]</a>
              <a href="thread.html#30386">[ thread ]</a>
              <a href="subject.html#30386">[ subject ]</a>
              <a href="author.html#30386">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
