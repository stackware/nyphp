<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] mkdir failed
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2002-September/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20mkdir%20failed&In-Reply-To=%3C20020928202018.60102.qmail%40web12802.mail.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001017.html">
   <LINK REL="Next"  HREF="001019.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] mkdir failed</H1>
    <B>Hans Zaunere</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20mkdir%20failed&In-Reply-To=%3C20020928202018.60102.qmail%40web12802.mail.yahoo.com%3E"
       TITLE="[nycphp-talk] mkdir failed">zaunere at yahoo.com
       </A><BR>
    <I>Sat Sep 28 16:20:18 EDT 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="001017.html">[PHP] mkdir() failed: Permission denied
</A></li>
        <LI>Next message: <A HREF="001019.html">[nycphp-talk] mkdir failed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1018">[ date ]</a>
              <a href="thread.html#1018">[ thread ]</a>
              <a href="subject.html#1018">[ subject ]</a>
              <a href="author.html#1018">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
--- Phil Powell &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">soazine at erols.com</A>&gt; wrote:
&gt;<i> Ok, I am stuck.  I am trying to create a folder in the same directory
</I>&gt;<i> as process.php and then use
</I>&gt;<i> move_uploaded_file($FILES['myImage]['tmp_name']) and it constantly
</I>&gt;<i> fails:
</I>&gt;<i> 
</I>&gt;<i> mkdir() failed (Permission denied) 
</I>
There could be a couple reasons for this.  However, most likely, is
that the Apache daemon doesn't have permission to write in
/users/ppowell/web/my/images.  I'm assuming this is a shared
environment, in which case it's rare (and good) that a daemon has write
permissions in a user's directory.  Depending on the configuration,
you'll need to chmod g+rwx /users/ppowell/web/my or chmod o+rwx
/users/ppowell/web/my (hark!).  But it's probably better to make the
directory beforehand, and then set it aside with write permissions,
ditching the mkdir() from PHP.

But be weary, because anyone using the same daemon will have write
permissions there as well (hopefully, however, the PHP is setup with
safe mode properly to surpress any potential issues).  I haven't been
in a lot of shared environments so there may be a trick to this that is
safe[r], but this is the only way around it AFAIK.  And this is why
MySQL has become popular for storing files, ahem.

Hans



&gt;<i> 
</I>&gt;<i> Here is my code:
</I>&gt;<i> 
</I>&gt;<i> &lt;?
</I>&gt;<i>   $willChangeLayout = 1; $isEmptyLayoutValues = 1;
</I>&gt;<i> 
</I>&gt;<i>   foreach ($_POST as $key =&gt; $val) {
</I>&gt;<i>    if (strcmp($key, &quot;isDefaultLayout&quot;) == 0) $willChangeLayout = 0;
</I>&gt;<i>    if (!empty($_POST[$key])) $isEmptyLayoutValues = 0;
</I>&gt;<i>    ${&quot;$key&quot;} = $val;   
</I>&gt;<i>   }
</I>&gt;<i> 
</I>&gt;<i>   // SERVER-SIDE VALIDATION
</I>&gt;<i>   if ($willChangeLayout &amp;&amp; $isEmptyLayoutValues)
</I>&gt;<i>    header(&quot;Location: &quot; . $refURL . &quot;?errorMsg=&quot; . urlencode(&quot;Please
</I>&gt;<i> fill out all required fields&quot;));
</I>&gt;<i> 
</I>&gt;<i>   // FILE UPLOAD HANDLING
</I>&gt;<i> 
</I>&gt;<i>   $attempt = mkdir(&quot;/users/ppowell/web/my/images&quot;, 0655);
</I>&gt;<i> 
</I>&gt;<i>   if (is_uploaded_file($_FILES['myImage']['tmp_name'])) 
</I>&gt;<i>    move_uploaded_file($_FILES['myImage']['tmp_name'],
</I>&gt;<i> &quot;/users/ppowell/web/my/images/&quot; . $_FILES['myImage']['name']);
</I>&gt;<i> 
</I>&gt;<i>    
</I>&gt;<i> ?&gt;
</I>&gt;<i> 
</I>&gt;<i> Please someone tell me what I'm doing wrong :(
</I>&gt;<i> 
</I>&gt;<i> Thanx
</I>&gt;<i> Phil
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> --- Unsubscribe at <A HREF="http://nyphp.org/list">http://nyphp.org/list</A> ---
</I>&gt;<i> 
</I>&gt;<i> 
</I>

__________________________________________________
Do you Yahoo!?
New DSL Internet Access from SBC &amp; Yahoo!
<A HREF="http://sbc.yahoo.com">http://sbc.yahoo.com</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001017.html">[PHP] mkdir() failed: Permission denied
</A></li>
	<LI>Next message: <A HREF="001019.html">[nycphp-talk] mkdir failed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1018">[ date ]</a>
              <a href="thread.html#1018">[ thread ]</a>
              <a href="subject.html#1018">[ subject ]</a>
              <a href="author.html#1018">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
