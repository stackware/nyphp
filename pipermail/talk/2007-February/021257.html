<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] MySQL Tuning.
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2007-February/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20MySQL%20Tuning.&In-Reply-To=%3C45E5B03D.9040204%40cyberxdesigns.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021268.html">
   <LINK REL="Next"  HREF="021258.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] MySQL Tuning.</H1>
    <B>Hans C. Kaspersetz</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20MySQL%20Tuning.&In-Reply-To=%3C45E5B03D.9040204%40cyberxdesigns.com%3E"
       TITLE="[nycphp-talk] MySQL Tuning.">hans at cyberxdesigns.com
       </A><BR>
    <I>Wed Feb 28 11:39:25 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="021268.html">[nycphp-talk] Hi from Russia
</A></li>
        <LI>Next message: <A HREF="021258.html">[nycphp-talk] MySQL Tuning.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21257">[ date ]</a>
              <a href="thread.html#21257">[ thread ]</a>
              <a href="subject.html#21257">[ subject ]</a>
              <a href="author.html#21257">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>There was some intense discussion last night at TGIF about MySQL tuning 
and some problems my group has been having with inserts into InnoDB 
tables.  I was asked to provide our my.cnf for review.

We are doing a big data import and the problem was inserts were taking 
up to 20 seconds on a table of 8 Million rows, which didn't seem right 
as we have tables in excess of 25 million rows in the same database.  
There were two indexes: Primary and a compound index of two string 
columns (32bit String MD5 + varchar50).  The combination has a 
cardinality of about 400,000.  Dropping the indexes before we started 
our big import sped thing up considerably.  We now drop the index, run 
the big import, and then rebuild the indexes.  This solution doesn't 
really address the real problem, which I haven't quite figured out.  Any 
further guidance is appreciated.

Hans K

The machine is a Dual 2.8Ghz Xeon with 4GB Ram.

---  Start my.cnf -------
[mysqld]
innodb_data_home_dir =
innodb_data_file_path = /foo/mysql/data/ibdata1:100M:autoextend
set-variable = innodb_buffer_pool_size=2000M
set-variable = innodb_additional_mem_pool=500M
set-variable = innodb_log_file_size=150M
set-variable = innodb_log_buffer_size=8M

#innodb_flush_log_at_trx_commit=1

socket=/var/lib/mysql/mysql.sock
datadir=/foo/mysql/data/

[client]
socket=/var/lib/mysql/mysql.sock
#EOF
 

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021268.html">[nycphp-talk] Hi from Russia
</A></li>
	<LI>Next message: <A HREF="021258.html">[nycphp-talk] MySQL Tuning.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21257">[ date ]</a>
              <a href="thread.html#21257">[ thread ]</a>
              <a href="subject.html#21257">[ subject ]</a>
              <a href="author.html#21257">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
