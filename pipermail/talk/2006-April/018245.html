<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Interesting PHP5 benchmarks
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2006-April/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Interesting%20PHP5%20benchmarks&In-Reply-To=%3CEE702CA684057843958BF6CE882E9101022EF922%40cci019.hq.communityconnect.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018239.html">
   
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Interesting PHP5 benchmarks</H1>
    <B>Nicholas Tang</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Interesting%20PHP5%20benchmarks&In-Reply-To=%3CEE702CA684057843958BF6CE882E9101022EF922%40cci019.hq.communityconnect.com%3E"
       TITLE="[nycphp-talk] Interesting PHP5 benchmarks">ntang at communityconnect.com
       </A><BR>
    <I>Sun Apr 30 13:48:45 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="018239.html">[nycphp-talk] Seeking Senior OSS Developer / Solutions Manager
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18245">[ date ]</a>
              <a href="thread.html#18245">[ thread ]</a>
              <a href="subject.html#18245">[ subject ]</a>
              <a href="author.html#18245">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I may actually have to eat my words - or at least nibble on them a bit.  ;)
 
We were benchmarking our new beta setup - Apache 2, PHP 5, and APC 3 - and seeing absolutely terrible results.  Really, really bad.  Atrocious.  As in, I had momentary fears we'd have to pick between a rewrite in PHP 4 or double the size of our webserver farm to manage it.
 
Anyways, while I can't reveal the exact results (and since they're using our in-house apps they wouldn't help much anyways) but under a load of 12,000 simultaneous simulated users (approximately 600 page views/ second), we were seeing page load times averaging over 20 seconds per page during our test on Tuesday morning - obviously completely unusable on a production website.
 
Friday morning we re-ran the test and got it down into the sub-4 seconds per-page range.
 
What changed?
 
Amazingly, while I did tweak some settings here and there, and we did nudge a few things in the code, the biggest change?  We downgraded our servers from Red Hat Enterprise 4 Update 3 to Update 2.  That was it.  Approximately 90% of the difference in the two tests came from that one shift - a shift that should have been completely inconsequential.
 
Now, before you ask - we build our own Apache/PHP/APC binaries, so none of those would have been changed.  We still haven't isolated it to any specific issue, but *something* changed drastically on the OS side, something that absolutely killed performance.  Until we can isolate it, and fix/remote/work-around it, we're officially standardizing on RHEL 4U2 - and I advise anyone out there who is running RHEL and considering moving to Update 3 to test it thoroughly before embarking on that journey.  It should be harmless, but in our case, it was anything but.
 
(On the flip side, U3 fixes several critical bugs in multipath-tools, so we've had to upgrade some of our DBs to it.  We haven't noticed any major performance degredation w/ Oracle, which is good.)
 
Nicholas
-------------- next part --------------
A non-text attachment was scrubbed...
Name: winmail.dat
Type: application/ms-tnef
Size: 4980 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.nyphp.org/pipermail/talk/attachments/20060430/1046b0f8/attachment.bin">http://lists.nyphp.org/pipermail/talk/attachments/20060430/1046b0f8/attachment.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018239.html">[nycphp-talk] Seeking Senior OSS Developer / Solutions Manager
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18245">[ date ]</a>
              <a href="thread.html#18245">[ thread ]</a>
              <a href="subject.html#18245">[ subject ]</a>
              <a href="author.html#18245">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
