<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Session basics
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2005-August/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Session%20basics&In-Reply-To=%3C200508091617.25624.jellicle%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015557.html">
   <LINK REL="Next"  HREF="015582.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Session basics</H1>
    <B>Michael Sims</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Session%20basics&In-Reply-To=%3C200508091617.25624.jellicle%40gmail.com%3E"
       TITLE="[nycphp-talk] Session basics">jellicle at gmail.com
       </A><BR>
    <I>Tue Aug  9 16:17:25 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="015557.html">[nycphp-talk] Experts help needed (Sessions)
</A></li>
        <LI>Next message: <A HREF="015582.html">[nycphp-talk] Session basics
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15568">[ date ]</a>
              <a href="thread.html#15568">[ thread ]</a>
              <a href="subject.html#15568">[ subject ]</a>
              <a href="author.html#15568">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Monday 08 August 2005 12:44, Brian O'Connor wrote:

&gt;<i> Well I knew I was doing a poor job before, but this session discussion
</I>&gt;<i> has finally brought me to finally design a new system. However, I think
</I>&gt;<i> in order to prevent against something, you need to first learn how it
</I>&gt;<i> works, which is why I write. What is session hijacking, and how do you do
</I>&gt;<i> it? I'm currently designing a new site where security is very important,
</I>&gt;<i> and I feel the need to go fully into this. If anyone could explain, or
</I>&gt;<i> point me to some articles ( can't really afford books at the moment,
</I>&gt;<i> about to leave for college and don't really have that much money ) I
</I>&gt;<i> would greatly appreciate this. Thank you.
</I>
Basics of sessions:

1) User logs in providing something he knows (username, password)
2) You assign (cookie) the browser with a long random string.  You record 
the string in a datastore on the server.
3) Anytime you get hits from a browser which presents the long random string 
that's in your datastore, you can assume it's the same user - therefore you 
need not ask for the username/password again.  Also, you know what the user 
did last - you can keep state across requests.
4) If time passes without access, you might delete the long random string in 
your datastore, rendering the browser's credentials invalid and requiring 
the user to log in again.

Good points:

1) User doesn't have to log in for each page.

Bad points:

1) If someone obtained the long random string, it would be like obtaining 
the user's username and password.  Bad person's browser could present the 
long random string...

Ways to hijack a session:

1) Eavesdrop on the user's datastream.  By default, all of this is in plain 
text, including the initial sending of the username and password.  
Solution: use HTTPS.

2) Find a way to insert javascript on YOUR website that accesses the cookies 
the user is sending and resends them to BAD_WEBSITE.  This is called 
cross-site-scripting, or XSS.  Solution: design your website to not echo 
any user input back to the user without sanitizing it.  Many, MANY sites 
are vulnerable to this.  The only upside is that usually XSS attacks have 
to be customized for the site they are attacking - someone has to want to 
attack YOUR site, not just any site.  The motivation for doing so is as 
valuable or as non-valuable as the accounts on your website are (so many of 
the vulnerable sites don't really need to care).  Read up on XSS.

3) If your session id's are being maintained in the user's URLs rather than 
user cookies, an attacked just has to get the user to follow a link to 
BAD_WEBSITE, then the session id will show up in the HTTP_REFERER variable.  
Solution: cookies are much preferred over URL-variable sessions.

4) Hack your server.  Solution: Don't let them hack your server.

5) Come along shortly after a user and use the same web browser he did.  
Solution: limit session length, warn users about logging in from public 
workstations, use session cookies that are deleted when the browser is 
closed, etc.

Miscellaneous:

1) Some people store state info in the cookies themselves, where the user 
can get at and modify them.  I prefer storing it serverside.  For 
unimportant state info, like a user's choice of language for a site, it 
doesn't matter.  For important state info, serverside is the only choice.

2) PHP's session info is stored in text files on the server.  I prefer 
sessions that are stored in a real database.  For small sites, it doesn't 
matter.  For large sites, database is the only real choice.

3) Keep in mind that PHP's built-in session-handling is one implementation 
of the idea of &quot;sessions&quot;, and not necessarily a good one for you.  You can 
write a PHP app that does sessions, and does them very well, without using 
any of PHP's session-handling functions.

4) Storing and verifying other info about the user (such as their IP 
address, user-agent string, or what-have-you) is effectively requiring the 
user to present more than just the long random string to validate his 
session.  Your sessions will break if you require something to be static 
(i.e., IP address) that actually isn't (AOL users behind an array of 
proxies).  Also, if the attacker can steal the long random string, he can 
just as well get the browser user-agent, etc. etc.


Michael Sims

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015557.html">[nycphp-talk] Experts help needed (Sessions)
</A></li>
	<LI>Next message: <A HREF="015582.html">[nycphp-talk] Session basics
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15568">[ date ]</a>
              <a href="thread.html#15568">[ thread ]</a>
              <a href="subject.html#15568">[ subject ]</a>
              <a href="author.html#15568">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
