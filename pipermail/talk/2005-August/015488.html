<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Experts help needed (Sessions)
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2005-August/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Experts%20help%20needed%20%28Sessions%29&In-Reply-To=%3C42F23539.3030202%40simmons.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015525.html">
   <LINK REL="Next"  HREF="015489.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Experts help needed (Sessions)</H1>
    <B>Jonathan</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Experts%20help%20needed%20%28Sessions%29&In-Reply-To=%3C42F23539.3030202%40simmons.edu%3E"
       TITLE="[nycphp-talk] Experts help needed (Sessions)">hendler at simmons.edu
       </A><BR>
    <I>Thu Aug  4 11:33:13 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="015525.html">[nycphp-talk] Experts help needed (Sessions)
</A></li>
        <LI>Next message: <A HREF="015489.html">[nycphp-talk] Experts help needed (Sessions)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15488">[ date ]</a>
              <a href="thread.html#15488">[ thread ]</a>
              <a href="subject.html#15488">[ subject ]</a>
              <a href="author.html#15488">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I agree that is difficult to find a silver bullet solution. The internet 
itself has its limits with identity management, and perhaps that's good.
Because of those limitations, security is as much about policy as 
technology.

Generally combining cookies (that can't be hijacked with cross-site 
scripting js), a server side script to create unique and user aware 
hashes, and SSL the network is  secure works well. There is a cost 
/benefit for a hijacking - if hijacking becomes increasingly complex, 
you have to be hiding something good to motivate anyone to come in. For 
example, if someone hijacked a users session in your system, what's the 
worst they could do? Could they get credit card information and pictures 
of the user naked? Or would the user only be able to post to NYPHP in 
their name? If the second is true you can always logging activity and 
communicating with the user, say sending an email confirmation like &quot;You 
posted this&quot; when you are really saying &quot;Did you really post this?&quot; I 
mean, security is really just a /sense/ of security.

It's easier to write code that works with sessions because it is a 
simple policy: once you log in, you're in. But, if there is something 
particularly sensitive you may want to verify identity again, like 
asking for the password again, or a captcha, or sending an email.

Sorry - I know I'm not giving code examples and you are in an 
implementation phase, but generally these steps have worked for me.

- Jonathan


Dan Cech wrote:

&gt;<i>Joseph,
</I>&gt;<i>
</I>&gt;<i>Your function would work the same way if it was:
</I>&gt;<i>
</I>&gt;<i>$this-&gt;_key = $_SERVER['HTTP_USER_AGENT'];
</I>&gt;<i>
</I>&gt;<i>If the attacker spoofs the client's HTTP_USER_AGENT string as well as 
</I>&gt;<i>the session id they will pass the test.
</I>&gt;<i>
</I>&gt;<i>Thus it doesn't actually provide any real added protection against 
</I>&gt;<i>session hijacking, because any attacker who can get hold of the session 
</I>&gt;<i>id will also be able to determine and spoof the user agent string.
</I>&gt;<i>
</I>&gt;<i>I wish I had a 'silver bullet' solution to the problem that I could 
</I>&gt;<i>recommend to you, but I don't.
</I>&gt;<i>
</I>&gt;<i>Dan
</I>&gt;<i>
</I>&gt;<i>Joseph Crawford wrote:
</I>&gt;<i>  
</I>&gt;<i>
</I>&gt;&gt;<i>guys is this a bit better way to check session validity?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>define('SES_KEY', 
</I>&gt;&gt;<i>md5('custom_string'.$_ENV['PROCESSOR_REVISION'].$_ENV['PROCESSOR_ARCHITECTURE'].$_ENV['PROCESSOR_LEVEL'].'custon_string'));
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>$this-&gt;_key = md5($_SERVER['HTTP_USER_AGENT'].SES_KEY.$ses_id);
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>that value is created and stored in the db on session start, then in my 
</I>&gt;&gt;<i>CheckSession function i am doing this
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>if( $key !== $data['identifier'] )
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>this ends up creating an identifier similar to this
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>733f97f78f00cd6d2f0d7955698ebac4a2aad2e4fb76d0a5862838e087a20251
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>this is based on the users agent, the initial session key, and some server 
</I>&gt;&gt;<i>stuff with some custom strings that i put in there.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>This works just fine i just wanted to know if it would be easy for someone 
</I>&gt;&gt;<i>to hijack a session with this added security. I am also wondering if i 
</I>&gt;&gt;<i>should set a cookie, i am not yet sure that i want the user to be able to 
</I>&gt;&gt;<i>log back in after they close thier browser, i mean atleast not without going 
</I>&gt;&gt;<i>through the login form
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>------------------------------------------------------------------------
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>_______________________________________________
</I>&gt;&gt;<i>New York PHP Talk Mailing List
</I>&gt;&gt;<i>AMP Technology
</I>&gt;&gt;<i>Supporting Apache, MySQL and PHP
</I>&gt;&gt;<i><A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;&gt;<i><A HREF="http://www.nyphp.org">http://www.nyphp.org</A>
</I>&gt;&gt;<i>    
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>_______________________________________________
</I>&gt;<i>New York PHP Talk Mailing List
</I>&gt;<i>AMP Technology
</I>&gt;<i>Supporting Apache, MySQL and PHP
</I>&gt;<i><A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;<i><A HREF="http://www.nyphp.org">http://www.nyphp.org</A>
</I>&gt;<i>  
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015525.html">[nycphp-talk] Experts help needed (Sessions)
</A></li>
	<LI>Next message: <A HREF="015489.html">[nycphp-talk] Experts help needed (Sessions)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15488">[ date ]</a>
              <a href="thread.html#15488">[ thread ]</a>
              <a href="subject.html#15488">[ subject ]</a>
              <a href="author.html#15488">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
