<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Blog Posts with Embedded Content
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2008-October/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Blog%20Posts%20with%20Embedded%20Content&In-Reply-To=%3C8f0676b40810071819x4ad9e1e8k618b02fa2af1351b%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026799.html">
   <LINK REL="Next"  HREF="026802.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Blog Posts with Embedded Content</H1>
    <B>John Campbell</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Blog%20Posts%20with%20Embedded%20Content&In-Reply-To=%3C8f0676b40810071819x4ad9e1e8k618b02fa2af1351b%40mail.gmail.com%3E"
       TITLE="[nycphp-talk] Blog Posts with Embedded Content">jcampbell1 at gmail.com
       </A><BR>
    <I>Tue Oct  7 21:19:25 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="026799.html">[nycphp-talk] Blog Posts with Embedded Content
</A></li>
        <LI>Next message: <A HREF="026802.html">[nycphp-talk] Blog Posts with Embedded Content
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26801">[ date ]</a>
              <a href="thread.html#26801">[ thread ]</a>
              <a href="subject.html#26801">[ subject ]</a>
              <a href="author.html#26801">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Oct 7, 2008 at 5:27 PM, Hans Zaunere &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">lists at zaunere.com</A>&gt; wrote:
&gt;<i> In one part of the application, they want to show only the first X number of
</I>&gt;<i> characters, before forcing a user to login.  So we need to cut the submitted
</I>&gt;<i> text at this character count, yet, of course, not cut in the middle of a
</I>&gt;<i> tag.
</I>&gt;<i>
</I>&gt;<i> This has turned into a considerable annoyance and I'm wondering if anyone
</I>&gt;<i> has a quick tip/pointer to a resource to solve this - without writing
</I>&gt;<i> excessive text parsing code.
</I>
Interesting question, I have searched unsuccessfully for a solution to
this in the past with no luck.

I hacked together a solution for you, but I am not sure I would put it
in production.  It is reasonably safe because it escapes everything it
doesn't recognize as a tag.  If you use it, I would filter out all but
a whitelist of tags (e.g. a,b,i,blockquote,strong) before passing it
to the function.

See the code at:
<A HREF="http://php.pastebin.com/f7f5262cb">http://php.pastebin.com/f7f5262cb</A>

The safest approach is probably to pass the html through tidy, and
then into DOM, and traverse and count the length of text nodes, but
that would be quite slow if you ran it on every request.

Regards,
John Campbell

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026799.html">[nycphp-talk] Blog Posts with Embedded Content
</A></li>
	<LI>Next message: <A HREF="026802.html">[nycphp-talk] Blog Posts with Embedded Content
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26801">[ date ]</a>
              <a href="thread.html#26801">[ thread ]</a>
              <a href="subject.html#26801">[ subject ]</a>
              <a href="author.html#26801">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
