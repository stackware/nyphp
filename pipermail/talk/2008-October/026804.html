<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Restian PHP on IIS with encoded urls
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2008-October/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Restian%20PHP%20on%20IIS%20with%20encoded%20urls&In-Reply-To=%3C48ED15E1.7040204%40umn.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026800.html">
   <LINK REL="Next"  HREF="026811.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Restian PHP on IIS with encoded urls</H1>
    <B>Joelle Tegwen</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Restian%20PHP%20on%20IIS%20with%20encoded%20urls&In-Reply-To=%3C48ED15E1.7040204%40umn.edu%3E"
       TITLE="[nycphp-talk] Restian PHP on IIS with encoded urls">tegwe002 at umn.edu
       </A><BR>
    <I>Wed Oct  8 16:19:45 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="026800.html">[nycphp-talk] front end list address
</A></li>
        <LI>Next message: <A HREF="026811.html">[nycphp-talk] Restian PHP on IIS with encoded urls
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26804">[ date ]</a>
              <a href="thread.html#26804">[ thread ]</a>
              <a href="subject.html#26804">[ subject ]</a>
              <a href="author.html#26804">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm writing a web services application on PHP 5.2. I develop on 
Linux/Apache but our test/production servers are running IIS 6 So I'm 
kind of clueless about how to configure IIS.

Thanks in advance for any assistance.

The problem that I'm having is that IIS is decoding encoded portions of 
my urls before they hit php, and that is making parsing an encoded rest 
url very difficult.

I did google this and found a server variable &quot;UNENCODED_URL&quot; but it 
doesn't seem to be populated on my server. I found some references to 
the IIS Metabase, but nothing about what I would change to get what I 
want out of the server.


Short version of the question:
How do I get the original encoded URL in IIS?


The URL I'm parsing is:
<A HREF="http://localhost/resources/services.php/ttaf/transform/http%3A%2F%2Ficitest1.education.umn.edu%2Fici%2Fwelcome%2Fcaptions_ici_ttf.xml/http%3A%2F%2Ficitest1.education.umn.edu%2Fici%2Fwelcome%2Ftranscript.xsl">http://localhost/resources/services.php/ttaf/transform/http%3A%2F%2Ficitest1.education.umn.edu%2Fici%2Fwelcome%2Fcaptions_ici_ttf.xml/http%3A%2F%2Ficitest1.education.umn.edu%2Fici%2Fwelcome%2Ftranscript.xsl</A>
Which I want to parse to
    ttaf
    transform
    http%3A%2F%2Flocalhost%2Fici%2Fwelcome%2Fcaptions_ici_ttf.xml
    http%3A%2F%2Ficitest1.education.umn.edu%2Fici%2Fwelcome%2Ftranscript.xsl


Long explanation if needed/useful:

To reduce the complexity of maintaining web server environments on 
several machines (developer and servers) we try to do everything inside 
of native PHP. This means no mod_rewrite or similar tools unless they 
are irreplaceable.


In Apache I get
    [REQUEST_URI] =&gt; 
/resources/services.php/ttaf/transform/http%3A%2F%2Flocalhost%2Fsandbox%2Fflashxslt%2Fcaptions_ici_ttf.xml/http%3A%2F%2Flocalhost%2Fsandbox%2Fflashxslt%2Ftranscript.xsl
    [SCRIPT_NAME] =&gt; /resources/services.php
 which I can then parse out.

In IIS I get:
[PATH_INFO] =&gt; 
/ttaf/transform/http:/icitest1.education.umn.edu/ici/welcome/captions_ici_ttf.xml/http:/icitest1.education.umn.edu/ici/welcome/transcript.xsl
    [PATH_TRANSLATED] =&gt; 
c:/inetpub/wwwroot/ttaf/transform/http:/icitest1.education.umn.edu/ici/welcome/captions_ici_ttf.xml/http:/icitest1.education.umn.edu/ici/welc
    [ORIG_PATH_INFO] =&gt; 
/resources/services.php/ttaf/transform/http:/icitest1.education.umn.edu/ici/welcome/captions_ici_ttf.xml/http:/icitest1.education.umn.edu/ici/welcome/transcript.xsl
   [ORIG_PATH_TRANSLATED] =&gt; 
c:\inetpub\wwwroot\resources\services.php\ttaf\transform\http:\icitest1.education.umn.edu\ici\welcome\captions_ici_ttf.xml\http:\icitest1.education.umn.edu\ici\welcome\transcript.xsl

But they're all already decoded.

Thanks!
Joelle

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026800.html">[nycphp-talk] front end list address
</A></li>
	<LI>Next message: <A HREF="026811.html">[nycphp-talk] Restian PHP on IIS with encoded urls
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26804">[ date ]</a>
              <a href="thread.html#26804">[ thread ]</a>
              <a href="subject.html#26804">[ subject ]</a>
              <a href="author.html#26804">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
