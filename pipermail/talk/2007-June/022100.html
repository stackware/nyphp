<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Form PRG revisited -- again
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2007-June/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Form%20PRG%20revisited%20--%20again&In-Reply-To=%3CC294796F.5050%25cliff%40pinestream.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022099.html">
   <LINK REL="Next"  HREF="022120.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Form PRG revisited -- again</H1>
    <B>Cliff Hirsch</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Form%20PRG%20revisited%20--%20again&In-Reply-To=%3CC294796F.5050%25cliff%40pinestream.com%3E"
       TITLE="[nycphp-talk] Form PRG revisited -- again">cliff at pinestream.com
       </A><BR>
    <I>Tue Jun 12 16:25:19 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="022099.html">[nycphp-talk] Re: PHP equivalent of the XMLHTTP Library
</A></li>
        <LI>Next message: <A HREF="022120.html">[nycphp-talk] Form PRG revisited -- again
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22100">[ date ]</a>
              <a href="thread.html#22100">[ thread ]</a>
              <a href="subject.html#22100">[ subject ]</a>
              <a href="author.html#22100">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have been testing the Form PRG pattern, and really like the way it acts on
the user side. The back button and resubmit/reload button behave so much
nicer, versus those ugly POSTDATA messages. But it is a bear to implement,
unless I&#185;m missing something as usual.

Paul Jones showed how the Solar Framwork supports redirectNoCache function.
But this is just a small part of the equation. For a redirect after a
successful form submission, its a no-brainer &#139; clean and simple. The problem
is forms with errors. These forms need to be presented to the user again,
with all relevant data and error messages &#139; inline and otherwise.

To me, this means the following:
1. Process the form via post for the first pass
2. Redirect to display form again via get with data and error msgs. This
means not just presenting the form again, but also the previously form data,
and all error messages, which means processing/validating the form to catch
the error messages, but not redirecting this time round.

This is a major pain.  Every form controller/action needs to be tweaked.

Am I reinventing the wheel here? Time to switch to ASP or Java?!

I see several options:
1. Skip the PRG pattern. Let users struggle with the back/resubmit buttons.
2. Go for the low-hanging fruit &#139; redirect only after successful form
submissions 
3. Use AJAX to &#179;pre-validate&#178; a form prior to submission
4. Make a global PRG function at the start of the controller like so....

if form post submission
   save post variables in session
   redirect to same URL (add post/timestamp tag or some other identifier if
necessary?)
elseif (isset(post/timetamp/identifier tag) &amp;&amp; that tag  passes some
validation step)
    get saved post variable from session and repopulate $_POST array
    clear post variables from session
    continue on our merry way as if this were a post submission
         (but how do our controller/actions detect get versus post
submissions &#139; looking for a post variable or some http field?)
else
    clear post variables from session, if any

What do you think? Seems to make sense. This essentially turns every post
into a get. To the forms, it should be transparent &#139; right? We could still
redirect for results pages when desired on a case-by-case basis so that the
reload button displays the results again instead of the original form. And
we do this as close to the top the script as possible, right after session
initiation, to reduce unnecessary server load.

Cliff
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.nyphp.org/pipermail/talk/attachments/20070612/1c79fa24/attachment.html">http://lists.nyphp.org/pipermail/talk/attachments/20070612/1c79fa24/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022099.html">[nycphp-talk] Re: PHP equivalent of the XMLHTTP Library
</A></li>
	<LI>Next message: <A HREF="022120.html">[nycphp-talk] Form PRG revisited -- again
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22100">[ date ]</a>
              <a href="thread.html#22100">[ thread ]</a>
              <a href="subject.html#22100">[ subject ]</a>
              <a href="author.html#22100">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
