<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Returning users from whiniest they came
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2008-July/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Returning%20users%20from%20whiniest%20they%20came&In-Reply-To=%3C20080711141322.GA2272%40panix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026207.html">
   <LINK REL="Next"  HREF="026209.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Returning users from whiniest they came</H1>
    <B>Daniel Convissor</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Returning%20users%20from%20whiniest%20they%20came&In-Reply-To=%3C20080711141322.GA2272%40panix.com%3E"
       TITLE="[nycphp-talk] Returning users from whiniest they came">danielc at analysisandsolutions.com
       </A><BR>
    <I>Fri Jul 11 10:13:22 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="026207.html">[nycphp-talk] Returning users from whiniest they came
</A></li>
        <LI>Next message: <A HREF="026209.html">[nycphp-talk] Returning users from whiniest they came
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26208">[ date ]</a>
              <a href="thread.html#26208">[ thread ]</a>
              <a href="subject.html#26208">[ subject ]</a>
              <a href="author.html#26208">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Paul:

You misunderstand what http referer does.  In addition, be careful of 
what some other folks have posted in this thread, they're 
misunderstanding your situation, so may confuse you further.

Here are several key points:

* it is set by the browser
* it gets sent in the HTTP headers when requesting a page
* it indicates the URI a hyperlink was found on

Let's say a browser is on Page A.  Page A has a link to Page B.  When the 
user clicks the link to Page B, the browser will put the URI of Page A 
into the referer header.

Then, when the person is on Page B they click a link for Page C, the 
browswer will put the URI of Page B into the header/request for Page C.

So note that it contains the page that referred the _current_ request.

As others indicated earlier, if you want to know the place someone 
entered your site, you need to capture that on the first page they hit.  
Something _like_ this:

// Make sure session_start() was called already.

if (!isset($_SESSION['source'])) {
    /*
     * This is the first hit this person has made to your site
     * DURING THIS SESSION.  So if you don't manage things right
     * this could be a value from an earlier visit.
     */
    if (empty($_SERVER['HTTP_REFERER'])) {
        // Either not sent or person typed in the URI directly.
        $source = false;
    } else {
        // They clicked a link to get here.
        // Make sure it is safe.
        $source = $_SERVER['HTTP_REFERER'];
        $source = preg_replace('/[^!#-9:;=?-Z_a-z~]/', '', $source);
    }
    $_SESSION['source'] = $source;
}

--Dan

-- 
 T H E   A N A L Y S I S   A N D   S O L U T I O N S   C O M P A N Y
            data intensive web and database programming
                <A HREF="http://www.AnalysisAndSolutions.com/">http://www.AnalysisAndSolutions.com/</A>
 4015 7th Ave #4, Brooklyn NY 11232  v: 718-854-0335 f: 718-854-0409

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026207.html">[nycphp-talk] Returning users from whiniest they came
</A></li>
	<LI>Next message: <A HREF="026209.html">[nycphp-talk] Returning users from whiniest they came
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26208">[ date ]</a>
              <a href="thread.html#26208">[ thread ]</a>
              <a href="subject.html#26208">[ subject ]</a>
              <a href="author.html#26208">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
