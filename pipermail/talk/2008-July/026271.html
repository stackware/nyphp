<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] A good PCRE expression for matching URLs
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2008-July/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20A%20good%20PCRE%20expression%20for%20matching%20URLs&In-Reply-To=%3C78c6bd860807241119m571a023eg3fd40d8325d230c8%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026270.html">
   <LINK REL="Next"  HREF="026272.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] A good PCRE expression for matching URLs</H1>
    <B>Michael B Allen</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20A%20good%20PCRE%20expression%20for%20matching%20URLs&In-Reply-To=%3C78c6bd860807241119m571a023eg3fd40d8325d230c8%40mail.gmail.com%3E"
       TITLE="[nycphp-talk] A good PCRE expression for matching URLs">ioplex at gmail.com
       </A><BR>
    <I>Thu Jul 24 14:19:58 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="026270.html">[nycphp-talk] Re: Embedding PL/SQL procedure into PHP
</A></li>
        <LI>Next message: <A HREF="026272.html">[nycphp-talk] A good PCRE expression for matching URLs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26271">[ date ]</a>
              <a href="thread.html#26271">[ thread ]</a>
              <a href="subject.html#26271">[ subject ]</a>
              <a href="author.html#26271">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Does anyone have a good PCRE for matching URLs?

All of the examples that I have looked at in various places are too
simple or exclude invalid characters rather than include valid ones
(and of course fail to exclude all bad characters) or don't properly
use escaping ... etc.

Or perhaps someone can improve (or correct) the expression I'm using currently:

  $expr = '[a-zA-Z0-9]{1,10}://[a-zA-Z0-9.-]+[\p{L}/~._-]*|mailto:[a-zA-Z0-9\\@.-]+';

The exprssion breakdown is:

  [a-zA-Z0-9]{1,10} - Protocol specifier (e.g. http, ftps, smb, gopher, ...)
  :// - Protocol host separator (mailto style handled by or condition)
  [a-zA-Z0-9.-]+ - The hostname (currently we assume only ASCII)
  [\p{L}/~._-]* - A UTF-8 path (probably need to allow some other
chars but not '?')
  |mailto:[a-zA-Z0-9\@.-]+ - Or a mailto URL

Mike

-- 
Michael B Allen
PHP Active Directory SPNEGO SSO
<A HREF="http://www.ioplex.com/">http://www.ioplex.com/</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026270.html">[nycphp-talk] Re: Embedding PL/SQL procedure into PHP
</A></li>
	<LI>Next message: <A HREF="026272.html">[nycphp-talk] A good PCRE expression for matching URLs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26271">[ date ]</a>
              <a href="thread.html#26271">[ thread ]</a>
              <a href="subject.html#26271">[ subject ]</a>
              <a href="author.html#26271">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
