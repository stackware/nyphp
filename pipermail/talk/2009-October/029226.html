<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] using PHP to import large-ish SQL into mysql
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2009-October/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20using%20PHP%20to%20import%20large-ish%20SQL%20into%20mysql&In-Reply-To=%3C642abf2e0910201507k74e5f290t4cdbf674e82670c5%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029225.html">
   <LINK REL="Next"  HREF="029230.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] using PHP to import large-ish SQL into mysql</H1>
    <B>David A. Roth</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20using%20PHP%20to%20import%20large-ish%20SQL%20into%20mysql&In-Reply-To=%3C642abf2e0910201507k74e5f290t4cdbf674e82670c5%40mail.gmail.com%3E"
       TITLE="[nycphp-talk] using PHP to import large-ish SQL into mysql">davidalanroth at gmail.com
       </A><BR>
    <I>Tue Oct 20 18:07:38 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="029225.html">[nycphp-talk] using PHP to import large-ish SQL into mysql
</A></li>
        <LI>Next message: <A HREF="029230.html">[nycphp-talk] using PHP to import large-ish SQL into mysql
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29226">[ date ]</a>
              <a href="thread.html#29226">[ thread ]</a>
              <a href="subject.html#29226">[ subject ]</a>
              <a href="author.html#29226">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>If you are getting an &quot;out of memory&quot; error from a PHP program, see if
on your shared hosting account you have access to the php.ini file. If
so,  increase the memory.

After you locate the php.ini file, look for this line:
memory_limit = 16M      ; Maximum amount of memory a script may consume

The default, at least from my experience lately I've seen is 16MB. Try
increasing this from 16M to perhaps 128M or more, and see if this
allows your PHP script to continue without error.

On shared web hosting accounts, while there might be a /etc/php.ini
for the system, there is usually a locate one for the user. If there
is a CPANEL on your hosting account, look there for options to make
changes to PHP.

I was loading an XML file which was very large and ended up increasing
the memory_limit to several times its value in order for it to work
without a memory error.

Hope this helps!

David Roth

On Tue, Oct 20, 2009 at 5:57 PM, Marc Antony Vose &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">suzerain at suzerain.com</A>&gt; wrote:
&gt;<i> Hi there:
</I>&gt;<i>
</I>&gt;<i> I'm on a shared machine, and trying to get some 15 MB or so SQL files into
</I>&gt;<i> MySQL. &#160;No problem doing this at the command line, of course, but I have
</I>&gt;<i> several SQL files that need to be imported a few times a month. So, ideally,
</I>&gt;<i> I'd like to FTP them to a directory and go to a web page and hit a button to
</I>&gt;<i> do the import.
</I>&gt;<i>
</I>&gt;<i> Problem is, the PHP script is terminating with a PHP error; server's support
</I>&gt;<i> thinks it's out of memory. &#160;According to phpinfo(), the script can use 90M,
</I>&gt;<i> so the question is why a 20M sql import would use up 90M?
</I>&gt;<i>
</I>&gt;<i> I'm doing it like this:
</I>&gt;<i>
</I>&gt;<i> $cmd = &quot;/path/to/mysql -h hostname -u username --password=password db_name &lt;
</I>&gt;<i> sqlfile.sql&quot;;
</I>&gt;<i> exec( $cmd );
</I>&gt;<i>
</I>&gt;<i> I had thought that using this command-line command would prevent PHP from
</I>&gt;<i> dealing with the memory footprint of the operation, but apparently this is
</I>&gt;<i> not the case.
</I>&gt;<i>
</I>&gt;<i> So...doable in PHP without an approach like busting apart the file into
</I>&gt;<i> small chunks? &#160;Or better to use another language on the server for this...?
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i> Marc
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029225.html">[nycphp-talk] using PHP to import large-ish SQL into mysql
</A></li>
	<LI>Next message: <A HREF="029230.html">[nycphp-talk] using PHP to import large-ish SQL into mysql
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29226">[ date ]</a>
              <a href="thread.html#29226">[ thread ]</a>
              <a href="subject.html#29226">[ subject ]</a>
              <a href="author.html#29226">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
