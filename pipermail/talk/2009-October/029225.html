<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] using PHP to import large-ish SQL into mysql
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2009-October/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20using%20PHP%20to%20import%20large-ish%20SQL%20into%20mysql&In-Reply-To=%3C3C22F952-46AB-4058-9DC4-E70A7CF668C6%40suzerain.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029247.html">
   <LINK REL="Next"  HREF="029226.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] using PHP to import large-ish SQL into mysql</H1>
    <B>Marc Antony Vose</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20using%20PHP%20to%20import%20large-ish%20SQL%20into%20mysql&In-Reply-To=%3C3C22F952-46AB-4058-9DC4-E70A7CF668C6%40suzerain.com%3E"
       TITLE="[nycphp-talk] using PHP to import large-ish SQL into mysql">suzerain at suzerain.com
       </A><BR>
    <I>Tue Oct 20 17:57:06 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="029247.html">[nycphp-talk] developer's machine specs -- recomendations?
</A></li>
        <LI>Next message: <A HREF="029226.html">[nycphp-talk] using PHP to import large-ish SQL into mysql
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29225">[ date ]</a>
              <a href="thread.html#29225">[ thread ]</a>
              <a href="subject.html#29225">[ subject ]</a>
              <a href="author.html#29225">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi there:

I'm on a shared machine, and trying to get some 15 MB or so SQL files  
into MySQL.  No problem doing this at the command line, of course, but  
I have several SQL files that need to be imported a few times a month.  
So, ideally, I'd like to FTP them to a directory and go to a web page  
and hit a button to do the import.

Problem is, the PHP script is terminating with a PHP error; server's  
support thinks it's out of memory.  According to phpinfo(), the script  
can use 90M, so the question is why a 20M sql import would use up 90M?

I'm doing it like this:

$cmd = &quot;/path/to/mysql -h hostname -u username --password=password  
db_name &lt; sqlfile.sql&quot;;
exec( $cmd );

I had thought that using this command-line command would prevent PHP  
from dealing with the memory footprint of the operation, but  
apparently this is not the case.

So...doable in PHP without an approach like busting apart the file  
into small chunks?  Or better to use another language on the server  
for this...?

Cheers,
Marc



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029247.html">[nycphp-talk] developer's machine specs -- recomendations?
</A></li>
	<LI>Next message: <A HREF="029226.html">[nycphp-talk] using PHP to import large-ish SQL into mysql
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29225">[ date ]</a>
              <a href="thread.html#29225">[ thread ]</a>
              <a href="subject.html#29225">[ subject ]</a>
              <a href="author.html#29225">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
