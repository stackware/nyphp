<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] using PHP to import large-ish SQL into mysql
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2009-October/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20using%20PHP%20to%20import%20large-ish%20SQL%20into%20mysql&In-Reply-To=%3C003201ca5251%244e97cbc0%24ebc76340%24%40horning%40planetnoc.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029238.html">
   <LINK REL="Next"  HREF="029240.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] using PHP to import large-ish SQL into mysql</H1>
    <B>Daniel Horning</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20using%20PHP%20to%20import%20large-ish%20SQL%20into%20mysql&In-Reply-To=%3C003201ca5251%244e97cbc0%24ebc76340%24%40horning%40planetnoc.com%3E"
       TITLE="[nycphp-talk] using PHP to import large-ish SQL into mysql">dan.horning at planetnoc.com
       </A><BR>
    <I>Wed Oct 21 09:20:48 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="029238.html">[nycphp-talk] using PHP to import large-ish SQL into mysql
</A></li>
        <LI>Next message: <A HREF="029240.html">[nycphp-talk] using PHP to import large-ish SQL into mysql
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29239">[ date ]</a>
              <a href="thread.html#29239">[ thread ]</a>
              <a href="subject.html#29239">[ subject ]</a>
              <a href="author.html#29239">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>the command line one is much faster 
 

 

mysql -uUSER -p DATABASETARGET &lt; FILENAME

 

(will prompt you for your password)

 

--

Dan Horning

 

American Digital Services - Where you are only limited by imagination.

<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">dan.horning at planetnoc.com</A> :: <A HREF="http://www.americandigitalservices.com">http://www.americandigitalservices.com</A>

1-518-444-0213 x502 . toll free 1-800-863-3854 . fax 1-888-474-6133

15 Third Street, PO Box 746, Troy, NY 12180 (by appointment only)

 

From: <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk-bounces at lists.nyphp.org</A> [mailto:<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk-bounces at lists.nyphp.org</A>] On
Behalf Of Damion Hankejh
Sent: Wednesday, October 21, 2009 9:09 AM
To: NYPHP Talk
Subject: Re: [nycphp-talk] using PHP to import large-ish SQL into mysql

 

Sounds familiar to an issue I had with uninformative 500 Internal Server
errors -- my script was timing out.  Check your max script execution time
with:

 

echo ini_get('max_execution_time');

 

Extend it with:

 

set_time_limit($seconds); // has no effect if running safe_mode

---
Damion Hankejh | hankejh.com



 

On Wed, Oct 21, 2009 at 5:02 AM, Marc Antony Vose &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">suzerain at suzerain.com</A>&gt;
wrote:


Le Oct 21, 2009 &#224; 8:11 AM, Daniel Convissor a &#233;crit :

 

Problem is, the PHP script is terminating with a PHP error; server's
support thinks it's out of memory.


Why should anyone be guessing what the issue is?  PHP's error messages
explain exactly what the problem is in plain English.  Please post the
actual error message.

 

Sorry...I made a typo there.  I  meant that the script is terminating with a
500 Error (NOT a PHP error)...which means there is no log or useful error
trail.  All I see in the error_log is the dreaded &quot;Premature end of script
headers&quot; error.

It usually points to out of memory or some other config error (like a bunk
shebang line in a CGI).

In this case, the script works when I import the smaller tables, and gives
the 500 Error when I try the larger tables, so I think out of memory is a
pretty reasonable hypothesis.

As I said, PHP's memory_limit is set to 90M by default (according to
phpinfo()) and I tried upping it to 128M, and phpinfo() says it's set to
that, also, so I'm a bit confused as to why one 16 MB file would exceed 90M
on import, but hey, who knows.





Another thought, if this is (nearly) all you're doing, why involvine PHP
at all?  Do it directly in a shell script.

 

I was using PHP partly because it's the language I'm most familiar with, but
more importantly because I don't want to automatically import certain files;
the decision to import is based on logic in the script, and some of that
logic comes from information in the bigger web application it's a part of.

I already rewrote the script in Perl, but still had issues with importing
the larger tables there, too.

I'm not really much of a shell scripter; perhaps I should see if I can do it
that way.

If anyone has any other strategy that can work in PHP, let me know.

Cheers,
Marc




_______________________________________________
New York PHP Users Group Community Talk Mailing List
<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>

<A HREF="http://www.nyphp.org/Show-Participation">http://www.nyphp.org/Show-Participation</A>

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.nyphp.org/pipermail/talk/attachments/20091021/f79297c8/attachment.html">http://lists.nyphp.org/pipermail/talk/attachments/20091021/f79297c8/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029238.html">[nycphp-talk] using PHP to import large-ish SQL into mysql
</A></li>
	<LI>Next message: <A HREF="029240.html">[nycphp-talk] using PHP to import large-ish SQL into mysql
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29239">[ date ]</a>
              <a href="thread.html#29239">[ thread ]</a>
              <a href="subject.html#29239">[ subject ]</a>
              <a href="author.html#29239">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
