<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Why do unit tests not inherit?
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2013-November/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Why%20do%20unit%20tests%20not%20inherit%3F&In-Reply-To=%3C000b01cee21b%2490d8e150%24b28aa3f0%24%40tutteli.ch%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="031846.html">
   <LINK REL="Next"  HREF="031849.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Why do unit tests not inherit?</H1>
    <B>Robert Stoll</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Why%20do%20unit%20tests%20not%20inherit%3F&In-Reply-To=%3C000b01cee21b%2490d8e150%24b28aa3f0%24%40tutteli.ch%3E"
       TITLE="[nycphp-talk] Why do unit tests not inherit?">rstoll at tutteli.ch
       </A><BR>
    <I>Fri Nov 15 10:58:45 EST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="031846.html">[nycphp-talk] Why do unit tests not inherit?
</A></li>
        <LI>Next message: <A HREF="031849.html">[nycphp-talk] Why do unit tests not inherit?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31847">[ date ]</a>
              <a href="thread.html#31847">[ thread ]</a>
              <a href="subject.html#31847">[ subject ]</a>
              <a href="author.html#31847">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk-bounces at lists.nyphp.org</A> [mailto:<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk-bounces at lists.nyphp.org</A>]
</I>&gt;<i> On Behalf Of Michael Hernandez
</I>&gt;<i> Sent: Friday, November 15, 2013 4:43 PM
</I>&gt;<i> To: NYPHP Talk
</I>&gt;<i> Subject: Re: [nycphp-talk] Why do unit tests not inherit?
</I>&gt;<i> 
</I>&gt;<i> On Nov 15, 2013, at 10:26 AM, &quot;Gary A. Mort&quot; &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">garyamort at gmail.com</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Is there a reason that most unit tests published for PHP Open Source
</I>&gt;<i> projects do not use OOP programming?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt; Class Pets
</I>&gt;<i> &gt; Class Dogs extends Pets
</I>&gt;<i> &gt; Class Cats extends Pets
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Unit tests written for those classes generally are defined like Class
</I>&gt;<i> &gt; TestPets extends TestCase Class TestDogs extends TestCase Class
</I>&gt;<i> &gt; TestCats extends TestCase
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; It seems to me that it should be
</I>&gt;<i> &gt; Class TestPets extends TestCase
</I>&gt;<i> &gt; Class TestDogs extends TestPets
</I>&gt;<i> &gt; Class TestCats extends TestPets
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; That way if the Pets base class is given a new method based on a method
</I>in
&gt;<i> Dogs but with subtle differences, by inheriting the TestPets unit tests
</I>you will
&gt;<i> immediately find out that the Dogs class is failing the Pets unit tests
</I>and
&gt;<i> either needs to be changed to match or if it is supposed to be different,
</I>the
&gt;<i> test from TestPets has to be disabled in TestDogs.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I'm trying to wrap my brain around this and wondered if there is some
</I>valid
&gt;<i> reason for not using inheritance for tests in this way - or if it is just
</I>that for
&gt;<i> whatever reason when programmers first started writing unit tests they got
</I>&gt;<i> stuck in a functional rather than object oriented mindset?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; -Gary
</I>&gt;<i> &gt; ________________________________
</I>&gt;<i> 
</I>&gt;<i> You could have a hierarchy like the one you describe but I wouldn't work
</I>too
&gt;<i> hard to make that fit. Tests should be as simple as possible and thus
</I>&gt;<i> shouldn't require anything special to get their work done (yes,
</I>inheritance is
&gt;<i> pretty special). Essentially you want to avoid complex inheritance, logic,
</I>&gt;<i> looping, etc., in order to avoid your tests needing tests or documentation
</I>of
&gt;<i> their own.
</I>&gt;<i> 
</I>&gt;<i> That being said, if you find that all &quot;pet tests&quot; require some common set
</I>up,
&gt;<i> you might refactor in the way you mentioned above. Personally, I would
</I>&gt;<i> avoid that until absolutely necessary. I would even go so far as to say
</I>that
&gt;<i> sticking to DRY isn't as important as having clear tests that not only
</I>give you
&gt;<i> confidence that your code works but also serve as living documentation.
</I>&gt;<i> Having important bits squirreled away into base classes can make things
</I>&gt;<i> harder to read sometimes. Whether or not having code in another class
</I>&gt;<i> separate from your test increases the clarity of your code is entirely up
</I>to the
&gt;<i> reader, of course ;)
</I>&gt;<i> 
</I>&gt;<i> --Mike H
</I>
I totally agree with Mike. I have already started writing so I continue
(even though it is some repetition of Mike's answer)
IMO tests have to be simple, so simple that you do not require to apply
software engineering and think about a fancy design etc. 
That's at least the case if you write real unit-test which involve just one
unit (class) and not more (all dependencies are stubbed or mocked).

I even think it is ok to have some degree of code duplication in test
classes just to make the test case very obvious. 
Each test case should ideally just cover one aspect (method) and if you
start having a lot of test cases for just one method, then you should
probably refactor your method.
Also if your test method starts to get bigger and bigger it is probably time
to refactor your method under test.

I usually create one method in the test class which provides me the unit
(class) under test and I write code against interfaces.
For your scenario I would create one test class which covers Pet and another
for Dog and yet another for Cat. The test classes for Dog and Cat would just
contain test methods for the additional functionally of Dog, Cat
respectively.
However, if you start overriding methods in Dog or Cat, then I would create
two sub-classes of the Pet test class and merely override the create method
(exchange Pet with Dog, Cat respectively). This way you can make sure your
code fits to the Liskov Substitution Principle but without making your test
code more complex.

I also ran into code where it was no longer possible to follow this
approach, but this was mostly an indicator that the code needs refactoring.

Cheers,
Robert

</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="031846.html">[nycphp-talk] Why do unit tests not inherit?
</A></li>
	<LI>Next message: <A HREF="031849.html">[nycphp-talk] Why do unit tests not inherit?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31847">[ date ]</a>
              <a href="thread.html#31847">[ thread ]</a>
              <a href="subject.html#31847">[ subject ]</a>
              <a href="author.html#31847">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
