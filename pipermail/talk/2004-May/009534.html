<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] How do you do the equivalent of $PHP_SELF for PHP	scripts not in docroot?
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2004-May/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20How%20do%20you%20do%20the%20equivalent%20of%20%24PHP_SELF%20for%20PHP%0A%09scripts%20not%20in%20docroot%3F&In-Reply-To=%3C40AA8251.8020104%40adnet-sys.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009532.html">
   <LINK REL="Next"  HREF="009533.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] How do you do the equivalent of $PHP_SELF for PHP	scripts not in docroot?</H1>
    <B>Phillip Powell</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20How%20do%20you%20do%20the%20equivalent%20of%20%24PHP_SELF%20for%20PHP%0A%09scripts%20not%20in%20docroot%3F&In-Reply-To=%3C40AA8251.8020104%40adnet-sys.com%3E"
       TITLE="[nycphp-talk] How do you do the equivalent of $PHP_SELF for PHP	scripts not in docroot?">phillip.powell at adnet-sys.com
       </A><BR>
    <I>Tue May 18 17:38:25 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="009532.html">[nycphp-talk] How do you do the equivalent of $PHP_SELF for PHP	scripts not in docroot?
</A></li>
        <LI>Next message: <A HREF="009533.html">[nycphp-talk] Smarty
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9534">[ date ]</a>
              <a href="thread.html#9534">[ thread ]</a>
              <a href="subject.html#9534">[ subject ]</a>
              <a href="author.html#9534">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Joel De Gan wrote:

&gt;<i>On Tue, 2004-05-18 at 15:43, Phillip Powell wrote:
</I>&gt;<i>  
</I>&gt;<i>
</I>&gt;&gt;<i>I can easily write config.php, however, my knowledge of &quot;define&quot; comes 
</I>&gt;&gt;<i>from the PHP manual, and I see nowhere where it states that anything in 
</I>&gt;&gt;<i>define() is in a persistent state.  If I run &quot;config.php&quot;, I lose all of 
</I>&gt;&gt;<i>my defined constants, don't I?  And when I go to &quot;index.php&quot; via 
</I>&gt;&gt;<i>browser, how would it know how to go to config.php if config.php would 
</I>&gt;&gt;<i>have to reside outside of the docroot?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Again I'm probably overcomplicating this but I can't honestly follow 
</I>&gt;&gt;<i>your train of logic, though I want to.
</I>&gt;&gt;<i>    
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>just try it.
</I>&gt;<i>
</I>&gt;<i>if you want to know all your defined constants try the following in a
</I>&gt;<i>script.
</I>&gt;<i>
</I>&gt;<i>echo &quot;&lt;pre&gt;\n&quot;;
</I>&gt;<i>print_r($GLOBALS);
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>joeldg - developer, Intercosmos media group.
</I>&gt;<i><A HREF="http://lucifer.intercosmos.net">http://lucifer.intercosmos.net</A>
</I>&gt;<i>
</I>&gt;<i>_______________________________________________
</I>&gt;<i>talk mailing list
</I>&gt;<i><A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk at lists.nyphp.org</A>
</I>&gt;<i><A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>Wow, ok I did overcomplicate it, the solution was so simple it escaped 
me altogether.

Here is my install.php, I just run this from command line:

[PHP]
&lt;?php

  
/*----------------------------------------------------------------------------------------------------------------------------------------------------------------------
    File: INSTALL.PHP
    Created: 5/18/2004
    Modified: 5/18/2004
    Purpose: This file will be housed in the /docs document folder for 
the IVC project documentation list and not kept inside the document
             root.  It will generate all necessary constants for use 
within the IVC by dynamically generating the necessary content from the
             $argv array values from user input and include them into 
script that will be placed into
             /[your document root]/[your client folder name]/[your 
project folder name]/include/constants.inc.php

    Dependencies:
            Will be called via command-line PHP and can be set up as a 
cron, if so, move to /cron/[client folder name]/[project folder name].
            Takes four required parameters:

                1) client folder name
                2) project folder name
                3) your home directory path where this script resides
                4) the document root (e.g. &quot;/var/www/html&quot;)

    Cookies: NONE
    Sessions: NONE
    Privacy Scope: Command-line PHP and not meant to be viewable by web 
server
  
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
  if (!$_SERVER['PHP_SELF'] &amp;&amp; $_SERVER['PWD']) {
   $clientFolderName = $argv[1];
   $projectFolderName = $argv[2];
   $installHome = $argv[3];
   $docRoot = $argv[4];
   $includeCode = '&lt;' . &quot;?\n\n define('CLIENT_FOLDER_NAME', 
\&quot;$clientFolderName\&quot;);\n define('PROJECT_FOLDER_NAME', 
\&quot;$projectFolderName\&quot;);\n\n ?&quot; . '&gt;';
   $fileID = 
@fopen(&quot;$docRoot/$clientFolderName/$projectFolderName/include/constants.inc.php&quot;, 
'w');
   @fputs($fileID, $includeCode); @fflush($fileID); @fclose($fileID);
  }
?&gt;
[/PHP]

Then once this runs it creates a PHP script within the docroot called 
&quot;constants.inc.php&quot; that is included by &quot;index.php&quot; to, you guessed it, 
define constants.

[from index.php:]
[PHP]
 /*---------------------------------------------------------------------------------------------------------------------------------
    This script will now look for a file called 'constants.inc.php' in 
the /include folder.  This script had to have
    already been generated by the user/admin running &quot;install.php&quot; from 
the command line.
  
----------------------------------------------------------------------------------------------------------------------------------*/ 

  if (!defined('CLIENT_FOLDER_NAME') || !defined('PROJECT_FOLDER_NAME')) 
@include('./include/constants.inc.php');
  if (!defined('CLIENT_FOLDER_NAME') || !defined('PROJECT_FOLDER_NAME')) 
die('You must first run &quot;install.php&quot; from the command line - please see 
admin');
  // BOTH CONSTANTS EXIST AS SET BY install.php - SET TO LOCAL VARIABLES
  list($clientFolderName, $projectFolderName) = 
array(CLIENT_FOLDER_NAME, PROJECT_FOLDER_NAME);
  
  //---END OF CONSTANTS RETRIEVAL 
BLOCK--------------------------------------------------------------------------------------------------------------------------------------------
[/PHP]

*whew* so simple it naturally escaped me.  Thanx
Phil

-- 
---------------------------------------------------------------------------------
Phil Powell
Multimedia Programmer
BPX Technologies, Inc.
#: (703) 709-7218 x107 
Fax: (703) 709-7219

	


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009532.html">[nycphp-talk] How do you do the equivalent of $PHP_SELF for PHP	scripts not in docroot?
</A></li>
	<LI>Next message: <A HREF="009533.html">[nycphp-talk] Smarty
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9534">[ date ]</a>
              <a href="thread.html#9534">[ thread ]</a>
              <a href="subject.html#9534">[ subject ]</a>
              <a href="author.html#9534">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
