<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] OT: Javascript - Opening a new window,	but the window name is getting lost with Facebook.com
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2010-September/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20OT%3A%20Javascript%20-%20Opening%20a%20new%20window%2C%0A%09but%20the%20window%20name%20is%20getting%20lost%20with%20Facebook.com&In-Reply-To=%3CAE51C1EE-932B-44A4-8E38-569AFAC9F408%40beaffinitive.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030326.html">
   <LINK REL="Next"  HREF="030328.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] OT: Javascript - Opening a new window,	but the window name is getting lost with Facebook.com</H1>
    <B>Rob Marscher</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20OT%3A%20Javascript%20-%20Opening%20a%20new%20window%2C%0A%09but%20the%20window%20name%20is%20getting%20lost%20with%20Facebook.com&In-Reply-To=%3CAE51C1EE-932B-44A4-8E38-569AFAC9F408%40beaffinitive.com%3E"
       TITLE="[nycphp-talk] OT: Javascript - Opening a new window,	but the window name is getting lost with Facebook.com">rmarscher at beaffinitive.com
       </A><BR>
    <I>Wed Sep 29 10:17:42 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="030326.html">[nycphp-talk] OT: Javascript - Opening a new window, but the window name is getting lost with Facebook.com
</A></li>
        <LI>Next message: <A HREF="030328.html">[nycphp-talk] OT: Javascript - Opening a new window,	but the window name is getting lost with Facebook.com
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30327">[ date ]</a>
              <a href="thread.html#30327">[ thread ]</a>
              <a href="subject.html#30327">[ subject ]</a>
              <a href="author.html#30327">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sep 29, 2010, at 1:56 AM, David Roth wrote:
&gt;<i> I was successfully using Javascript code for years to open a new browser window and assign it a unique name without any problems. That is, until now. :-)
</I>&gt;<i> The following Javascript code works properly with any other website I've tried, except for facebook.com
</I>
Hi David,

I agree with some of the other suggestions that a modal javascript popup or just using a regular link are the more standard ways of doing this nowadays.  However, I was curious why your code wasn't working.  

Here it is:

In the javascript on Facebook, in addition to checking if window == window.top to break out of iframes, it also sets the window.name to it's own custom name.

When you do window.open(url, name) from your site, it searches the browser windows for one named after what you passed in.  But Facebook has changed the name of your window, so it no longer works.  You can do the same thing on your site by putting this javascript in your html head:

&lt;script type=&quot;text/javascript&quot;&gt;
window.name = &quot;hahaThisIsMyWindow&quot;; // obviously, you could name it whatever you want
&lt;/script&gt;


However, there is a way around it by referencing a DOMWindow object returned by window.open rather than just relying on the name.  This should work for you (note that the stuff in the &lt;script&gt; tag only needs to be included once on your page):

&lt;script type=&quot;text/javascript&quot;&gt;
var modalWindows = {};
function openModalUrl(url, name)
{
	if (modalWindows[name] == undefined || modalWindows[name].closed) { 
		modalWindows[name] = window.open(
			url, 
			name, 
			'width=600, \
			height=500, \
			directories=no, \
			location=no, \
			menubar=no, \
			resizable=no, \
			scrollbars=1, \
			status=no, \
			toolbar=no'
		); 
	} else {
		modalWindows[name].focus();
	}
	return false;
}
&lt;/script&gt;

&lt;a href=&quot;#&quot; onclick=&quot;return openModalUrl('<A HREF="http://facebook.com/USERNAME_GOES_HERE">http://facebook.com/USERNAME_GOES_HERE</A>', 'facebook');&quot;&gt;Become a friend on Facebook&lt;/a&gt;


-Rob



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030326.html">[nycphp-talk] OT: Javascript - Opening a new window, but the window name is getting lost with Facebook.com
</A></li>
	<LI>Next message: <A HREF="030328.html">[nycphp-talk] OT: Javascript - Opening a new window,	but the window name is getting lost with Facebook.com
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30327">[ date ]</a>
              <a href="thread.html#30327">[ thread ]</a>
              <a href="subject.html#30327">[ subject ]</a>
              <a href="author.html#30327">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
