<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] multiple classes writing to a common container
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2004-March/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20multiple%20classes%20writing%20to%20a%20common%20container&In-Reply-To=%3C405B3DAC.5090201%40next-online.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008526.html">
   <LINK REL="Next"  HREF="008513.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] multiple classes writing to a common container</H1>
    <B>Chris Hubbard</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20multiple%20classes%20writing%20to%20a%20common%20container&In-Reply-To=%3C405B3DAC.5090201%40next-online.net%3E"
       TITLE="[nycphp-talk] multiple classes writing to a common container">chubbard at next-online.net
       </A><BR>
    <I>Fri Mar 19 13:36:28 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="008526.html">[nycphp-talk] Re: php5 rc1 download problems ...
</A></li>
        <LI>Next message: <A HREF="008513.html">[nycphp-talk] multiple classes writing to a common container
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8501">[ date ]</a>
              <a href="thread.html#8501">[ thread ]</a>
              <a href="subject.html#8501">[ subject ]</a>
              <a href="author.html#8501">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>All,
I've run into an interesting (for me) problem.  And I thought you all 
might enjoy the solution that I used.

Here's the scenario:
I've got multiple classes that are called by a single php file.  I've 
got a &quot;debug&quot; class that I would like to use to collect debug 
information that is generated by the multiple classes.   Then if the 
page is set to debug &quot;on&quot; then the collected debug information from all 
the classes should be displayed out in one large dump to the screen 
(either as a separate window aka Smarty), or at the bottom of the 
screen.  I'd like to have the multiple classes &quot;know&quot; that they are in 
debug mode vs regular mode.
I've tried a number of approaches and I have read the manual and 
tutorials.  I've experimented with static and pass by reference.  I 
don't think the &quot;extends&quot; structure will work for me, as I will have 
multiple classes, and there's no inherent relationship between the 
classes (other than they're being called by the same page).

I spent a bunch of time spinning around on this, until I changed how I 
was passing the reference of the collector to the working classes.

Here's the (working) code:
&lt;?php

/**
* various tests
*/

class Collector
{
    var $collection;
   
    function addItem($item)
    {
        $this-&gt;collection[] = $item;
        return TRUE;
    }
   
    function getCollection()
    {
        echo &quot;&lt;pre&gt;&quot;;
        print_r($this-&gt;collection);
        echo &quot;&lt;/pre&gt;&quot;;
        //return TRUE;
    }
}

class testA
{
    /*
    * this class takes three numbers and checks to see
    * if the first two add up to the last one
    */
    var $collection;
   
    function testA($a)
    {
       
        /* $a is the reference to the Collector object */
        $this-&gt;collection =&amp; $a;
    }
   
    function test($a, $b, $c)
    {
        if ($c == ($a + $b))
        {
            echo &quot; testA is true&lt;br&gt;&quot;;
            return TRUE;
        }else{
            echo &quot; testA is false&lt;br&gt;&quot;;
            $this-&gt;error($a .&quot; + &quot;. $b .&quot; != &quot;. $c);
            return FALSE;
        }
    }

    function error($text)
    {
        /* adds the text to the common collection */
        $tmp = $this-&gt;collection-&gt;addItem($text);
        return TRUE;
    }
}

class testB
{
    /*
    * this class takes three numbers and checks to see
    * if subtracting the first from the second equals
    * the last one
    */
    var $collection;

    function testB($a)
    {
        /* $a is the reference to the Collector object */
        $this-&gt;collection =&amp; $a;
    }

    function test($a, $b, $c)
    {
        if ($c == ($a - $b))
        {
            echo &quot; testB is true&lt;br&gt;&quot;;
            return TRUE;
        }else{
            echo &quot; testB is false&lt;br&gt;&quot;;
            $this-&gt;error($a .&quot; - &quot;. $b .&quot; != &quot;. $c);
            return FALSE;
        }
    }

    function error($text)
    {
        /* adds the text to the common collection */
        $tmp = $this-&gt;collection-&gt;addItem($text);
        return TRUE;
    }
}


$coll = new Collector();  // create a new collection
$testA = new testA(&amp;$coll);  // pass the reference to the common collection
$testB = new testB(&amp;$coll);  // pass the same collection reference to 
this class

/* create an array of test data */
$tests = array (
0 =&gt; array(1, 1, 2), 1 =&gt; array (1, 2, 3), 2 =&gt; array(1, 3, 4),
3 =&gt; array(1, 3, 2), 4 =&gt; array (1, 4, 3), 5 =&gt; array(7, 3, 4)
);

$count = count($tests);

$msg = 0;

/* run through the tests */
for ($x=0; $x&lt;$count; $x++)
{
    if (!$testA-&gt;test($tests[$x][0],$tests[$x][1],$tests[$x][2])) // 
addition test
    {
        $msg++;  // if the test fails then increment the flag, so we 
know to display the collection
    }
    if (!$testB-&gt;test($tests[$x][0],$tests[$x][1],$tests[$x][2])) // 
subtraction test
    {
        $msg++; // if the test fails then increment the flag, so we know 
to display the collection
    }
}

if ($msg &gt; 0)
{
    echo $coll-&gt;getCollection();
}

?&gt;

This code outputs:
testA is true
testB is false
testA is true
testB is false
testA is true
testB is false
testA is false
testB is false
testA is false
testB is false
testA is false
testB is true

Array
(
    [0] =&gt; 1 - 1 != 2
    [1] =&gt; 1 - 2 != 3
    [2] =&gt; 1 - 3 != 4
    [3] =&gt; 1 + 3 != 2
    [4] =&gt; 1 - 3 != 2
    [5] =&gt; 1 + 4 != 3
    [6] =&gt; 1 - 4 != 3
    [7] =&gt; 7 + 3 != 4
)


-- 
Chris Hubbard
Sr Software Developer
Next Online
425 563 4153



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008526.html">[nycphp-talk] Re: php5 rc1 download problems ...
</A></li>
	<LI>Next message: <A HREF="008513.html">[nycphp-talk] multiple classes writing to a common container
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8501">[ date ]</a>
              <a href="thread.html#8501">[ thread ]</a>
              <a href="subject.html#8501">[ subject ]</a>
              <a href="author.html#8501">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
