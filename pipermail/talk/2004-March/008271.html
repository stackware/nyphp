<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] online password replacement
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2004-March/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20online%20password%20replacement&In-Reply-To=%3C018101c402fa%24c4275c90%246f01a8c0%40iifwp.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008285.html">
   <LINK REL="Next"  HREF="008267.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] online password replacement</H1>
    <B>Allen Shaw</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20online%20password%20replacement&In-Reply-To=%3C018101c402fa%24c4275c90%246f01a8c0%40iifwp.local%3E"
       TITLE="[nycphp-talk] online password replacement">ashaw at iifwp.org
       </A><BR>
    <I>Fri Mar  5 16:42:32 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="008285.html">[nycphp-talk] online password replacement
</A></li>
        <LI>Next message: <A HREF="008267.html">[nycphp-talk] using $_SERVER['HTTP_REFERER']
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8271">[ date ]</a>
              <a href="thread.html#8271">[ thread ]</a>
              <a href="subject.html#8271">[ subject ]</a>
              <a href="author.html#8271">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Okay, I'm thinking to do something like this:

I need a 3-column table, something like this:

CREATE TABLE `pwd_request` (
  `requestid` int(11) NOT NULL auto_increment,
  `userid` int(11) NOT NULL default '',
  `pwd` varchar(32) NOT NULL default '',
  PRIMARY KEY  (`requestid`)
) TYPE=MyISAM AUTO_INCREMENT=1;

* user requests password replacement
* password is reset to random value, which is stored in a new record,
    along with userid of this user
* get pwd_request.requestid for that new record
* using email address on file, a link like this is sent to the user:
  &lt;? echo
&quot;<A HREF="http://mydomain.com/password.php?id=$new_request_id&amp;pwd=$rand_pwd&amp;userid=$u">http://mydomain.com/password.php?id=$new_request_id&amp;pwd=$rand_pwd&amp;userid=$u</A>
serid&quot;; ?&gt;

When the user accesses that given URL
* password.php queries for a record in pwd_request matching on 3 fields
* if record is found, delete that record and display form to receive new
password
    (If no record is found, display error message and accept no changes.
This
    way we prevent the link from being used twice.)
* apply new password to user's actual record.

The mechanics of this definitely make sense to me, and it seems safe enough.
Thanks Dan, Chris, and others for your input.

- Allen

&gt;<i> --- Dan Cech &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">dcech at phpwerx.net</A>&gt; wrote:
</I>&gt;<i> &gt; A fairly standard approach is to simply generate a new random password
</I>&gt;<i> &gt; and send it to the email address you have on file.
</I>&gt;<i>
</I>&gt;<i> You probably also want to have a unique link in the email (or some similar
</I>&gt;<i> mechanism) that the user needs to visit in order to activate the new
</I>&gt;<i> password. Otherwise, random people can reset your users' passwords, which
</I>&gt;<i> is a hassle for them.
</I>&gt;<i>
</I>&gt;<i> Chris
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008285.html">[nycphp-talk] online password replacement
</A></li>
	<LI>Next message: <A HREF="008267.html">[nycphp-talk] using $_SERVER['HTTP_REFERER']
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8271">[ date ]</a>
              <a href="thread.html#8271">[ thread ]</a>
              <a href="subject.html#8271">[ subject ]</a>
              <a href="author.html#8271">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
