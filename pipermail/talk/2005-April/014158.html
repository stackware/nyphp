<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] PHP 5 singleton/destructor question
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2005-April/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20PHP%205%20singleton/destructor%20question&In-Reply-To=%3CPine.BSF.4.58.0504011020400.70420%40emra.pair.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014157.html">
   <LINK REL="Next"  HREF="014159.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] PHP 5 singleton/destructor question</H1>
    <B>David Mintz</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20PHP%205%20singleton/destructor%20question&In-Reply-To=%3CPine.BSF.4.58.0504011020400.70420%40emra.pair.com%3E"
       TITLE="[nycphp-talk] PHP 5 singleton/destructor question">dmintz at davidmintz.org
       </A><BR>
    <I>Fri Apr  1 10:28:39 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="014157.html">[nycphp-talk] PHP 5 singleton/destructor question
</A></li>
        <LI>Next message: <A HREF="014159.html">[nycphp-talk] PHP 5 singleton/destructor question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14158">[ date ]</a>
              <a href="thread.html#14158">[ thread ]</a>
              <a href="subject.html#14158">[ subject ]</a>
              <a href="author.html#14158">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>From <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">dmintz at davidmintz.org</A> Fri Apr  1 10:20:24 2005
</I>Date: Fri, 1 Apr 2005 10:19:36 -0500 (EST)
From: David Mintz &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">dmintz at davidmintz.org</A>&gt;
To: Daniel J Cain Jr. &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">dan at cain.sh</A>&gt;
Subject: Re: [nycphp-talk] PHP 5 singleton/destructor question

On Fri, 1 Apr 2005, Daniel J Cain Jr. wrote:

&gt;<i> PHP tracks the number of references to a variable, when there are no
</I>&gt;<i> more references it can safely be destroyed by the Zend engine.  So the
</I>&gt;<i> count should be at 2. One for the instance you grab in the main script
</I>&gt;<i> and another for the static reference inside the class definition.  You
</I>&gt;<i> need to run two unsets(one inside the class, and one outside the class)
</I>&gt;<i> to make that variables reference count == 0.
</I>
I think I get what you're saying... or maybe not. No instantiation, no
destructor runs -- I understand &quot;static&quot;. Yet I believe an object of
class MyDatabase is instantiated in the example I posted earlier, and it
has a __destruct()  method, so its __destruct() should run when PHP
decides the reference count is zero. Does the reference count NOT reach
zero when the script terminates, no matter what? If you haven't explicitly
unset() or set to NULL, php cleans up the garbage for you before the
process ends, no?

Maybe the register_shutdown_function() hack isn't such a bad solution.

Thanks,

---
David Mintz
<A HREF="http://davidmintz.org/">http://davidmintz.org/</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014157.html">[nycphp-talk] PHP 5 singleton/destructor question
</A></li>
	<LI>Next message: <A HREF="014159.html">[nycphp-talk] PHP 5 singleton/destructor question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14158">[ date ]</a>
              <a href="thread.html#14158">[ thread ]</a>
              <a href="subject.html#14158">[ subject ]</a>
              <a href="author.html#14158">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
