<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Apache/PHP Authentication - Again
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2003-January/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Apache/PHP%20Authentication%20-%20Again&In-Reply-To=%3C20030131070021.29003.h010.c000.wm%40mail.weinberg.com.criticalpath.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002289.html">
   <LINK REL="Next"  HREF="002291.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Apache/PHP Authentication - Again</H1>
    <B>paul at weinberg.com</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Apache/PHP%20Authentication%20-%20Again&In-Reply-To=%3C20030131070021.29003.h010.c000.wm%40mail.weinberg.com.criticalpath.net%3E"
       TITLE="[nycphp-talk] Apache/PHP Authentication - Again">paul at weinberg.com
       </A><BR>
    <I>Fri Jan 31 10:00:19 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="002289.html">[nycphp-talk] Apache/PHP Authentication - Again
</A></li>
        <LI>Next message: <A HREF="002291.html">[nycphp-talk] Problem with xml_parse_into_struct
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2290">[ date ]</a>
              <a href="thread.html#2290">[ thread ]</a>
              <a href="subject.html#2290">[ subject ]</a>
              <a href="author.html#2290">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>OK, here is a silly idea:

After you authenticate in your code, you make an HTTP
request to yourself to get the file.  That should go
through Apache again.  You have to supply the
authentication headers.  You then just stream the byes
back to the client.

NOTE:  There ia deadlock potential if the number of
Apache children is set too low.

Paul

BTW, there is always mod_perl :)

On Fri, 31 Jan 2003 06:57:03 -0800 (PST), &quot;Griffith
Feeney&quot; wrote:

&gt;<i> 
</I>&gt;<i> Thanks to those who replied to my earlier post
</I>(below).
&gt;<i> It's taken me a
</I>&gt;<i> while to get on with this.
</I>&gt;<i> 
</I>&gt;<i> The files I need to protect are mostly binary, so I
</I>&gt;<i> can't use a solution
</I>&gt;<i> that involves inserting authentication code at the top
</I>&gt;<i> of PHP pages.
</I>&gt;<i> 
</I>&gt;<i> The approach suggested in
</I>&gt;<i> &lt;a
</I>href=&quot;<A HREF="http://mail.weinberg.com/jump/http://www.zend.com/zend/trick/tricks-august-2001.php">http://mail.weinberg.com/jump/http://www.zend.com/zend/trick/tricks-august-2001.php</A>&quot;&gt;<A HREF="http://www.zend.com/zend/trick/tricks-august-2001.php&lt;/a">http://www.zend.com/zend/trick/tricks-august-2001.php&lt;/a</A>&gt;
&gt;<i> (put the files
</I>&gt;<i> outside the document root and use PHP to read them,
</I>&gt;<i> supply headers, and
</I>&gt;<i> forward) will work, but it would be much simpler to be
</I>&gt;<i> able to password
</I>&gt;<i> protect all files in any specified set of directories
</I>&gt;<i> using Apache
</I>&gt;<i> htaccess. The problem with this is updating the user
</I>&gt;<i> list, which is large
</I>&gt;<i> and in MySQL. The web hosting service doesn't support
</I>&gt;<i> mod_auth_mysql.
</I>&gt;<i> 
</I>&gt;<i> What I would like to do is
</I>&gt;<i> 
</I>&gt;<i> 1 set up .htaccess protected directories with a single
</I>&gt;<i> user name and
</I>&gt;<i> password,
</I>&gt;<i> 
</I>&gt;<i> 2 use a PHP page to authenticate users (user by user)
</I>&gt;<i> against a MySQL
</I>&gt;<i> database, and
</I>&gt;<i> 
</I>&gt;<i> 3 have the PHP page send requests from authenticated
</I>&gt;<i> users to the server
</I>&gt;<i> with the basic authentication header, so that the
</I>&gt;<i> Apache authentication
</I>&gt;<i> window does *not* pop-up, the server having already
</I>&gt;<i> received basic
</I>&gt;<i> authentication credentials.
</I>&gt;<i> 
</I>&gt;<i> This last step is not possible directly, but I thought
</I>&gt;<i> that it might be
</I>&gt;<i> accomplished indirectly using a redirect header, like
</I>&gt;<i> this.
</I>&gt;<i> 
</I>&gt;<i> &lt;?php header('Location:
</I>&gt;<i> &lt;a
</I>href=&quot;<A HREF="http://mail.weinberg.com/jump/http://www.domainname.com/members/membershome.php">http://mail.weinberg.com/jump/http://www.domainname.com/members/membershome.php</A>&quot;&gt;<A HREF="http://www.domainname.com/members/membershome.php&lt;/a">http://www.domainname.com/members/membershome.php&lt;/a</A>&gt;');
&gt;<i>       header('Authorization:
</I>base64_encode(&quot;abc:123&quot;)');
&gt;<i> ?&gt;
</I>&gt;<i> 
</I>&gt;<i> This doesn't work. Is there any way to make this idea
</I>&gt;<i> work?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> --- Unsubscribe at &lt;a
</I>href=&quot;<A HREF="http://mail.weinberg.com/jump/http://nyphp.org/list">http://mail.weinberg.com/jump/http://nyphp.org/list</A>&quot;&gt;<A HREF="http://nyphp.org/list&lt;/a">http://nyphp.org/list&lt;/a</A>&gt;/ ---

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002289.html">[nycphp-talk] Apache/PHP Authentication - Again
</A></li>
	<LI>Next message: <A HREF="002291.html">[nycphp-talk] Problem with xml_parse_into_struct
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2290">[ date ]</a>
              <a href="thread.html#2290">[ thread ]</a>
              <a href="subject.html#2290">[ subject ]</a>
              <a href="author.html#2290">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
