<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Apache Mod-Proxy Access Control
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2008-May/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Apache%20Mod-Proxy%20Access%20Control&In-Reply-To=%3C799abcd40805291324k23bf1226ud2fa443ce6f3e077%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025892.html">
   <LINK REL="Next"  HREF="025895.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Apache Mod-Proxy Access Control</H1>
    <B>Joe Leo</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Apache%20Mod-Proxy%20Access%20Control&In-Reply-To=%3C799abcd40805291324k23bf1226ud2fa443ce6f3e077%40mail.gmail.com%3E"
       TITLE="[nycphp-talk] Apache Mod-Proxy Access Control">joeleo724 at gmail.com
       </A><BR>
    <I>Thu May 29 16:24:38 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="025892.html">[nycphp-talk] Apache Mod-Proxy Access Control
</A></li>
        <LI>Next message: <A HREF="025895.html">[nycphp-talk] Apache Mod-Proxy Access Control
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25893">[ date ]</a>
              <a href="thread.html#25893">[ thread ]</a>
              <a href="subject.html#25893">[ subject ]</a>
              <a href="author.html#25893">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Chis, thanks for your reply/comments...

&gt;<i> But wait, you said www was acting as a reverse proxy, so why would
</I>&gt;<i> someone go directly to server1?
</I>&gt;<i>
</I>
To answer your question above, typically, users will visit main site which
has webpage links that would take user to inside server via the proxy.
However, that URL is shown/known when user mouse over the links. So, it can
easily be used for future visits to server-x.mainsite.com.... And, I
suspect, web engines will pick those links up as well.

And, even if users that access site via main site they may not have
authenticated before clicking on the link that would take them to the
backend server.

So, you are right, it seems that I would need something like mod_rewrite
and/or the prepend script you mentioned. I've struggled to get my proxy
working and have not yet played around with mod_rewrite. Also, the pre-pend
script you refered to - Can you give me more info on this?

Is there a sample of this script you can share and how it would work? Would
really appreciate any help on this!

Joe

On Thu, May 29, 2008 at 4:08 PM, csnyder &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">chsnyder at gmail.com</A>&gt; wrote:

&gt;<i> On Thu, May 29, 2008 at 2:03 PM, Joe Leo &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">joeleo724 at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; The www.mainsite.com has my drupal users where they can sign-up and
</I>&gt;<i> &gt; authenticate. What I want is: If users enter url server1.mainsite.comthen
</I>&gt;<i> &gt; the proxy would somehow prompt users to first login. But, I'm not sure
</I>&gt;<i> how
</I>&gt;<i> &gt; this can be done/achieved. I would appreciate any comments/suggestions to
</I>&gt;<i> &gt; accomplish this.
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> It sounds tough, because the browser isn't going to send the
</I>&gt;<i> www.mainsite.com cookie to server1.mainsite.com.
</I>&gt;<i>
</I>&gt;<i> But wait, you said www was acting as a reverse proxy, so why would
</I>&gt;<i> someone go directly to server1?
</I>&gt;<i>
</I>&gt;<i> If all the connections go through www, you can use mod_rewrite to
</I>&gt;<i> check for existence of drupal's session cookie, and redirect to login
</I>&gt;<i> if not found.
</I>&gt;<i>
</I>&gt;<i> If someone knew the setup, they could fake the drupal cookie, so if
</I>&gt;<i> you're trying to protect something valuable using this scheme you may
</I>&gt;<i> need to consider a different mechanism, such as an auto-prepend script
</I>&gt;<i> that checks if the session is valid.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Chris Snyder
</I>&gt;<i> <A HREF="http://chxo.com/">http://chxo.com/</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> New York PHP Community Talk Mailing List
</I>&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;<i>
</I>&gt;<i> NYPHPCon 2006 Presentations Online
</I>&gt;<i> <A HREF="http://www.nyphpcon.com">http://www.nyphpcon.com</A>
</I>&gt;<i>
</I>&gt;<i> Show Your Participation in New York PHP
</I>&gt;<i> <A HREF="http://www.nyphp.org/show_participation.php">http://www.nyphp.org/show_participation.php</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.nyphp.org/pipermail/talk/attachments/20080529/dd2ca094/attachment.html">http://lists.nyphp.org/pipermail/talk/attachments/20080529/dd2ca094/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025892.html">[nycphp-talk] Apache Mod-Proxy Access Control
</A></li>
	<LI>Next message: <A HREF="025895.html">[nycphp-talk] Apache Mod-Proxy Access Control
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25893">[ date ]</a>
              <a href="thread.html#25893">[ thread ]</a>
              <a href="subject.html#25893">[ subject ]</a>
              <a href="author.html#25893">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
