<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Apache Mod-Proxy Access Control
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2008-May/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Apache%20Mod-Proxy%20Access%20Control&In-Reply-To=%3C799abcd40805300954j543435celf801aba76166a347%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025893.html">
   <LINK REL="Next"  HREF="025896.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Apache Mod-Proxy Access Control</H1>
    <B>Joe Leo</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Apache%20Mod-Proxy%20Access%20Control&In-Reply-To=%3C799abcd40805300954j543435celf801aba76166a347%40mail.gmail.com%3E"
       TITLE="[nycphp-talk] Apache Mod-Proxy Access Control">joeleo724 at gmail.com
       </A><BR>
    <I>Fri May 30 12:54:18 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="025893.html">[nycphp-talk] Apache Mod-Proxy Access Control
</A></li>
        <LI>Next message: <A HREF="025896.html">[nycphp-talk] Apache Mod-Proxy Access Control
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25895">[ date ]</a>
              <a href="thread.html#25895">[ thread ]</a>
              <a href="subject.html#25895">[ subject ]</a>
              <a href="author.html#25895">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Chris,

Wanted to see if you can help me implement the mod-rewrite and/or the
pre-pend script you mentioned below. I'm starting to read up on using
mod-rewrite and it seems it could take a bit of time to master it. I am
hoping to get a sample setup that would work for me. Thanks!

Joe

On Thu, May 29, 2008 at 2:24 PM, Joe Leo &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">joeleo724 at gmail.com</A>&gt; wrote:

&gt;<i> Chis, thanks for your reply/comments...
</I>&gt;<i>
</I>&gt;&gt;<i> But wait, you said www was acting as a reverse proxy, so why would
</I>&gt;&gt;<i> someone go directly to server1?
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> To answer your question above, typically, users will visit main site which
</I>&gt;<i> has webpage links that would take user to inside server via the proxy.
</I>&gt;<i> However, that URL is shown/known when user mouse over the links. So, it can
</I>&gt;<i> easily be used for future visits to server-x.mainsite.com.... And, I
</I>&gt;<i> suspect, web engines will pick those links up as well.
</I>&gt;<i>
</I>&gt;<i> And, even if users that access site via main site they may not have
</I>&gt;<i> authenticated before clicking on the link that would take them to the
</I>&gt;<i> backend server.
</I>&gt;<i>
</I>&gt;<i> So, you are right, it seems that I would need something like mod_rewrite
</I>&gt;<i> and/or the prepend script you mentioned. I've struggled to get my proxy
</I>&gt;<i> working and have not yet played around with mod_rewrite. Also, the pre-pend
</I>&gt;<i> script you refered to - Can you give me more info on this?
</I>&gt;<i>
</I>&gt;<i> Is there a sample of this script you can share and how it would work? Would
</I>&gt;<i> really appreciate any help on this!
</I>&gt;<i>
</I>&gt;<i> Joe
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Thu, May 29, 2008 at 4:08 PM, csnyder &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">chsnyder at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> On Thu, May 29, 2008 at 2:03 PM, Joe Leo &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">joeleo724 at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; The www.mainsite.com has my drupal users where they can sign-up and
</I>&gt;&gt;<i> &gt; authenticate. What I want is: If users enter url server1.mainsite.comthen
</I>&gt;&gt;<i> &gt; the proxy would somehow prompt users to first login. But, I'm not sure
</I>&gt;&gt;<i> how
</I>&gt;&gt;<i> &gt; this can be done/achieved. I would appreciate any comments/suggestions
</I>&gt;&gt;<i> to
</I>&gt;&gt;<i> &gt; accomplish this.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It sounds tough, because the browser isn't going to send the
</I>&gt;&gt;<i> www.mainsite.com cookie to server1.mainsite.com.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> But wait, you said www was acting as a reverse proxy, so why would
</I>&gt;&gt;<i> someone go directly to server1?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If all the connections go through www, you can use mod_rewrite to
</I>&gt;&gt;<i> check for existence of drupal's session cookie, and redirect to login
</I>&gt;&gt;<i> if not found.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If someone knew the setup, they could fake the drupal cookie, so if
</I>&gt;&gt;<i> you're trying to protect something valuable using this scheme you may
</I>&gt;&gt;<i> need to consider a different mechanism, such as an auto-prepend script
</I>&gt;&gt;<i> that checks if the session is valid.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i> Chris Snyder
</I>&gt;&gt;<i> <A HREF="http://chxo.com/">http://chxo.com/</A>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> New York PHP Community Talk Mailing List
</I>&gt;&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> NYPHPCon 2006 Presentations Online
</I>&gt;&gt;<i> <A HREF="http://www.nyphpcon.com">http://www.nyphpcon.com</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Show Your Participation in New York PHP
</I>&gt;&gt;<i> <A HREF="http://www.nyphp.org/show_participation.php">http://www.nyphp.org/show_participation.php</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.nyphp.org/pipermail/talk/attachments/20080530/d3d6cf95/attachment.html">http://lists.nyphp.org/pipermail/talk/attachments/20080530/d3d6cf95/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025893.html">[nycphp-talk] Apache Mod-Proxy Access Control
</A></li>
	<LI>Next message: <A HREF="025896.html">[nycphp-talk] Apache Mod-Proxy Access Control
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25895">[ date ]</a>
              <a href="thread.html#25895">[ thread ]</a>
              <a href="subject.html#25895">[ subject ]</a>
              <a href="author.html#25895">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
