<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Force File Download HTTP Headers and IE Issue
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2003-September/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Force%20File%20Download%20HTTP%20Headers%20and%20IE%20Issue&In-Reply-To=%3C001f01c37328%2402b888c0%2468e4a144%40bronco%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005032.html">
   <LINK REL="Next"  HREF="005022.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Force File Download HTTP Headers and IE Issue</H1>
    <B>pswebcode, nyc</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Force%20File%20Download%20HTTP%20Headers%20and%20IE%20Issue&In-Reply-To=%3C001f01c37328%2402b888c0%2468e4a144%40bronco%3E"
       TITLE="[nycphp-talk] Force File Download HTTP Headers and IE Issue">psaw at pswebcode.com
       </A><BR>
    <I>Thu Sep  4 17:03:36 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="005032.html">[nycphp-talk] Force File Download HTTP Headers and IE Issue
</A></li>
        <LI>Next message: <A HREF="005022.html">[nycphp-talk] Force File Download HTTP Headers and IE Issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5061">[ date ]</a>
              <a href="thread.html#5061">[ thread ]</a>
              <a href="subject.html#5061">[ subject ]</a>
              <a href="author.html#5061">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>An update on this topic:

I finally just set the content-type header to: application/zip

It works. It messes up the file name in the Save As... dialog, but it works.

Thank you all.

PSaw

-----Original Message-----
From: <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk-bounces at lists.nyphp.org</A> [mailto:<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk-bounces at lists.nyphp.org</A>] On
Behalf Of Marc Antony Vose
Sent: Wednesday, September 03, 2003 7:48 PM
To: <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">shiflett at php.net</A>; NYPHP Talk
Subject: Re: [nycphp-talk] Force File Download HTTP Headers and IE Issue


&gt;<i>--- Marc Antony Vose &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">suzerain at suzerain.com</A>&gt; wrote:
</I>&gt;&gt;<i>  It's worth pointing out, I suppose, that to some systems (i.e.,  
</I>&gt;&gt;<i> classic Mac OS), once you tell the browser that a JPEG (or PDF in  
</I>&gt;&gt;<i> your case) is &quot;application/octet-stream&quot;, it is no longer a JPEG  (or 
</I>&gt;&gt;<i> PDF).
</I>&gt;<i>
</I>&gt;<i>Can you explain that? I don't understand how it could matter after
</I>&gt;<i>the resource
</I>&gt;<i>has been downloaded and saved to the filesystem. Typically, the content
</I>type
&gt;<i>described in the HTTP response is used by the HTTP client only.
</I>&gt;<i>
</I>&gt;<i>I'm certainly not arguing, but I'd like that explained further if you 
</I>&gt;<i>are certain it is true.
</I>&gt;<i>
</I>

Well, the whole file metadata thing is a huge can of worms.

So, before I say anything to explain, I'll say:  (1) This probably is 
only a problem in this instance with Classic Mac OS (meaning, prior 
to X).  Therefore, your amount of caring might be minimal.  I say, 
test it on every single browser you care about supporting, and if it 
works, then you've made your choice.

Anyway, the explanation is lengthy, and it's a hot debate in the Mac 
community right now, because Apple is (in a lot of people's minds) 
moving backwards by adopting the Windows/Unix file extension setup, 
instead of creating a more sophisticated file metadata architecture 
in the OS.

The way files are organized in Mac OS is that they have a data fork 
and a resource fork.  Unix and Windows systems don't have this, so 
generally when files from a Mac are put on a Web site, the resource 
fork is stripped.  (Mac OS X, by the way, can utilize the resource 
fork if present, and then has a backup mapping from the extension. 
This is a bit of an oversimplification, but it is pretty much 
accurate.)

Anyway, as Brian said earlier, &quot;stupid Mac resource forks&quot;.  And, in 
this case, it sucks for the programmer, because it makes life more 
difficult if you choose to care about it.

Then again, it could be argued that calling a PDF an &quot;octet-stream&quot; 
just to get around file download limitations of the browser maybe 
isn't the best solution from the standpoint of interoperability and 
just &quot;the way things ought to be done&quot;, so that everything is certain 
to work on future (as yet undesigned) systems, and so forth.

IMHO opinion, MIME types are there for a reason, and for the good of 
standards and interoperability, people should be sending out the 
proper MIME types with the file, instead of trying to fool the 
browser into doing something else.

So, if I was doing this project, my choice would probably be to ZIP 
the file, especially since ZIP files seem to be so pervasive these 
days that they are auto-extracted anyway. But, to each his/her own, 
and I am not meaning to be critical, or anything.

So, anyway, what most Mac browsers seemed to be doing (under OS 9 and 
earlier) is this:  If they received an octet stream (or a generic 
data stream), if they could determine the file type, they appeared to 
add a resource fork onto the file (sometimes) which allowed the OS to 
map the file properly.

However, many times, the file would just be downloaded and end up 
with the blank page icon which, when clicked, wouldn't open.  (I've 
specifically seen this problem with PDF files, by the way.)

Now, to get religious for a bit:

The main advantage of the resource fork becomes clear when you use a 
Mac on a daily basis.  The thing is, in Windows, if you double-click 
a JPG...any JPG...it opens with the program that's the default for 
opening JPEGs.  Obviously, this is silly, because you might want to 
have one JPEG associated with Photoshop and another associated with 
Preview, or whatever.  That's what the resource fork allows the OS to 
do:  separate the type of file from the creator of the file.

It also frees the user from stupidly having to have a file extension 
on every file.  So, you can just call your file &quot;Letter to Bob 
Jones&quot;, rather than &quot;Letter to Bob Jones.doc&quot;.  Just easier from a 
user's standpoint.

There was a lengthy article on ArsTechnica about this a while ago.

I have my own opinions on file metadata which I won't go into now.  ;)

Cheers,

Marc

_______________________________________________
talk mailing list
<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk at lists.nyphp.org</A> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005032.html">[nycphp-talk] Force File Download HTTP Headers and IE Issue
</A></li>
	<LI>Next message: <A HREF="005022.html">[nycphp-talk] Force File Download HTTP Headers and IE Issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5061">[ date ]</a>
              <a href="thread.html#5061">[ thread ]</a>
              <a href="subject.html#5061">[ subject ]</a>
              <a href="author.html#5061">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
