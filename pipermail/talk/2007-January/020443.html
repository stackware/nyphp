<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] sendmail and php mail
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2007-January/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20sendmail%20and%20php%20mail&In-Reply-To=%3C459D97BF.3050205%40omnistep.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020436.html">
   <LINK REL="Next"  HREF="020444.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] sendmail and php mail</H1>
    <B>Rolan Yang</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20sendmail%20and%20php%20mail&In-Reply-To=%3C459D97BF.3050205%40omnistep.com%3E"
       TITLE="[nycphp-talk] sendmail and php mail">rolan at omnistep.com
       </A><BR>
    <I>Thu Jan  4 19:11:43 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="020436.html">[nycphp-talk] sendmail and php mail
</A></li>
        <LI>Next message: <A HREF="020444.html">[nycphp-talk] sendmail and php mail
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20443">[ date ]</a>
              <a href="thread.html#20443">[ thread ]</a>
              <a href="subject.html#20443">[ subject ]</a>
              <a href="author.html#20443">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE> From what I gather, your web server's sendmail is intercepting the the 
email instead of routing it to the correct mail server because it has 
the same domain name as the recipient address? You need to manually 
create a rule in the sendmail to override that so it routes all email 
addressed to &quot;@yourdomain.com&quot; over to the correct external mail server. 
See the sendmail section of 
<A HREF="http://www.mail-abuse.com/an_rteoutgoing.html">http://www.mail-abuse.com/an_rteoutgoing.html</A> for an idea. It's been a 
long time since I hacked sendmail.

~Rolan




Mark Armendariz wrote:
&gt;<i> Happy 2007, everyone.
</I>&gt;<i>
</I>&gt;<i> I know this isn't directly a php, issue, but I was hoping someone here 
</I>&gt;<i> might have some experience with such a thing.
</I>&gt;<i>
</I>&gt;<i> My client has their site on one server and their their email server at 
</I>&gt;<i> another hosting company.  I'm trying to send mail from a php script 
</I>&gt;<i> (using the mail function) on the site.
</I>&gt;<i>
</I>&gt;<i> I know sendmail is working correctly, as I can send email to my own 
</I>&gt;<i> domain as well as to any other I've tried.  This only applies to 
</I>&gt;<i> sending email internally.
</I>&gt;<i>
</I>&gt;<i> Sendmail has a recipient check.  Basically, it talks to the 
</I>&gt;<i> recipient's server and checks that the user exists before trying to 
</I>&gt;<i> send the message.  Unfortunately, since the hosting server has the 
</I>&gt;<i> same domain name as the mail server.
</I>&gt;<i>
</I>&gt;<i> ** Here's the php:
</I>&gt;<i>
</I>&gt;<i> $aHeaders = array();
</I>&gt;<i> $aHeaders[] = 'From: ' . EMAIL_DONATIONS;
</I>&gt;<i> $aHeaders[] = 'X-Mailer: PHP v' . phpversion();
</I>&gt;<i>
</I>&gt;<i> $sSubject = 'New Donation Submitted';
</I>&gt;<i> $sMessage = 'A new donation has been submitted through the site.';
</I>&gt;<i> mail(EMAIL_DONATIONS, $sSubject, $sMessage, implode(&quot;\n&quot;, $aHeaders), 
</I>&gt;<i> '-v');
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ** Here's the verbose output of sendmail (with my domain in place of 
</I>&gt;<i> the client's)
</I>&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">TheRecipient at enobrev.com...</A> Connecting to localhost.localdomain. via relay...
</I>&gt;<i> 220 ss07.shared.server-system.net &lt;<A HREF="http://ss07.shared.server-system.net">http://ss07.shared.server-system.net</A>&gt; ESMTP Sendmail 8.12.11.20060308/8.12.11; Thu, 4 Jan 2007 11:09:10 -0800
</I>&gt;<i>
</I>&gt;<i> &gt;&gt;&gt; EHLO laco.org &lt;<A HREF="http://laco.org">http://laco.org</A>&gt;
</I>&gt;<i> 250-ss07.shared.server-system.net &lt;<A HREF="http://250-ss07.shared.server-system.net">http://250-ss07.shared.server-system.net</A>&gt; Hello localhost.localdomain [127.0.0.1 &lt;<A HREF="http://127.0.0.1">http://127.0.0.1</A>&gt;
</I>&gt;<i> ], pleased to meet you
</I>&gt;<i> 250-ENHANCEDSTATUSCODES
</I>&gt;<i> 250-PIPELINING
</I>&gt;<i> 250-8BITMIME
</I>&gt;<i> 250-SIZE 15000000
</I>&gt;<i> 250-DSN
</I>&gt;<i> 250-ETRN
</I>&gt;<i> 250-AUTH LOGIN PLAIN
</I>&gt;<i> 250-STARTTLS
</I>&gt;<i> 250-DELIVERBY
</I>&gt;<i> 250 HELP
</I>&gt;<i> &gt;&gt;&gt; STARTTLS
</I>&gt;<i>
</I>&gt;<i> 220 2.0.0 Ready to start TLS
</I>&gt;<i> &gt;&gt;&gt; EHLO enobrev.com &lt;<A HREF="http://enobrev.com">http://enobrev.com</A>&gt;
</I>&gt;<i> 250-ss07.shared.server-system.net &lt;<A HREF="http://250-ss07.shared.server-system.net">http://250-ss07.shared.server-system.net</A>&gt; Hello localhost.localdomain [
</I>&gt;<i> 127.0.0.1 &lt;<A HREF="http://127.0.0.1">http://127.0.0.1</A>&gt;], pleased to meet you
</I>&gt;<i> 250-ENHANCEDSTATUSCODES
</I>&gt;<i> 250-PIPELINING
</I>&gt;<i> 250-8BITMIME
</I>&gt;<i> 250-SIZE 15000000
</I>&gt;<i> 250-DSN
</I>&gt;<i> 250-ETRN
</I>&gt;<i> 250-AUTH LOGIN PLAIN
</I>&gt;<i> 250-DELIVERBY
</I>&gt;<i> 250 HELP
</I>&gt;<i> &gt;&gt;&gt; MAIL From:&lt;
</I>&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">enobrev at enobrev.com</A> &lt;mailto:<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">enobrev at enobrev.com</A>&gt;&gt; SIZE=300 AUTH=<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">enobrev at enobrev.com</A> &lt;mailto:<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">enobrev at enobrev.com</A>&gt;
</I>&gt;<i> 250 2.1.0 &lt;
</I>&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">enobrev at enobrev.com</A> &lt;mailto:<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">enobrev at enobrev.com</A>&gt;&gt;... Sender ok
</I>&gt;<i> &gt;&gt;&gt; RCPT To:&lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">TheRecipient at enobrev.com</A> &lt;<A HREF="http://enobrev.com">http://enobrev.com</A>&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; DATA
</I>&gt;<i>
</I>&gt;<i> 550 5.1.1 &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">TheRecipient at enobrev.com</A> &lt;<A HREF="http://enobrev.com">http://enobrev.com</A>&gt;&gt;... User unknown
</I>&gt;<i> 503 5.0.0 Need RCPT (recipient)
</I>&gt;<i> &gt;&gt;&gt; RSET
</I>&gt;<i> 250 2.0.0 Reset state
</I>&gt;<i> dead.letter..
</I>&gt;<i> . Saved message in dead.letter
</I>&gt;<i> Closing connection to localhost.localdomain.
</I>&gt;<i> &gt;&gt;&gt; QUIT
</I>&gt;<i> 221 2.0.0 ss07.shared.server-system.net &lt;<A HREF="http://ss07.shared.server-system.net">http://ss07.shared.server-system.net</A>&gt; closing connection
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Now, I know for a fact the recipient's email exists on my client's 
</I>&gt;<i> mail server (which is an exchange server).  The only thing I can 
</I>&gt;<i> figure is that it's checking the local host for the recipient and not 
</I>&gt;<i> finding it, and hence never sending the email.
</I>&gt;<i>
</I>&gt;<i> Anybody ever run into this before?  Is there a switch i can use with 
</I>&gt;<i> php's mail function or sendmail to get around this?
</I>&gt;<i>
</I>&gt;<i> Thanks!!
</I>&gt;<i>
</I>&gt;<i> Mark Armendariz
</I>&gt;<i> ------------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> New York PHP Community Talk Mailing List
</I>&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;<i>
</I>&gt;<i> NYPHPCon 2006 Presentations Online
</I>&gt;<i> <A HREF="http://www.nyphpcon.com">http://www.nyphpcon.com</A>
</I>&gt;<i>
</I>&gt;<i> Show Your Participation in New York PHP
</I>&gt;<i> <A HREF="http://www.nyphp.org/show_participation.php">http://www.nyphp.org/show_participation.php</A>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020436.html">[nycphp-talk] sendmail and php mail
</A></li>
	<LI>Next message: <A HREF="020444.html">[nycphp-talk] sendmail and php mail
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20443">[ date ]</a>
              <a href="thread.html#20443">[ thread ]</a>
              <a href="subject.html#20443">[ subject ]</a>
              <a href="author.html#20443">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
