<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Zip Code Stuff
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2007-January/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Zip%20Code%20Stuff&In-Reply-To=%3C200701221009.23895.jellicle%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020685.html">
   <LINK REL="Next"  HREF="020687.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Zip Code Stuff</H1>
    <B>Michael Sims</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Zip%20Code%20Stuff&In-Reply-To=%3C200701221009.23895.jellicle%40gmail.com%3E"
       TITLE="[nycphp-talk] Zip Code Stuff">jellicle at gmail.com
       </A><BR>
    <I>Mon Jan 22 10:09:23 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="020685.html">[nycphp-talk] Zip Code Stuff
</A></li>
        <LI>Next message: <A HREF="020687.html">[nycphp-talk] Zip Code Stuff
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20686">[ date ]</a>
              <a href="thread.html#20686">[ thread ]</a>
              <a href="subject.html#20686">[ subject ]</a>
              <a href="author.html#20686">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Monday 22 January 2007 9:39 am, Urb LeJeune wrote:

&gt;<i> &gt;There are 8 Zip codes withing a 5 miles radius of 05701
</I>&gt;<i> &gt;They are:
</I>&gt;<i> &gt;05251 Dorset, VT 0.85 miles
</I>&gt;<i> &gt;05701 Rutland, VT 0.00 miles
</I>&gt;<i> &gt;05702 Rutland, VT 0.00 miles
</I>&gt;<i> &gt;05736 Center Rutland, VT 2.59 miles
</I>&gt;<i> &gt;05744 Florence, VT 3.57 miles
</I>&gt;<i> &gt;05759 North Clarendon, VT 2.13 miles
</I>&gt;<i> &gt;05765 Proctor, VT 4.57 miles
</I>&gt;<i> &gt;05777 West Rutland, VT 3.57 miles
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;Dorset is a lot more than 0.85 miles.  It's really about 25 street
</I>&gt;<i> &gt; miles.
</I>&gt;<i>
</I>&gt;<i>          The program uses longevity and latitude from a commercial zip
</I>&gt;<i> code database. It calculates the great circle distance between two sets
</I>&gt;<i> of coordinates. The supplied coordinates could be wrong for Dorset or
</I>&gt;<i> Rutland. Do the airline distances to the other locations seem
</I>&gt;<i> reasonable?
</I>
You almost certainly want to use the Haversine formula for this task 
(calculating distances to points that are quite close on a sphere).

<A HREF="http://en.wikipedia.org/wiki/Great-circle_distance">http://en.wikipedia.org/wiki/Great-circle_distance</A>

The basic Great Circle formula gives *incorrect* results for points that are 
very close to each other.  I.E., the zip code 05702 is NOT actually on top 
of 05701, and I expect that your database of zip code centroids is fine, 
however, at some point roundoff error is killing you.  That is,

arccos(1) = 0       //true!
arccos(.999999999) = 0   //true for computers, not true for mathematicians

So zip 05702 is too close to zip 05701, and its arccos is getting rounded to 
zero, which makes the distance calculated be zero, which is untrue.

Use one of the other formulas on that Wikipedia page.

Michael Sims


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020685.html">[nycphp-talk] Zip Code Stuff
</A></li>
	<LI>Next message: <A HREF="020687.html">[nycphp-talk] Zip Code Stuff
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20686">[ date ]</a>
              <a href="thread.html#20686">[ thread ]</a>
              <a href="subject.html#20686">[ subject ]</a>
              <a href="author.html#20686">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
