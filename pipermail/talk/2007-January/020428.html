<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] sendmail and php mail
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2007-January/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20sendmail%20and%20php%20mail&In-Reply-To=%3Ccea129a00701041123u4160325apa8b1b748f2d6459e%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020419.html">
   <LINK REL="Next"  HREF="020431.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] sendmail and php mail</H1>
    <B>Mark Armendariz</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20sendmail%20and%20php%20mail&In-Reply-To=%3Ccea129a00701041123u4160325apa8b1b748f2d6459e%40mail.gmail.com%3E"
       TITLE="[nycphp-talk] sendmail and php mail">enolists at gmail.com
       </A><BR>
    <I>Thu Jan  4 14:23:04 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="020419.html">[nycphp-talk] Accessing a file in another web server
</A></li>
        <LI>Next message: <A HREF="020431.html">[nycphp-talk] sendmail and php mail
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20428">[ date ]</a>
              <a href="thread.html#20428">[ thread ]</a>
              <a href="subject.html#20428">[ subject ]</a>
              <a href="author.html#20428">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Happy 2007, everyone.

I know this isn't directly a php, issue, but I was hoping someone here might
have some experience with such a thing.

My client has their site on one server and their their email server at
another hosting company.  I'm trying to send mail from a php script (using
the mail function) on the site.

I know sendmail is working correctly, as I can send email to my own domain
as well as to any other I've tried.  This only applies to sending email
internally.

Sendmail has a recipient check.  Basically, it talks to the recipient's
server and checks that the user exists before trying to send the message.
Unfortunately, since the hosting server has the same domain name as the mail
server.

** Here's the php:

$aHeaders = array();
$aHeaders[] = 'From: ' . EMAIL_DONATIONS;
$aHeaders[] = 'X-Mailer: PHP v' . phpversion();

$sSubject = 'New Donation Submitted';
$sMessage = 'A new donation has been submitted through the site.';
mail(EMAIL_DONATIONS, $sSubject, $sMessage, implode(&quot;\n&quot;, $aHeaders), '-v');




** Here's the verbose output of sendmail (with my domain in place of the
client's)

<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">TheRecipient at enobrev.com...</A> Connecting to localhost.localdomain. via relay...
220 ss07.shared.server-system.net ESMTP Sendmail
8.12.11.20060308/8.12.11; Thu, 4 Jan 2007 11:09:10 -0800
&gt;&gt;&gt;<i> EHLO laco.org
</I>250-ss07.shared.server-system.net Hello localhost.localdomain
[127.0.0.1], pleased to meet you
250-ENHANCEDSTATUSCODES
250-PIPELINING
250-8BITMIME
250-SIZE 15000000
250-DSN
250-ETRN
250-AUTH LOGIN PLAIN
250-STARTTLS
250-DELIVERBY
250 HELP
&gt;&gt;&gt;<i> STARTTLS
</I>220 2.0.0 Ready to start TLS
&gt;&gt;&gt;<i> EHLO enobrev.com
</I>250-ss07.shared.server-system.net Hello localhost.localdomain
[127.0.0.1], pleased to meet you
250-ENHANCEDSTATUSCODES
250-PIPELINING
250-8BITMIME
250-SIZE 15000000
250-DSN
250-ETRN
250-AUTH LOGIN PLAIN
250-DELIVERBY
250 HELP
&gt;&gt;&gt;<i> MAIL From:&lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">enobrev at enobrev.com</A>&gt; SIZE=300 AUTH=<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">enobrev at enobrev.com</A>
</I>250 2.1.0 &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">enobrev at enobrev.com</A>&gt;... Sender ok
&gt;&gt;&gt;<i> RCPT To:&lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">TheRecipient at enobrev.com</A>&gt;
</I>&gt;&gt;&gt;<i> DATA
</I>550 5.1.1 &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">TheRecipient at enobrev.com</A>&gt;... User unknown
503 5.0.0 Need RCPT (recipient)
&gt;&gt;&gt;<i> RSET
</I>250 2.0.0 Reset state
dead.letter... Saved message in dead.letter
Closing connection to localhost.localdomain.
&gt;&gt;&gt;<i> QUIT
</I>221 2.0.0 ss07.shared.server-system.net closing connection



Now, I know for a fact the recipient's email exists on my client's mail
server (which is an exchange server).  The only thing I can figure is that
it's checking the local host for the recipient and not finding it, and hence
never sending the email.

Anybody ever run into this before?  Is there a switch i can use with php's
mail function or sendmail to get around this?

Thanks!!

Mark Armendariz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.nyphp.org/pipermail/talk/attachments/20070104/36f893bb/attachment.html">http://lists.nyphp.org/pipermail/talk/attachments/20070104/36f893bb/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020419.html">[nycphp-talk] Accessing a file in another web server
</A></li>
	<LI>Next message: <A HREF="020431.html">[nycphp-talk] sendmail and php mail
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20428">[ date ]</a>
              <a href="thread.html#20428">[ thread ]</a>
              <a href="subject.html#20428">[ subject ]</a>
              <a href="author.html#20428">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
