<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Safest and best way to get the referer
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2007-January/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Safest%20and%20best%20way%20to%20get%20the%20referer&In-Reply-To=%3Cb76252690701310519q270c1439of2376567e22b1559%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020806.html">
   <LINK REL="Next"  HREF="020840.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Safest and best way to get the referer</H1>
    <B>csnyder</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Safest%20and%20best%20way%20to%20get%20the%20referer&In-Reply-To=%3Cb76252690701310519q270c1439of2376567e22b1559%40mail.gmail.com%3E"
       TITLE="[nycphp-talk] Safest and best way to get the referer">chsnyder at gmail.com
       </A><BR>
    <I>Wed Jan 31 08:19:48 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="020806.html">[nycphp-talk] Safest and best way to get the referer
</A></li>
        <LI>Next message: <A HREF="020840.html">[nycphp-talk] Safest and best way to get the referer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20831">[ date ]</a>
              <a href="thread.html#20831">[ thread ]</a>
              <a href="subject.html#20831">[ subject ]</a>
              <a href="author.html#20831">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 1/29/07, Joseph Crawford &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">codebowl at gmail.com</A>&gt; wrote:
&gt;<i> Guys,
</I>&gt;<i>
</I>&gt;<i> I know that HTTP_REFERER is not always accurate or even set.  There
</I>&gt;<i> are also ways for people to fake that value.  I tend not to rely on
</I>&gt;<i> that much however what i need to do is this.
</I>&gt;<i>
</I>&gt;<i> We have a file called spy.php that will return data to the browser if
</I>&gt;<i> the sitekey is found in our database.  This data is to be used by
</I>&gt;<i> members so they can show statistics on their site.  However to be sure
</I>&gt;<i> that it was the correct sitekey i was also checking the referer domain
</I>&gt;<i> against the domain stored in the database.  Is there a better way to
</I>&gt;<i> do this?  I do not want someone to be able to display the stats for
</I>&gt;<i> another site on theirs.
</I>&gt;<i>
</I>&gt;<i> Is there a way to do this or should i just base it on the sitekey and
</I>&gt;<i> if it is valid return the stats for that particular site.  The sitekey
</I>&gt;<i> is an md5 hash.
</I>&gt;<i>
</I>
It's rare for a browser to send broken referers, but yeah, there's
nothing to stop another server from calling spy.php with a spoofed
referer and then doing whatever with the result. You might try to
notice if the same client IP makes a number of requests using
different sitekeys...

There probably isn't much you can do that would be worth the time it
took to implement. After all, even with perfect security on the
script, the numbers are still out there in public, ready to be
copy-and-pasted into a spreadsheet every morning.

-- 
Chris Snyder
<A HREF="http://chxo.com/">http://chxo.com/</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020806.html">[nycphp-talk] Safest and best way to get the referer
</A></li>
	<LI>Next message: <A HREF="020840.html">[nycphp-talk] Safest and best way to get the referer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20831">[ date ]</a>
              <a href="thread.html#20831">[ thread ]</a>
              <a href="subject.html#20831">[ subject ]</a>
              <a href="author.html#20831">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
