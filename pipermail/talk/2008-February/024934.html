<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] javascript calling php function
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2008-February/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20javascript%20calling%20php%20function&In-Reply-To=%3C415989.60015.qm%40web50206.mail.re2.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024928.html">
   <LINK REL="Next"  HREF="024940.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] javascript calling php function</H1>
    <B>Susan Shemin</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20javascript%20calling%20php%20function&In-Reply-To=%3C415989.60015.qm%40web50206.mail.re2.yahoo.com%3E"
       TITLE="[nycphp-talk] javascript calling php function">susan_shemin at yahoo.com
       </A><BR>
    <I>Fri Feb 22 14:18:18 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="024928.html">[nycphp-talk] Re: Best way to develop a PHP web system?
</A></li>
        <LI>Next message: <A HREF="024940.html">[nycphp-talk] Charsets are still driving me nuts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24934">[ date ]</a>
              <a href="thread.html#24934">[ thread ]</a>
              <a href="subject.html#24934">[ subject ]</a>
              <a href="author.html#24934">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>love your insight into this and the clear example you gave!  

I tried to get the header code to work, but it wouldn't execute the php code, so I went to my saved books on devx/Safari and got some code from the PHP Cookbook about using a form with hidden variables to send the user to the clicked link, and all works well now.  (and I'll add the acceptable urls code now)

example from PHP Cookbook, section 8.3.4:

&lt;html&gt;
  &lt;body onload=&quot;document.getElementById('redirectForm').submit()&quot;&gt;
    &lt;form id='redirectForm' method='POST' action='/done.html'&gt;
      &lt;input type='hidden' name='status' value='complete'/&gt;
      &lt;input type='hidden' name='id' value='0u812'/&gt;
      &lt;input type='submit' value='Please Click Here To Continue'/&gt;
    &lt;/form&gt;
  &lt;/body&gt;
&lt;/html&gt;

and just changed the action to where the user is to go and commented out the submit input line so the button wouldn't show and put my php code after the body tag.

Susan


----- Original Message ----
From: Rolan Yang &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">rolan at omnistep.com</A>&gt;
To: NYPHP Talk &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk at lists.nyphp.org</A>&gt;
Sent: Friday, February 22, 2008 8:47:37 AM
Subject: Re: [nycphp-talk] javascript calling php function

csnyder wrote:
&gt;<i> Right, you can't trust the referer if you fear scripted attacks.
</I>&gt;<i>
</I>&gt;<i> John, is that what you were talking about, or was it something more
</I>&gt;<i> abstract and seo-related?
</I>&gt;<i>
</I>&gt;<i> I was picturing people using the open redirect to take advantage of
</I>&gt;<i> your page rank by causing your site to link to theirs.
</I>&gt;<i>
</I>&gt;<i>  
</I>
Your paranoia is well justified. Open redirects are exploited by 
unsavory people in a number of ways. I came across a phishing email 
recently posing as a fake &quot;Paypal confirmation&quot;. In the page was a link 
which appeared to point at aol.com (some 1/2 internet savvy people 
glance at the url to see if it points to a &quot;reputable&quot; site before 
clicking away on it). The aol.com link led to a well constructed 
imitation of the Paypal login page which was intended to maliciously 
steal accounts. Here is an example of the link:

<A HREF="http://www.aol.com/redir.adp?_e_t=ap&amp;_a_v=2.0&amp;_a_i=100124311x1116601028x1077500809&amp;_url=http://www.nyphp.org">http://www.aol.com/redir.adp?_e_t=ap&amp;_a_v=2.0&amp;_a_i=100124311x1116601028x1077500809&amp;_url=http://www.nyphp.org</A>

If you want to peek at a copy of the original phishing mail, check out 
<A HREF="http://www.datawhorehouse.com/0day/paypalphish">http://www.datawhorehouse.com/0day/paypalphish</A>

The safer thing for Susan to do would probably be to put all the valid 
redirect URL's in an array like:

redir.php:

&lt;?php
$validURLS=array('
    0=&gt;'www.mysite.com',
    1=&gt;'www.yahoo.com',
    2=&gt;'www.nyphp.org',
    3=&gt;'www.php.net'
);

// some code to store hit in db logs goes here

header('Location: <A HREF="http://">http://</A>'.intval($_GET['r']));
?&gt;

~Rolan



~Rolan
_______________________________________________
New York PHP Community Talk Mailing List
<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>

NYPHPCon 2006 Presentations Online
<A HREF="http://www.nyphpcon.com">http://www.nyphpcon.com</A>

Show Your Participation in New York PHP
<A HREF="http://www.nyphp.org/show_participation.php">http://www.nyphp.org/show_participation.php</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.nyphp.org/pipermail/talk/attachments/20080222/83621b4a/attachment.html">http://lists.nyphp.org/pipermail/talk/attachments/20080222/83621b4a/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024928.html">[nycphp-talk] Re: Best way to develop a PHP web system?
</A></li>
	<LI>Next message: <A HREF="024940.html">[nycphp-talk] Charsets are still driving me nuts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24934">[ date ]</a>
              <a href="thread.html#24934">[ thread ]</a>
              <a href="subject.html#24934">[ subject ]</a>
              <a href="author.html#24934">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
