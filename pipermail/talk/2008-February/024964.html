<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Urgent: Help in Defending Attack
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2008-February/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Urgent%3A%20Help%20in%20Defending%20Attack&In-Reply-To=%3C47C6DAA3.3010700%40phpwerx.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024962.html">
   <LINK REL="Next"  HREF="024965.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Urgent: Help in Defending Attack</H1>
    <B>Dan Cech</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Urgent%3A%20Help%20in%20Defending%20Attack&In-Reply-To=%3C47C6DAA3.3010700%40phpwerx.net%3E"
       TITLE="[nycphp-talk] Urgent: Help in Defending Attack">dcech at phpwerx.net
       </A><BR>
    <I>Thu Feb 28 11:00:35 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="024962.html">[nycphp-talk] Urgent: Help in Defending Attack
</A></li>
        <LI>Next message: <A HREF="024965.html">[nycphp-talk] Urgent: Help in Defending Attack
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24964">[ date ]</a>
              <a href="thread.html#24964">[ thread ]</a>
              <a href="subject.html#24964">[ subject ]</a>
              <a href="author.html#24964">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Randal Rust wrote:
&gt;<i> it is targeted entirely to the one page on the site. if i take it
</I>&gt;<i> down, everything works fine.
</I>&gt;<i> 
</I>&gt;<i> problem is, that's *the* most important page on the site.
</I>
To me this doesn't really sound like an attack.  Unless you're getting 
thousands of hits from the same IP it's more likely that your site has 
just reached the point where its resource requirements exceed the 
capacity allocated to it.

It sounds to me like you have an efficiency issue, most likely your 
database connections are not being properly torn down after each page 
view leading to multiple connections hanging around and gumming up your 
mysql connection pool.

Are you using persistent connections? Are you on a shared (vhost) box?

If you answered yes to both questions, you have found your problem. 
You'll end up with a persistent connection for every webserver thread, 
most of which will actually be servicing requests for other sites *but 
still using up one of your connections*.

If you are using non-persistent connections you might want to try 
registering a shutdown function to explicitly tear down the db 
connection, or switching to persistent connections (if you are on a 
dedicated host).

Dan

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024962.html">[nycphp-talk] Urgent: Help in Defending Attack
</A></li>
	<LI>Next message: <A HREF="024965.html">[nycphp-talk] Urgent: Help in Defending Attack
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24964">[ date ]</a>
              <a href="thread.html#24964">[ thread ]</a>
              <a href="subject.html#24964">[ subject ]</a>
              <a href="author.html#24964">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
