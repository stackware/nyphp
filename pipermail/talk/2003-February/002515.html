<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Replacing a string within many tables, unknown c olumns
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2003-February/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Replacing%20a%20string%20within%20many%20tables%2C%20unknown%0A%20c%20olumns&In-Reply-To=%3C8FA07D8665A9D511B80E00B0D068A15105D21080%40ehope16.hew.us.ml.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002514.html">
   <LINK REL="Next"  HREF="002516.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Replacing a string within many tables, unknown c olumns</H1>
    <B>Lynn, Michael (DCS)</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Replacing%20a%20string%20within%20many%20tables%2C%20unknown%0A%20c%20olumns&In-Reply-To=%3C8FA07D8665A9D511B80E00B0D068A15105D21080%40ehope16.hew.us.ml.com%3E"
       TITLE="[nycphp-talk] Replacing a string within many tables, unknown c olumns">MLynn at exchange.ml.com
       </A><BR>
    <I>Fri Feb 14 11:22:54 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="002514.html">XEMACS as PHP Editor
</A></li>
        <LI>Next message: <A HREF="002516.html">[nycphp-talk] Zend offer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2515">[ date ]</a>
              <a href="thread.html#2515">[ thread ]</a>
              <a href="subject.html#2515">[ subject ]</a>
              <a href="author.html#2515">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks for the quick response...

I think I found a non-php way to do this:

Mysqldump PROD_DBNAME &gt; PROD_DBNAME.sql; # backup
Mysqadmin drop PROD_DBNAME
Mysqladmin create PROD_DBNAME
Mysqldump DEV_DBNAME | sed 's/OLD_STRING/NEW_STRING/g' | mysql PROD_DBNAME

Or something close to that.

I'm also working on a php way to do it and would appreciate any input from someone who's done something similar... I'll forward my code when it's working.

Thanks again.

Regards,
Mike

-----Original Message-----
From: Chris Snyder [mailto:<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">chris at psydeshow.org</A>] 
Sent: Friday, February 14, 2003 11:04 AM
To: NYPHP Talk
Subject: Re: [nycphp-talk] Replacing a string within many tables, unknown columns


Lynn, Michael wrote:

&gt;<i>I need to be able to replace every occurance of a string in many 
</I>&gt;<i>tables, many columns.  The string appears in tables in various places 
</I>&gt;<i>and usually embedded in a string type or var type column... The string 
</I>&gt;<i>will not be the entire contents of the column so a replace won't work.
</I>&gt;<i>
</I>&gt;<i>Eg: my development database contains url links to the development web 
</I>&gt;<i>site.  When I copy the tables to production, I want to search and 
</I>&gt;<i>replace every occurance of the development urls with production urls 
</I>&gt;<i>throughout the entire database.
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>Many columns, many tables? Ouch.

It seems like the best way to do this, since you're migrating the data 
anyway, is to take the contents of the mysqldump you do to get the data 
out of your development database, and run a search-and-replace operation 
on it before feeding it into the production database.

See mysqldump in the &quot;Backing up your database&quot; section of the MySQL 
documentation-- the sql file you get is plain text, and the data therein 
is processable in a myriad of ways as long as you don't distrub the SQL 
itself.

    chris.

-- 
HIP HOP CLOWN MONTH
booth of the day: all day, every day <A HREF="http://hiphopclown.org/berylium/showcase/">http://hiphopclown.org/berylium/showcase/</A>




--- Unsubscribe at <A HREF="http://nyphp.org/list/">http://nyphp.org/list/</A> ---




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002514.html">XEMACS as PHP Editor
</A></li>
	<LI>Next message: <A HREF="002516.html">[nycphp-talk] Zend offer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2515">[ date ]</a>
              <a href="thread.html#2515">[ thread ]</a>
              <a href="subject.html#2515">[ subject ]</a>
              <a href="author.html#2515">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
