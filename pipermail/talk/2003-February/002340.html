<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> flooding + sessions
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2003-February/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20flooding%20%2B%20sessions&In-Reply-To=%3C000a01c2cacb%2418caa220%24de01a8c0%40duron.lan.newageweb.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002339.html">
   <LINK REL="Next"  HREF="002341.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>flooding + sessions</H1>
    <B>Jerry Kapron</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20flooding%20%2B%20sessions&In-Reply-To=%3C000a01c2cacb%2418caa220%24de01a8c0%40duron.lan.newageweb.com%3E"
       TITLE="flooding + sessions">jkapron at NewAgeWeb.com
       </A><BR>
    <I>Sun Feb  2 09:55:15 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="002339.html">[nycphp-talk] What breaks in 4.3?
</A></li>
        <LI>Next message: <A HREF="002341.html">slide show
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2340">[ date ]</a>
              <a href="thread.html#2340">[ thread ]</a>
              <a href="subject.html#2340">[ subject ]</a>
              <a href="author.html#2340">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've just realized that in case someone decides to flood my web server with
HTTP requests, the session.save_path directory on the server will get filled
with thousands or even millions of session files in no time. Each
session_start() will create a new unique file on the disk or an entry in a
session handling database table.  This can drastically slow down the server
even after the flood stops.  I deliberately flooded my development server
and noticed the number of session files kept increasing for the next several
minutes after I stop the flood.  I imagine it would cause a variety of other
problems as well.

While setting a high value (100) for session.gc_probability and reducing the
value for session.gc_maxlifetime to 300 (5 minutes) will limit the number of
files to as many as a flood attack can generate in 5 minutes, it will cause
the server to perform the 'garbage collection' routine upon every request,
which itself can be damaging to the server's performance. Besides
simultaneous flood attacks from multiple sources can easily amount to
hundreds of thousands of hits thus session files in just 5 minutes.

Can anyone think of a solution?  A code level solution would be nice but I
can't think of anything.
I believe this calls for a small change to the way PHP handles sessions.
While a session id and a cookie are generated upon establishing a new
session (session_start()), a session handling file should not be created
until a session variable is initialized ( $_SESSION =  or
session_register()).  With that in place, writing flood-proof code wouldn't
be hard at all.

Jerry

--
42.7% of all statistics are made up on the spot.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002339.html">[nycphp-talk] What breaks in 4.3?
</A></li>
	<LI>Next message: <A HREF="002341.html">slide show
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2340">[ date ]</a>
              <a href="thread.html#2340">[ thread ]</a>
              <a href="subject.html#2340">[ subject ]</a>
              <a href="author.html#2340">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
