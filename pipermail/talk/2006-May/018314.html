<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] MySQL 4 vs. 5 and character encoding (?)
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2006-May/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20MySQL%204%20vs.%205%20and%20character%20encoding%20%28%3F%29&In-Reply-To=%3C4462F54E.3030007%40peda.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018346.html">
   <LINK REL="Next"  HREF="018268.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] MySQL 4 vs. 5 and character encoding (?)</H1>
    <B>Mikko Rantalainen</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20MySQL%204%20vs.%205%20and%20character%20encoding%20%28%3F%29&In-Reply-To=%3C4462F54E.3030007%40peda.net%3E"
       TITLE="[nycphp-talk] MySQL 4 vs. 5 and character encoding (?)">mikko.rantalainen at peda.net
       </A><BR>
    <I>Thu May 11 04:26:54 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="018346.html">[nycphp-talk] MySQL 4 vs. 5 and character encoding (?)
</A></li>
        <LI>Next message: <A HREF="018268.html">[nycphp-talk] AJAX and character encoding
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18314">[ date ]</a>
              <a href="thread.html#18314">[ thread ]</a>
              <a href="subject.html#18314">[ subject ]</a>
              <a href="author.html#18314">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Rahmin Pavlovic wrote:
&gt;<i> On 5/10/06 11:53 AM, &quot;Daniel Convissor&quot; &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">danielc at analysisandsolutions.com</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> On Wed, May 10, 2006 at 10:57:53AM -0400, Rahmin Pavlovic wrote:
</I>&gt;&gt;&gt;<i> I already tried setting the charset / collation to utf-8 -- both on tables /
</I>&gt;&gt;&gt;<i> fields -- but resaving data produces the same mangled results.
</I>&gt;&gt;<i> How did you do that?  ALTER TABLE?  If so, that's too late.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Open up the SQL script created by mysqldump.  What's the default charset
</I>&gt;&gt;<i> defined in the CREATE TABLE statements?
</I>&gt;&gt;<i>
</I>&gt;<i> 
</I>&gt;<i> latin1_swedish_ci.  When I ALTER TABLE, it successfully updates to
</I>&gt;<i> utf8_general_ci.  Why is it too late?  Do I need to re-dump?
</I>
Since you say that you changed it to utf8, I guess the original data 
was supposed to be with UTF-8 character set, but because MySQL5 
dumped it with latin1_swedish_ci you never did tell MySQL5 about the 
fact (this happens pretty much automatically if you upgrade from 
MySQL4 which pretty much didn't have a clue about UTF-8).

However, MySQL5 in its infinite wishdom replaces invalid characters 
in the mysqldump output with a literal &quot;?&quot; (U+003F) instead of 
leaving those bytes as is. Latin1 doesn't define byte range 128-159 
so MySQL5 replaces those bytes with literal &quot;?&quot; if you use mysqldump 
without correct settings (UTF-8 encoded strings may include bytes in 
range 128-159 and if you replace those bytes with a literal &quot;?&quot; 
you'll end up with invalid UTF-8 encoding). You will not notice this 
problem if you just do INSERT, UPDATE and SELECT from some other 
application because this modification doesn't happen in that case.

In short, yes, you have to re-dump from MySQL5. Hopefully you have 
the binary table data still available.

-- 
Mikko


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018346.html">[nycphp-talk] MySQL 4 vs. 5 and character encoding (?)
</A></li>
	<LI>Next message: <A HREF="018268.html">[nycphp-talk] AJAX and character encoding
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18314">[ date ]</a>
              <a href="thread.html#18314">[ thread ]</a>
              <a href="subject.html#18314">[ subject ]</a>
              <a href="author.html#18314">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
