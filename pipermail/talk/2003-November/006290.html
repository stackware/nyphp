<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Advice: Too many mysql connections. 
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2003-November/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Advice%3A%20Too%20many%20mysql%20connections.%20&In-Reply-To=%3C8F6336C4-119A-11D8-A40D-003065778656%40plusfour.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006287.html">
   <LINK REL="Next"  HREF="006293.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Advice: Too many mysql connections. </H1>
    <B>Ian Forsyth</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Advice%3A%20Too%20many%20mysql%20connections.%20&In-Reply-To=%3C8F6336C4-119A-11D8-A40D-003065778656%40plusfour.org%3E"
       TITLE="[nycphp-talk] Advice: Too many mysql connections. ">ian at plusfour.org
       </A><BR>
    <I>Fri Nov  7 22:20:53 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="006287.html">[nycphp-talk] Sequenced Sessions WAS: Merging/reissuing sessions ...
</A></li>
        <LI>Next message: <A HREF="006293.html">[nycphp-talk] Advice: Too many mysql connections. 
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6290">[ date ]</a>
              <a href="thread.html#6290">[ thread ]</a>
              <a href="subject.html#6290">[ subject ]</a>
              <a href="author.html#6290">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I need some support.

There is a site I do sys-admin type stuff for, that consistently has 
Too Many MySQL connections. Today, it happened 3 times already.

Here is some info.

Hardware:
Dual Pentium 4, 1.8 GigHz, 40 Gigs SCSI Raid, 512 MB Ram.

Server Software:
Apache 1. 3.27, PHP 4.3.1, MySQL 4.0.12 Max

Here is the my.cnf file.

[mysqld]
bind-address=127.0.0.1
set-variable = ft_min_word_len=2
set-variable = max_connections=300

The developer uses a phplib based database class. On average each 
'page' is using 3 instances of the database class. The connect method 
is using mysql_connect();. The developer is re-working the db class so 
a maximum of instance of the class will be initialized on any page 
load. The site is used book dealer, and relies heavily on the full_text 
indexing of about 100,00 records.

The site gets a lot of traffic. According to webalizer, it gets been 
getting about 20,000 'Visits' a month. There are not any other sites 
running on the computer. It is just this site.

MyQuestions.
What are your opinions regarding 1. Hardware, is there enough ram on 
the box to handle increasing the 'max_connections' to 500. 2. Which 
my-*.cnf should we be using. Everything is basically the defaults.. 
Here is a link to the results of the show variables.

<A HREF="http://plusfour.org/mysqlVariables.txt">http://plusfour.org/mysqlVariables.txt</A>

2. At what point do i give the my-large.cnf a try.. how can I test it.. 
3. What are the pear classes for load testing?

Thanks for any suggestions.

Ian


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006287.html">[nycphp-talk] Sequenced Sessions WAS: Merging/reissuing sessions ...
</A></li>
	<LI>Next message: <A HREF="006293.html">[nycphp-talk] Advice: Too many mysql connections. 
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6290">[ date ]</a>
              <a href="thread.html#6290">[ thread ]</a>
              <a href="subject.html#6290">[ subject ]</a>
              <a href="author.html#6290">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
