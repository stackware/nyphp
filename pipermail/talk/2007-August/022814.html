<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] fgetcsv and German characters
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2007-August/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20fgetcsv%20and%20German%20characters&In-Reply-To=%3Cb76252690708140820y316c840fpd1ac743b890e82b4%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022812.html">
   <LINK REL="Next"  HREF="022818.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] fgetcsv and German characters</H1>
    <B>csnyder</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20fgetcsv%20and%20German%20characters&In-Reply-To=%3Cb76252690708140820y316c840fpd1ac743b890e82b4%40mail.gmail.com%3E"
       TITLE="[nycphp-talk] fgetcsv and German characters">chsnyder at gmail.com
       </A><BR>
    <I>Tue Aug 14 11:20:12 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="022812.html">[nycphp-talk] fgetcsv and German characters
</A></li>
        <LI>Next message: <A HREF="022818.html">[nycphp-talk] fgetcsv and German characters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22814">[ date ]</a>
              <a href="thread.html#22814">[ thread ]</a>
              <a href="subject.html#22814">[ subject ]</a>
              <a href="author.html#22814">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 8/14/07, Stephen Musgrave &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">stephen at capellic.com</A>&gt; wrote:
&gt;<i> Oh, how I love character encoding problems!  ;-)
</I>&gt;<i>
</I>&gt;<i> I have a file upload utility whereby the user uploads a CSV document.  The
</I>&gt;<i> file is saved to a temporary folder.  I open that document, use fgetcsv() to
</I>&gt;<i> pull the values and then insert them into a database.
</I>&gt;<i>
</I>&gt;<i> The problem is that German characters such as &#252; and &#228; are being translated
</I>&gt;<i> to &#376; and &#352; respectively when I echo the values to the browser and when
</I>&gt;<i> inserted into the DB.  I wrote the values to the error log and they come out
</I>&gt;<i> to \x9f and \x8a respectively.
</I>&gt;<i>
</I>&gt;<i> I learned that I should use the setlocale() function for German:
</I>&gt;<i>
</I>&gt;<i>  $loc_de = setlocale(LC_ALL, 'de_DE');
</I>&gt;<i>
</I>&gt;<i> But that didn't do anything for me.  I even tried as shown in the example
</I>&gt;<i> for setlocale() on php.net:
</I>&gt;<i>
</I>&gt;<i>  $loc_de = setlocale(LC_ALL, '<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">de_DE at euro</A>', 'de_DE', 'de', 'ge');
</I>&gt;<i> When I echo $loc_de, both say &quot;de_DE&quot; as expected, but it doesn't fix my
</I>&gt;<i> import problem.
</I>&gt;<i>
</I>&gt;<i> I've checked the uploaded file contents and it looks fine.
</I>&gt;<i>
</I>&gt;<i> Any suggestions would be appreciated.
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i>
</I>&gt;<i> Stephen
</I>

Locale wouldn't matter in this case; that's primarily useful when
generating content (such as formatted dates or gettext translations).

You need to figure out what encoding was used on the original csv
document, and then use iconv functions or similar to convert it to
utf-8 or whatever encoding is being used by your system for storage
and display.

How to do that? I would open the csv file in a web browser and play
with the character encodings until it looked right--View&gt;Character
Encoding in Firefox--but there might be a more systematic way...

-- 
Chris Snyder
<A HREF="http://chxo.com/">http://chxo.com/</A>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022812.html">[nycphp-talk] fgetcsv and German characters
</A></li>
	<LI>Next message: <A HREF="022818.html">[nycphp-talk] fgetcsv and German characters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22814">[ date ]</a>
              <a href="thread.html#22814">[ thread ]</a>
              <a href="subject.html#22814">[ subject ]</a>
              <a href="author.html#22814">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
