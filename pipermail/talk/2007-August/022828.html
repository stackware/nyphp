<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Is there something wrong with this SQL query in PHP?
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2007-August/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Is%20there%20something%20wrong%20with%20this%20SQL%20query%20in%20PHP%3F&In-Reply-To=%3C00ed01c7dead%2444251d60%24cc6f5820%24%40com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022826.html">
   <LINK REL="Next"  HREF="022830.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Is there something wrong with this SQL query in PHP?</H1>
    <B>Anthony Wlodarski</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Is%20there%20something%20wrong%20with%20this%20SQL%20query%20in%20PHP%3F&In-Reply-To=%3C00ed01c7dead%2444251d60%24cc6f5820%24%40com%3E"
       TITLE="[nycphp-talk] Is there something wrong with this SQL query in PHP?">aw at sap8.com
       </A><BR>
    <I>Tue Aug 14 15:56:55 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="022826.html">[nycphp-talk] Is there something wrong with this SQL query in PHP?
</A></li>
        <LI>Next message: <A HREF="022830.html">[nycphp-talk] Is there something wrong with this SQL query in PHP?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22828">[ date ]</a>
              <a href="thread.html#22828">[ thread ]</a>
              <a href="subject.html#22828">[ subject ]</a>
              <a href="author.html#22828">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ran the query from the command line this was the output:

 

mysql&gt; SELECT * FROM `jobsdb`.`jobsdb` WHERE `id` =1;

+----+-----------+---------+----------+---------+----------------+--------+-
--------------+---------+--------+----------+---------+

|<i> id | recruiter | jobid   | position | link    | additionalinfo | salary |
</I>hiringmanager | company | status | postings | color   |

+----+-----------+---------+----------+---------+----------------+--------+-
--------------+---------+--------+----------+---------+

|<i>  1 | lskdfj    | lsdkjfl | lskdjf   | slkdjfl | sldkfjsl       | lskdjf |
</I>sldkfj        | dlskfj  | lskdjf | sldkfj   | #ff0000 |

+----+-----------+---------+----------+---------+----------------+--------+-
--------------+---------+--------+----------+---------+

1 row in set (0.00 sec)

 

It is correct since I only put in garbage data to test it.  And here is the
results of the script when I echoed the $query variable:

 

SELECT * FROM `jobsdb`.`jobsdb` WHERE `id` =1;
Resource id #3
Debug data
id

 

So I will definitely in the future keep an out for direct $_POST variables
directly in a SQL query (I will just save a local copy from now on and use
that.).

 

Anthony Wlodarski

Senior Technical Recruiter

Shulman Fleming &amp; Partners

646-285-0500 x230

<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">aw at sap8.com</A>

 

From: <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk-bounces at lists.nyphp.org</A> [mailto:<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk-bounces at lists.nyphp.org</A>] On
Behalf Of Anthony Wlodarski
Sent: Tuesday, August 14, 2007 3:44 PM
To: 'NYPHP Talk'
Subject: RE: [nycphp-talk] Is there something wrong with this SQL query in
PHP?

 

It does evaluate to true every time, as I wouldn't get to the debug echo
statement in the application.  I put it in its own script and added a few
lines, here is the test script:

 

&lt;?php

// our global database handle

// Always get a database handle

$dbh=mysql_connect (&quot;localhost&quot;, &quot;root&quot;, &quot;plasticpen5&quot;) or die ('I cannot
connect to the database because: ' . mysql_error());

mysql_select_db (&quot;jobsdb&quot;);

 

$query = 'SELECT * FROM `jobsdb` WHERE `id` =1;';

$result = mysql_query($query) or die(&quot;Error editing data.&quot;);

$row = mysql_fetch_assoc($result, MYSQL_ASSOC);

 

echo $result.&quot;&lt;/br&gt;&quot;;

echo &quot;Debug data&lt;/br&gt;&quot;;

echo &quot;id &quot;.$row['id'].&quot;&quot;;

 

// close our database handle

mysql_close($dbh);

?&gt;

I gave it the id of 1 because I know it does exist in the database, this is
the output:

 

Resource id #3
Debug data
id

 

Nothing in $row and since I have never echoed a raw result ($result) from
the query can anyone explain what it might possibly be?

 

Anthony

 

 

 

From: <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk-bounces at lists.nyphp.org</A> [mailto:<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk-bounces at lists.nyphp.org</A>] On
Behalf Of Brian O'Connor
Sent: Tuesday, August 14, 2007 3:26 PM
To: NYPHP Talk
Subject: Re: [nycphp-talk] Is there something wrong with this SQL query in
PHP?

 

Hmm, have you tried outputting the results of $_POST['editjob']?  It might
not be set to something that evaluates to true, which would cause none of
the information you're looking for to be processed.

On 8/14/07, Anthony Wlodarski &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">aw at sap8.com</A>&gt; wrote:

I have been staring at this for about a week and it is turning into a mind
bender.  Here is the code excerpt:

 

// pre: none

// post: displays our controls for .

function displayControls()

{

        if($_POST['editjob'])

        {

                $query = &quot;SELECT * FROM `jobsdb` WHERE `id`
=&quot;.$_POST['id'].&quot;&quot;;

                $result = mysql_query($query) or die(&quot;Error editing data.&quot;);

                $row = mysql_fetch_assoc($result, MYSQL_ASSOC);

 

                echo &quot;Debug: &quot;.$_POST['id'].&quot; - &quot;.$row['id'].&quot;\n&quot;;

 

                // display all our form data

                echo &quot;&lt;fieldset style='color: #ffffff;'&gt;&lt;legend&gt;Edit a
job&lt;/legend&gt;\n&quot;.

                                &quot;&lt;form action='&quot;.$_SERVER['PHP_SELF'].&quot;'
method='post'&gt;\n&quot;.

                                &quot;Recruiter: &lt;input name='recruiter'
type='text' value='&quot;.$row['recruiter'].&quot;'&gt;&lt;/br&gt;&quot;.

                                &quot; Job ID: &lt;input name='jobid' type='text'
value='&quot;.$row['jobid'].&quot;'&gt;&lt;/br&gt;&quot;.

                                &quot; Position: &lt;input name='position'
type='text' value='&quot;.$row['position'].&quot;'&gt;&lt;/br&gt;&quot;.

                                &quot; Position Link: &lt;input name='link'
type='text' value='&quot;.$row['link'].&quot;'&gt;&lt;/br&gt;&quot;.

                                &quot; Additional Info: &lt;input
name='additionalinfo' type='text' value='&quot;.$row['additionalinfo'].&quot;'&gt;&lt;/br&gt;&quot;.

                                &quot; Salary: &lt;input name='salary' type='text'
value='&quot;.$row['salary'].&quot;'&gt;&lt;/br&gt;&quot;.

                                &quot; Hiring Manager: &lt;input
name='hiringmanager' type='text' value='&quot;.$row['hiringmanager'].&quot;''&gt;&lt;/br&gt;&quot;.

                                &quot; Company: &lt;input name='company' type='text'
value='&quot;.$row['company'].&quot;'&gt;&lt;/br&gt;&quot;.

                                &quot; Status: &lt;input name='status' type='text'
value='&quot;.$row['status'].&quot;'&gt;&lt;/br&gt;&quot;.

                                &quot; Postings: &lt;input name='postings'
type='text' value='&quot;.$row['postings'].&quot;'&gt;&lt;/br&gt;&quot;.

                                &quot; Job Color: \n&quot;.

                                &quot;&lt;select name='color'&gt;\n&quot;.

                                &quot;&lt;option value='#ff0000'&gt;Red&lt;/option&gt;\n&quot;.

                                &quot;&lt;option value='#ffa500'&gt;Orange&lt;/option&gt;\n&quot;.

                                &quot;&lt;option value='#ffff00'&gt;Yellow&lt;/option&gt;\n&quot;.

                                &quot;&lt;option value='#00ff7f'&gt;Spring
Green&lt;/option&gt;\n&quot;.

                                &quot;&lt;option value='#32cd32'&gt;Lime
Green&lt;/option&gt;\n&quot;.

                                &quot;&lt;option value='#c0c0c0'&gt;Silver&lt;/option&gt;\n&quot;.

                                &quot;&lt;option value='#0000cd'&gt;Medium
Blue&lt;/option&gt;\n&quot;.

                                &quot;&lt;option value='#191970'&gt;Midnight
Blue&lt;/option&gt;\n&quot;.

                                &quot;&lt;option value='#4169e1'&gt;Royal
Blue&lt;/option&gt;\n&quot;.

                                &quot;&lt;option value='#c71585'&gt;Medium Violet
Red&lt;/option&gt;\n&quot;.

                                &quot;&lt;option
value='#ff00ff'&gt;Fuchsia&lt;/option&gt;\n&quot;.

                                &quot;&lt;/select&gt;\n&quot;.

                                &quot;&lt;input name='saveedit' type='submit'
value='Save Edit'&gt;&quot;.

                                &quot;&lt;input name='cancel' type='submit'
value='Cancel'&gt;&quot;.

                                &quot;&lt;/form&gt;&quot;.

                        &quot;&lt;/fieldset&gt;\n&quot;;

        }

 

... Rest of application.

 

Now the big problem are the three PHP statements after the &quot;if&quot; statement.
When I click edit job nothing appears even in the debug statement, I am not
returning a valid id from $row['id'] nor does any of the data appear in the
form(which is just an integer).  I have scrutinized the SQL query a million
times, even tried to qualify it with the database name using
`foobar`.`jobsdb` and that still not do anything.  I know the $_POST['id']
variable is passing the right id based on the echo command.  Is this a SQL
issue or a PHP issue?  I have looked at my databases in phpMyAdmin and even
checked them using the command line on our box and they have the right
permissions for the users that can access them.  If this is  a SQL issue can
you guys point me in the right direction?  I was thinking of pulling my data
base handle code and the SQL queries and just throwing them into a bare
script to see what happens.  If anyone needs to see the HTML output I can
get that as well.

 

Any help is appreciated.

 

Thanks,

 

Anthony


_______________________________________________
New York PHP Community Talk Mailing List
<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>

NYPHPCon 2006 Presentations Online
<A HREF="http://www.nyphpcon.com">http://www.nyphpcon.com</A>  &lt;<A HREF="http://www.nyphpcon.com">http://www.nyphpcon.com</A>&gt; 

Show Your Participation in New York PHP
<A HREF="http://www.nyphp.org/show_participation.php">http://www.nyphp.org/show_participation.php</A> 




-- 
Brian O'Connor 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.nyphp.org/pipermail/talk/attachments/20070814/e97176f4/attachment.html">http://lists.nyphp.org/pipermail/talk/attachments/20070814/e97176f4/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022826.html">[nycphp-talk] Is there something wrong with this SQL query in PHP?
</A></li>
	<LI>Next message: <A HREF="022830.html">[nycphp-talk] Is there something wrong with this SQL query in PHP?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22828">[ date ]</a>
              <a href="thread.html#22828">[ thread ]</a>
              <a href="subject.html#22828">[ subject ]</a>
              <a href="author.html#22828">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
