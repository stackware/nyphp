<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Tuning MySQL Full Text Search
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2007-August/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Tuning%20MySQL%20Full%20Text%20Search&In-Reply-To=%3C135F96AB-D20F-40E1-9012-09F47326F9EE%40beaffinitive.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023004.html">
   <LINK REL="Next"  HREF="022998.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Tuning MySQL Full Text Search</H1>
    <B>Rob Marscher</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Tuning%20MySQL%20Full%20Text%20Search&In-Reply-To=%3C135F96AB-D20F-40E1-9012-09F47326F9EE%40beaffinitive.com%3E"
       TITLE="[nycphp-talk] Tuning MySQL Full Text Search">rmarscher at beaffinitive.com
       </A><BR>
    <I>Wed Aug 22 12:31:00 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023004.html">[nycphp-talk] Tuning MySQL Full Text Search
</A></li>
        <LI>Next message: <A HREF="022998.html">[nycphp-talk] Tuning MySQL Full Text Search
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22996">[ date ]</a>
              <a href="thread.html#22996">[ thread ]</a>
              <a href="subject.html#22996">[ subject ]</a>
              <a href="author.html#22996">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Aug 22, 2007, at 10:50 AM, Ben Sgro ((ProjectSkyLine)) wrote:
&gt;<i> I'd like to tune this to have different weights for words, because  
</I>&gt;<i> I'm not happy with the search results.
</I>&gt;<i>         $dbObject-&gt;DatabaseQuery('SELECT id, title, body, links_to,'
</I>&gt;<i>                                 . ' MATCH(title, body)'
</I>&gt;<i>                                 . ' AGAINST (' . $dbObject-&gt;Safe 
</I>&gt;<i> ($searchStr)
</I>&gt;<i>                                 . ' IN BOOLEAN MODE)'
</I>&gt;<i>                                 . ' AS score FROM ' .  
</I>&gt;<i> DATABASE_TABLE_CONTENT
</I>&gt;<i>                                 . ' WHERE MATCH (title, body)'
</I>&gt;<i>                                 . ' AGAINST (' . $dbObject-&gt;Safe 
</I>&gt;<i> ($searchStr)
</I>&gt;<i>                                 . ' IN BOOLEAN MODE)'
</I>&gt;<i>                                 . ' ORDER BY score DESC',
</I>&gt;<i>                                 constReturnArray, LOG_LEVEL_DEBUG);
</I>
Hey Ben,

Are you not happy with the relevance sorting?  Or is it not returning  
rows that you think should match... or return too many rows?  What's  
an example of how you could weight the words?

You should test this to see if it's true... but I've seen it  
mentioned that the score returned by &quot;IN BOOLEAN MODE&quot; is an integer  
with the number of terms matched.  Without &quot;IN BOOLEAN MODE&quot;, it  
gives a floating point number that &quot; is computed based on the number  
of words in the row, the number of unique words in that row, the  
total number of words in the collection, and the number of documents  
(rows) that contain a particular word.&quot;

Actually... do you need the &quot;IN BOOLEAN MODE&quot;?  Otherwise, results  
are automatically sorted on relevance.

Also... you could put a higher weight on title matches over body  
matches:
( (3 * MATCH(title) AGAINST ('term')) + (1 * MATCH(body) AGAINST  
('term')) )

-Rob

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023004.html">[nycphp-talk] Tuning MySQL Full Text Search
</A></li>
	<LI>Next message: <A HREF="022998.html">[nycphp-talk] Tuning MySQL Full Text Search
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22996">[ date ]</a>
              <a href="thread.html#22996">[ thread ]</a>
              <a href="subject.html#22996">[ subject ]</a>
              <a href="author.html#22996">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
