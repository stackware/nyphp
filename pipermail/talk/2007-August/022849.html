<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Is there something wrong with this SQL query in PHP?
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2007-August/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Is%20there%20something%20wrong%20with%20this%20SQL%20query%20in%20PHP%3F&In-Reply-To=%3C6.2.3.4.2.20070815095605.0292e0a0%40pop.nyphp.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022946.html">
   <LINK REL="Next"  HREF="022852.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Is there something wrong with this SQL query in PHP?</H1>
    <B>Michael Southwell</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Is%20there%20something%20wrong%20with%20this%20SQL%20query%20in%20PHP%3F&In-Reply-To=%3C6.2.3.4.2.20070815095605.0292e0a0%40pop.nyphp.com%3E"
       TITLE="[nycphp-talk] Is there something wrong with this SQL query in PHP?">michael.southwell at nyphp.com
       </A><BR>
    <I>Wed Aug 15 10:14:26 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="022946.html">[nycphp-talk] queuing data
</A></li>
        <LI>Next message: <A HREF="022852.html">[nycphp-talk] Subversion killed Xampp Apache
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22849">[ date ]</a>
              <a href="thread.html#22849">[ thread ]</a>
              <a href="subject.html#22849">[ subject ]</a>
              <a href="author.html#22849">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>At 09:31 AM 8/15/2007, you wrote:

&gt;<i>The standard mysql_x() functions do not allow multiple queries, so
</I>&gt;<i>you're not so worried about someone injecting drop table statements.
</I>&gt;<i>Nevertheless, plenty of damage and/or disclosure can be performed with
</I>&gt;<i>just a single query.
</I>
Just to emphasize and elaborate on Chris's point here, a query like this:

SELECT * FROM `jobsdb` WHERE `id`=1; DROP `jobsdb`

when it is sent to MySQL via mysql_query() or one of the other mysql 
functions, will NOT execute the command following the semicolon. It 
will however of course work if you are submitting it in the MySQL 
Monitor or phpMyAdmin, because it is in fact a valid MySQL 
instruction (actually, two of them).

But consider a query like this:

DELETE FROM `jobsdb` WHERE `id`=1 OR 1=1

where the 1 OR 1=1 is user input (rather than the expected 1 or 2 or 
whatever). In this case, Chris's &quot;plenty of damage&quot; is possibly an 
understatement, since this query will in fact be executed and all 
rows will be deleted.  In a case like this, you need to be checking 
that your user is entering an expected kind of value, that is (in 
this case), an integer, with the is_int() function, or (in other 
cases) however you can.

The point is that you can't just rely on mysql_real_escape_string for 
protection.

Michael Southwell, Vice President for Education
New York PHP
<A HREF="http://www.nyphp.com/training">http://www.nyphp.com/training</A> - In-depth PHP Training Courses



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022946.html">[nycphp-talk] queuing data
</A></li>
	<LI>Next message: <A HREF="022852.html">[nycphp-talk] Subversion killed Xampp Apache
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22849">[ date ]</a>
              <a href="thread.html#22849">[ thread ]</a>
              <a href="subject.html#22849">[ subject ]</a>
              <a href="author.html#22849">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
