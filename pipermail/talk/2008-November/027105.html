<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] User Input Data scrubbing
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2008-November/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20User%20Input%20Data%20scrubbing&In-Reply-To=%3C2b4feca10811281435u42aa270dib0050cf51cf556e1%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027104.html">
   <LINK REL="Next"  HREF="027108.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] User Input Data scrubbing</H1>
    <B>Elijah Insua</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20User%20Input%20Data%20scrubbing&In-Reply-To=%3C2b4feca10811281435u42aa270dib0050cf51cf556e1%40mail.gmail.com%3E"
       TITLE="[nycphp-talk] User Input Data scrubbing">tmpvar at gmail.com
       </A><BR>
    <I>Fri Nov 28 17:35:06 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="027104.html">[nycphp-talk] User Input Data scrubbing
</A></li>
        <LI>Next message: <A HREF="027108.html">[nycphp-talk] User Input Data scrubbing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27105">[ date ]</a>
              <a href="thread.html#27105">[ thread ]</a>
              <a href="subject.html#27105">[ subject ]</a>
              <a href="author.html#27105">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>hrm.. it depends on a bunch of different things, including your db charset
and the charset in your html.  You can convert between them.. but why hack
it when you can filter the data when it goes into the database?

Filter once, its faster and consistent.


-- Elijah

On Fri, Nov 28, 2008 at 5:15 PM, Michele Waldman &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">mmwaldman at nyc.rr.com</A>&gt;wrote:

&gt;<i>  But if I replace ' with &amp;#39;, there aren't two passes that need to be
</I>&gt;<i> made.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Michele
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  ------------------------------
</I>&gt;<i>
</I>&gt;<i> *From:* <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk-bounces at lists.nyphp.org</A> [mailto:<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk-bounces at lists.nyphp.org</A>]
</I>&gt;<i> *On Behalf Of *Elijah Insua
</I>&gt;<i> *Sent:* Friday, November 28, 2008 5:09 PM
</I>&gt;<i>
</I>&gt;<i> *To:* NYPHP Talk
</I>&gt;<i> *Subject:* Re: [nycphp-talk] User Input Data scrubbing
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Michelle,
</I>&gt;<i>
</I>&gt;<i> you should clean the data in 2 different ways.  first, get rid of all of
</I>&gt;<i> the xss stuff.  Then before you insert the cleaned data into the database,
</I>&gt;<i> clean out any attempts at SQL injection.
</I>&gt;<i>
</I>&gt;<i> There are tons of frameworks and libraries out there that handle exactly
</I>&gt;<i> this.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> -- Elijah
</I>&gt;<i>
</I>&gt;<i> On Fri, Nov 28, 2008 at 4:59 PM, Michele Waldman &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">mmwaldman at nyc.rr.com</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i>
</I>&gt;<i> What about inserting a comment
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &lt;script&gt;alert('hi');&lt;/script&gt;'; delete from users;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Like I'm going to name my table users?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> With that one statement about they have performed a sql injection and html
</I>&gt;<i> injection in one stroke.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Bada bing bada bang bada boom
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Next time I display their comment out of the database they are popping up
</I>&gt;<i> an alert to every user and my users are gone.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Michele
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  ------------------------------
</I>&gt;<i>
</I>&gt;<i> *From:* <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk-bounces at lists.nyphp.org</A> [mailto:<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk-bounces at lists.nyphp.org</A>]
</I>&gt;<i> *On Behalf Of *Elijah Insua
</I>&gt;<i> *Sent:* Friday, November 28, 2008 3:27 PM
</I>&gt;<i> *To:* NYPHP Talk
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> *Subject:* Re: [nycphp-talk] User Input Data scrubbing
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Michele,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> SQL injection and Html injection are two separate issues.
</I>&gt;<i>
</I>&gt;<i> SQL injection is something like a user posting ';DELETE FROM users;  where
</I>&gt;<i> it deletes all of your user accounts.
</I>&gt;<i>
</I>&gt;<i> Html/Cross Site Scripting is more along the lines of what you are talking
</I>&gt;<i> about.  There are tons of libraries out there
</I>&gt;<i> that attempt to kill off as many of these as possible.
</I>&gt;<i>
</I>&gt;<i> As far as your 255 character theory, it is not completely true.  There are
</I>&gt;<i> other character sets such as UTF-8 which allow
</I>&gt;<i> for 65 thousand characters.  I would seriously invest some time into
</I>&gt;<i> finding a library that you can integrate.
</I>&gt;<i>
</I>&gt;<i> - Elijah
</I>&gt;<i>
</I>&gt;<i> On Fri, Nov 28, 2008 at 3:04 PM, Michele Waldman &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">mmwaldman at nyc.rr.com</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i>
</I>&gt;<i> Could ya'll repost any responses to this.  Apparently, my new email address
</I>&gt;<i> wasn't subscribed to the mailing list.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  ------------------------------
</I>&gt;<i>
</I>&gt;<i> *From:* Michele Waldman [mailto:<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">mmwaldman at nyc.rr.com</A>]
</I>&gt;<i> *Sent:* Friday, November 28, 2008 2:06 PM
</I>&gt;<i> *To:* 'NYPHP Talk'
</I>&gt;<i> *Subject:* User Input Data scrubbing
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I'm trying to scrub data input to insert into a database which I will later
</I>&gt;<i> display on the website.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> In order to prevent sql injections and html injections into the code, I
</I>&gt;<i> figured I'd just replace non alphanumeric characters with their html special
</I>&gt;<i> character codes and remove any control characters all together except
</I>&gt;<i> carriage return.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The ascii character codes only go up to 255.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> However, there are lots more characters in html.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> If the user creates a string from which was generated using html using
</I>&gt;<i> characters outside of the ascii character codes, what do those get
</I>&gt;<i> translated to in the string?  A garage character?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Is that a concern?  Or is my only concern those 255 characters in the ascii
</I>&gt;<i> chart?  I'm thinking the 255 characters covers it all.  The characters are a
</I>&gt;<i> finite set which were long ago predefined, unless that changes in the
</I>&gt;<i> future, right?  This means scrubbing the data is a short function.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I'm not using mysql_real_escape_string, because I replace all ' and &quot; with
</I>&gt;<i> their html character code.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I'm not using htmlspecialchars, because it wasn't thorough enough.  I
</I>&gt;<i> simply wrote a function that replaces just about every character with it's
</I>&gt;<i> html character code.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I'm doing this in php after the data is passed to me.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Now, in the case of ajax, I just need to come up with a good approach for
</I>&gt;<i> checking the data received from php, which may vary depending on the type of
</I>&gt;<i> ajax used.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Michele
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> New York PHP User Group Community Talk Mailing List
</I>&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.nyphp.org/show_participation.php">http://www.nyphp.org/show_participation.php</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> New York PHP User Group Community Talk Mailing List
</I>&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.nyphp.org/show_participation.php">http://www.nyphp.org/show_participation.php</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> New York PHP User Group Community Talk Mailing List
</I>&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.nyphp.org/show_participation.php">http://www.nyphp.org/show_participation.php</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.nyphp.org/pipermail/talk/attachments/20081128/16ec3fe7/attachment.html">http://lists.nyphp.org/pipermail/talk/attachments/20081128/16ec3fe7/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027104.html">[nycphp-talk] User Input Data scrubbing
</A></li>
	<LI>Next message: <A HREF="027108.html">[nycphp-talk] User Input Data scrubbing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27105">[ date ]</a>
              <a href="thread.html#27105">[ thread ]</a>
              <a href="subject.html#27105">[ subject ]</a>
              <a href="author.html#27105">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
