<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Unfriendly Float Handling
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2006-March/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Unfriendly%20Float%20Handling&In-Reply-To=%3CF5407F6C-A373-4778-B50B-13426F779318%40tmcode.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017962.html">
   <LINK REL="Next"  HREF="017960.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Unfriendly Float Handling</H1>
    <B>Tim McEwen</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Unfriendly%20Float%20Handling&In-Reply-To=%3CF5407F6C-A373-4778-B50B-13426F779318%40tmcode.com%3E"
       TITLE="[nycphp-talk] Unfriendly Float Handling">tim at tmcode.com
       </A><BR>
    <I>Fri Mar 31 16:58:49 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="017962.html">[nycphp-talk] Mysql Client Version Wrong.
</A></li>
        <LI>Next message: <A HREF="017960.html">[nycphp-talk] Unfriendly Float Handling
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17958">[ date ]</a>
              <a href="thread.html#17958">[ thread ]</a>
              <a href="subject.html#17958">[ subject ]</a>
              <a href="author.html#17958">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
I apologize if this has already been discussed to death here but I  
would love to hear people's thoughts on it.    I am trying to justify  
to a colleague why the behavior below is not a massive flaw in PHP.    
To a new programmer,   the following code should result in  $a being  
equal to $b:

$a=&quot;49.95&quot; + &quot;3.95&quot;;   // or even  $a = 49.95 + 3.95;
$b=53.90;

Unfortunately floats in PHP are subject to the same problems you find  
in many languages with fixed precision.   So due to rounding, in this  
case $a is not equal to $b.     This behavior is documented in the  
manual:  <A HREF="http://www.php.net/manual/en/">http://www.php.net/manual/en/</A> 
language.types.float.php#AEN3375    Straight from the manual:  &quot;So  
never trust floating number results to the last digit and never  
compare floating point numbers for equality.&quot;   Come again?  Never  
compare floating point numbers for equality?   And thats not a bad  
thing?

Given the fact that PHP is so easy to learn and that it is very  
commonly used for financial related tasks such as ecommerce,  doesn't  
it stand to reason that people will assume that they can use the  
internal PHP operators on dollar amounts?   Since many people are  
going to just assume they can do math in a natural manner,  shouldn't  
PHP a little more proactive to ensure that developers won't get  
burned by this?

I've spoken to a few php contributors about this have had very little  
interest in tackling this issue.  The &quot;official&quot; answer is that if  
you are doing math on fixed precision numbers you should use either  
the bc or gmp but these extension as not even enabled by default.

 From what I understand,  there would be a speed penalty for  
detecting and dealing with fixed percision numbers.  Some people  
might not mind the speed hit so why not make it a configurable  
choice?  Or why not create a built in fixed precision type?  Whatever  
the case, I think PHP needs a built in solution that does not rely on  
extensions. Thoughts?

-Tim

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017962.html">[nycphp-talk] Mysql Client Version Wrong.
</A></li>
	<LI>Next message: <A HREF="017960.html">[nycphp-talk] Unfriendly Float Handling
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17958">[ date ]</a>
              <a href="thread.html#17958">[ thread ]</a>
              <a href="subject.html#17958">[ subject ]</a>
              <a href="author.html#17958">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
