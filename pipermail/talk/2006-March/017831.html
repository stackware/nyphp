<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Faced with a headache :D
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2006-March/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Faced%20with%20a%20headache%20%3AD&In-Reply-To=%3C8d9a42800603201454j1de86fd7ga73b9dff7d896ef3%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017830.html">
   <LINK REL="Next"  HREF="017832.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Faced with a headache :D</H1>
    <B>Joseph Crawford</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Faced%20with%20a%20headache%20%3AD&In-Reply-To=%3C8d9a42800603201454j1de86fd7ga73b9dff7d896ef3%40mail.gmail.com%3E"
       TITLE="[nycphp-talk] Faced with a headache :D">codebowl at gmail.com
       </A><BR>
    <I>Mon Mar 20 17:54:08 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="017830.html">[nycphp-talk] Pear Mail error
</A></li>
        <LI>Next message: <A HREF="017832.html">[nycphp-talk] Faced with a headache :D
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17831">[ date ]</a>
              <a href="thread.html#17831">[ thread ]</a>
              <a href="subject.html#17831">[ subject ]</a>
              <a href="author.html#17831">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey guys,

I have a database of vendors, each have different days and times they are
open from.

now what i need to do is this

check to see if the vendor is open at the current time, if not i need to
check the next day, then the next, etc..

I have some simple code that is not in working form, that is this


                            $time = '';
                            $day = date('w');
                            $days = 1;

                            // getLeadTime() returns a time in minutes,
converting to seconds so we can add it to the timestamp.
                            $leadTime = 60 * $location-&gt;getLeadTime();

                            $i = $day;
                            while($i &lt;= 6) {
                                $curday = $day + $i;
                                if($curday == 7) {
                                    $i = 0;
                                    $curday = 6;
                                }
                                // getOpenTime() returns a string such as
10:00:00 or 23:30:00
                                $timeStr = $location-&gt;getOpenTime($curday);
                                // if $timStr is = 00:00:00 then it needs to
continue on to the next loop
                                if($timeStr == '00:00:00') {
                                    $i++;
                                    $days++;
                                    continue;
                                }
                            }
                            // now we need to get the timestamp, this is
where the strtotime converts the string from getOpenTime to a timestamp and
we add the leadTime
                            $vendorOpenTime =
strtotime($location-&gt;getOpenTime($day + $days)) + $leadTime;

Now the above code works fine if they are closed on Monday and not open
again until Thursday, the trouble lies in being closed Sat and Sun, it
doesnt flip over to Monday.  it just says get it delivered today, even if
they are closed the current day.

Anyone who can help me with this i would appreciate it, i wouldnt even mind
paying someone to help me nail this logic :D  I have spent pretty much about
5 hours on this and i think i just need another brain to pick at it :)

Thanks,
--
Joseph Crawford Jr.
Zend Certified Engineer
Codebowl Solutions, Inc.
<A HREF="http://www.codebowl.com/">http://www.codebowl.com/</A>
1-802-671-2021
<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">codebowl at gmail.com</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.nyphp.org/pipermail/talk/attachments/20060320/c85ea7a8/attachment.html">http://lists.nyphp.org/pipermail/talk/attachments/20060320/c85ea7a8/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017830.html">[nycphp-talk] Pear Mail error
</A></li>
	<LI>Next message: <A HREF="017832.html">[nycphp-talk] Faced with a headache :D
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17831">[ date ]</a>
              <a href="thread.html#17831">[ thread ]</a>
              <a href="subject.html#17831">[ subject ]</a>
              <a href="author.html#17831">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
