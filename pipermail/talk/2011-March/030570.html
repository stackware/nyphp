<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Eaccelerator
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2011-March/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Eaccelerator&In-Reply-To=%3C4D8A1FED.9050402%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030569.html">
   <LINK REL="Next"  HREF="030571.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Eaccelerator</H1>
    <B>Gary Mort</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Eaccelerator&In-Reply-To=%3C4D8A1FED.9050402%40gmail.com%3E"
       TITLE="[nycphp-talk] Eaccelerator">garyamort at gmail.com
       </A><BR>
    <I>Wed Mar 23 12:29:33 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="030569.html">[nycphp-talk] PHP caching options
</A></li>
        <LI>Next message: <A HREF="030571.html">[nycphp-talk] php community conference
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30570">[ date ]</a>
              <a href="thread.html#30570">[ thread ]</a>
              <a href="subject.html#30570">[ subject ]</a>
              <a href="author.html#30570">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>As a followup to my post...  Rolling my own seems that the best solution 
to start with is bcompiler from PECL as it gets rid of all the shared 
memory management options.

However, happily EAccellerator <A HREF="http://eaccelerator.net/">http://eaccelerator.net/</A> has a fine set 
of configuration options where looking it over, it can be used as the 
basis of my thoughts - by setting the php filesize to 1 byte for shared 
memory, I can force all opcode caching to be used.

It also has a good management API, so I can disable built in management 
and instead hand that process over to a PHP server process to 
periodically clean out old files as well as refreshing files in the 
cache when they change on disk.

I also like the fact that you can disable caching on an individual file 
basis, so if there are files you don't want cached it is easy to fix that.

The one downside is it means no caching for eval.... however that is 
easily fixed by using include instead of eval[using Streams, one can 
define a &quot;variable&quot; stream and then include the variable...

So instead of

$evalphp_query = &quot;select mycode FROM my_code_table where code_select = 
'criteria'&quot;;
$result = mysql_query($evalphp_query);
while ($row = mysql_fetch_object($result)) {
     eval($row-&gt;mycode);
}

Instead one could run it as:
$evalphp_query = &quot;select mycode, SHA(mycode) as myfilename, 
created_timestamp, changed_timestampe FROM my_code_table where 
code_select = 'criteria'&quot;;
$result = mysql_query($evalphp_query);
while ($row = mysql_fetch_object($result)) {
     $pretendfile[$row-&gt;myfilename] = $row;
     include('<A HREF="pretendfile://">pretendfile://</A>'.$row-&gt;myfilename);
}

Register a pretendfile stream handler to provide all the needed file 
data[change date, created date, size, etc] using the $pretendfile array 
and not only can all the old eval'd code now be cached by the opcode 
cacher, but you also gain the ability to use the change timestamp to 
know when to refresh it.

So I'm curious, while this looks good for hacking/having fun with..  for 
&quot;real world use&quot; is eaccelerator currently considered stable?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.nyphp.org/pipermail/talk/attachments/20110323/63fb0c70/attachment.html">http://lists.nyphp.org/pipermail/talk/attachments/20110323/63fb0c70/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030569.html">[nycphp-talk] PHP caching options
</A></li>
	<LI>Next message: <A HREF="030571.html">[nycphp-talk] php community conference
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30570">[ date ]</a>
              <a href="thread.html#30570">[ thread ]</a>
              <a href="subject.html#30570">[ subject ]</a>
              <a href="author.html#30570">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
