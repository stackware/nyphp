<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> coding optimization reference (was Re: [nycphp-talk] PHP and	memory usage)
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2004-October/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20coding%20optimization%20reference%20%28was%20Re%3A%20%5Bnyphp-talk%5D%20PHP%20and%0A%09memory%20usage%29&In-Reply-To=%3Cp0611040bbd96b000086a%40%5B192.168.0.9%5D%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012210.html">
   <LINK REL="Next"  HREF="012233.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>coding optimization reference (was Re: [nycphp-talk] PHP and	memory usage)</H1>
    <B>Marc Antony Vose</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20coding%20optimization%20reference%20%28was%20Re%3A%20%5Bnyphp-talk%5D%20PHP%20and%0A%09memory%20usage%29&In-Reply-To=%3Cp0611040bbd96b000086a%40%5B192.168.0.9%5D%3E"
       TITLE="coding optimization reference (was Re: [nycphp-talk] PHP and	memory usage)">suzerain at suzerain.com
       </A><BR>
    <I>Sat Oct 16 07:06:12 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="012210.html">[nycphp-talk] PHP and memory usage
</A></li>
        <LI>Next message: <A HREF="012233.html">coding optimization reference (was Re: [nycphp-talk] PHP andmemory	usage)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12232">[ date ]</a>
              <a href="thread.html#12232">[ thread ]</a>
              <a href="subject.html#12232">[ subject ]</a>
              <a href="author.html#12232">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi there.

In my post about memory usage, the suggested solutions are pretty 
much in line with the path I was thinking, but I could probably use 
some help, at this point in my PHP 'career' with a good reference on 
coding efficiency.

Does anyone know of a good website (preferred) or book (second 
choice) that really discusses strategies for script optimization, in 
terms of performance, of passing by reference vs. not, and how to 
structure loops for optimal performance, and so on?  How I can 
profile my projects and spot inefficiencies?

This is probably all CS 101 stuff, but I'm a self-taught coder, and 
could use the guidance.

Thanks,

Marc




&gt;<i>Have you tried just increasing the memory limit in the php.ini file? 
</I>&gt;<i>I think it defaults to 8MB.
</I>&gt;<i>
</I>&gt;<i>Of course, that is a temporary measure. The problem is really that 
</I>&gt;<i>your code doesn't scale. Are you passing by reference? PHP4 makes 
</I>&gt;<i>copies of variables when you pass them to functions, so you may 
</I>&gt;<i>actually have 2 or 3 (or more) copies of your data depending on how 
</I>&gt;<i>your classes are setup.
</I>&gt;<i>
</I>&gt;<i>Are you merging the complete list with the template and then passing 
</I>&gt;<i>the resultant array off to be mailed? That's a lot of customized 
</I>&gt;<i>copies of the template (6,000+) to hold in memory. It's probably the 
</I>&gt;<i>size of the template that is causing you problems. Adding 1 
</I>&gt;<i>character to the template will cause an additional 6,000 characters 
</I>&gt;<i>to be stored in memory. That eats up lots of memory real fast. To 
</I>&gt;<i>scale it, you would need to do it in reasonable chunks, or even one 
</I>&gt;<i>at a time, reusing the variables to &quot;flush&quot; memory.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>On Oct 14, 2004, at 10:10 PM, Marc Antony Vose wrote:
</I>&gt;<i>
</I>&gt;&gt;<i>Hi there:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>This is a very general question, but I don't know where to begin, 
</I>&gt;&gt;<i>but generally.  I have, over the years built a fairly complex 
</I>&gt;&gt;<i>publishing system which is installed on several sites.  Recently, 
</I>&gt;&gt;<i>I've noticed that my mailing list component is choking; PHP bunks 
</I>&gt;&gt;<i>out with a memory limit error, which is very unfortunate, since 
</I>&gt;&gt;<i>there's no way of knowing how many messages were sent before this 
</I>&gt;&gt;<i>happened.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>I need to address this issue, but I wanted to get people's 
</I>&gt;&gt;<i>strategic opinions about what to cut out in order to reduce memory 
</I>&gt;&gt;<i>consumption.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Basically, my central data class extracts names and email addresses 
</I>&gt;&gt;<i>out of a database, stores that in an array.  We're talking around 
</I>&gt;&gt;<i>6,000 users here...not a huge number, but sizable.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Then, I loop through the returned users, create a custom message 
</I>&gt;&gt;<i>for them by replacing codes in a template, and pass it off to a 
</I>&gt;&gt;<i>class of mine which is just a wrapper for PHPMailer.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>That's the basic structure.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>So, what should I do?  A few salient points:
</I>&gt;&gt;<i>
</I>&gt;&gt;:<i> Do objects and arrays eat up a ton of memory?  Should I instead 
</I>&gt;&gt;<i>select each user separately inside the loop (more database 
</I>&gt;&gt;<i>connections, but fewer items stored each time)?
</I>&gt;&gt;<i>
</I>&gt;&gt;:<i> Should I be unsetting variables as soon as I no longer need them? 
</I>&gt;&gt;<i>Would this make much of a difference?
</I>&gt;&gt;<i>
</I>&gt;&gt;:<i> Anything else I should look at?  My goal here is to build it so 
</I>&gt;&gt;<i>it will scale upward; this project will eventually have tens of 
</I>&gt;&gt;<i>thousands of users...maybe hundreds of thousands.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Thanks much,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>--
</I>&gt;&gt;<i>Marc Antony Vose
</I>&gt;&gt;<i><A HREF="http://www.suzerain.com/">http://www.suzerain.com/</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>What can be shown cannot be said.
</I>&gt;&gt;<i>-- Ludwig Wittgenstein
</I>&gt;&gt;<i>_______________________________________________
</I>&gt;&gt;<i>New York PHP Talk
</I>&gt;&gt;<i>Supporting AMP Technology (Apache/MySQL/PHP)
</I>&gt;&gt;<i><A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;&gt;<i><A HREF="http://www.newyorkphp.org">http://www.newyorkphp.org</A>
</I>&gt;&gt;<i>
</I>&gt;<i>--
</I>&gt;<i>Brent Baisley
</I>&gt;<i>Systems Architect
</I>&gt;<i>Landover Associates, Inc.
</I>&gt;<i>Search &amp; Advisory Services for Advanced Technology Environments
</I>&gt;<i>p: 212.759.6400/800.759.0577
</I>&gt;<i>
</I>&gt;<i>_______________________________________________
</I>&gt;<i>New York PHP Talk
</I>&gt;<i>Supporting AMP Technology (Apache/MySQL/PHP)
</I>&gt;<i><A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;<i><A HREF="http://www.newyorkphp.org">http://www.newyorkphp.org</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012210.html">[nycphp-talk] PHP and memory usage
</A></li>
	<LI>Next message: <A HREF="012233.html">coding optimization reference (was Re: [nycphp-talk] PHP andmemory	usage)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12232">[ date ]</a>
              <a href="thread.html#12232">[ thread ]</a>
              <a href="subject.html#12232">[ subject ]</a>
              <a href="author.html#12232">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
