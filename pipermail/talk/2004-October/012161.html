<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] NEW PHundamentals Question - Headers &amp; Downloads
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2004-October/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20NEW%20PHundamentals%20Question%20-%20Headers%20%26%20Downloads&In-Reply-To=%3C416D77DA.9030006%40phpwerx.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012158.html">
   <LINK REL="Next"  HREF="012167.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] NEW PHundamentals Question - Headers &amp; Downloads</H1>
    <B>Dan Cech</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20NEW%20PHundamentals%20Question%20-%20Headers%20%26%20Downloads&In-Reply-To=%3C416D77DA.9030006%40phpwerx.net%3E"
       TITLE="[nycphp-talk] NEW PHundamentals Question - Headers &amp; Downloads">dcech at phpwerx.net
       </A><BR>
    <I>Wed Oct 13 14:45:46 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="012158.html">[nycphp-talk] NEW PHundamentals Question - Headers &amp; Downloads
</A></li>
        <LI>Next message: <A HREF="012167.html">[nycphp-talk] NEW PHundamentals Question - Headers &amp; Downloads
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12161">[ date ]</a>
              <a href="thread.html#12161">[ thread ]</a>
              <a href="subject.html#12161">[ subject ]</a>
              <a href="author.html#12161">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Chris Shiflett wrote:
&gt;<i> --- Dan Cech &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">dcech at phpwerx.net</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i>$attach = array(
</I>&gt;&gt;<i>   'filename' =&gt; 'myfile.pdf',
</I>&gt;&gt;<i>   'mimetype' =&gt; 'application/pdf',
</I>&gt;&gt;<i>   'content'  =&gt; 'pdf here'
</I>&gt;&gt;<i>);
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>header('Content-Disposition: attachment; filename='.
</I>&gt;&gt;<i>$attach['filename']);
</I>&gt;&gt;<i>header('Content-length: '. strlen($attach['content']));
</I>&gt;&gt;<i>header('Content-type: '. $attach['mimetype']);
</I>&gt;&gt;<i>echo $attach['content'];
</I>&gt;&gt;<i>exit;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Note the case of Content-Length and Content-Type. This doesn't affect
</I>&gt;<i> implementation, but we may as well be perfectionists. :-)
</I>
Hehe, I was wondering how long it would be before someone called me on 
that, see my previous mail to the list... That's what I get for posting 
before I check the relevant RFC.

&gt;<i> I think using an array makes the syntax a bit cumbersome, but that's just
</I>&gt;<i> personal preference.
</I>&gt;<i> 
</I>&gt;&gt;<i>The Content-Disposition header tells the browser to open the
</I>&gt;&gt;<i>download dialog, and lets it know the correct filename/extension.
</I>&gt;<i> 
</I>&gt;<i> As shown, yes. You can specify the inline attribute to do the opposite,
</I>&gt;<i> basically making the resource an embedded one. Dan clearly knows this - I
</I>&gt;<i> only mention this to make sure our wording isn't misleading. I know a lot
</I>&gt;<i> of people who think the header() function is for redirecting, for a
</I>&gt;<i> similar reason.
</I>&gt;<i> 
</I>&gt;&gt;<i>The Content-type header lets the browser correctly display an
</I>&gt;&gt;<i>indication of the file type to the user (PDF,XLS,EXE etc). In
</I>&gt;&gt;<i>most browsers it will also influence the default action (open vs
</I>&gt;&gt;<i>download).
</I>&gt;<i> 
</I>&gt;<i> I have read where developers intentionally set an unknown mime type when
</I>&gt;<i> they want to force a download. Does anyone know whether this is justified?
</I>&gt;<i> The argument I've seen is that when the browser has a default action
</I>&gt;<i> specified for the given mime type, the attachment attribute of
</I>&gt;<i> Content-Disposition is ignored, and the resource is displayed inline
</I>&gt;<i> instead.
</I>
The most common trick seems to be to specify the mime-type as 
application/force-download or application/x-download, though I haven't 
been able to find any specification relating to these mime-types.

This is possible, though it seems a nasty hack because the download 
dialog for the user would most likely display an 'unknown file type' and 
would probably trigger such things as the WinXP 'firewall', etc.

The idea I guess would be to work around a user who has told their 
browser to always open a particular kind of file without prompting 
(usually such things as .pdf,.xls or .doc files), but in doing so you 
are really exceeding the limits of the specification, and are really at 
the mercy of implementation quirks.

According to the (RFC2183) spec you can use an unknown 
Content-Disposition, as the spec states it should be treated as 
Content-Disposition: attachment.  However I haven't experimented with 
this myself.

Dan

&gt;<i> Chris
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012158.html">[nycphp-talk] NEW PHundamentals Question - Headers &amp; Downloads
</A></li>
	<LI>Next message: <A HREF="012167.html">[nycphp-talk] NEW PHundamentals Question - Headers &amp; Downloads
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12161">[ date ]</a>
              <a href="thread.html#12161">[ thread ]</a>
              <a href="subject.html#12161">[ subject ]</a>
              <a href="author.html#12161">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
