<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] PHP STRING QUESTION
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2004-October/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20PHP%20STRING%20QUESTION&In-Reply-To=%3C41755E22.7030603%40phpwerx.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012264.html">
   <LINK REL="Next"  HREF="012269.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] PHP STRING QUESTION</H1>
    <B>Dan Cech</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20PHP%20STRING%20QUESTION&In-Reply-To=%3C41755E22.7030603%40phpwerx.net%3E"
       TITLE="[nycphp-talk] PHP STRING QUESTION">dcech at phpwerx.net
       </A><BR>
    <I>Tue Oct 19 14:34:10 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="012264.html">[nycphp-talk] PHP STRING QUESTION
</A></li>
        <LI>Next message: <A HREF="012269.html">[nycphp-talk] PHP STRING QUESTION
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12268">[ date ]</a>
              <a href="thread.html#12268">[ thread ]</a>
              <a href="subject.html#12268">[ subject ]</a>
              <a href="author.html#12268">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Henry Ponce wrote:
&gt;<i> Hi:
</I>&gt;<i> 
</I>&gt;<i> This only helps if you use PHP 5.
</I>&gt;<i> 
</I>&gt;<i> Is there a way to do what was asked with PHP 4??
</I>&gt;<i> 
</I>&gt;<i> Thanx.
</I>
There is a way to do this in php4 for those who don't have/want to use 
preg_replace:

function str_ireplace ($find,$replace,$string)
{
   if (!is_array($find)) {
     $find = array($find);
   }

   if (!is_array($replace)) {
     // this will duplicate the string into an array the size of $find
     $rString = $replace;
     $replace = array();
     foreach ($find as $fKey =&gt; $fItem) {
       $replace[$fKey] = $rString;
     }
   }

   foreach ($find as $fKey =&gt; $fItem) {
     $between = explode(strtolower($fItem),strtolower($string));
     $pos = 0;

     foreach ($between as $bKey =&gt; $bItem) {
       $between[$bKey] = substr($string,$pos,strlen($bItem));
       $pos += strlen($bItem) + strlen($fItem);
     }

     if (isset($replace[$fKey])) {
       $string = implode($replace[$fKey],$between);
     } else {
       $string = implode('',$between);
     }
   }

   return($string);
}

the easiest way is to use preg_replace though:

$highlighted = preg_replace('/('.preg_quote($searched_for).')/i', '&lt;span 
class=&quot;highlight&quot;&gt;$1&lt;/span&gt;', $searched_in);

With preg you can do even more fun things like pulling out context 
around matching terms, etc, for example:

function hilight_body($searched,$found)
{
   $newsearch = preg_replace('/\s+/is','|',preg_quote($searched,'/'));
   $found = htmlentities($found);

   $find = array(
     '/\$/is',                                              // remove 
dollar signs
     '/(('.$newsearch.')+)/is',                             // hilight
     '/(^|^[^&lt;]*?\s)([^&lt;]{0,100}&lt;span)/ise',                // trim front
     '/(&lt;\/span&gt;[^&lt;]{0,100})($|\s[^&lt;]*?$)/ise',             // trim back
     '/(&lt;\/span&gt;[^&lt;]{0,25})(\s[^&lt;]*?)?(\s[^\s]*&lt;span)/ise', // trim between
     '/###DOLLAR###/is'                                     // replace 
dollar signs
   );

   $replace = array(
     '###DOLLAR###',
     '&lt;span class=&quot;highlight&quot;&gt;$1&lt;/span&gt;',
     '(trim(&quot;$1&quot;)==&quot;&quot;?&quot;$1&quot;:&quot;... &quot;).&quot;$2&quot;',
     '&quot;$1&quot;.(trim(&quot;$2&quot;)==&quot;$2&quot;?&quot;$2&quot;:&quot; ...&quot;)',
     '&quot;$1&quot;.(trim(&quot;$2&quot;)==&quot;$2&quot;?&quot;$2&quot;:&quot; ...&quot;).&quot;$3&quot;',
     '$'
   );

   $newfound = preg_replace($find,$replace,$found);

   if ($newfound != $found) {
     return $newfound;
   }

   $find = array(
     '/\$/is',                                              // remove 
dollar signs
     '/^(.{0,100})($|\s.*?$)/ise',                          // trim to 
length
     '/###DOLLAR###/is'                                     // replace 
dollar signs
   );

   $replace = array(
     '###DOLLAR###',
     '&quot;$1&quot;.(trim(&quot;$2&quot;)==&quot;&quot;?&quot;$2&quot;:&quot; ...&quot;)',
     '$'
   );

   return preg_replace($find,$replace,$found);
}

Which will return 100 characters before the first match, 25 characters 
after each match and 100 characters after the last match with the 
matched terms surrounded by span tags, or the first 100 characters of a 
string with no matches.

Dan

&gt;<i> On Tuesday 19 October 2004 14:57, Matt Juszczak wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i><A HREF="http://us2.php.net/manual/en/function.str-ireplace.php">http://us2.php.net/manual/en/function.str-ireplace.php</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Hope that helps,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Matt
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>SALMAN MAZHAR wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>Hello everyone,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>My name is Salman Mazhar. I have a script that searches for a keyword 
</I>&gt;&gt;&gt;<i>in a text file. I am able to search the word using the stristr() 
</I>&gt;&gt;&gt;<i>function in php. This function is non-case sensitive. However, I want 
</I>&gt;&gt;&gt;<i>to display the searched word in the line as highlighted in a different 
</I>&gt;&gt;&gt;<i>color than the line. I use the str_replace() function and replace the 
</I>&gt;&gt;&gt;<i>word with the word in red color but the str_replace() function is 
</I>&gt;&gt;&gt;<i>case-sensitive. If I am searching for the word Computer and I type in 
</I>&gt;&gt;&gt;<i>upper case C, its only going to replace those instances of computer 
</I>&gt;&gt;&gt;<i>that begin with upper case C and leave the rest of them without any 
</I>&gt;&gt;&gt;<i>color change. Does anyone know how to get around this problem?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>Thanks.
</I>&gt;&gt;&gt;<i>Sincerely Yours,
</I>&gt;&gt;&gt;<i>Salman Mazhar.
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012264.html">[nycphp-talk] PHP STRING QUESTION
</A></li>
	<LI>Next message: <A HREF="012269.html">[nycphp-talk] PHP STRING QUESTION
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12268">[ date ]</a>
              <a href="thread.html#12268">[ thread ]</a>
              <a href="subject.html#12268">[ subject ]</a>
              <a href="author.html#12268">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
