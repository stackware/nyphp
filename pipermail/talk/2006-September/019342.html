<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] How to pass on variables with POST without using a	form
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2006-September/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20How%20to%20pass%20on%20variables%20with%20POST%20without%20using%0A%20a%09form&In-Reply-To=%3C4511D70E.9090608%40phpwerx.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019340.html">
   <LINK REL="Next"  HREF="019343.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] How to pass on variables with POST without using a	form</H1>
    <B>Dan Cech</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20How%20to%20pass%20on%20variables%20with%20POST%20without%20using%0A%20a%09form&In-Reply-To=%3C4511D70E.9090608%40phpwerx.net%3E"
       TITLE="[nycphp-talk] How to pass on variables with POST without using a	form">dcech at phpwerx.net
       </A><BR>
    <I>Wed Sep 20 20:04:30 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="019340.html">[nycphp-talk] How to pass on variables with POST without using a	form
</A></li>
        <LI>Next message: <A HREF="019343.html">[nycphp-talk] How to pass on variables with POST without using a	form
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19342">[ date ]</a>
              <a href="thread.html#19342">[ thread ]</a>
              <a href="subject.html#19342">[ subject ]</a>
              <a href="author.html#19342">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>CED wrote:
&gt;<i> Good thing for HTMLentities eh?
</I>
Not really, you don't want to use htmlentities in this situation.  You
are escaping your values into POST data so you should use urlencode, as
in the example below.

&gt;<i> ----- Original Message ----- 
</I>&gt;<i> From: &quot;David Krings&quot; &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">ramons at gmx.net</A>&gt;
</I>&gt;<i> To: &quot;NYPHP Talk&quot; &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk at lists.nyphp.org</A>&gt;
</I>&gt;<i> Sent: Wednesday, September 20, 2006 7:46 PM
</I>&gt;<i> Subject: Re: [nycphp-talk] How to pass on variables with POST without using a
</I>&gt;<i> form
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> indeed cURL it is, but that wasn't what I recall using. I also found the
</I>&gt;<i> deal with sockets, but that looks awfully scary.
</I>&gt;<i> 
</I>&gt;<i> Now, cURL triggers another question. Can I send multiple
</I>&gt;<i> 
</I>&gt;<i>          curl_setopt($ch, CURLOPT_POSTFIELDS, &quot;$curlpost&quot;);
</I>&gt;<i> 
</I>&gt;<i> with $curlpost something like data1=value1, or do I need to jam that all
</I>&gt;<i> into one string and tie it together with the &amp;? If yes, then I need to add
</I>&gt;<i> more code to screen for &amp; on all variables as it is very likely that the &amp;
</I>&gt;<i> may be included. I also saw on php.net this:
</I>&gt;<i>          &quot;Just a reminder: When setting your CURLOPT_POSTFIELDS remember to
</I>&gt;<i> replace the spaces in your values with %20 &quot;
</I>&gt;<i> 
</I>&gt;<i> Ah, bummer! It basically expects the name=data sets to be formatted as if
</I>&gt;<i> one wants to send a get via URL.
</I>
The easiest way I've found to do this is as follows:

$myvars = array(
  'item1' =&gt; 'value1',
  'item2' =&gt; 'value2',
);

$postdata = array();
foreach ($myvars as $k =&gt; $v) {
  $postdata[] = urlencode($k) .'=' . urlencode($v);
}
$postdata = implode('&amp;',$postdata);

curl_setopt($ch, CURLOPT_POSTFIELDS, $postdata);

By running both your keys and values through urlencode, you'll be sure
that you won't end up with mangled post data, no matter what the values'
contents are.

If you want to be really ahead of the curve you can use
ini_get('arg_separator.output') in place of '&amp;' in the implode.

Dan

&gt;<i> 
</I>&gt;<i> I guess I go against my own advice, pack the two dozen variables into the
</I>&gt;<i> session and then unset them after savely retrieving them........unless
</I>&gt;<i> someone has a better idea that is not as painful as manipulating headers or
</I>&gt;<i> massaging strings for cURL to use.
</I>&gt;<i> 
</I>&gt;<i> Bah! This rapidly inhales! :(
</I>&gt;<i> 
</I>&gt;<i>                  Thanks for the tip anyway, I can see some other good uses
</I>&gt;<i> for cURL.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>                          David K.
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019340.html">[nycphp-talk] How to pass on variables with POST without using a	form
</A></li>
	<LI>Next message: <A HREF="019343.html">[nycphp-talk] How to pass on variables with POST without using a	form
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19342">[ date ]</a>
              <a href="thread.html#19342">[ thread ]</a>
              <a href="subject.html#19342">[ subject ]</a>
              <a href="author.html#19342">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
