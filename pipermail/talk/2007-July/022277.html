<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] When to close a mysql connection
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2007-July/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20When%20to%20close%20a%20mysql%20connection&In-Reply-To=%3C1d8a0e930707020911n42f8f960v89b4751f4890cff8%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022276.html">
   <LINK REL="Next"  HREF="022280.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] When to close a mysql connection</H1>
    <B>Adrian Noland</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20When%20to%20close%20a%20mysql%20connection&In-Reply-To=%3C1d8a0e930707020911n42f8f960v89b4751f4890cff8%40mail.gmail.com%3E"
       TITLE="[nycphp-talk] When to close a mysql connection">anoland at indigente.net
       </A><BR>
    <I>Mon Jul  2 12:11:14 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="022276.html">[nycphp-talk] When to close a mysql connection
</A></li>
        <LI>Next message: <A HREF="022280.html">[nycphp-talk] More type casting help
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22277">[ date ]</a>
              <a href="thread.html#22277">[ thread ]</a>
              <a href="subject.html#22277">[ subject ]</a>
              <a href="author.html#22277">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Persistent connections need to be used with care.

The following article explains some problems:
<A HREF="http://www.mysqlperformanceblog.com/2006/11/12/are-php-persistent-connections-evil/">http://www.mysqlperformanceblog.com/2006/11/12/are-php-persistent-connections-evil/</A>

Additionally, the default configurations for PHP, Apache and MySQL don't
lend themselves well to persistent connections. One disparity that will bite
you in the end is the default timeout to close the connection. MySQL's
default timeout is 8 hours. The expected environment is a desktop client
that will re-use the same connection again and again. HTTP does not work the
same way. If you wind up with several orphaned connections to the DB server
they will just sit around waiting for nothing until the connection times
out. This will use up all your available connections.

Another configuration issue is the number of MySQL connections need to match
the number of threads/processes configured for Apache.

<A HREF="http://us.php.net/manual/en/features.persistent-connections.php">http://us.php.net/manual/en/features.persistent-connections.php</A>
&quot;You are probably using a multi-process web server such as Apache. Since
database connections cannot be shared among different processes a new
one is created if the request happen to come to a different web server
child process.&quot;

Adrian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.nyphp.org/pipermail/talk/attachments/20070702/805d71ec/attachment.html">http://lists.nyphp.org/pipermail/talk/attachments/20070702/805d71ec/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022276.html">[nycphp-talk] When to close a mysql connection
</A></li>
	<LI>Next message: <A HREF="022280.html">[nycphp-talk] More type casting help
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22277">[ date ]</a>
              <a href="thread.html#22277">[ thread ]</a>
              <a href="subject.html#22277">[ subject ]</a>
              <a href="author.html#22277">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
