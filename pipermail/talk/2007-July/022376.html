<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] advice on scaling up
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2007-July/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20advice%20on%20scaling%20up&In-Reply-To=%3C200707111804.01304.arzala%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022352.html">
   <LINK REL="Next"  HREF="022438.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] advice on scaling up</H1>
    <B>Anirudh Zala</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20advice%20on%20scaling%20up&In-Reply-To=%3C200707111804.01304.arzala%40gmail.com%3E"
       TITLE="[nycphp-talk] advice on scaling up">arzala at gmail.com
       </A><BR>
    <I>Wed Jul 11 08:34:00 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="022352.html">[nycphp-talk] advice on scaling up
</A></li>
        <LI>Next message: <A HREF="022438.html">[nycphp-talk] advice on scaling up
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22376">[ date ]</a>
              <a href="thread.html#22376">[ thread ]</a>
              <a href="subject.html#22376">[ subject ]</a>
              <a href="author.html#22376">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tuesday 10 Jul 2007 23:17:13 Marc Antony Vose wrote:
&gt;<i> Hi all:
</I>&gt;<i>
</I>&gt;<i> I'm a developer who has concentrated more on smaller-scale projects,
</I>&gt;<i> but as it turns out one of my projects is beginning to stress the
</I>&gt;<i> limits of a single server, and so I'm about to begin venturing into
</I>&gt;<i> the unknown.
</I>&gt;<i>
</I>&gt;<i> The project is currently in the &quot;tens of thousands&quot; of users range,
</I>&gt;<i> but it looks like we need to start drafting a plan to scale it up to
</I>&gt;<i> &quot;hundreds of thousands&quot; to a million or so users.
</I>&gt;<i>
</I>&gt;<i> This is a site that is running on a custom built PHP framework (which
</I>&gt;<i> seems to be performing rather well), and MySQL.  The server's running
</I>&gt;<i> Apache and Linux (Red Hat). There is some image and data uploading
</I>&gt;<i> from users, and most pages are served dynamically, currently, with
</I>&gt;<i> very simple SQL.  I have taken the step of caching any page elements
</I>&gt;<i> that require any kind of recursion or iteration to produce (such as a
</I>&gt;<i> list of categories that displays the number of related items from
</I>&gt;<i> other tables in it), but I have not cached, for example, database
</I>&gt;<i> calls to just one item matching on the primary key.  I think this
</I>&gt;<i> approach has been sensible so far.
</I>&gt;<i>
</I>&gt;<i> If I had to classify the site, I'd say it follows a similar usage
</I>&gt;<i> pattern as something like last.fm, or facebook, only much smaller.
</I>&gt;<i> Social networking-type thing, but users are not constantly visiting
</I>&gt;<i> and reloading pages, like a news site.
</I>&gt;<i>
</I>&gt;<i> So, more than the PHP coding strategy, my question is about what kind
</I>&gt;<i> of hosting/server arrangement I would be looking at to handle the
</I>&gt;<i> kind of load I'm talking about.
</I>&gt;<i>
</I>&gt;<i> How many servers will I need to handle the kind of traffic I
</I>&gt;<i> require?  If this question is not so easily answered, then what would
</I>&gt;<i> be my equation for figuring this out?  A friend told me he works on a
</I>&gt;<i> site that has 4,000,000 users and they have their system optimized to
</I>&gt;<i> handle 500 requests per second.  This is for a search engine-type
</I>&gt;<i> site...is this a reasonable metric?
</I>&gt;<i>
</I>&gt;<i> When you separate database and http servers, then what should be the
</I>&gt;<i> hardware priorities for each?  CPU speed? RAM?  hard disk speed,
</I>&gt;<i> etc.?  Perhaps the database is more RAM and HD dependent, and the web
</I>&gt;<i> server will need more CPU and RAM?
</I>&gt;<i>
</I>&gt;<i> I'd be interesting in learning a bit from those of you who are
</I>&gt;<i> working on larger-scale projects what's powering your servers, and
</I>&gt;<i> what kind of capacity you think your setup's giving you.
</I>&gt;<i>
</I>&gt;<i> Thanks for helping me determine exactly where to research.
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i>
</I>&gt;<i> Marc Vose
</I>&gt;<i> Suzerain Studios
</I>
Let me  try to suggest some general points.

At client environment you may use Ajax (and JSON) to increase responsiveness 
of your website. But effective implementation of Ajax requires good knowledge 
of JS and how it interacts with server.

On server side you may split your application in 3 type of environments viz:

Database environment, Static server environment for serving static contents of 
your site like images, css etc and Main environment for executing PHP code 
and serving output. Hence good configuration and well written code can 
effectively utilize all of 3 environments.

Database environment may include Replication of Clustering depending upon 
requirement, load and budget, Static environment may be running on 
lightweight web server like Lighttpd just to serve static data, and Main 
server environment may be implemented using LVS (type of clustering) to 
execute PHP code and to server output from more than 1 servers to balance 
load.

Additionally, you may also implementing caching of output and code at various 
levels. For that, you can use Opcode/Bytecode cacheres like XCache, APC, 
eAccelerator etc. to execute your PHP scripts more faster, if you are using 
frameworks like Symfony, Zend etc. then you can use their own caching methods 
and finally reverse proxies like Varnish, Squid to cache static and dynamic 
data at web server level.

I hope these suggestions will help you in understanding scaling of your 
application.

-- 

Anirudh Zala

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022352.html">[nycphp-talk] advice on scaling up
</A></li>
	<LI>Next message: <A HREF="022438.html">[nycphp-talk] advice on scaling up
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22376">[ date ]</a>
              <a href="thread.html#22376">[ thread ]</a>
              <a href="subject.html#22376">[ subject ]</a>
              <a href="author.html#22376">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
