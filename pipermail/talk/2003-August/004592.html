<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] cookbook: gpg
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2003-August/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20cookbook%3A%20gpg&In-Reply-To=%3C20030811171955.GA5141%40panix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004585.html">
   <LINK REL="Next"  HREF="004595.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] cookbook: gpg</H1>
    <B>Analysis &amp; Solutions</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20cookbook%3A%20gpg&In-Reply-To=%3C20030811171955.GA5141%40panix.com%3E"
       TITLE="[nycphp-talk] cookbook: gpg">danielc at analysisandsolutions.com
       </A><BR>
    <I>Mon Aug 11 13:19:56 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="004585.html">[nycphp-talk] cookbook: gpg
</A></li>
        <LI>Next message: <A HREF="004595.html">[nycphp-talk] cookbook: gpg
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4592">[ date ]</a>
              <a href="thread.html#4592">[ thread ]</a>
              <a href="subject.html#4592">[ subject ]</a>
              <a href="author.html#4592">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Aug 11, 2003 at 10:13:52AM -0400, David Mintz wrote:
&gt;<i> 
</I>&gt;<i> $encrypted = shell_exec( &quot;echo 'secret stuff'|/usr/bin/gpg
</I>&gt;<i> --no-secmem-warning --homedir /my/.gnupg -ear <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">recipient at example.com</A>&quot;);
</I>&gt;<i> 
</I>&gt;<i> from the command line or as a wrapped script, it does not require a
</I>&gt;<i> passphrase in order to encrypt. Since gpg needs the user's secret key in
</I>&gt;<i> order to encrypt and sign, a copy of that secret key has to live on the
</I>&gt;<i> server -- is there any way around that?
</I>
I think you're on the right track.  Encrypting data for a designated user 
doesn't require a password.  Here's something I in a PHP shell script on 
my office computer to encrypt backups:

   exec('c:/progra~1/gnupg/gpg.exe -e -r <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">usr at addr.com</A> file.');

Such procedures use the public key ring, right?  As long as you set the
file permissions so only you can write to it... and you know how to
compose secure web applications -- meaning in this case scripts that don't
allow user input to pick the name of the files they're going to write to,
then everything is fine.

In regards to your last question, I don't believe the secret keyring has
to exist on the server.  So, if you want to tighten things up further, you
can make a separate public key file just for this purpose, chmod it to 444
and then use a flag in your gpg call (--keyring, I believe) to use that
special keyring.

Enjoy,

--Dan

-- 
     FREE scripts that make web and database programming easier
           <A HREF="http://www.analysisandsolutions.com/software/">http://www.analysisandsolutions.com/software/</A>
 T H E   A N A L Y S I S   A N D   S O L U T I O N S   C O M P A N Y
 4015 7th Ave #4AJ, Brooklyn NY    v: 718-854-0335   f: 718-854-0409

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004585.html">[nycphp-talk] cookbook: gpg
</A></li>
	<LI>Next message: <A HREF="004595.html">[nycphp-talk] cookbook: gpg
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4592">[ date ]</a>
              <a href="thread.html#4592">[ thread ]</a>
              <a href="subject.html#4592">[ subject ]</a>
              <a href="author.html#4592">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
