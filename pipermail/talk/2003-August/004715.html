<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Single-Logon User Authentication,	PHP and viewing non-ASCII
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2003-August/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Single-Logon%20User%20Authentication%2C%0A%09PHP%20and%20viewing%20non-ASCII&In-Reply-To=%3CE19ope6-0006up-Ha%40rslrs1-server.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004716.html">
   <LINK REL="Next"  HREF="004717.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Single-Logon User Authentication,	PHP and viewing non-ASCII</H1>
    <B>Brian Pang</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Single-Logon%20User%20Authentication%2C%0A%09PHP%20and%20viewing%20non-ASCII&In-Reply-To=%3CE19ope6-0006up-Ha%40rslrs1-server.com%3E"
       TITLE="[nycphp-talk] Single-Logon User Authentication,	PHP and viewing non-ASCII">bpang at bpang.com
       </A><BR>
    <I>Mon Aug 18 15:26:26 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="004716.html">[nycphp-talk] Single-Logon User Authentication,	PHP and viewing	non-ASCII
</A></li>
        <LI>Next message: <A HREF="004717.html">[nycphp-talk] Single-Logon User Authentication,	PHP and viewing non-ASCII
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4715">[ date ]</a>
              <a href="thread.html#4715">[ thread ]</a>
              <a href="subject.html#4715">[ subject ]</a>
              <a href="author.html#4715">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I use a function which invokes fpassthru

first I check to make sure the user has the right priviledges, if so,
then pass the file thru...

the link to the file might end up being something like

fileGetter.php?filename=word.doc

just remember to properly set the headers





&gt;<i> This is a multi-part message in MIME format.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> This challenge is beyond me, as it seems to be the case.
</I>&gt;<i> 
</I>&gt;<i> I am having to set up a user-authentication script that is basic
</I>logon/registration process.  mySQL db captures username, password, and
other important fields such as their payment category and isAdmin (if
they are an admin on the site).  Once stored they will be able to login
once payment category is '4' (which means 'PAID').  
&gt;<i> 
</I>&gt;<i> Upon being able to login, one of the features any user, admin or not,
</I>can do is to view restricted files in the /web/contents folder.  They
can view the list or click onto a link and view the file itself
(assuming it's a url-friendly file like .txt or .doc or .pdf or something).
&gt;<i> 
</I>&gt;<i> Here's where I am totally stuck.
</I>&gt;<i> 
</I>&gt;<i> The /web/contents folder must be locked down so that the outside world
</I>cannot view it; only authenticated users must view it.  Problem is, by
doing that I force a double-login since that would involve using
.htaccess on the folder.  (Note, I was told mySQL has a means of
interfacing with .htacesss, however, that too would fail because the
requirements for login involve username, password, isAdmin and
payment_category all being set to certain values).
&gt;<i> 
</I>&gt;<i> I thought of locking down the folder to 700 and each script uploaded
</I>to 600 (using TCL CGI instead of PHP to do the actual uploading),
however, how would I be able to allow for users to VIEW non-ASCII files
(like .doc or .pdf)?
&gt;<i> 
</I>&gt;<i> Has anyone faced anything like that, if so, please let me know.
</I>&gt;<i> 
</I>&gt;<i> Thanx
</I>&gt;<i> Phil
</I>&gt;<i> 
</I>



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004716.html">[nycphp-talk] Single-Logon User Authentication,	PHP and viewing	non-ASCII
</A></li>
	<LI>Next message: <A HREF="004717.html">[nycphp-talk] Single-Logon User Authentication,	PHP and viewing non-ASCII
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4715">[ date ]</a>
              <a href="thread.html#4715">[ thread ]</a>
              <a href="subject.html#4715">[ subject ]</a>
              <a href="author.html#4715">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
