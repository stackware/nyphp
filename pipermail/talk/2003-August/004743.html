<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Cookies as session database [was php scalability]
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2003-August/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Cookies%20as%20session%20database%20%5Bwas%20php%20scalability%5D&In-Reply-To=%3C20030818231845.11275.qmail%40web14307.mail.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004737.html">
   <LINK REL="Next"  HREF="004744.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Cookies as session database [was php scalability]</H1>
    <B>Chris Shiflett</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Cookies%20as%20session%20database%20%5Bwas%20php%20scalability%5D&In-Reply-To=%3C20030818231845.11275.qmail%40web14307.mail.yahoo.com%3E"
       TITLE="[nycphp-talk] Cookies as session database [was php scalability]">shiflett at php.net
       </A><BR>
    <I>Mon Aug 18 19:18:45 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="004737.html">[nycphp-talk] Cookies as session database [was php scalability]
</A></li>
        <LI>Next message: <A HREF="004744.html">[nycphp-talk] msession  [was Cookies as session database...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4743">[ date ]</a>
              <a href="thread.html#4743">[ thread ]</a>
              <a href="subject.html#4743">[ subject ]</a>
              <a href="author.html#4743">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>--- George Webb &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">gw.nyphp at gwprogramming.com</A>&gt; wrote:
&gt;<i> Security:  assuming that SSL is *not* in use, the cookie data can
</I>&gt;<i> be seen by third parties, as we all know.
</I>
Good point about SSL. That does indeed mitigate many security concerns.
However, it does not address concerns about browser vulnerabilities.

Because a simple flaw could cause a browser to send cookies to unauthorized
sites, there is still a risk. IE versions 4.0, 5.0, 5.5, and 6.0 have all had
major security flaws that allow anyone to read any cookie from any domain, and
often these flaws expose cookies with the &quot;secure&quot; directive set.

IE 4.0 and 5.0:
<A HREF="http://www.peacefire.org/security/iecookies/">http://www.peacefire.org/security/iecookies/</A>

IE 5.5 and 6.0:
<A HREF="http://www.solutions.fi/iebug/">http://www.solutions.fi/iebug/</A>

&gt;<i> But some data does not need to be secure
</I>
Another excellent point. Sites such as Google use cookies to allow users to set
preferences without having to log in or establish any sort of account. So,
cookies can actually help to *improve* a user's privacy and/or anonymity,
despite their bad reputation. :-)

&gt;<i> Later when a user enters their personal information such as addresses,
</I>&gt;<i> security seems to become more important.
</I>
Right. So, at some point you're going to want to concern yourself with
security. Of course, cookies aren't inherently insecure, else any system which
uses them would be easily compromised. You just want to make cookie theft
useless for the attacker (methods of doing this are probably worthy of an
article of some sort).

&gt;<i> So my question is, for a shopping cart application, what user data
</I>&gt;<i> items really need to be secure?
</I>
As the developer, you are by far the most qualified person to answer that.

&gt;<i> Efficiency: as Chris knows since he wrote the book on HTTP, the
</I>&gt;<i> HTTP cookie specifications (both Netscape's as well as the
</I>&gt;<i> &quot;version 2&quot;) allow for such cookie data to be transported among
</I>&gt;<i> only a subset of viewed pages on a web site. Therefore, in this
</I>&gt;<i> same shopping cart example, the application can efficiently direct
</I>&gt;<i> the HTTP client (web browser) to send the cookie data to only the
</I>&gt;<i> URLs that will need to see it.
</I>
True, and this is a good example of applying your creativity to make cookies
work for what you are trying to do. But, is it worth the effort, when there
might be a method you can use to diminish all unnecessary traffic as well as
allow yourself more flexibility on the server-side to access any of the
client's data at any time? That is up to you, but cookies were intended as a
state management mechanism and not really a session management mechanism.

When you do not actually need to maintain a session (Google's user preferences,
perhaps a user's shopping cart while they are still shopping, etc.), cookies
are probably fine.

&gt;<i> Another efficiency issue relates to the size of the HTTP cookies.
</I>&gt;<i> To this end we could specially format and even compress or pack the
</I>&gt;<i> user data into a smaller byte-representation. For example, an
</I>&gt;<i> uncompressed &quot;cart contents&quot; cookie with three line items might look
</I>&gt;<i> like this:
</I>&gt;<i> 
</I>&gt;<i> 1|PJ00111|c:blue;s:small|1|PJ00103|c:orange;s=small|8|ACC00101|s:5|
</I>&gt;<i> 
</I>&gt;<i> The server can then do product lookup queries on each of these
</I>&gt;<i> three items to build a more readable or detailed list
</I>
This is similar to looking up a client's data based on the unique identifier.
It seems to be a similar problem with the exception that the client data is
more volatile.

&gt;<i> I would really like to make HTTP cookies do the work that we normally
</I>&gt;<i> impose on central databases, because then we can scale a server cluster
</I>&gt;<i> linearly, simply by adding more hardware.
</I>
There are many creative ideas out there for addressing this problem. You could
use different hostnames much like you mentioned using different cookies paths.
You could implement a more intelligent &quot;sticky sessions&quot; mechanism. Another
option might be to look into using msession, since it allows you to use
sessions in a cluster without a central database. In the end, whatever you're
most comfortable with is probably going to be what gets the job done.

Hope that helps.

Chris

=====
Become a better Web developer with the HTTP Developer's Handbook
<A HREF="http://httphandbook.org/">http://httphandbook.org/</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004737.html">[nycphp-talk] Cookies as session database [was php scalability]
</A></li>
	<LI>Next message: <A HREF="004744.html">[nycphp-talk] msession  [was Cookies as session database...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4743">[ date ]</a>
              <a href="thread.html#4743">[ thread ]</a>
              <a href="subject.html#4743">[ subject ]</a>
              <a href="author.html#4743">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
