<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Anyone know why the &quot;select&quot; query will die?
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2003-August/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Anyone%20know%20why%20the%20%22select%22%20query%20will%20die%3F&In-Reply-To=%3C129a01c3681e%24e5f8c7e0%2467a76244%40philofsoa%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004780.html">
   <LINK REL="Next"  HREF="004771.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Anyone know why the &quot;select&quot; query will die?</H1>
    <B>Phil Powell</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Anyone%20know%20why%20the%20%22select%22%20query%20will%20die%3F&In-Reply-To=%3C129a01c3681e%24e5f8c7e0%2467a76244%40philofsoa%3E"
       TITLE="[nycphp-talk] Anyone know why the &quot;select&quot; query will die?">soazine at erols.com
       </A><BR>
    <I>Thu Aug 21 16:00:39 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="004780.html">[nycphp-talk] Free hardware and Books
</A></li>
        <LI>Next message: <A HREF="004771.html">[nycphp-talk] Anyone know why the &quot;select&quot; query will die?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4770">[ date ]</a>
              <a href="thread.html#4770">[ thread ]</a>
              <a href="subject.html#4770">[ subject ]</a>
              <a href="author.html#4770">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE> $sql = 'INSERT INTO fs_usermetadata (' . substr(trim($cols), 0, strrpos(trim($cols), ',')) .
          ') VALUES (' . substr(trim($values), 0, strrpos(trim($values), ',')) . ')';

    if (!mysql_query($sql)) {
     $hasSubmittedUser = 0;
     $errorMsg .= $font . '&lt;font color=cc0000&gt;&lt;li&gt;Could not insert record into db&lt;/li&gt;&lt;/font&gt;' .
                    '&lt;/font&gt;&lt;p&gt;';
    }
   
   if ($hasSubmittedUser) {
    // THIS BLOCK WILL ENSURE THAT THE ID WILL BE PASSED AND ALL DATA GATHERED FOR EDITING
    // OF RECENTLY SUBMITTED INFORMATION
    $willEditUser = 1; 
    $sql = 'SELECT fs_userid FROM fs_usermetadata ' .
           'WHERE fs_username = \'' . $fs_username . '\' ' .
           ' AND fs_password = \'' . $fs_password . '\' ';
    $query = mysql_query($sql) or die('Could not run updated data select query: ' . $sql);
    while ($row = mysql_fetch_array($query, MYSQL_ASSOC)) $id = $row[&quot;fs_userid&quot;];
   }

On occasions the &quot;select&quot; query will die for no apparent reason.  The &quot;insert statement&quot; is nullified and not done either.  However, upon the user hitting the back browser button and resubmitting both work fine and then continue to work fine for an indeterminate amount of time.

Perhaps I'm missing something here: what I'm trying to do is insert a new record and immediately obtain the id column field value from the new record.

Thanks
Phil
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.nyphp.org/pipermail/talk/attachments/20030821/514d4def/attachment.html">http://lists.nyphp.org/pipermail/talk/attachments/20030821/514d4def/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004780.html">[nycphp-talk] Free hardware and Books
</A></li>
	<LI>Next message: <A HREF="004771.html">[nycphp-talk] Anyone know why the &quot;select&quot; query will die?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4770">[ date ]</a>
              <a href="thread.html#4770">[ thread ]</a>
              <a href="subject.html#4770">[ subject ]</a>
              <a href="author.html#4770">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
