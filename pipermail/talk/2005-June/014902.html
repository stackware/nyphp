<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] How HTTP connection life relates to PHP script life
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2005-June/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20How%20HTTP%20connection%20life%20relates%20to%20PHP%20script%20life&In-Reply-To=%3C1119324008.13527.236803548%40webmail.messagingengine.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014901.html">
   <LINK REL="Next"  HREF="014907.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] How HTTP connection life relates to PHP script life</H1>
    <B>Jayesh Sheth</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20How%20HTTP%20connection%20life%20relates%20to%20PHP%20script%20life&In-Reply-To=%3C1119324008.13527.236803548%40webmail.messagingengine.com%3E"
       TITLE="[nycphp-talk] How HTTP connection life relates to PHP script life">jay_nyphp at fastmail.fm
       </A><BR>
    <I>Mon Jun 20 23:20:07 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="014901.html">[nycphp-talk] Re: [ OT ] - Best Beginners Regex Book
</A></li>
        <LI>Next message: <A HREF="014907.html">[nycphp-talk] How HTTP connection life relates to PHP script life
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14902">[ date ]</a>
              <a href="thread.html#14902">[ thread ]</a>
              <a href="subject.html#14902">[ subject ]</a>
              <a href="author.html#14902">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello all,

I am sorry if this message went through twice. The first time I stupidly
posted it from the wrong email address (that was not subscribed to this
list).

I have a rather interesting and multi-faceted question, but since it's
nearing my bed-time, I will try to type a few coherent lines before I
doze off at the keyboard.

Here's the deal:
Suppose you have a PHP application, which is running in the traditional
PHP way:
1) A user visits <A HREF="http://localhost/mailings/send_newsletter.php">http://localhost/mailings/send_newsletter.php</A>
2) The user selects a list, pastes in a letter, and pressed 'Submit'
3) The browser open an HTTP connection, and Apache processes the
request.
4) Apache passes the script to the PHP 4 module (not to a PHP 4 CGI
binary)
5) PHP looks up all the addresses in a MySQL table for the chosen list,
loops through them, sends an email to each person on the list. After
each message is sent, a confirmation message is echoed.

Now for the questions:
a) If a the user hits the stop button or navigates to another page, will
Apache realize that the HTTP connection has been closed and thus
terminate the script? If not, will it keep running, and if so for how
long?
b) I know this is not the best way to do it. What are your opinions on
the following method: the PHP script should invoke a command line (CLI)
script that runs as a separate process through the PHP CLI binary. That
process writes how many emails it has sent to a MySQL table or to a
file. The user's page simply META-refreshes, polls the MySQL table or
log, and says 'x messages sent, y to go'.
c) Are there any things that I am missing here?

Thanks in advance.

Best regards,

- Jay

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014901.html">[nycphp-talk] Re: [ OT ] - Best Beginners Regex Book
</A></li>
	<LI>Next message: <A HREF="014907.html">[nycphp-talk] How HTTP connection life relates to PHP script life
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14902">[ date ]</a>
              <a href="thread.html#14902">[ thread ]</a>
              <a href="subject.html#14902">[ subject ]</a>
              <a href="author.html#14902">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
