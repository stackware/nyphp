<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] structured programming in practice
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2005-June/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20structured%20programming%20in%20practice&In-Reply-To=%3C1118795703.23685.236380936%40webmail.messagingengine.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014870.html">
   <LINK REL="Next"  HREF="014840.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] structured programming in practice</H1>
    <B>Jayesh Sheth</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20structured%20programming%20in%20practice&In-Reply-To=%3C1118795703.23685.236380936%40webmail.messagingengine.com%3E"
       TITLE="[nycphp-talk] structured programming in practice">jay_nyphp at fastmail.fm
       </A><BR>
    <I>Tue Jun 14 20:35:03 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="014870.html">[nycphp-talk] Timing out in php batch
</A></li>
        <LI>Next message: <A HREF="014840.html">[nycphp-talk] structured programming in practice
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14839">[ date ]</a>
              <a href="thread.html#14839">[ thread ]</a>
              <a href="subject.html#14839">[ subject ]</a>
              <a href="author.html#14839">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello NYPHP members,

I thought I would ask your opinions on using structured programming (
see <A HREF="http://en.wikipedia.org/wiki/Structured_programming">http://en.wikipedia.org/wiki/Structured_programming</A> and
<A HREF="http://discuss.fogcreek.com/joelonsoftware/default.asp?cmd=show&amp;ixPost=31001">http://discuss.fogcreek.com/joelonsoftware/default.asp?cmd=show&amp;ixPost=31001</A>
) principles. More specifically, what are your opinions on single points
of entry and exit for functions?

For example, consider the following three code snippets:

What if you are stuck using PHP 4, and you have to use any of the
following error handling methods instead of exceptions, which one would
you choose? If so, why? Thanks in advance for reading through these
snippets!

----
Snippet 1

function make_beverage($bev_type, &amp;$bev)
{
 if($bev_type == 'coffee')
{
		 $aw = add_cwater($bev);
		 if ( ! $aw)
		 {
		   return false;
		 }
		 $bc = brew_coffee($bev);
		 if (!$bc)
		 {
		   return false;
		 }
		 return true;
}
else if ($bev_type == 'tea')
{
		 $aw = add_twater($bev)
		 {
		   if (! $aw)
		   {
			  return false;
		   }
		 }
		 $atb = add_tea_bag($bev);
		  if ( ! $atb )
		  {
			  return false;
		  }
		  return true;
}
}
-----
Snippet

function make_beverage($bev_type, &amp;$bev)
{
  if($bev_type == 'coffee' || $bev_type == 'tea')
 {
 	if($bev_type == 'coffee')
	{
		  $aw = add_cwater($bev);
		  if ($aw)
		  {
				   $bc = brew_coffee($bev);
				   if ($bc)
				   {
					$return = true;
				   }
				   else
				   {
				   	$return = false;
				   }
		  }
		  else
		  {
		  		$return = false;
		   }
	}
	else
	{
		  $aw = add_twater($bev)
		 
		   if ($aw)
		   {
			     $atb = add_tea_bag($bev);
				  if ( $atb )
				  {
					  $return = true;
				  }
				  else
				  {
				  	 $return = false;
				  }
		   }
		   else
		   {
		   		$return = false;
		   }
		 
	 }
    return $return;
 }
}

----
Both Snippet 1 and Snippet 2 introduce an interesting problem. $bev is
passed in by reference, and so the functions that make_beverage() call
also act on $bev, which is defined outside of make_beverage(), before
make_beverage() is called.

So, if you want to know what exactly failed, what would you do?

Would you use return codes? For example:

----
Snippet 3

function make_beverage($bev_type, &amp;$bev)
{
 if($bev_type == 'coffee')
{
		 $aw = add_cwater($bev);
		 if ( ! $aw)
		 {
		   return -1;
		 }
		 $bc = brew_coffee($bev);
		 if (!$bc)
		 {
		   return -2;
		 }
		 return 1;
}
else if ($bev_type == 'tea')
{
		 $aw = add_twater($bev)
		 {
		   if (! $aw)
		   {
			  return -3;
		   }
		 }
		 $atb = add_tea_bag($bev);
		  if ( ! $atb )
		  {
			  return -4;
		  }
		  return 1;
}
}
----

Or would you do something like:

----
Snippet 4
function make_beverage($bev_type, &amp;$bev, &amp;$errs)
{
  if($bev_type == 'coffee' || $bev_type == 'tea')
 {
 	if($bev_type == 'coffee')
	{
		  $aw = add_cwater($bev);
		  if ($aw)
		  {
				   $bc = brew_coffee($bev);
				   if ($bc)
				   {
					$return = true;
				   }
				   else
				   {
				    $errs[] = 'bc';
				   	$return = false;
				   }
		  }
		  else
		  {
		  		$errs[] = 'aw';
		  		$return = false;
		   }
	}
	else
	{
		  $aw = add_twater($bev)
		 
		   if ($aw)
		   {
			     $atb = add_tea_bag($bev);
				  if ( $atb )
				  {
					  $return = true;
				  }
				  else
				  {
				  	 $errs[] = 'atb';
				  	 $return = false;
				  }
		   }
		   else
		   {
		   		  $errs[] = 'aw';
		   		  $return = false;
		   }
		  
	 }
    return $return;
 }
}
----

Best regards,

- Jay

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014870.html">[nycphp-talk] Timing out in php batch
</A></li>
	<LI>Next message: <A HREF="014840.html">[nycphp-talk] structured programming in practice
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14839">[ date ]</a>
              <a href="thread.html#14839">[ thread ]</a>
              <a href="subject.html#14839">[ subject ]</a>
              <a href="author.html#14839">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
