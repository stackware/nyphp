<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] building an 1-way email list manager
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2005-November/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20building%20an%201-way%20email%20list%20manager&In-Reply-To=%3CPine.BSF.4.58.0511142219200.90753%40emra.pair.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016635.html">
   <LINK REL="Next"  HREF="016637.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] building an 1-way email list manager</H1>
    <B>David Mintz</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20building%20an%201-way%20email%20list%20manager&In-Reply-To=%3CPine.BSF.4.58.0511142219200.90753%40emra.pair.com%3E"
       TITLE="[nycphp-talk] building an 1-way email list manager">dmintz at davidmintz.org
       </A><BR>
    <I>Mon Nov 14 22:38:19 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="016635.html">[nycphp-talk] building an 1-way email list manager
</A></li>
        <LI>Next message: <A HREF="016637.html">[nycphp-talk] building an 1-way email list manager
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16636">[ date ]</a>
              <a href="thread.html#16636">[ thread ]</a>
              <a href="subject.html#16636">[ subject ]</a>
              <a href="author.html#16636">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 14 Nov 2005, Jeff Loiselle wrote:

&gt;<i> I started building one of these bad boys a couple years ago. You are
</I>&gt;<i> welcome to have a copy of my code and schema. I never finished the
</I>&gt;<i> project, but it does send mail, track bounces, track how many people
</I>&gt;<i> opened a message, and sends messages.  It even has a rudimentary SOAP
</I>&gt;<i> interface for adding members to the list.
</I>
Deeply interesting! Wrap it up, I'll take it.

&gt;<i>
</I>&gt;<i> In order for it to send the messages, you have to run a PHP script
</I>&gt;<i> indefinitely in the background. I did this because you can't set the
</I>&gt;<i> Reply-To from PHP which is crucial for bounce tracking.
</I>
Do you mean Return-path? I have discovered that it's tricky -- different
tricks work in different environments. I still need guru help (or some
more hours of hair-pulling). This has to work on a shared server where you
can't mess with php.ini, sendmail configuration, etc.

&gt;<i> Unfortunately
</I>&gt;<i> I found out later that this could be done with mail() f parameter, but
</I>&gt;<i> whatever. This actually uses PEAR:Mail to send all the mail via SMTP.
</I>
I am leaning towards PEAR::Mail with the sendmail backend (which can mean
qmail, e.g,. on my shared host). but I haven't ruled out phpmailer

&gt;<i> I'm sure it's slow as hell and completely the incorrect way to do it.
</I>&gt;<i> But it worked for me at the time!
</I>
What did Larry Wall teach you about that? (Answer: A program is &quot;correct&quot;
if it runs once before your boss fires you.&quot;  Or something to that
effect.)

Running a daemon or some other really long-lived process is not an option.
I am thinking cron: every couple of hours, wake up and send. Do 50 or so
and sleep for a few seconds until you're done. Yeah that would take a long
time for 200,000 emails but this is never gonna need to scale like that.

I have looked at PEAR::Mail:Queue and I don't quite agree with (maybe
don't understand) its storage logic. Why save n copies of the selfsame
email message body in your database? I am actually thinking of saving (for
cron, for later) ONE copy of the message and ONE sql query. At send time,
the cron job will run the SQL against my database of people to fetch a
recipient list. If there's personalization, fine; the message body has
placeholders (&quot;Dear {FIRSTNAME} {LASTNAME}...&quot;) that I str_replace() as I
iterate through the recipient list.



---
David Mintz
<A HREF="http://davidmintz.org/">http://davidmintz.org/</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016635.html">[nycphp-talk] building an 1-way email list manager
</A></li>
	<LI>Next message: <A HREF="016637.html">[nycphp-talk] building an 1-way email list manager
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16636">[ date ]</a>
              <a href="thread.html#16636">[ thread ]</a>
              <a href="subject.html#16636">[ subject ]</a>
              <a href="author.html#16636">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
