<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Curl &amp; Traversing Pages
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2005-November/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Curl%20%26%20Traversing%20Pages&In-Reply-To=%3C28620-62067%40sneakemail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016782.html">
   <LINK REL="Next"  HREF="016789.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Curl &amp; Traversing Pages</H1>
    <B>inforequest</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Curl%20%26%20Traversing%20Pages&In-Reply-To=%3C28620-62067%40sneakemail.com%3E"
       TITLE="[nycphp-talk] Curl &amp; Traversing Pages">1j0lkq002 at sneakemail.com
       </A><BR>
    <I>Wed Nov 23 01:08:16 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="016782.html">[nycphp-talk] Curl &amp; Traversing Pages
</A></li>
        <LI>Next message: <A HREF="016789.html">[nycphp-talk] Curl &amp; Traversing Pages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16785">[ date ]</a>
              <a href="thread.html#16785">[ thread ]</a>
              <a href="subject.html#16785">[ subject ]</a>
              <a href="author.html#16785">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>By the way, site scraping may not be a crime but it is considered 
&quot;hostile&quot; by many webmasters. Not to mention that you might be lifting 
someone's database, you are also using their bandwidth to do it, and 
muddying their stats, etc.

So if they are smart they might hinder your ability to scrape as much as 
possible (that's what I do on competitive sites).

By hitting the site with curl, what user agent are you offering? Ditto 
for wget... there are recommended configurations to deny (or better, 
misdirect) such requests as
wget 1.1 	wget 1.1
Wget 1.8.2 	Wget/1.8.2 modified
Wget 1.9 	Wget/1.9+cvs-stable (Red Hat modified)


How about a scraper honeypot? There are many of those out there tying up 
the harvesters because, well, harvesters are evil.

Another method is to put a /whatever into robots.txt as a deny, with a 
link on the home page.. Anyone who asks for a file in there  is by 
definition a bad bot (as you would be if you simply parsed the home page 
for links and followed them scraping). A script can tie that bot up with 
endless loops of autogenerated garbage or perhaps comon sql inection 
atempts, folowed by an IP ban ater N attempts. This stuff is out there.

Personally I like serving realistic (but fake) Apache error codes 
whenever I am hit with wget because I know those are *nix folk and it's 
fun to mess with their heads.

I mention all this because it seems you haven't considered that it might 
be part of your problem. When you're ready to step up to the big leagues 
of Spy vs. Spy site scraping, you might start with the Snoopy class. I 
think it's a nice piece of work. It lets you focus on the randomization 
and proxy management, since the fetch is really solid.



-=john andrews
<A HREF="http://www.seo-fun.com">http://www.seo-fun.com</A>
&quot;I could tell you how to beat my anti-scraper code, but then I'd have to 
kill you&quot;






Joseph Crawford codebowl-at-gmail.com |nyphp dev/internal group use| wrote:

&gt;<i>Hello Everyone,
</I>&gt;<i>
</I>&gt;<i>let me explain a bit what i am trying to do.  I have a script that
</I>&gt;<i>will grab the first page which i specify from a URL such as
</I>&gt;<i>
</I>&gt;<i><A HREF="http://yellowpages.superpages.com/listings.jsp?PS=45&amp;OO=1&amp;R=N&amp;PP=L&amp;CB=1&amp;STYPE=S&amp;F=1&amp;L=VT&amp;CID=00000518939&amp;paging=1&amp;PI=0">http://yellowpages.superpages.com/listings.jsp?PS=45&amp;OO=1&amp;R=N&amp;PP=L&amp;CB=1&amp;STYPE=S&amp;F=1&amp;L=VT&amp;CID=00000518939&amp;paging=1&amp;PI=0</A>
</I>&gt;<i>
</I>&gt;<i>now when it grabs this page, it will scour the returned HTML and grab
</I>&gt;<i>all the information for each record under Yellow Page Listings.
</I>&gt;<i>once it has all records it then checks to see if there is a Next page,
</I>&gt;<i>basically Next will either be a link or not.
</I>&gt;<i>
</I>&gt;<i>If it is a link the script will execute using the URL from the Next
</I>&gt;<i>Link.  Here's where i am running into problems.  I want to feed it 1
</I>&gt;<i>url and have it go through every page until there is not a next page.
</I>&gt;<i>
</I>&gt;<i>The issue i am having is that with the url grabbed from the link, curl
</I>&gt;<i>fetches the page, but it's not the page expected rather it's an error
</I>&gt;<i>page from superpages stating that i have not supplied enough search
</I>&gt;<i>criteria.
</I>&gt;<i>
</I>&gt;<i>On the first page grabbed, this is the link that is grabbed from the source
</I>&gt;<i><A HREF="http://yellowpages.superpages.com/listings.jsp?PS=45&amp;PP=L&amp;CB=1&amp;L=VT&amp;CID=00000518939&amp;paging=1&amp;F=1&amp;OO=1&amp;PI=45">http://yellowpages.superpages.com/listings.jsp?PS=45&amp;PP=L&amp;CB=1&amp;L=VT&amp;CID=00000518939&amp;paging=1&amp;F=1&amp;OO=1&amp;PI=45</A>
</I>&gt;<i>
</I>&gt;<i>Now when curl grabs that url it complains about search criteria
</I>&gt;<i>however if you paste that to a browser it will work just fine.
</I>&gt;<i>
</I>&gt;<i>here is a screenshot of the page that is returned by cURL
</I>&gt;<i><A HREF="http://codebowl.dontexist.net/images/ypresult.jpg">http://codebowl.dontexist.net/images/ypresult.jpg</A>
</I>&gt;<i>
</I>&gt;<i>I am not sure what is going on with this but if anyone here can lend a
</I>&gt;<i>hand with curl i would appreciate it.  I have
</I>&gt;<i>the cookie directory writable by apache also as i read you had to
</I>&gt;<i>specify the exact path to the cookie on windows using apache 2
</I>&gt;<i>
</I>&gt;<i>Here is my code
</I>&gt;<i>
</I>&gt;<i><A HREF="http://codebowl.dontexist.net/codebowl/System/Misc/Curl.phps">http://codebowl.dontexist.net/codebowl/System/Misc/Curl.phps</A>
</I>&gt;<i><A HREF="http://codebowl.dontexist.net/codebowl/System/Misc/YellowPages.phps">http://codebowl.dontexist.net/codebowl/System/Misc/YellowPages.phps</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>Note that i created a curl class because i am thinking of expanding on
</I>&gt;<i>what i have and the framework i am working on
</I>&gt;<i>is going to be 100% Object Oriented.
</I>&gt;<i>
</I>&gt;<i>Any help is appreciated.
</I>&gt;<i>
</I>&gt;<i>--
</I>&gt;<i>Joseph Crawford Jr.
</I>&gt;<i>Zend Certified Engineer
</I>&gt;<i>Codebowl Solutions, Inc.
</I>&gt;<i>1-802-671-2021
</I>&gt;<i><A HREF="http://lists.nyphp.org/mailman/listinfo/talk">codebowl at gmail.com</A>
</I>&gt;<i>  
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016782.html">[nycphp-talk] Curl &amp; Traversing Pages
</A></li>
	<LI>Next message: <A HREF="016789.html">[nycphp-talk] Curl &amp; Traversing Pages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16785">[ date ]</a>
              <a href="thread.html#16785">[ thread ]</a>
              <a href="subject.html#16785">[ subject ]</a>
              <a href="author.html#16785">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
