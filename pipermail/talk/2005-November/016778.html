<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Curl &amp; Traversing Pages
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2005-November/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Curl%20%26%20Traversing%20Pages&In-Reply-To=%3C8d9a42800511221719h709e0a53gd0ddebdac7c4f2f%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016833.html">
   <LINK REL="Next"  HREF="016779.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Curl &amp; Traversing Pages</H1>
    <B>Joseph Crawford</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Curl%20%26%20Traversing%20Pages&In-Reply-To=%3C8d9a42800511221719h709e0a53gd0ddebdac7c4f2f%40mail.gmail.com%3E"
       TITLE="[nycphp-talk] Curl &amp; Traversing Pages">codebowl at gmail.com
       </A><BR>
    <I>Tue Nov 22 20:19:02 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="016833.html">[nycphp-talk] OT: Go Yahoo!
</A></li>
        <LI>Next message: <A HREF="016779.html">[nycphp-talk] Curl &amp; Traversing Pages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16778">[ date ]</a>
              <a href="thread.html#16778">[ thread ]</a>
              <a href="subject.html#16778">[ subject ]</a>
              <a href="author.html#16778">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Everyone,

let me explain a bit what i am trying to do.  I have a script that
will grab the first page which i specify from a URL such as

<A HREF="http://yellowpages.superpages.com/listings.jsp?PS=45&amp;OO=1&amp;R=N&amp;PP=L&amp;CB=1&amp;STYPE=S&amp;F=1&amp;L=VT&amp;CID=00000518939&amp;paging=1&amp;PI=0">http://yellowpages.superpages.com/listings.jsp?PS=45&amp;OO=1&amp;R=N&amp;PP=L&amp;CB=1&amp;STYPE=S&amp;F=1&amp;L=VT&amp;CID=00000518939&amp;paging=1&amp;PI=0</A>

now when it grabs this page, it will scour the returned HTML and grab
all the information for each record under Yellow Page Listings.
once it has all records it then checks to see if there is a Next page,
basically Next will either be a link or not.

If it is a link the script will execute using the URL from the Next
Link.  Here's where i am running into problems.  I want to feed it 1
url and have it go through every page until there is not a next page.

The issue i am having is that with the url grabbed from the link, curl
fetches the page, but it's not the page expected rather it's an error
page from superpages stating that i have not supplied enough search
criteria.

On the first page grabbed, this is the link that is grabbed from the source
<A HREF="http://yellowpages.superpages.com/listings.jsp?PS=45&amp;PP=L&amp;CB=1&amp;L=VT&amp;CID=00000518939&amp;paging=1&amp;F=1&amp;OO=1&amp;PI=45">http://yellowpages.superpages.com/listings.jsp?PS=45&amp;PP=L&amp;CB=1&amp;L=VT&amp;CID=00000518939&amp;paging=1&amp;F=1&amp;OO=1&amp;PI=45</A>

Now when curl grabs that url it complains about search criteria
however if you paste that to a browser it will work just fine.

here is a screenshot of the page that is returned by cURL
<A HREF="http://codebowl.dontexist.net/images/ypresult.jpg">http://codebowl.dontexist.net/images/ypresult.jpg</A>

I am not sure what is going on with this but if anyone here can lend a
hand with curl i would appreciate it.  I have
the cookie directory writable by apache also as i read you had to
specify the exact path to the cookie on windows using apache 2

Here is my code

<A HREF="http://codebowl.dontexist.net/codebowl/System/Misc/Curl.phps">http://codebowl.dontexist.net/codebowl/System/Misc/Curl.phps</A>
<A HREF="http://codebowl.dontexist.net/codebowl/System/Misc/YellowPages.phps">http://codebowl.dontexist.net/codebowl/System/Misc/YellowPages.phps</A>


Note that i created a curl class because i am thinking of expanding on
what i have and the framework i am working on
is going to be 100% Object Oriented.

Any help is appreciated.

--
Joseph Crawford Jr.
Zend Certified Engineer
Codebowl Solutions, Inc.
1-802-671-2021
<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">codebowl at gmail.com</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016833.html">[nycphp-talk] OT: Go Yahoo!
</A></li>
	<LI>Next message: <A HREF="016779.html">[nycphp-talk] Curl &amp; Traversing Pages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16778">[ date ]</a>
              <a href="thread.html#16778">[ thread ]</a>
              <a href="subject.html#16778">[ subject ]</a>
              <a href="author.html#16778">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
