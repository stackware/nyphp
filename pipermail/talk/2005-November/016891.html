<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Double Loading PHP as image - Firefox or PHP?
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2005-November/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Double%20Loading%20PHP%20as%20image%20-%20Firefox%20or%20PHP%3F&In-Reply-To=%3C020c01c5f611%24c190dae0%246500a8c0%40enobrev%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016890.html">
   <LINK REL="Next"  HREF="016892.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Double Loading PHP as image - Firefox or PHP?</H1>
    <B>Mark Armendariz</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Double%20Loading%20PHP%20as%20image%20-%20Firefox%20or%20PHP%3F&In-Reply-To=%3C020c01c5f611%24c190dae0%246500a8c0%40enobrev%3E"
       TITLE="[nycphp-talk] Double Loading PHP as image - Firefox or PHP?">nyphp at enobrev.com
       </A><BR>
    <I>Wed Nov 30 19:54:15 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="016890.html">[nycphp-talk] Double Loading PHP as image - Firefox or PHP?
</A></li>
        <LI>Next message: <A HREF="016892.html">[nycphp-talk] Double Loading PHP as image - Firefox or PHP?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16891">[ date ]</a>
              <a href="thread.html#16891">[ thread ]</a>
              <a href="subject.html#16891">[ subject ]</a>
              <a href="author.html#16891">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> &gt; What happens if you remove the Content-Disposition header?
</I>
Alright, changing the Content Disposition to 'attachment' (from inline)
helps... When calling directly from FF 1.5 it tries to download, only
writing to the output file once.  Calling from an image tag from any browser
seems to work normally (writing once).

&gt;<i> I do something similar and have not noticed a problem. You 
</I>&gt;<i> may want to try passthru instead of readfile.
</I>
Is there a means of outputting an image with passthru without using
imagemagick or pnm?  I have Imagemagick on this server, but no pnm.  I'd
rather not need either if possible.

Thanks for your time, guys.

Mark

&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk-bounces at lists.nyphp.org</A> 
</I>&gt;<i> [mailto:<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk-bounces at lists.nyphp.org</A>] On Behalf Of Mark Armendariz
</I>&gt;<i> Sent: Wednesday, November 30, 2005 4:37 PM
</I>&gt;<i> To: 'NYPHP Talk'
</I>&gt;<i> Subject: Re: [nycphp-talk] Double Loading PHP as image - 
</I>&gt;<i> Firefox or PHP?
</I>&gt;<i> 
</I>&gt;<i> &gt; Whoa. So let me get this straight... if it's a regular 
</I>&gt;<i> image, FF only 
</I>&gt;<i> &gt; hits once. But if it's your script, then FF hits twice?
</I>&gt;<i> 
</I>&gt;<i> I'm not sure about calling a plain image.  I'll have to check 
</I>&gt;<i> my logs...
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &gt; What happens if you remove the Content-Disposition header?
</I>&gt;<i> 
</I>&gt;<i> Same. Same.
</I>&gt;<i> ----------
</I>&gt;<i> 11/30/2005 16:28:07: Mozilla/5.0 (Windows; U; Windows NT 5.1; 
</I>&gt;<i> en-US; rv:1.8)
</I>&gt;<i> Gecko/20051111 Firefox/1.5
</I>&gt;<i> 11/30/2005 16:28:08: Mozilla/5.0 (Windows; U; Windows NT 5.1; 
</I>&gt;<i> en-US; rv:1.8)
</I>&gt;<i> Gecko/20051111 Firefox/1.5 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Adding caching headers (even a day ahead) didn't work either. 
</I>&gt;<i>  Well, not directly. When called from an img tag, the caching 
</I>&gt;<i> headers take care of business.  Here's what I used:
</I>&gt;<i> 
</I>&gt;<i> header('Expires: ' . gmdate(&quot;D, d M Y H:i:s&quot;, time() + 2) . ' GMT');	
</I>&gt;<i> header('Cache-Control: max-age=2, must-revalidate');	
</I>&gt;<i> 
</I>&gt;<i> I'm completely confused as to why it double-loads on a direct 
</I>&gt;<i> call.  I suppose I can keep the caching as my workaround, 
</I>&gt;<i> since the plan is to always call through an image tag.  But I 
</I>&gt;<i> really wish I understood why...
</I>&gt;<i> Whhhyyyyy!!!!!
</I>&gt;<i> 
</I>&gt;<i> Mark
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> New York PHP Talk Mailing List
</I>&gt;<i> AMP Technology
</I>&gt;<i> Supporting Apache, MySQL and PHP
</I>&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;<i> <A HREF="http://www.nyphp.org">http://www.nyphp.org</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016890.html">[nycphp-talk] Double Loading PHP as image - Firefox or PHP?
</A></li>
	<LI>Next message: <A HREF="016892.html">[nycphp-talk] Double Loading PHP as image - Firefox or PHP?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16891">[ date ]</a>
              <a href="thread.html#16891">[ thread ]</a>
              <a href="subject.html#16891">[ subject ]</a>
              <a href="author.html#16891">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
