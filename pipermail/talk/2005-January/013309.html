<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] MySQL doubt
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2005-January/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20MySQL%20doubt&In-Reply-To=%3C007701c4fb26%24b90ef230%24e98d3818%40oberon1%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013308.html">
   <LINK REL="Next"  HREF="013310.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] MySQL doubt</H1>
    <B>Tim Gales</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20MySQL%20doubt&In-Reply-To=%3C007701c4fb26%24b90ef230%24e98d3818%40oberon1%3E"
       TITLE="[nycphp-talk] MySQL doubt">tgales at tgaconnect.com
       </A><BR>
    <I>Sat Jan 15 12:22:00 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="013308.html">[nycphp-talk] Re: MySQL doubt
</A></li>
        <LI>Next message: <A HREF="013310.html">[nycphp-talk] MySQL doubt
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13309">[ date ]</a>
              <a href="thread.html#13309">[ thread ]</a>
              <a href="subject.html#13309">[ subject ]</a>
              <a href="author.html#13309">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ophir Prusak writes:

&gt;<i> Why doesn't MySQL use the primary key in the second query?
</I>&gt;<i> I would think that count doesn't care what column I use, but 
</I>&gt;<i> obviously it does.
</I>
In the first query, the MySQL optimizer recognizes that it can get 
everything it needs from the index -- and uses it.

Notice the difference between types: range vs. ALL

In the MySQL manual it says:
&quot;The definition of a range condition for a single-part 
index is as follows: 

For both BTREE and HASH indexes, comparison of a key part with 
a constant value is a range condition when using the =, &lt;=&gt;, IN, 
IS NULL, or IS NOT NULL operators&quot; 
<A HREF="http://dev.mysql.com/doc/mysql/en/Range_access_single-part.html">http://dev.mysql.com/doc/mysql/en/Range_access_single-part.html</A> 

It would seem that the optimizer either got befuddled 
by bad statistics or it decided that using the index would require 
more seeks to read both the index and the table versus just 
reading 'all' of the table.

You could coerce the optimizer to go with range by adding 
a limit.

Try explaining &quot;select count(rev_title) from review where 
rev_id &gt; 10000 limit 30000&quot;
(just for fun try explaining with a limit greater than the 
total number of rows in the table)

You might want to try benchmarking with and without 
the limit of 30000 -- to see if the optimizer 
made a good choice.
 
T. Gales &amp; Associates
'Helping People Connect with Technology'

<A HREF="http://www.tgaconnect.com">http://www.tgaconnect.com</A>


&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk-bounces at lists.nyphp.org</A> 
</I>&gt;<i> [mailto:<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk-bounces at lists.nyphp.org</A>] On Behalf Of 
</I>&gt;<i> Sent: Friday, January 14, 2005 9:16 PM
</I>&gt;<i> To: NYPHP Talk
</I>&gt;<i> Subject: Re: [nycphp-talk] MySQL doubt
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> As long as we're on the subject, could someone shed some 
</I>&gt;<i> light on this behavior? It caused me a good amount of hair 
</I>&gt;<i> pulling until I realized what mysql was doing.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> mysql&gt; explain select count(rev_id) from review where rev_id &gt; 10000;
</I>&gt;<i> +--------+-------+---------------+---------+---------+------+-
</I>&gt;<i> ------+-------------------------+
</I>&gt;<i> | table  | type  | possible_keys | key     | key_len | ref  | rows  |
</I>&gt;<i> Extra                   |
</I>&gt;<i> +--------+-------+---------------+---------+---------+------+-
</I>&gt;<i> ------+-------------------------+
</I>&gt;<i> | review | range | PRIMARY       | PRIMARY |       4 | NULL | 30608 |
</I>&gt;<i> where used; Using index |
</I>&gt;<i> +--------+-------+---------------+---------+---------+------+-
</I>&gt;<i> ------+-------------------------+
</I>&gt;<i> 1 row in set (0.00 sec)
</I>&gt;<i> 
</I>&gt;<i> mysql&gt; explain select count(rev_title) from review where 
</I>&gt;<i> rev_id &gt; 10000;
</I>&gt;<i> +--------+------+---------------+------+---------+------+-----
</I>&gt;<i> --+------------+
</I>&gt;<i> | table  | type | possible_keys | key  | key_len | ref  | 
</I>&gt;<i> rows  | Extra      |
</I>&gt;<i> +--------+------+---------------+------+---------+------+-----
</I>&gt;<i> --+------------+
</I>&gt;<i> | review | ALL  | PRIMARY       | NULL |    NULL | NULL | 
</I>&gt;<i> 43894 | where used |
</I>&gt;<i> +--------+------+---------------+------+---------+------+-----
</I>&gt;<i> --+------------+
</I>&gt;<i> 1 row in set (0.00 sec)
</I>&gt;<i> 
</I>&gt;<i> mysql&gt; desc review;
</I>&gt;<i> +----------------+--------------+------+-----+------------+---
</I>&gt;<i> -------------+
</I>&gt;<i> | Field          | Type         | Null | Key | Default    | 
</I>&gt;<i> Extra          |
</I>&gt;<i> +----------------+--------------+------+-----+------------+---
</I>&gt;<i> -------------+
</I>&gt;<i> | rev_id         | int(11)      |      | PRI | NULL       | 
</I>&gt;<i> auto_increment |
</I>&gt;<i> | rev_usr_id     | int(11)      |      | MUL | 0          |   
</I>&gt;<i>              |
</I>&gt;<i> | rev_gsy_id     | int(11)      |      | MUL | 0          |   
</I>&gt;<i>              |
</I>&gt;<i> | rev_text       | text         | YES  |     | NULL       |   
</I>&gt;<i>              |
</I>&gt;<i> | rev_status     | char(1)      | YES  |     | NULL       |   
</I>&gt;<i>              |
</I>&gt;<i> | rev_regdate    | date         |      | MUL | 0000-00-00 |   
</I>&gt;<i>              |
</I>&gt;<i> | rev_email      | varchar(255) | YES  |     | NULL       |   
</I>&gt;<i>              |
</I>&gt;<i> | rev_title      | varchar(255) | YES  |     | NULL       |   
</I>&gt;<i>              |
</I>&gt;<i> | rev_score      | int(11)      | YES  |     | NULL       |   
</I>&gt;<i>              |
</I>&gt;<i> | rev_from       | varchar(255) | YES  |     | NULL       |   
</I>&gt;<i>              |
</I>&gt;<i> | rev_name       | varchar(255) | YES  |     | NULL       |   
</I>&gt;<i>              |
</I>&gt;<i> | rev_show_name  | tinyint(4)   | YES  |     | NULL       |   
</I>&gt;<i>              |
</I>&gt;<i> | rev_show_email | tinyint(4)   | YES  |     | NULL       |   
</I>&gt;<i>              |
</I>&gt;<i> | rev_notes      | text         | YES  |     | NULL       |   
</I>&gt;<i>              |
</I>&gt;<i> | help_yes       | int(11)      |      |     | 0          |   
</I>&gt;<i>              |
</I>&gt;<i> | help_no        | int(11)      |      |     | 0          |   
</I>&gt;<i>              |
</I>&gt;<i> +----------------+--------------+------+-----+------------+---
</I>&gt;<i> -------------+
</I>&gt;<i> 16 rows in set (0.00 sec)
</I>&gt;<i> 
</I>&gt;<i> On Fri, 14 Jan 2005 10:53:11 +0530, Sajith A 
</I>&gt;<i> &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">sajith.ml at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; I'm not sure whether i should post this here. Correct me if i'm 
</I>&gt;<i> &gt; wrong.. I would like to know whether there is any performance 
</I>&gt;<i> &gt; difference between. &quot;SELECT count(*) FROM table&quot; and &quot;SELECT 
</I>&gt;<i> &gt; count(field) FROM table&quot;. 
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; New York PHP Talk
</I>&gt;<i> &gt; Supporting AMP Technology (Apache/MySQL/PHP) 
</I>&gt;<i> &gt; <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;<i> &gt; <A HREF="http://www.nyphp.org">http://www.nyphp.org</A>
</I>&gt;<i> &gt;
</I>&gt;<i> _______________________________________________
</I>&gt;<i> New York PHP Talk
</I>&gt;<i> Supporting AMP Technology (Apache/MySQL/PHP) 
</I>&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;<i> <A HREF="http://www.nyphp.org">http://www.nyphp.org</A>
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013308.html">[nycphp-talk] Re: MySQL doubt
</A></li>
	<LI>Next message: <A HREF="013310.html">[nycphp-talk] MySQL doubt
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13309">[ date ]</a>
              <a href="thread.html#13309">[ thread ]</a>
              <a href="subject.html#13309">[ subject ]</a>
              <a href="author.html#13309">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
