<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] broadcast emailer: is this sane strategy
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2004-August/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20broadcast%20emailer%3A%20is%20this%20sane%20strategy&In-Reply-To=%3CPine.BSF.4.58.0408161655340.2498%40emra.pair.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011155.html">
   <LINK REL="Next"  HREF="011159.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] broadcast emailer: is this sane strategy</H1>
    <B>David Mintz</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20broadcast%20emailer%3A%20is%20this%20sane%20strategy&In-Reply-To=%3CPine.BSF.4.58.0408161655340.2498%40emra.pair.com%3E"
       TITLE="[nycphp-talk] broadcast emailer: is this sane strategy">dmintz at davidmintz.org
       </A><BR>
    <I>Mon Aug 16 17:15:01 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="011155.html">[nycphp-talk] Mailman and that sorta thing
</A></li>
        <LI>Next message: <A HREF="011159.html">[nycphp-talk] broadcast emailer: is this sane strategy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11157">[ date ]</a>
              <a href="thread.html#11157">[ thread ]</a>
              <a href="subject.html#11157">[ subject ]</a>
              <a href="author.html#11157">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
I'm rolling my own broadcast emailer and now that I've already put in way
too many hours on it, I thought I'd check in and see if people think this
overall design is sound.

It's a two-page form. Page one presents them with a form for the body,
subject, and a select menu to choose whether to send this message to
everybody in this MySQL database or just a subset. There's some
validation, then page two lets them proof it, and they can click either
Send to send it (duh!), or Edit to step back to page one.

When they click Send -- this is the part that I think merits some thinking
-- I've decided to do a sort of poor man's fork. That is, I write the
message body to a temporary file; then I execute myself with an exec()
call with args $to, $subject, $message_filename and redirect any output to
/dev/null; then I say &quot;see ya later&quot; to the browser.

If I'm in CLI mode, I open the message file, to do the db query, loop
through the result sending mail with PEAR::Mail/sendmail, and log some
things along the way, then email a report to the user.

This will be on a shared server. To keep Evil Spammer from getting a hold
of it, I will be in cgi-wrapped mode with execute permissions set to only
me. And the web interface will require authentication of course.

My reasoning is that if it takes a long time to send all those emails, I
don't want the user sitting there waiting and having the ability to hit
reload or otherwise mess up the process once it's under way. My
understanding is that if exec() doesn't produce any output, then PHP does
not hang around and wait for the exec'd process to finish, but rather
continues execution right away, which is exactly what I want.

Make sense?

Thanks,

---
David Mintz
<A HREF="http://davidmintz.org/">http://davidmintz.org/</A>

        &quot;Anybody else got a problem with Webistics?&quot; -- Sopranos 24:17

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011155.html">[nycphp-talk] Mailman and that sorta thing
</A></li>
	<LI>Next message: <A HREF="011159.html">[nycphp-talk] broadcast emailer: is this sane strategy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11157">[ date ]</a>
              <a href="thread.html#11157">[ thread ]</a>
              <a href="subject.html#11157">[ subject ]</a>
              <a href="author.html#11157">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
