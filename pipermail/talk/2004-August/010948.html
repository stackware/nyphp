<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] PEAR::DB-&gt;nextID problems
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2004-August/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20PEAR%3A%3ADB-%3EnextID%20problems&In-Reply-To=%3C410FBAAF.4030901%40spacemonkeylabs.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010947.html">
   <LINK REL="Next"  HREF="010949.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] PEAR::DB-&gt;nextID problems</H1>
    <B>Mitch Pirtle</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20PEAR%3A%3ADB-%3EnextID%20problems&In-Reply-To=%3C410FBAAF.4030901%40spacemonkeylabs.com%3E"
       TITLE="[nycphp-talk] PEAR::DB-&gt;nextID problems">mitchy at spacemonkeylabs.com
       </A><BR>
    <I>Tue Aug  3 12:17:51 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="010947.html">[nycphp-talk] PEAR::DB-&gt;nextID problems
</A></li>
        <LI>Next message: <A HREF="010949.html">[nycphp-talk] PEAR::DB-&gt;nextID problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10948">[ date ]</a>
              <a href="thread.html#10948">[ thread ]</a>
              <a href="subject.html#10948">[ subject ]</a>
              <a href="author.html#10948">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Mitch Pirtle wrote:

&gt;<i> Okay, first will experiment with the sequence names and check that 
</I>&gt;<i> things are on the up and up.  If after that I still have trouble I'll 
</I>&gt;<i> write something up that you can see.
</I>

Attached is the test script, looks a little nonsensical now that I 
understand how nextID() works.  Here was the misunderstanding, and 
hopefully you could add something to the docs to clarify?

nextID() grabs the next value from the sequence, AND THEN INCREMENTS 
THAT SEQUENCE.  So you cannot get a value from nextID() and then do an 
insert without specifying that value for the column that the sequence is 
used for.

I created a table that only had two columns, id and sequence_value.  I 
then got the latest sequence value with nextID, and inserted a new row 
like this:

    &quot;INSERT INTO test ( sequence_value ) VALUES ( $id )&quot;;

Of course I was not thinking that I needed to use $ID for the first 
column in the table as well, and got two different values on the 
insert.  Basically row 2 got an id of 1, row 4 got an id of 3, and so 
on.  I corrected the SQL to:

    &quot;INSERT INTO test ( id, sequence_value ) VALUES ( $id, $id )&quot;;

And of course everything syncs up properly.  The sequence is also now 
happy, as it isn't being used twice for each row.  Providing an example 
in the docs would be a time saver and avoid unnecessary forehead 
slapping.  ;-)

-- Mitch
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.nyphp.org/pipermail/talk/attachments/20040803/5f7679fc/attachment.html">http://lists.nyphp.org/pipermail/talk/attachments/20040803/5f7679fc/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010947.html">[nycphp-talk] PEAR::DB-&gt;nextID problems
</A></li>
	<LI>Next message: <A HREF="010949.html">[nycphp-talk] PEAR::DB-&gt;nextID problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10948">[ date ]</a>
              <a href="thread.html#10948">[ thread ]</a>
              <a href="subject.html#10948">[ subject ]</a>
              <a href="author.html#10948">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
