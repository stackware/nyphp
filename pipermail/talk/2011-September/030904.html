<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Insert updating instead of inserting
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2011-September/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Insert%20updating%20instead%20of%20inserting&In-Reply-To=%3CCAE1ELnLQSdv%2BCu5Z4X6y8pmgCB5wPzB1F4mUXXfMe4XvXfnjbQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030903.html">
   
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Insert updating instead of inserting</H1>
    <B>Federico Ulfo</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Insert%20updating%20instead%20of%20inserting&In-Reply-To=%3CCAE1ELnLQSdv%2BCu5Z4X6y8pmgCB5wPzB1F4mUXXfMe4XvXfnjbQ%40mail.gmail.com%3E"
       TITLE="[nycphp-talk] Insert updating instead of inserting">rainelemental at gmail.com
       </A><BR>
    <I>Fri Sep 30 19:13:11 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="030903.html">[nycphp-talk] Insert updating instead of inserting
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30904">[ date ]</a>
              <a href="thread.html#30904">[ thread ]</a>
              <a href="subject.html#30904">[ subject ]</a>
              <a href="author.html#30904">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Weird issue, are you using INSERT INTO ... ON DUPLICATE KEY ... UPDATE?
<A HREF="http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html">http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html</A>

Also if you don't want to receive any MySql error from the INSERT query you
might want to user INSERT IGNORE, it won't do nothing if the row you're
inserting is already there.

Just in case you don't find a simple solution, you can create a pipeline for
the chron job and let him handle all the insert queries.



On Fri, Sep 30, 2011 at 7:00 PM, Dan Cech &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">dcech at phpwerx.net</A>&gt; wrote:

&gt;<i> Bruce,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  I have an issue I hope someone can help me figure out. We have a Mysql
</I>&gt;&gt;<i> database
</I>&gt;&gt;<i> two php processes that insert new records into a table. There should never
</I>&gt;&gt;<i> be a
</I>&gt;&gt;<i> time when these processes update a record they should only insert a new
</I>&gt;&gt;<i> one.
</I>&gt;&gt;<i> These processes run simultaneously one running from a cron job and the
</I>&gt;&gt;<i> other
</I>&gt;&gt;<i> running when requested is made via an ajax call.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> For some reason when each process is working at the same time It seems to
</I>&gt;&gt;<i> not
</I>&gt;&gt;<i> insert a new record but update a similar record. I am explicitly calling
</I>&gt;&gt;<i> insert
</I>&gt;&gt;<i> and I do not include the primary_key id in the insert statement.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Can you post the output from SHOW CREATE TABLE and an example of the
</I>&gt;<i> queries you're running?
</I>&gt;<i>
</I>&gt;<i> Also, please don't create a new topic by hitting reply and changing the
</I>&gt;<i> subject, it breaks threading in most mail clients.
</I>&gt;<i>
</I>&gt;<i> Dan
</I>&gt;<i> ______________________________**_________________
</I>&gt;<i> New York PHP Users Group Community Talk Mailing List
</I>&gt;<i> <A HREF="http://lists.nyphp.org/**mailman/listinfo/talk&lt;http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/**mailman/listinfo/talk&lt;http://lists.nyphp.org/mailman/listinfo/talk</A>&gt;
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.nyphp.org/Show-**Participation&lt;http://www.nyphp.org/Show-Participation">http://www.nyphp.org/Show-**Participation&lt;http://www.nyphp.org/Show-Participation</A>&gt;
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.nyphp.org/pipermail/talk/attachments/20110930/2902cc63/attachment.html">http://lists.nyphp.org/pipermail/talk/attachments/20110930/2902cc63/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030903.html">[nycphp-talk] Insert updating instead of inserting
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30904">[ date ]</a>
              <a href="thread.html#30904">[ thread ]</a>
              <a href="subject.html#30904">[ subject ]</a>
              <a href="author.html#30904">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
