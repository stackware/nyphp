<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Image resizing/cropping on the fly
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2011-September/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Image%20resizing/cropping%20on%20the%20fly&In-Reply-To=%3CCAKVp7b01hxbn_PPB7LtA9wLOEP-_sr4J4zS3cRW7D-iU9SByQw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030831.html">
   <LINK REL="Next"  HREF="030829.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Image resizing/cropping on the fly</H1>
    <B>Bulat Shakirzyanov</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Image%20resizing/cropping%20on%20the%20fly&In-Reply-To=%3CCAKVp7b01hxbn_PPB7LtA9wLOEP-_sr4J4zS3cRW7D-iU9SByQw%40mail.gmail.com%3E"
       TITLE="[nycphp-talk] Image resizing/cropping on the fly">mallluhuct at gmail.com
       </A><BR>
    <I>Wed Sep  7 12:56:06 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="030831.html">[nycphp-talk] Image resizing/cropping on the fly
</A></li>
        <LI>Next message: <A HREF="030829.html">[nycphp-talk] Running multiple mod_php extensions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30827">[ date ]</a>
              <a href="thread.html#30827">[ thread ]</a>
              <a href="subject.html#30827">[ subject ]</a>
              <a href="author.html#30827">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>make sure that there is no whitespace between the colon and the header name,
so

header('Content-type :image/jpeg');

must become

header('Content-type: image/jpeg');

I am not sure how sensitive the browsers are to this, but that's how it
should be formatted according to the HTTP spec.

Additionally, make sure that your image is really and jpeg as if your file
contents was for example PNG or GIF,
the browser would try to process it as a JPEG

There is always Imagine image manupulation library to help you with your
resizing needs - <A HREF="https://github.com/avalanche123/Imagine">https://github.com/avalanche123/Imagine</A>

Best,

On Wed, Sep 7, 2011 at 9:43 AM, Jake McGraw &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">jmcgraw1 at gmail.com</A>&gt; wrote:

&gt;<i> If any of the following causes an error and display_errors == 1, you'll get
</I>&gt;<i> output and  PHP will default to text/html:
</I>&gt;<i>
</I>&gt;<i> header('Content-type :image/jpeg');
</I>&gt;<i> header('Content-Length: ' . filesize( $image ) );
</I>&gt;<i> $file = file_get_contents( $image );
</I>&gt;<i>
</I>&gt;<i> If you have any whitespace prior to header(), you'll get output and PHP
</I>&gt;<i> will default to text/html.
</I>&gt;<i>
</I>&gt;<i> You can avoid whitespace by never using an ending ?&gt; tag.
</I>&gt;<i>
</I>&gt;<i> Jake
</I>&gt;<i>
</I>&gt;<i> On Wed, Sep 7, 2011 at 12:33 PM, Federico Ulfo &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">rainelemental at gmail.com</A>&gt;wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hi guys,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I recently experienced an issue with the image resizing on the fly with GD
</I>&gt;&gt;<i> library of PHP.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I draw the image with:
</I>&gt;&gt;<i> header('Content-type :image/jpeg');
</I>&gt;&gt;<i> header('Content-Length: ' . filesize( $image ) );
</I>&gt;&gt;<i> $file = file_get_contents( $image );
</I>&gt;&gt;<i> echo $file;
</I>&gt;&gt;<i> it works when the image is already cached, when I've to create the image,
</I>&gt;&gt;<i> sometimes PHP change my header to Content-type: text/html, so the image
</I>&gt;&gt;<i> won't load, and I'll get instead a list of Ascii.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I fixed partially with a workaround, before do the *echo $file;* I check
</I>&gt;&gt;<i> the headers, if they are changed, I remove all of them and set again, also
</I>&gt;&gt;<i> this solution doesn't work always, I also tried to set header( &quot;location: -
</I>&gt;&gt;<i> same location -&quot; ); this works sometimes, because the cache is already
</I>&gt;&gt;<i> created but when there's many images sometimes the browser won't reindex it
</I>&gt;&gt;<i> and give again a blank image.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Do you have any idea of why does it?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  --
</I>&gt;&gt;<i> Federico Ulfo &#187; &lt;<A HREF="http://www.federicoulfo.it/">http://www.federicoulfo.it/</A>&gt;
</I>&gt;&gt;<i> Certified Developer Google &amp; PHP
</I>&gt;&gt;<i>   &lt;<A HREF="http://www.federicoulfo.it/">http://www.federicoulfo.it/</A>&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> New York PHP Users Group Community Talk Mailing List
</I>&gt;&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="http://www.nyphp.org/Show-Participation">http://www.nyphp.org/Show-Participation</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> New York PHP Users Group Community Talk Mailing List
</I>&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.nyphp.org/Show-Participation">http://www.nyphp.org/Show-Participation</A>
</I>&gt;<i>
</I>


-- 
*Bulat Shakirzyanov* | Software Alchemist

*a: *about.me/avalanche123
*e:* <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">mallluhuct at gmail.com</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.nyphp.org/pipermail/talk/attachments/20110907/9f493894/attachment.html">http://lists.nyphp.org/pipermail/talk/attachments/20110907/9f493894/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030831.html">[nycphp-talk] Image resizing/cropping on the fly
</A></li>
	<LI>Next message: <A HREF="030829.html">[nycphp-talk] Running multiple mod_php extensions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30827">[ date ]</a>
              <a href="thread.html#30827">[ thread ]</a>
              <a href="subject.html#30827">[ subject ]</a>
              <a href="author.html#30827">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
