<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] mysql_close() error
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2004-December/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20mysql_close%28%29%20error&In-Reply-To=%3C49F64CAB-5466-11D9-B3B3-0003938BDF32%40localnotion.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013025.html">
   <LINK REL="Next"  HREF="013026.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] mysql_close() error</H1>
    <B>Matthew Terenzio</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20mysql_close%28%29%20error&In-Reply-To=%3C49F64CAB-5466-11D9-B3B3-0003938BDF32%40localnotion.com%3E"
       TITLE="[nycphp-talk] mysql_close() error">webmaster at localnotion.com
       </A><BR>
    <I>Wed Dec 22 17:10:28 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="013025.html">[nycphp-talk] mysql_close() error
</A></li>
        <LI>Next message: <A HREF="013026.html">[nycphp-talk] Turck_mmcache weirdness after upgrading to php4.3.10
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13042">[ date ]</a>
              <a href="thread.html#13042">[ thread ]</a>
              <a href="subject.html#13042">[ subject ]</a>
              <a href="author.html#13042">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Dec 21, 2004, at 9:46 PM, Frank Wong wrote:

&gt;<i>
</I>&gt;<i> Adam Maccabee Trachtenberg  wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> I believe that if you try to make a second connection to MySQL via PHP
</I>&gt;&gt;<i> that's identical to an existing connection, then PHP will reuse the
</I>&gt;&gt;<i> first connection. That's why mysql_connect() returns the same resource
</I>&gt;&gt;<i> handle.
</I>&gt;<i>
</I>&gt;<i> Which would explain why $link loses its magical resourceness after the
</I>&gt;<i> first mysql_close() -- and also why it's a good idea not to use
</I>&gt;<i> mysql_close(), except in exceptional circumstances.
</I>
I wasn't paying terribly close attention to this thread but I had an 
issue today which may be related.

Using Postgresql, I recently added a couple of scripts written by an 
outside company which allowed them to bulk sync some data that my 
company wanted.

I began noticing that some of my DB backed web pages were displaying 
errors .
Shame on me for allowing that, I know, I hadn't read Phundamentals yet 
when I created those pages :)
Any way. . .

The two errors were Postgres &quot;can't connect, too many clients already.&quot;

and Postgres &quot;The connection was terminated by the administrator&quot;

The latter being caused mostly by a page refresh.

I upped the Postgresql.conf max users to 64 instead of 32 though I knew 
that was not a proper fix.
I suspected these scripts so I removed them.
The errors continued but at a lesser and lesser rate. I guessed some 
connections were still actively being shared.
Finally they ceased.

I looked at the scripts again and they were pretty basic, but I changed 
pg_connect()  to pg_pconnect() and removed the pg_close() altogether.

So far so good. Time will tell.

I guess the moral is don't let cold fusion guys write your PHP scripts. 
:<i>)
</I>I didn't just throw the scripts on the server, by the way, but they 
were pretty basic and it didn't occur to me that the close DB function 
would terminate connections elsewhere.

That is what happened isn't it?


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013025.html">[nycphp-talk] mysql_close() error
</A></li>
	<LI>Next message: <A HREF="013026.html">[nycphp-talk] Turck_mmcache weirdness after upgrading to php4.3.10
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13042">[ date ]</a>
              <a href="thread.html#13042">[ thread ]</a>
              <a href="subject.html#13042">[ subject ]</a>
              <a href="author.html#13042">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
