<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] sending email from PHP
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2004-June/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20sending%20email%20from%20PHP&In-Reply-To=%3C009401c4499d%246542b460%248b01a8c0%40DB%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009723.html">
   <LINK REL="Next"  HREF="009735.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] sending email from PHP</H1>
    <B>Eric Rank</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20sending%20email%20from%20PHP&In-Reply-To=%3C009401c4499d%246542b460%248b01a8c0%40DB%3E"
       TITLE="[nycphp-talk] sending email from PHP">erank at isthmus.com
       </A><BR>
    <I>Thu Jun  3 15:03:02 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="009723.html">[nycphp-talk] sending email from PHP
</A></li>
        <LI>Next message: <A HREF="009735.html">[nycphp-talk] sending email from PHP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9729">[ date ]</a>
              <a href="thread.html#9729">[ thread ]</a>
              <a href="subject.html#9729">[ subject ]</a>
              <a href="author.html#9729">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>sending email from PHPHi Corey,

Sounds like an interesting problem. I've toyed with various mail sending
scripts including phpmailer (<A HREF="http://phpmailer.sourceforge.net">http://phpmailer.sourceforge.net</A>) and
pear_mail_mime with pretty good luck in multiple configurations. In the
configurations I've used, the script calls out to sendmail (in my case Exim,
which is a nice drop-in alternative to sendmail) and places the mail in the
que of the mail server. The script runs as fast as it can make a request to
the mail server. That said, I think the problem is outside php. If you're
experiencing problems communicating with sendmail, you might try clearing
out the existing que first. It looks like Michael's suggestion is much more
in depth than what I'm telling you though. I bet he's right on the money.

I haven't dealt extensively with email address verification though. I've
toyed around with various ideas, but as far as I know, outside of making
requests to the MX of the domain directly, there's not an elegant way to
handle it. In doing so, you're actually writing a mail server. Quite a task.
As such, I've just had to deal with the replies to the sender's email from
the email recipient's MX telling me that the address doesn't exist, or that
the mailbox is full, or whatever.

I'd be interested in hearing other people's solutions for email
verification. It's such an important thing to do. There's gotta be an easy
way.

Good luck!

Eric


----- Original Message ----- 
From: corey szopinski
To: NYPHP Talk
Sent: Thursday, June 03, 2004 12:19 PM
Subject: [nycphp-talk] sending email from PHP


I'm trying to build a tool to send dynamic emails (think order summary) from
PHP. I'm running into very long delays waiting for sendmail to return a
result.

For example, a person submits an order, the function that handles  the
transaction does a couple of things:

1. Sends an order confirmation to the store
2. Sends an order confirmation to the customer

The whole process can take over 1 minute, which times out the browser. I've
tracked it down the delay to sendmail verifying the remote email address.
Since sendmail talks to the remote mail server in real-time, any network
lag, or DNS lag, causes the order process to hang. In my case, it does it
twice.

I've looked at Pear Mail_Queue, and that looks interesting, but a bit
overkill. I've also looked at going around the mail() function and opening
an SMTP socket directly to sendmail (same delays... in fact when I open a
session via command line, I can see the exact step in the SMTP conversion
where the lag happens)

Here's what I'd like to do (and this would be helpful for anyone sending out
a modest volume of email)...

1. send the mail to sendmail
2. sendmail puts it into a queue
3. sendmail periodically checks this queue and sends the email.

Essentially, I'd like to fork the slow lookup stuff to the background,
returning control the browser as soon as possible. This has the added
benefit of scaling to very large emails/hour since the browser never has to
wait for sendmail (or an external server) before a visitor can move on.

I'm pretty sure that this is intrinsic to the way sendmail works, but most
of the documentation talks about the queue holding mail that's not
deliverable. What I'd like to do is put to put a delay on the email before
it's processed by sendmail.

Any ideas?

-corey




DOMANI STUDIOS

Corey Szopinski
Technology Director

<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">corey at domanistudios.com</A>
70 Washington St. Suite 710
Brooklyn, NY 11201
718.797.4470  x116





_______________________________________________
talk mailing list
<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk at lists.nyphp.org</A>
<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009723.html">[nycphp-talk] sending email from PHP
</A></li>
	<LI>Next message: <A HREF="009735.html">[nycphp-talk] sending email from PHP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9729">[ date ]</a>
              <a href="thread.html#9729">[ thread ]</a>
              <a href="subject.html#9729">[ subject ]</a>
              <a href="author.html#9729">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
