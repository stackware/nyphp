<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] I am about to pull my hair out over file uploads with	cURL. Help!
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2011-February/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20I%20am%20about%20to%20pull%20my%20hair%20out%20over%20file%20uploads%20with%0A%09cURL.%20Help%21&In-Reply-To=%3C4D5B9412.4010806%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030523.html">
   <LINK REL="Next"  HREF="030527.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] I am about to pull my hair out over file uploads with	cURL. Help!</H1>
    <B>Anthony Papillion</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20I%20am%20about%20to%20pull%20my%20hair%20out%20over%20file%20uploads%20with%0A%09cURL.%20Help%21&In-Reply-To=%3C4D5B9412.4010806%40gmail.com%3E"
       TITLE="[nycphp-talk] I am about to pull my hair out over file uploads with	cURL. Help!">papillion at gmail.com
       </A><BR>
    <I>Wed Feb 16 04:08:34 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="030523.html">[nycphp-talk] ot: rackspace cloud / slicehost
</A></li>
        <LI>Next message: <A HREF="030527.html">[nycphp-talk] I am about to pull my hair out over file uploads with	cURL. Help!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30526">[ date ]</a>
              <a href="thread.html#30526">[ thread ]</a>
              <a href="subject.html#30526">[ subject ]</a>
              <a href="author.html#30526">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Everyone,

So I'm working with this new API and doing something that SHOULD be
really, really simple. The API documentation says that I should pass
parameters in a POST call They are:

cmd
session
file_name
message_guid
media

The final variable (media) should contain the binary data of the file
I'm uploading through this call. I'm using cURL and the following code
to perform the call to the API:

post = array(&quot;cmd&quot;=&gt;&quot;uploadmessage&quot;,
                    &quot;session&quot;=&gt;&quot;$_SESSION[sid]&quot;,
                    &quot;message_guid&quot;=&gt;&quot;$msg_guid&quot;,
                    &quot;file_name&quot;=&gt;&quot;$file_name.mov&quot;,
                    &quot;media&quot;=&gt;&quot;@$target_path&quot;,);

                        $ch = curl_init();
                        curl_setopt($ch, CURLOPT_HEADER, 0);
                        curl_setopt($ch, CURLOPT_VERBOSE, 0);
                        curl_setopt($ch, CURLOPT_POST, true);
                        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
                        curl_setopt($ch, CURLOPT_URL, $baseURL);
                        curl_setopt($ch, CURLOPT_POSTFIELDS, $post);


                        $response = curl_exec($ch);

A few notes:

1. the file is stored in a subdirectory called 'uploads' which is
directly under the current directory the script is executing in. The
variable $target_path will include the directory name and file name
(which will vary). So an example of a $target_path value might be
/uploads/myfile.mp4

2. Since I realize I *might* need to pass the full path to the file,
I've tried replacing $target_path with something like
/home/anthony/workspaces/appname/uploads/$filename and that didn't work
either.

For some reason, I am simply unable to upload this file! Isn't the code
above *supposed* to work? Can anyone spot what's wrong? I've been
wrestling with this little snippet of code for two days and Googleing my
heart out. Help, please!

Thank You,
Anthony Papillion

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030523.html">[nycphp-talk] ot: rackspace cloud / slicehost
</A></li>
	<LI>Next message: <A HREF="030527.html">[nycphp-talk] I am about to pull my hair out over file uploads with	cURL. Help!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30526">[ date ]</a>
              <a href="thread.html#30526">[ thread ]</a>
              <a href="subject.html#30526">[ subject ]</a>
              <a href="author.html#30526">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
