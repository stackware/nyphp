<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] mysql_real_escape_string WAS: Mysql question!
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2006-October/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20mysql_real_escape_string%20WAS%3A%20Mysql%20question%21&In-Reply-To=%3C45480E3D.1050006%40phpwerx.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019856.html">
   <LINK REL="Next"  HREF="019851.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] mysql_real_escape_string WAS: Mysql question!</H1>
    <B>Dan Cech</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20mysql_real_escape_string%20WAS%3A%20Mysql%20question%21&In-Reply-To=%3C45480E3D.1050006%40phpwerx.net%3E"
       TITLE="[nycphp-talk] mysql_real_escape_string WAS: Mysql question!">dcech at phpwerx.net
       </A><BR>
    <I>Tue Oct 31 22:02:21 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="019856.html">[nycphp-talk] mysql_real_escape_string WAS: Mysql question!
</A></li>
        <LI>Next message: <A HREF="019851.html">[nycphp-talk] mysql_real_escape_string WAS: Mysql question!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19860">[ date ]</a>
              <a href="thread.html#19860">[ thread ]</a>
              <a href="subject.html#19860">[ subject ]</a>
              <a href="author.html#19860">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>David Krings wrote:
&gt;<i> Dan Cech wrote:
</I>&gt;&gt;<i> What you're failing to consider here is the character set of the active
</I>&gt;&gt;<i> mysql connection.  Correct me if I'm wrong, but it is my understanding
</I>&gt;&gt;<i> that mysql_real_escape_string does not incur an extra trip to the
</I>&gt;&gt;<i> database, the escaping still occurs within php, but it takes into
</I>&gt;&gt;<i> account the character set of the active connection.
</I>&gt;&gt;<i>   
</I>&gt;<i> You probably know this better than I do, but in any case, you need to 
</I>&gt;<i> have a connection established otherwise mysql_real_escape_string throws 
</I>&gt;<i> an error. That means that something is going back and forth to the db 
</I>&gt;<i> engine at some point, which isn't a big deal if one needs the connection 
</I>&gt;<i> anyway. Addslashes doesn't need anything.
</I>
Actually no, all it means is that without an active connection,
mysql_real_escape_string doesn't know what character encoding is being used.

I looked through the source and found that the php extension just passes
the string and the specified connection through to the mysql client
library's c function of the same name, which then looks up the character
set of the connection and performs the escaping.

That said, I did come across this line in the mysql documentation:

Strictly speaking, MySQL requires only that backslash and the quote
character used to quote the string in the query be escaped. This
function quotes the other characters to make them easier to read in log
files.

However, when reading through the mysql client source I do see it
performing special processing for both correctly formed and malformed
multibyte characters, as well as correctly handling the situation where
the NO_BACKSLASH_ESCAPES SQL mode is enabled on the server.  This alone
is important, as addslashes will fail horribly in this situation.

Dan

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019856.html">[nycphp-talk] mysql_real_escape_string WAS: Mysql question!
</A></li>
	<LI>Next message: <A HREF="019851.html">[nycphp-talk] mysql_real_escape_string WAS: Mysql question!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19860">[ date ]</a>
              <a href="thread.html#19860">[ thread ]</a>
              <a href="subject.html#19860">[ subject ]</a>
              <a href="author.html#19860">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
