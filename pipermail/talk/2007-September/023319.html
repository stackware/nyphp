<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] ORM anyone?
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2007-September/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20ORM%20anyone%3F&In-Reply-To=%3C46E7CD6D.6060006%40secdat.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023312.html">
   <LINK REL="Next"  HREF="023325.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] ORM anyone?</H1>
    <B>Kenneth Downs</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20ORM%20anyone%3F&In-Reply-To=%3C46E7CD6D.6060006%40secdat.com%3E"
       TITLE="[nycphp-talk] ORM anyone?">ken at secdat.com
       </A><BR>
    <I>Wed Sep 12 07:28:45 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023312.html">[nycphp-talk] ORM anyone?
</A></li>
        <LI>Next message: <A HREF="023325.html">[nycphp-talk] ORM anyone?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23319">[ date ]</a>
              <a href="thread.html#23319">[ thread ]</a>
              <a href="subject.html#23319">[ subject ]</a>
              <a href="author.html#23319">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ajai Khattri wrote:
&gt;&gt;<i> On Tue, 11 Sep 2007, Kenneth Downs wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> That's a personal opinion, not a system requirement.
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> We *can* agree that SQL is not PHP (or Ruby or Python).
</I>&gt;<i>   
</I>
Sure.

&gt;<i>
</I>&gt;<i>   
</I>&gt;&gt;<i> What's a &quot;conceptual relationship?&quot;  If you put your data into tables, 
</I>&gt;&gt;<i> then the relationships between the tables are foreign keys.  That's easier 
</I>&gt;&gt;<i> to handle in set-based SQL, the language that was designed to do it.
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> Noone writes apps in pure SQL :-)
</I>&gt;<i>
</I>&gt;<i> One has to take off their OOP hat, replace with a SQL hat, and 
</I>&gt;<i> translate what you are trying to build into whatever tables / rows / 
</I>&gt;<i> columns / relations you can model in SQL. So if you're using an OOP 
</I>&gt;<i> language (and I do include PHP5 in that category) you have to do that 
</I>&gt;<i> mapping anyway (until we get object-based databases perhaps). In fact, 
</I>&gt;<i> most data structures need to be mapped (how do you store a tree in a 
</I>&gt;<i> relational database? You don't, at least not without some mapping 
</I>&gt;<i> process to SQL).
</I>&gt;<i>
</I>&gt;<i>   
</I>
What I am saying is no, you don't have to do that mapping, not if you 
think of data in terms of tables and rows, which is after all what it 
is, and think of code in terms of functions and classes, which is, after 
all, what it is.

OOP is wonderful for organizing code.  I have always found it superb at 
organizing UI based code, but horrible for business rules.

But my central point is that code is so different from table-based data, 
it requires different &quot;hats&quot; as you say above, that trying to make one 
look like the other is ultimately counter-productive.  In particular, I 
find it a mistake to make an object for each table and then to try to 
extend the object model to handle things like foreign keys.

Consider an analogy.  Most PHP programmers must learn HTML, CSS, and 
Javascript to some level of competence in order to code in PHP.  This is 
considered necessary and good, and we encourage one another to learn to 
do that stuff right, the way it wants to be done.  But come the database 
and we all decide we can somehow avoid learning the principles of DB 
design and try to make it look like PHP code.  We accept the obligation 
to learn HTML, CSS and Javascript, and even a few things about HTTP 
headers and so forth, but we think it is optional to learn SQL and to 
treat the database as what it is.  That really puzzles me.  The only 
explanation I can come up with is people must be using really simple 
databases so that the inefficiencies at large table counts just never 
show up.

This is probably where we simply disagree, though I hope we've fleshed 
out the positions to the point of usefulness to somebody sitting on the 
fence.

&gt;<i>   
</I>&gt;&gt;<i> Actually you don't need ORM for that, you just need a generalized set of 
</I>&gt;&gt;<i> commands, like &quot;db_query&quot; instead of &quot;pg_query&quot; and &quot;mysql_query&quot;. 
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> In other words, another layer of abstraction? Like ORM but not using 
</I>&gt;<i> objects? :-) For me, it comes down to a choice between dealing with mappings 
</I>&gt;<i> and all the database plumbing that that entails vs. letting an ORM layer 
</I>&gt;<i> manage all that so I can concentrate on business logic and application 
</I>&gt;<i> flow.
</I>&gt;<i>
</I>&gt;<i> Of course, there's always a trade off, like most things - I just think 
</I>&gt;<i> writing say:
</I>&gt;<i>
</I>&gt;<i> event = Event.find(1)
</I>&gt;<i> event.title = &quot;New title&quot;
</I>&gt;<i> event.save
</I>&gt;<i>
</I>&gt;<i> more naturally expresses what Im doing than:
</I>&gt;<i>
</I>&gt;<i> UPDATE events SET TITLE=&quot;New title&quot; where id=1
</I>&gt;<i>   
</I>
ORM is definitely not a generalized (or abstracted as we say incorrectly 
these days) database layer.  It is the attempt to cast database 
operations in object-oriented actions, using objects to implement 
validation, relationships, and other stuff.

Your example above, by contrast, is not really ORM, it is just an update 
routine implemented using OO code.  My own looks very similar but does 
not use OO code, because none is necessary:

$row = array();
$row['first_name'] = 'Arkady';
$row['last_name'] = 'Bogdanov';
sql_insert('sometable',$row);

...and you can do the same for the other three basic operations of 
delete, update, and select.  But your example and mine both stress what 
I said in the beginning, PHP is fine for row-by-row operations, that is 
what it is good at.

But when you need to start doing reporting or on-screen displays, and 
the query requires even one or two joins, your performance tanks unless 
you just break down and write the query:

SELECT blah,blah,blah
    FROM table 1
    JOIN table 2 on x = y
  WHERE filters,filters,filters

Then recurse through the results and spit out your HTML or generate your 
PDF or whatever.  Trying to treat the rows as objects in that case is 
taking a good idea where it was never meant to go.


&gt;<i> Once you start defining and updating many-to-many relationships, the SQL 
</I>&gt;<i> becomes much more complex compared to writing code.
</I>&gt;<i>   
</I>
Again, not my experience.  But that is probably because I implement the 
business logic on the database server, and I generate the code to do so 
out of a data dictionary.  I haven't manually coded that stuff for 3 
years and I hope I never have to again :)

&gt;<i> I know I won't convince you but I think it important for people to hear 
</I>&gt;<i> both sides and make up their own minds.
</I>&gt;<i>
</I>&gt;<i>   
</I>
Yup, couldn't agree more.

It has been fun debating the topic.

-- 
Kenneth Downs
Secure Data Software, Inc.
www.secdat.com    www.andromeda-project.org
631-689-7200   Fax: 631-689-0527
cell: 631-379-0010

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.nyphp.org/pipermail/talk/attachments/20070912/b2f009a4/attachment.html">http://lists.nyphp.org/pipermail/talk/attachments/20070912/b2f009a4/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023312.html">[nycphp-talk] ORM anyone?
</A></li>
	<LI>Next message: <A HREF="023325.html">[nycphp-talk] ORM anyone?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23319">[ date ]</a>
              <a href="thread.html#23319">[ thread ]</a>
              <a href="subject.html#23319">[ subject ]</a>
              <a href="author.html#23319">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
