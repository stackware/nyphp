<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Re: talk Digest, Vol 11, Issue 18
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2007-September/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Re%3A%20talk%20Digest%2C%20Vol%2011%2C%20Issue%2018&In-Reply-To=%3C0d8e01c7f2f9%24ed878a90%24640aa8c0%40MobileZ%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023294.html">
   <LINK REL="Next"  HREF="023298.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Re: talk Digest, Vol 11, Issue 18</H1>
    <B>Hans Zaunere</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Re%3A%20talk%20Digest%2C%20Vol%2011%2C%20Issue%2018&In-Reply-To=%3C0d8e01c7f2f9%24ed878a90%24640aa8c0%40MobileZ%3E"
       TITLE="[nycphp-talk] Re: talk Digest, Vol 11, Issue 18">lists at zaunere.com
       </A><BR>
    <I>Sun Sep  9 11:56:04 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023294.html">[nycphp-talk] Re: talk Digest, Vol 11, Issue 18
</A></li>
        <LI>Next message: <A HREF="023298.html">[nycphp-talk] Check for absolute path (cross platform)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23296">[ date ]</a>
              <a href="thread.html#23296">[ thread ]</a>
              <a href="subject.html#23296">[ subject ]</a>
              <a href="author.html#23296">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

Joshua Hart wrote on Saturday, September 08, 2007 11:09 PM:
&gt;<i> On 9/8/07 10:45 PM, &quot;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk-request at lists.nyphp.org</A>&quot;
</I>&gt;<i> &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk-request at lists.nyphp.org</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &gt; Oracle is instantclient ia64-10.2.0.3-20061230
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; oci8 version 1.2.3  revision 1.269.2.16.2.37
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; Here's my configure command for PHP:
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; './configure' '--with-zlib' '--with-gd' '--with-jpeg' '--with-png'
</I>&gt;<i> &gt; &gt; '--with-libxml2=/usr/bin' '--with-mysql=/usr/local/mysql5120'
</I>&gt;<i> &gt; &gt; '--with-apxs2=/usr/local/apache2/bin/apxs' '--enable-ftp'
</I>&gt;<i> &gt; &gt; '--with-imap-ssl=/usr/include/ssl'
</I>&gt;<i> &gt; &gt; '--with-imap=/space/custom_builds/imap-stuff/' '--with-openssl'
</I>&gt;<i> &gt; &gt; '--with-pam' '--with-dom' '--with-iconv' '--with-mbstring=all'
</I>&gt;<i> &gt; &gt; '--with-mbregex' '--with-domsxlt' '--with-mcrypt' '--with-xml'
</I>&gt;<i> &gt; &gt; '--with-mime-magic' '--enable-exif' '--enable-uploadprogress'
</I>&gt;<i> &gt; &gt; '--with-xmlrpc' '--with-gettext' '--with-pgsql'
</I>&gt;<i> &gt; &gt; '--with-oci8=instantclient,/usr/local/oracle'
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Hmm... since this is ia64, there is no lib64 anywhere right?  Make
</I>&gt;<i> &gt; sure PHP is linking against the right libs.  Sometimes lib64'ness
</I>&gt;<i> &gt; isn't always obvious.  Try adding --with-libdir=lib64 to the PHP
</I>&gt;<i> &gt; ./configure, but I'm not sure on this.
</I>&gt;<i> 
</I>&gt;<i> Ldd on the cli for php gives:
</I>&gt;<i> ssaturn /usr/local# ldd /space/custom_builds/php-5.2.4/sapi/cli/php
</I>&gt;<i>         linux-gate.so.1 =&gt;  (0xa000000000000000)
</I>&gt;<i>         libcrypt.so.1 =&gt; /lib/libcrypt.so.1 (0x2000000000064000)
</I>&gt;<i>         libc-client.so =&gt;
</I>&gt;<i> /space/custom_builds/imap-stuff//lib/libc-client.so
</I>&gt;<i>         (0x20000000000b4000) libpq.so.5 =&gt;
</I>&gt;<i>         /usr/local/pgsql/lib/libpq.so.5 (0x2000000000288000)
</I>&gt;<i>         librt.so.1 =&gt; /lib/librt.so.1 (0x20000000002dc000)
</I>&gt;<i> libmysqlclient.so.15 =&gt; /usr/local/mysql5120/lib/libmysqlclient.so.15
</I>&gt;<i>         (0x20000000002fc000) libmcrypt.so.4 =&gt;
</I>&gt;<i>         /usr/lib/libmcrypt.so.4 (0x2000000000528000) libltdl.so.3 =&gt;
</I>&gt;<i>         /usr/lib/libltdl.so.3 (0x2000000000588000) libdl.so.2 =&gt;
</I>&gt;<i>         /lib/libdl.so.2 (0x20000000005a8000) libpam.so.0 =&gt;
</I>&gt;<i>         /lib/libpam.so.0 (0x20000000005c0000) libpng.so.3 =&gt;
</I>&gt;<i>         /usr/lib/libpng.so.3 (0x20000000005e8000) libresolv.so.2 =&gt;
</I>&gt;<i>         /lib/libresolv.so.2 (0x200000000066c000) libm.so.6.1 =&gt;
</I>&gt;<i>         /lib/libm.so.6.1 (0x20000000006a0000) libnsl.so.1 =&gt;
</I>&gt;<i>         /lib/libnsl.so.1 (0x2000000000770000) libssl.so.0.9.8 =&gt;
</I>&gt;<i>         /usr/lib/libssl.so.0.9.8 (0x20000000007ac000)
</I>&gt;<i> libcrypto.so.0.9.8 =&gt; /usr/lib/libcrypto.so.0.9.8 (0x200000000083c000)
</I>&gt;<i>         libclntsh.so.10.1 =&gt; /usr/local/oracle/libclntsh.so.10.1
</I>&gt;<i> (0x2000000000aa8000)
</I>&gt;<i>         libxml2.so.2 =&gt; /usr/lib/libxml2.so.2 (0x2000000002c90000)
</I>&gt;<i>         libc.so.6.1 =&gt; /lib/libc.so.6.1 (0x2000000002f40000)
</I>&gt;<i>         libimf.so.6 =&gt; /opt/intel/cc/9.1.037/lib/libimf.so.6
</I>&gt;<i> (0x2000000003190000)
</I>&gt;<i>         libirc.so =&gt; /opt/intel/cc/9.1.037/lib/libirc.so
</I>&gt;<i> (0x2000000003440000)
</I>&gt;<i>         libipr.so.6 =&gt; /usr/local/oracle/libipr.so.6
</I>&gt;<i>         (0x2000000003470000) libgcc_s.so.1 =&gt; /lib/libgcc_s.so.1
</I>&gt;<i>         (0x2000000003484000) libpthread.so.0 =&gt; /lib/libpthread.so.0
</I>&gt;<i>         (0x20000000034a4000) /lib/ld-linux-ia64.so.2
</I>&gt;<i>         (0x2000000000000000) libz.so.1 =&gt; /lib/libz.so.1
</I>&gt;<i>         (0x20000000034dc000) libnnz10.so =&gt;
</I>&gt;<i>         /usr/local/oracle/libnnz10.so (0x2000000003510000)
</I>&gt;<i> libunwind.so.7 =&gt; /lib/libunwind.so.7 (0x2000000003898000) 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &gt; Another option would be to strip down the ./configure and add
</I>&gt;<i> &gt; --disable-all. Perhaps there are some conflicts with Oracle, lib64,
</I>&gt;<i> &gt; etc.  Then start to add extensions to see if you can isolate the
</I>&gt;<i> &gt; problem. 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &gt; Again, I can successfully login to the oracle database, and the
</I>&gt;<i> &gt; &gt; simplest of queries works. Anything &quot;complicated&quot; crashes the
</I>&gt;<i> &gt; &gt; program. 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; If I understand correctly - if you login via the Oracle client
</I>&gt;<i> &gt; directly (so no PHP involved), it'll still segfault when there's a
</I>&gt;<i> &gt; complicated query? 
</I>&gt;<i> 
</I>&gt;<i> No.. What I was trying to say is that I can login to oracle via a PHP
</I>&gt;<i> script.  I can even do my query if I limit the data which is returned
</I>&gt;<i> by oracle to less than 5 rows. As soon as I ask it to return 5 or
</I>&gt;<i> more rows I get a segfault.
</I>&gt;<i> 
</I>&gt;<i> In order to test the instantclient installatiton I installed the
</I>&gt;<i> sqlplus &quot;add on&quot; for instantclient and it is able to connect to
</I>&gt;<i> oracle and return all requested rows.
</I>&gt;<i> 
</I>&gt;<i> When I use gdb to run the cli for php I get:
</I>&gt;<i> 
</I>&gt;<i> gdb /space/custom_builds/php-5.2.4/sapi/cli/php
</I>&gt;<i> GNU gdb 6.4
</I>&gt;<i> Copyright 2005 Free Software Foundation, Inc.
</I>&gt;<i> GDB is free software, covered by the GNU General Public License, and
</I>&gt;<i> you are welcome to change it and/or distribute copies of it under
</I>&gt;<i> certain conditions.
</I>&gt;<i> Type &quot;show copying&quot; to see the conditions.
</I>&gt;<i> There is absolutely no warranty for GDB.  Type &quot;show warranty&quot; for
</I>&gt;<i> details. This GDB was configured as &quot;ia64-suse-linux&quot;...Using host
</I>&gt;<i> libthread_db library &quot;/lib/libthread_db.so.1&quot;.
</I>&gt;<i> 
</I>&gt;<i> (gdb) run /www/htdocs/nonsecure/con.html
</I>&gt;<i> Starting program: /space/custom_builds/php-5.2.4/sapi/cli/php
</I>&gt;<i> /www/htdocs/nonsecure/con.html
</I>&gt;<i> [Thread debugging using libthread_db enabled]
</I>&gt;<i> [New Thread 2305843009273028592 (LWP 27213)]
</I>&gt;<i> 
</I>&gt;<i> Program received signal SIGSEGV, Segmentation fault.
</I>&gt;<i> [Switching to Thread 2305843009273028592 (LWP 27213)]
</I>&gt;<i> 0x40000000005f6ba0 in _zval_ptr_dtor (zval_ptr=0x607ffffffebdb7f0) at
</I>&gt;<i> /space/custom_builds/php-5.2.4/Zend/zend_execute_API.c:413
</I>&gt;<i> 413             (*zval_ptr)-&gt;refcount--;
</I>&gt;<i> (gdb) where
</I>&gt;<i> #0  0x40000000005f6ba0 in _zval_ptr_dtor
</I>&gt;<i> (zval_ptr=0x607ffffffebdb7f0) at
</I>&gt;<i> /space/custom_builds/php-5.2.4/Zend/zend_execute_API.c:413 #1 
</I>&gt;<i> 0x400000000068d700 in zend_do_fcall_common_helper_SPEC
</I>&gt;<i>     (execute_data=0x607ffffffebdc370) at
</I>&gt;<i> /space/custom_builds/php-5.2.4/Zend/zend_execute.h:155 #2 
</I>&gt;<i> 0x4000000000666a00 in execute (op_array=0x20000000039d4e40) at
</I>&gt;<i> /space/custom_builds/php-5.2.4/Zend/zend_vm_execute.h:92 #3 
</I>&gt;<i> 0x40000000006188e0 in zend_execute_scripts (type=8, retval=0x0,
</I>&gt;<i> file_count=3) at /space/custom_builds/php-5.2.4/Zend/zend.c:1134 #4 
</I>&gt;<i> 0x4000000000577bb0 in php_execute_script (primary_file=Cannot access
</I>&gt;<i> memory at address 0x10 ) at
</I>&gt;<i> /space/custom_builds/php-5.2.4/main/main.c:1982 #5 
</I>&gt;<i> 0x400000000076fa30 in main (argc=Cannot access memory at address 0x0
</I>&gt;<i> ) at /space/custom_builds/php-5.2.4/sapi/cli/php_cli.c:1140 (gdb)
</I>&gt;<i> 
</I>&gt;<i> &gt; From the stacktrace above looks like something is overflowing its
</I>&gt;<i> &gt; bounds... 
</I>&gt;<i> 
</I>&gt;<i> I will try your suggested alternative option next and just build php
</I>&gt;<i> with oracle only to see if I get the same problem.
</I>
Yeah - I'd almost bet that it looks like a bad pointer/int on 64bit which is
probably a bug in PHP/Zend.  Try doing a minimal configure which can also
help in reporting a bug.

&gt;<i> I also have started to download the full client from Oracle instead
</I>&gt;<i> of the instantclient to see if it makes any sort of difference.
</I>
Would be interested to know if this makes a difference - I think there's
been some rumblings of problems with instantclient.

H


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023294.html">[nycphp-talk] Re: talk Digest, Vol 11, Issue 18
</A></li>
	<LI>Next message: <A HREF="023298.html">[nycphp-talk] Check for absolute path (cross platform)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23296">[ date ]</a>
              <a href="thread.html#23296">[ thread ]</a>
              <a href="subject.html#23296">[ subject ]</a>
              <a href="author.html#23296">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
