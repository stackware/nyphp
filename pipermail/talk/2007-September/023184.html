<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] MSSql , IIS Encrypted Connection String
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2007-September/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20MSSql%20%2C%20IIS%20Encrypted%20Connection%20String&In-Reply-To=%3C46DD511A.2040709%40beezifies.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023183.html">
   <LINK REL="Next"  HREF="023216.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] MSSql , IIS Encrypted Connection String</H1>
    <B>Gary Mort</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20MSSql%20%2C%20IIS%20Encrypted%20Connection%20String&In-Reply-To=%3C46DD511A.2040709%40beezifies.com%3E"
       TITLE="[nycphp-talk] MSSql , IIS Encrypted Connection String">bz-gmort at beezifies.com
       </A><BR>
    <I>Tue Sep  4 08:35:38 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023183.html">[nycphp-talk] MSSql , IIS Encrypted Connection String
</A></li>
        <LI>Next message: <A HREF="023216.html">[nycphp-talk] MSSql , IIS Encrypted Connection String
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23184">[ date ]</a>
              <a href="thread.html#23184">[ thread ]</a>
              <a href="subject.html#23184">[ subject ]</a>
              <a href="author.html#23184">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Bill P. wrote:
&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> I have a project that will be using IIS and mssql.
</I>&gt;<i> I need to use an encrypted conneciton string in my config/lib.php file.
</I>&gt;<i>
</I>&gt;<i> mssql has built in encryption connection ability, but within asp.
</I>&gt;<i>
</I>&gt;<i> Everything will be written in php so does anyone have any suggestions 
</I>&gt;<i> on encrypting a connection string to connect to a mssql db?
</I>&gt;<i>
</I>What's the point of encrypting the data?
Reading through 
<A HREF="http://msdn2.microsoft.com/en-us/library/ms998280.aspx">http://msdn2.microsoft.com/en-us/library/ms998280.aspx</A>
and
<A HREF="http://msdn2.microsoft.com/en-us/library/ms998283.aspx,">http://msdn2.microsoft.com/en-us/library/ms998283.aspx,</A> it is purely a 
local system server protection.

IE
You have web servers A. B. and C
You have MSSQL Server D and a database(MyDatabase)

A web application running on the WEB server wants to connect to the 
MSSQL server.
Using ASP,. some code somewhere says &quot;Connect to MyDatabase, a MSSQL 
Database &quot;

ASP will then search for a text file called web.conf, and it will grab 
the connection information stored there(the server it is on, the 
database name, yadda yadda).

Than it connects up to the server and does whatever you want it to do.

&quot;Encrypted connection string&quot; just means that the data stored in that 
text file is encrypted, using either an RSA mechanism or DPAPI - which 
to tell you the truth is completely beyond me.  I know there are 
different mechanisms for encryption.  I know in a general way how 
public/private key encryption works. And I know the longer the key 
length, in general, the more secure and the longer to process.  When I 
need to know more than that, I research what the industry stds are at 
that time, what is the best performance for a situation, and move on.  
Trying to understand the math behind it all would drive me bonkers. 

Using encrypted connection strings, the ASP program has an extra step. 
It accesses the text file, grabs the data, and then decrypts the data 
and uses it.  It doesn't actually send the data in an encrypted format 
to the server - the key to noticing this for me was that your ASP 
program can display the plaintext decoded info to you, so it's decoding 
it on the web server. 

So really, you get the same benefit by choosing any encryption scheme 
you like for PHP and encrypting the connection information file that 
your using.

The only reason I can see to use &quot;encrypted connection strings&quot; the 
Microsoft way is the method used in that RSA article(link above).

There, they suggest that for a server farm, what you would do is create 
the connection string file on the MSSQL server system(or on your own 
system, whatever.  The point is, you don't create it on servers A,B, and 
C).  Than you encrypt the file using RSA and transfer both the encrypted 
file AND the RSA private key needed to decrypt the file to servers 
A,B,and C.  Than by installing them under the appropriate user, web apps 
running under that user can decrypt the data.

If that is your goal, find a PHP RSA decryption routine, place the 
private key somewhere secure on your server, and use the key to decrypt 
the connection string file.  Than parse the file and shove the 
appropriate fields into your PHP connection.  If you want to use their 
method, they store the private key in the registry, so you can pull it 
out the same way.

Am I missing something here on how encrypted connection string works?  
(Besides the obvious that Microsoft went to great lengths to describe a 
fairly simple process in complex language such that it would appear to 
be a function exclusive to their API, instead of a fairly trivial 
implementation of standard config file encryption.  I mean, on first 
glance, I thought it was pretty cool, the concept being that you would 
provide the web servers with a connection string encrypted just for each 
server, and that server would send the encrypted data to the database 
server - thus it would not ever know what the true userid and password 
was and since the key is assigned to an ip address, a connection using 
the same config file from a different system would be rejected.  But no, 
it doesn't seem to be that, just a local config file encryption.)

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023183.html">[nycphp-talk] MSSql , IIS Encrypted Connection String
</A></li>
	<LI>Next message: <A HREF="023216.html">[nycphp-talk] MSSql , IIS Encrypted Connection String
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23184">[ date ]</a>
              <a href="thread.html#23184">[ thread ]</a>
              <a href="subject.html#23184">[ subject ]</a>
              <a href="author.html#23184">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
