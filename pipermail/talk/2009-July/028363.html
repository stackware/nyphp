<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] JSON and MVC
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2009-July/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20JSON%20and%20MVC&In-Reply-To=%3Ce065b8610907150956k1446286fj890d590626942b55%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028358.html">
   <LINK REL="Next"  HREF="028362.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] JSON and MVC</H1>
    <B>Jake McGraw</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20JSON%20and%20MVC&In-Reply-To=%3Ce065b8610907150956k1446286fj890d590626942b55%40mail.gmail.com%3E"
       TITLE="[nycphp-talk] JSON and MVC">jmcgraw1 at gmail.com
       </A><BR>
    <I>Wed Jul 15 12:56:57 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="028358.html">[nycphp-talk] JSON and MVC
</A></li>
        <LI>Next message: <A HREF="028362.html">[nycphp-talk] JSON and MVC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28363">[ date ]</a>
              <a href="thread.html#28363">[ thread ]</a>
              <a href="subject.html#28363">[ subject ]</a>
              <a href="author.html#28363">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Jul 15, 2009 at 11:52 AM, Hans Zaunere&lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">lists at zaunere.com</A>&gt; wrote:
&gt;&gt;<i> I've had great success using Zend Framework ContextSwitch Action
</I>&gt;&gt;<i> Helper:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="http://woo.ly/9it">http://woo.ly/9it</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It is a plugin for the Zend MVC system that detects what format you're
</I>&gt;&gt;<i> requesting a page in, using explicitly set context (format) in the
</I>&gt;&gt;<i> page request:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="http://myzendapp.com/module/controller/action?format=json">http://myzendapp.com/module/controller/action?format=json</A>
</I>&gt;&gt;<i> (?format=json sets the context to JSON encoding)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> or automatically detecting the context based on the request type. For
</I>&gt;&gt;<i> example, many JavaScript frameworks submit a special header to
</I>&gt;&gt;<i> differentiate an AJAX request from a standard HTTP request. The
</I>&gt;&gt;<i> ContextSwitch (in this case the AjaxContext) will detect this and
</I>&gt;&gt;<i> seamlessly deliver JSON. Other useful features include disabling
</I>&gt;&gt;<i> layouts, automatically encoding output to JSON and rerouting request
</I>&gt;&gt;<i> based on context type.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Granted you'll have to work with Zend MVC, so this isn't a general
</I>&gt;&gt;<i> solution to the problem, but perhaps you can glean some theory of
</I>&gt;&gt;<i> operation from the way that they have set it up.
</I>&gt;<i>
</I>&gt;<i> Hi Jake, thanks for the info. &#160;The context switching I can manage pretty
</I>&gt;<i> easily, but it's the actual rendering and output of the data in the format
</I>&gt;<i> needed for JSON.
</I>&gt;<i>
</I>&gt;<i> I don't see any examples from the above links on how the template/data
</I>&gt;<i> output is actually handled - have you seen any examples of this?
</I>&gt;<i>
</I>
See: <A HREF="http://jakemcgraw.com/php/zend/ContextSwitchExample.html">http://jakemcgraw.com/php/zend/ContextSwitchExample.html</A>

There are four actions, three of which will switch into Ajax mode if
the request originated from XHR:

The &quot;view&quot; action will disable the layout and render the
&quot;comment/view.ajax.phtml&quot; template if requested via Ajax.

The &quot;form&quot; action will disable the layout and render the
&quot;comment/form.ajax.phtml&quot; template if requested via Ajax.

The &quot;process&quot; action will disable the layout and view rendering, and
dump a JSON encoding of the &quot;$this-&gt;view&quot; member if requested via
Ajax. It also sends an updated Content-type header.

Finally, the &quot;index&quot; action will use the layout and render the
&quot;comment/index.phtml&quot; template regardless of being requested via a
normal request or XHR.

So, ContextSwitch not only directs request to the correct action, but
also points to the correct template (or for JSON, simply dumps the
variables).

Hope that helps!

- jake

&gt;<i> H
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> On Wed, Jul 15, 2009 at 10:31 AM, Hans Zaunere&lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">lists at zaunere.com</A>&gt;
</I>&gt;&gt;<i> wrote:
</I>&gt;&gt;<i> &gt; Hello,
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; As I work with and need to support JSON applications more and more, I
</I>&gt;&gt;<i> &gt; quickly remember why the mantra &quot;don't use javascript&quot; from
</I>&gt;&gt;<i> yesteryear was
</I>&gt;&gt;<i> &gt; in place. &#160;Worse, perhaps, is how the browser and server need to
</I>&gt;&gt;<i> interface
</I>&gt;&gt;<i> &gt; with each other in complex JSON based applications.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; We're all familiar with the typical MVC pattern, and the use of
</I>&gt;&gt;<i> templates to
</I>&gt;&gt;<i> &gt; organize and manipulate fragments of HTML/etc. &#160;This is a very well
</I>&gt;&gt;<i> solved
</I>&gt;&gt;<i> &gt; problem that's been established for years.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Web 2.0, if you will, is &quot;fragment&quot; requests/responses. &#160;I think of
</I>&gt;&gt;<i> this as
</I>&gt;&gt;<i> &gt; the basic Ajax type of website, whereby the server is now sending
</I>&gt;&gt;<i> back these
</I>&gt;&gt;<i> &gt; fragments of HTML rather than assembling them into complete documents
</I>&gt;&gt;<i> and
</I>&gt;&gt;<i> &gt; sending that back. &#160;The Javascript on the browser actually assembles
</I>&gt;&gt;<i> and
</I>&gt;&gt;<i> &gt; moves things around as needed on the client side.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Web 3.0 (insert kitsch marketing term here), I've found as being the
</I>&gt;&gt;<i> &gt; complete manipulation, in real time, of nearly the entire document.
</I>&gt;&gt;<i> &#160;Vast
</I>&gt;&gt;<i> &gt; chunks of the document are living and breathing, and being effected
</I>&gt;&gt;<i> by
</I>&gt;&gt;<i> &gt; events, timers, user interaction, server polling, etc.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; In order to the support this, a high degree of granularity for
</I>&gt;&gt;<i> dealing with
</I>&gt;&gt;<i> &gt; HTML tags and IDs is needed. &#160;Using fragments as we did in Web 2.0
</I>&gt;&gt;<i> doesn't
</I>&gt;&gt;<i> &gt; provide this level of granularity so pure JSON is required. &#160;What
</I>&gt;&gt;<i> this means
</I>&gt;&gt;<i> &gt; (to me) basically is that tag content itself or even elemental HTML
</I>&gt;&gt;<i> &gt; fragments (very small chunks, like single p, h1, img, etc) need to be
</I>&gt;&gt;<i> &gt; manipulated both on the server and browser side.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; The problem with this, however, is that it causes the server-side to
</I>&gt;&gt;<i> retrace
</I>&gt;&gt;<i> &gt; to the ugly days of mixing and mashing PHP/HTML/etc. &#160;For example, to
</I>&gt;&gt;<i> push
</I>&gt;&gt;<i> &gt; out a set of IDs to the client, I no longer use a template to spit
</I>&gt;&gt;<i> back a
</I>&gt;&gt;<i> &gt; fragment. &#160;Rather, I put tags and data into an array directly, and
</I>&gt;&gt;<i> then
</I>&gt;&gt;<i> &gt; json_encode() that, and send that back to the client.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; For example, a dynamic forum type of thing:
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; $JSON['ID'][&quot;mi_$GID&quot;] = &quot;&lt;img src=\&quot;{$Page-
</I>&gt;&gt;<i> &gt;ImagesURL}lr/icon_phone.png\&quot;
</I>&gt;&gt;<i> &gt; /&gt;&quot;;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; $JSON['ID'][&quot;bl_$GID&quot;] = &quot;{$M-&gt;BylineDate} | &lt;b&gt;{$M-&gt;FirstName}
</I>&gt;&gt;<i> &gt; {$M-&gt;LastName}&lt;/b&gt;&quot;;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; $JSON['ID'][&quot;rcb_$GID&quot;] = $M-&gt;ReplyCount;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; $JSON['ID'][&quot;hc_$GID&quot;] = $M-&gt;Title;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; echo json_encode($JSON['ID']);
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; The Javascript then takes each element from the array and manipulates
</I>&gt;&gt;<i> the
</I>&gt;&gt;<i> &gt; DOM as appropriate. &#160;Why not just stuff things in innerHTML you may
</I>&gt;&gt;<i> ask?
</I>&gt;&gt;<i> &gt; Because that's not granular enough, and should the user be
</I>&gt;&gt;<i> interactive with
</I>&gt;&gt;<i> &gt; that particular element, the user has just lost his current state.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; So hopefully others have run into these types of issues and I'm
</I>&gt;&gt;<i> curious as
</I>&gt;&gt;<i> &gt; to how others deal with it. &#160;Thoughts, experiences, etc? &#160;I've
</I>&gt;&gt;<i> thought about
</I>&gt;&gt;<i> &gt; how to use some type of elemental templating, but there doesn't
</I>&gt;&gt;<i> appear to be
</I>&gt;&gt;<i> &gt; anything that's a fit for this type of thing. &#160;And no easy way I can
</I>&gt;&gt;<i> think
</I>&gt;&gt;<i> &gt; of for building something to handle this.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Or, perhaps I'm completely missing some elementary concept that makes
</I>&gt;&gt;<i> all
</I>&gt;&gt;<i> &gt; this moot...?
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Looking forward to everyone's thoughts.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; H
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; _______________________________________________
</I>&gt;&gt;<i> &gt; New York PHP User Group Community Talk Mailing List
</I>&gt;&gt;<i> &gt; <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; <A HREF="http://www.nyphp.org/show_participation.php">http://www.nyphp.org/show_participation.php</A>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> New York PHP User Group Community Talk Mailing List
</I>&gt;&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="http://www.nyphp.org/show_participation.php">http://www.nyphp.org/show_participation.php</A>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> New York PHP User Group Community Talk Mailing List
</I>&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.nyphp.org/show_participation.php">http://www.nyphp.org/show_participation.php</A>
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028358.html">[nycphp-talk] JSON and MVC
</A></li>
	<LI>Next message: <A HREF="028362.html">[nycphp-talk] JSON and MVC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28363">[ date ]</a>
              <a href="thread.html#28363">[ thread ]</a>
              <a href="subject.html#28363">[ subject ]</a>
              <a href="author.html#28363">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
