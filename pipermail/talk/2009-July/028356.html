<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] JSON and MVC
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2009-July/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20JSON%20and%20MVC&In-Reply-To=%3Ce065b8610907150747x419d9976paad0677ff505fc54%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028355.html">
   <LINK REL="Next"  HREF="028358.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] JSON and MVC</H1>
    <B>Jake McGraw</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20JSON%20and%20MVC&In-Reply-To=%3Ce065b8610907150747x419d9976paad0677ff505fc54%40mail.gmail.com%3E"
       TITLE="[nycphp-talk] JSON and MVC">jmcgraw1 at gmail.com
       </A><BR>
    <I>Wed Jul 15 10:47:54 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="028355.html">[nycphp-talk] JSON and MVC
</A></li>
        <LI>Next message: <A HREF="028358.html">[nycphp-talk] JSON and MVC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28356">[ date ]</a>
              <a href="thread.html#28356">[ thread ]</a>
              <a href="subject.html#28356">[ subject ]</a>
              <a href="author.html#28356">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've had great success using Zend Framework ContextSwitch Action Helper:

<A HREF="http://woo.ly/9it">http://woo.ly/9it</A>

It is a plugin for the Zend MVC system that detects what format you're
requesting a page in, using explicitly set context (format) in the
page request:

<A HREF="http://myzendapp.com/module/controller/action?format=json">http://myzendapp.com/module/controller/action?format=json</A>
(?format=json sets the context to JSON encoding)

or automatically detecting the context based on the request type. For
example, many JavaScript frameworks submit a special header to
differentiate an AJAX request from a standard HTTP request. The
ContextSwitch (in this case the AjaxContext) will detect this and
seamlessly deliver JSON. Other useful features include disabling
layouts, automatically encoding output to JSON and rerouting request
based on context type.

Granted you'll have to work with Zend MVC, so this isn't a general
solution to the problem, but perhaps you can glean some theory of
operation from the way that they have set it up.

- jake


On Wed, Jul 15, 2009 at 10:31 AM, Hans Zaunere&lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">lists at zaunere.com</A>&gt; wrote:
&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> As I work with and need to support JSON applications more and more, I
</I>&gt;<i> quickly remember why the mantra &quot;don't use javascript&quot; from yesteryear was
</I>&gt;<i> in place. &#160;Worse, perhaps, is how the browser and server need to interface
</I>&gt;<i> with each other in complex JSON based applications.
</I>&gt;<i>
</I>&gt;<i> We're all familiar with the typical MVC pattern, and the use of templates to
</I>&gt;<i> organize and manipulate fragments of HTML/etc. &#160;This is a very well solved
</I>&gt;<i> problem that's been established for years.
</I>&gt;<i>
</I>&gt;<i> Web 2.0, if you will, is &quot;fragment&quot; requests/responses. &#160;I think of this as
</I>&gt;<i> the basic Ajax type of website, whereby the server is now sending back these
</I>&gt;<i> fragments of HTML rather than assembling them into complete documents and
</I>&gt;<i> sending that back. &#160;The Javascript on the browser actually assembles and
</I>&gt;<i> moves things around as needed on the client side.
</I>&gt;<i>
</I>&gt;<i> Web 3.0 (insert kitsch marketing term here), I've found as being the
</I>&gt;<i> complete manipulation, in real time, of nearly the entire document. &#160;Vast
</I>&gt;<i> chunks of the document are living and breathing, and being effected by
</I>&gt;<i> events, timers, user interaction, server polling, etc.
</I>&gt;<i>
</I>&gt;<i> In order to the support this, a high degree of granularity for dealing with
</I>&gt;<i> HTML tags and IDs is needed. &#160;Using fragments as we did in Web 2.0 doesn't
</I>&gt;<i> provide this level of granularity so pure JSON is required. &#160;What this means
</I>&gt;<i> (to me) basically is that tag content itself or even elemental HTML
</I>&gt;<i> fragments (very small chunks, like single p, h1, img, etc) need to be
</I>&gt;<i> manipulated both on the server and browser side.
</I>&gt;<i>
</I>&gt;<i> The problem with this, however, is that it causes the server-side to retrace
</I>&gt;<i> to the ugly days of mixing and mashing PHP/HTML/etc. &#160;For example, to push
</I>&gt;<i> out a set of IDs to the client, I no longer use a template to spit back a
</I>&gt;<i> fragment. &#160;Rather, I put tags and data into an array directly, and then
</I>&gt;<i> json_encode() that, and send that back to the client.
</I>&gt;<i>
</I>&gt;<i> For example, a dynamic forum type of thing:
</I>&gt;<i>
</I>&gt;<i> $JSON['ID'][&quot;mi_$GID&quot;] = &quot;&lt;img src=\&quot;{$Page-&gt;ImagesURL}lr/icon_phone.png\&quot;
</I>&gt;<i> /&gt;&quot;;
</I>&gt;<i>
</I>&gt;<i> $JSON['ID'][&quot;bl_$GID&quot;] = &quot;{$M-&gt;BylineDate} | &lt;b&gt;{$M-&gt;FirstName}
</I>&gt;<i> {$M-&gt;LastName}&lt;/b&gt;&quot;;
</I>&gt;<i>
</I>&gt;<i> $JSON['ID'][&quot;rcb_$GID&quot;] = $M-&gt;ReplyCount;
</I>&gt;<i>
</I>&gt;<i> $JSON['ID'][&quot;hc_$GID&quot;] = $M-&gt;Title;
</I>&gt;<i>
</I>&gt;<i> echo json_encode($JSON['ID']);
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The Javascript then takes each element from the array and manipulates the
</I>&gt;<i> DOM as appropriate. &#160;Why not just stuff things in innerHTML you may ask?
</I>&gt;<i> Because that's not granular enough, and should the user be interactive with
</I>&gt;<i> that particular element, the user has just lost his current state.
</I>&gt;<i>
</I>&gt;<i> So hopefully others have run into these types of issues and I'm curious as
</I>&gt;<i> to how others deal with it. &#160;Thoughts, experiences, etc? &#160;I've thought about
</I>&gt;<i> how to use some type of elemental templating, but there doesn't appear to be
</I>&gt;<i> anything that's a fit for this type of thing. &#160;And no easy way I can think
</I>&gt;<i> of for building something to handle this.
</I>&gt;<i>
</I>&gt;<i> Or, perhaps I'm completely missing some elementary concept that makes all
</I>&gt;<i> this moot...?
</I>&gt;<i>
</I>&gt;<i> Looking forward to everyone's thoughts.
</I>&gt;<i>
</I>&gt;<i> H
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> New York PHP User Group Community Talk Mailing List
</I>&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.nyphp.org/show_participation.php">http://www.nyphp.org/show_participation.php</A>
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028355.html">[nycphp-talk] JSON and MVC
</A></li>
	<LI>Next message: <A HREF="028358.html">[nycphp-talk] JSON and MVC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28356">[ date ]</a>
              <a href="thread.html#28356">[ thread ]</a>
              <a href="subject.html#28356">[ subject ]</a>
              <a href="author.html#28356">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
