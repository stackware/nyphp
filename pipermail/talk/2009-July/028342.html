<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] oci8 bind error
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2009-July/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20oci8%20bind%20error&In-Reply-To=%3C20090701215156.GA1397%40panix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028338.html">
   <LINK REL="Next"  HREF="028344.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] oci8 bind error</H1>
    <B>Daniel Convissor</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20oci8%20bind%20error&In-Reply-To=%3C20090701215156.GA1397%40panix.com%3E"
       TITLE="[nycphp-talk] oci8 bind error">danielc at analysisandsolutions.com
       </A><BR>
    <I>Wed Jul  1 17:51:56 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="028338.html">[nycphp-talk] oci8 bind error
</A></li>
        <LI>Next message: <A HREF="028344.html">[nycphp-talk] oci8 bind error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28342">[ date ]</a>
              <a href="thread.html#28342">[ thread ]</a>
              <a href="subject.html#28342">[ subject ]</a>
              <a href="author.html#28342">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey Eric:

&gt;<i> To your point that this &quot;oci_bind_by_name ($stmt, &quot;:TESTNAME&quot;, &quot;ERIC&quot;);&quot;
</I>&gt;<i> should work - I do not get the oracle error when run this statment, I get a
</I>&gt;<i> PHP fatal error: Only variables can be passed by reference. This makes no
</I>&gt;<i> sense to me either.
</I>
Binding allows input to and output from the database.  In the event there 
is output from the query/procedure on that binding, PHP needs a place to 
store said output.  That place is a variable.  Pass something other than 
a variable and PHP kvetches.

I recently needed more space on my hard disk, so removed Oracle, thus I 
can't test your code myself.  Alas.  Anyway, try this out:

&lt;?php

/*
 * SET THESE.
 */

$put_colon_on_placeholder = true;  // TRY THIS BOTH TRUE AND FALSE.

$username = '';
$password = '';
$dbname = '';


/*
 * Leave these alone (for the most part).
 */

$table_name = 'dan_test';
$field_name = 'the_field';
$max_length = '25';
$field_value = 'testing 123';


/*
 * Connect.
 */
$dbh = oci_connect($username, $password, $dbname);
if (!$dbh) {
    die('CONNECT ERROR: ' . oci_error() . &quot;\n&quot;);
}


/*
 * Create table.
 */

$statement = 'CREATE TABLE ' . $table_name . ' '
    . $field_name . ' VARCHAR2(' . $max_length . ')';
echo $statement . &quot;\n&quot;;

$sth = oci_parse($dbh, $statement);
if ($sth) {
    if (!oci_execute($sth, OCI_DEFAULT)) {
        die('EXECUTE ERROR: ' . oci_error($sth) . &quot;\n&quot;);
    }

    if (!oci_free_statement($sth)) {
        echo 'FREE ERROR: ' . oci_error($dbh) . &quot;\n&quot;;
    }
} else {
    die('STATEMENT PARSE ERROR: ' . oci_error($dbh) . &quot;\n&quot;);
}


/*
 * Let's try binding.
 */

if ($put_colon_on_placeholder) {
    $ph_name = ':' . $field_name;
} else {
    $ph_name = $field_name;
}
$statement = 'INSERT INTO ' . $table_name
    . ' (' . $field_name
    . ') VALUES (' . $ph_name . ')';
echo $statement . &quot;\n&quot;;

$sth = oci_parse($dbh, $statement);
if ($sth) {
    $bind = oci_bind_by_name($sth, $ph_name, $variable,
            $max_length, SQLT_CHR);
    if ($bind) {
        if (!oci_execute($sth, OCI_COMMIT_ON_SUCCESS)) {
            echo 'EXECUTE ERROR: ' . oci_error($sth) . &quot;\n&quot;;
        }
    } else {
        echo 'BIND ERROR: ' . oci_error($sth) . &quot;\n&quot;;
    }

    if (!oci_free_statement($sth)) {
        echo 'FREE ERROR: ' . oci_error($dbh) . &quot;\n&quot;;
    }

    echo 'The insert seems to have worked.' . &quot;\n&quot;;
} else {
    echo 'STATEMENT PARSE ERROR: ' . oci_error($dbh) . &quot;\n&quot;;
}


/*
 * Drop table.
 */

$statement = 'DROP TABLE ' . $table_name;
echo $statement . &quot;\n&quot;;

$sth = oci_parse($dbh, $statement);
if ($sth) {
    if (!oci_execute($sth, OCI_DEFAULT)) {
        die('EXECUTE ERROR: ' . oci_error($sth) . &quot;\n&quot;);
    }

    if (!oci_free_statement($sth)) {
        echo 'FREE ERROR: ' . oci_error($dbh) . &quot;\n&quot;;
    }
} else {
    die('STATEMENT PARSE ERROR: ' . oci_error($dbh) . &quot;\n&quot;);
}


if (!oci_close($dbh)) {
    echo 'CLOSE ERROR: ' . oci_error($dbh) . &quot;\n&quot;;
}

-- 
 T H E   A N A L Y S I S   A N D   S O L U T I O N S   C O M P A N Y
            data intensive web and database programming
                <A HREF="http://www.AnalysisAndSolutions.com/">http://www.AnalysisAndSolutions.com/</A>
 4015 7th Ave #4, Brooklyn NY 11232  v: 718-854-0335 f: 718-854-0409

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028338.html">[nycphp-talk] oci8 bind error
</A></li>
	<LI>Next message: <A HREF="028344.html">[nycphp-talk] oci8 bind error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28342">[ date ]</a>
              <a href="thread.html#28342">[ thread ]</a>
              <a href="subject.html#28342">[ subject ]</a>
              <a href="author.html#28342">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
