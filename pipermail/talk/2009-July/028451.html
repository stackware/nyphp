<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Caching, proxies,	sharding and other scaling 	questions
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2009-July/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Caching%2C%20proxies%2C%0A%09sharding%20and%20other%20scaling%20%09questions&In-Reply-To=%3Ce065b8610907251743s6692d611y49785b9985f8a4ec%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028448.html">
   <LINK REL="Next"  HREF="028445.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Caching, proxies,	sharding and other scaling 	questions</H1>
    <B>Jake McGraw</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Caching%2C%20proxies%2C%0A%09sharding%20and%20other%20scaling%20%09questions&In-Reply-To=%3Ce065b8610907251743s6692d611y49785b9985f8a4ec%40mail.gmail.com%3E"
       TITLE="[nycphp-talk] Caching, proxies,	sharding and other scaling 	questions">jmcgraw1 at gmail.com
       </A><BR>
    <I>Sat Jul 25 20:43:07 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="028448.html">[nycphp-talk] Caching, proxies,	sharding and other scaling 	questions
</A></li>
        <LI>Next message: <A HREF="028445.html">[nycphp-talk] Frameworks &amp; Fast Iterations
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28451">[ date ]</a>
              <a href="thread.html#28451">[ thread ]</a>
              <a href="subject.html#28451">[ subject ]</a>
              <a href="author.html#28451">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Very ontopic image for our discussion:

<A HREF="http://highscalability.com/nsfw-hilarious-fault-tolerance-cartoon">http://highscalability.com/nsfw-hilarious-fault-tolerance-cartoon</A>

On Sat, Jul 25, 2009 at 2:18 PM, Mitch Pirtle&lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">mitch.pirtle at gmail.com</A>&gt; wrote:
&gt;<i> Memcache is your safest option for an in-memory solution, for sure.
</I>&gt;<i> Realistically, does memcache even have a competitor in that regard?
</I>&gt;<i>
</I>&gt;<i> For persistent storage, you should look at MongoDB and Project
</I>&gt;<i> Voldemort. Voldemort is insanely fast as a key/value store, and
</I>&gt;<i> coupled with BerkeleyDB storage is unbeatable for scale, shard and
</I>&gt;<i> speed needs.
</I>&gt;<i>
</I>&gt;<i> MongoDB provides a persistent datastore that also goes direct to disk,
</I>&gt;<i> and is wikkid fast - MongDB tries to bridge the gap between key/value
</I>&gt;<i> stores (scale, shard, speed) and relational databases (lists, finds).
</I>&gt;<i>
</I>&gt;<i> I have a site that will probably break 1B page views in 6 months,
</I>&gt;<i> running on three physical webservers, each of which having memcache as
</I>&gt;<i> well. It certainly can be done, but depends greatly on the quality of
</I>&gt;<i> your developers, how much time you give them to do their thing, and
</I>&gt;<i> the overall performance characteristics and requirements of your site.
</I>&gt;<i>
</I>&gt;<i> Making massive scale websites isn't actually hard, it just takes time.
</I>&gt;<i> Not giving your engineers time to think things through takes their
</I>&gt;<i> efficiency and sets it on fire outside in the street. :-)
</I>&gt;<i>
</I>&gt;<i> -- Mitch
</I>&gt;<i>
</I>&gt;<i> On Fri, Jul 24, 2009 at 7:29 PM, Jake McGraw&lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">jmcgraw1 at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> On Fri, Jul 24, 2009 at 6:45 PM, Ajai Khattri&lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">ajai at bitblit.net</A>&gt; wrote:
</I>&gt;&gt;&gt;<i> On Fri, 24 Jul 2009, Jake McGraw wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Whats your data size like? How many requests per second do you plan on
</I>&gt;&gt;&gt;&gt;<i> handling?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Its a very big site. Last year, we handled a total of 945 million page
</I>&gt;&gt;&gt;<i> views. And we expect those numbers to go up of course :-)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> a relational database to a key/value store (memcache is nice,
</I>&gt;&gt;&gt;&gt;<i> personally, I'm becoming a big fan of Redis) is to set up a single
</I>&gt;&gt;&gt;&gt;<i> instance and see how it handles the load.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Yes, my thoughts exactly. (BTW, I also looked at Redis earlier today, but
</I>&gt;&gt;&gt;<i> I have yet to see a comparison with memcache). Any thoughts?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Memcache is a proven product with a long (in web terms) history. Redis
</I>&gt;&gt;<i> is brand knew, RC for version 1.0 was just put out fairly recently.
</I>&gt;&gt;<i> The things I like about Redis are:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Data Persistence (not just in memory)
</I>&gt;&gt;<i> * Very easy to take a snapshot of your entire data store, just backup
</I>&gt;&gt;<i> the data dump dir.
</I>&gt;&gt;<i> * Very easy to prime a new data store. Let's say part of scaling
</I>&gt;&gt;<i> strategy includes mirroring your data, that is, you'll have multiple
</I>&gt;&gt;<i> cache servers with the same data. Simply take a snapshot of your data
</I>&gt;&gt;<i> dir, move the files to a new server and start redis.
</I>&gt;&gt;<i> * If your server goes down you can still recover information from the
</I>&gt;&gt;<i> last active state.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Lists
</I>&gt;&gt;<i> Redis is not just a key/value store, it also provides lists of values
</I>&gt;&gt;<i> under a single key. You can push, pop, get the length, get an
</I>&gt;&gt;<i> arbitrary value within a list and a bunch of other features. Doing all
</I>&gt;&gt;<i> of this computation within the provides two benefits: 1. No round trip
</I>&gt;&gt;<i> and (de)serialization, 2. Atomic transactions.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> KEYS command for wildcards in key support.
</I>&gt;&gt;<i> <A HREF="http://code.google.com/p/redis/wiki/KeysCommand">http://code.google.com/p/redis/wiki/KeysCommand</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Sets
</I>&gt;&gt;<i> Though I haven't played around with sets yet, they look pretty powerful.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> In general, I think the KEYS and List commands makes the whole
</I>&gt;&gt;<i> key/value thing a lot easier to use when coming from an RDBMS
</I>&gt;&gt;<i> background. For performance information, check out this post:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="http://groups.google.com/group/redis-db/browse_thread/thread/0c706a43bc78b0e5/455dd41883d90101#455dd41883d90101">http://groups.google.com/group/redis-db/browse_thread/thread/0c706a43bc78b0e5/455dd41883d90101#455dd41883d90101</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> - jake
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> For example, with modern
</I>&gt;&gt;&gt;&gt;<i> hardware, value look up from a single, untaxed instance of memcache
</I>&gt;&gt;&gt;&gt;<i> should take around 1ms. At a certain point, based almost entirely on
</I>&gt;&gt;&gt;&gt;<i> traffic, that'll go up. When it gets to an undesirable level, throw in
</I>&gt;&gt;&gt;&gt;<i> another memcache instance and hash the keys to spread the load (or
</I>&gt;&gt;&gt;&gt;<i> allow your memcached client to hash the keys for you). Continue this
</I>&gt;&gt;&gt;&gt;<i> until some other bottleneck rears its head.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> We know where the bottle necks are, so right now its a case of selecting
</I>&gt;&gt;&gt;<i> some solutions to test with.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> --
</I>&gt;&gt;&gt;<i> Aj.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;<i> New York PHP User Group Community Talk Mailing List
</I>&gt;&gt;&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> <A HREF="http://www.nyphp.org/show_participation.php">http://www.nyphp.org/show_participation.php</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> New York PHP User Group Community Talk Mailing List
</I>&gt;&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="http://www.nyphp.org/show_participation.php">http://www.nyphp.org/show_participation.php</A>
</I>&gt;&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> New York PHP User Group Community Talk Mailing List
</I>&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.nyphp.org/show_participation.php">http://www.nyphp.org/show_participation.php</A>
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028448.html">[nycphp-talk] Caching, proxies,	sharding and other scaling 	questions
</A></li>
	<LI>Next message: <A HREF="028445.html">[nycphp-talk] Frameworks &amp; Fast Iterations
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28451">[ date ]</a>
              <a href="thread.html#28451">[ thread ]</a>
              <a href="subject.html#28451">[ subject ]</a>
              <a href="author.html#28451">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
