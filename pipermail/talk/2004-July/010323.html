<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] What's the best way query a table with a &quot;one-to-many&quot;	relationship? Suggestions???
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2004-July/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20What%27s%20the%20best%20way%20query%20a%20table%20with%20a%20%22one-to-many%22%0A%09relationship%3F%20Suggestions%3F%3F%3F&In-Reply-To=%3C008401c4623f%24cdd66ca0%240a01a8c0%40webdev%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010322.html">
   <LINK REL="Next"  HREF="010324.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] What's the best way query a table with a &quot;one-to-many&quot;	relationship? Suggestions???</H1>
    <B>Alan T. Miller</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20What%27s%20the%20best%20way%20query%20a%20table%20with%20a%20%22one-to-many%22%0A%09relationship%3F%20Suggestions%3F%3F%3F&In-Reply-To=%3C008401c4623f%24cdd66ca0%240a01a8c0%40webdev%3E"
       TITLE="[nycphp-talk] What's the best way query a table with a &quot;one-to-many&quot;	relationship? Suggestions???">amiller at criticalmedia.biz
       </A><BR>
    <I>Sun Jul  4 23:26:00 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="010322.html">[nycphp-talk] PHP5 vs. JDK5
</A></li>
        <LI>Next message: <A HREF="010324.html">[nycphp-talk] What's the best way query a table with a	&quot;one-to-many&quot;relationship? Suggestions???
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10323">[ date ]</a>
              <a href="thread.html#10323">[ thread ]</a>
              <a href="subject.html#10323">[ subject ]</a>
              <a href="author.html#10323">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I know what I want to do has been done a thousand times before, however I am
looking for suggestions on the best way to go about it. I figured someone
here might be able to suggest something.

I have two tables, one holds products, the other holds photos. There is a
one to many
relationship between products and photographs. For example...

TABLE 1 (products):
products.id
products.title
products.description

TABLE 2 (product photos)
photos.id
photos.id_product
photos.filename
photos.height
photos.width
photos.position

the 'position' field is used to determine which is the main photo (photos
are ordered by their position). IN other words the photo with position 1
would be the main thumbnail.

There are two things I would like to be able to get from a SELECT statement.
The first is a list of products with the thumbnail info for the product. I
immediately see two ways of doing this but am looking for a better solution.

SOLUTION 1: select all products, and then loop through that result set and
do another select to get the photo information on each iteration of the
loop. This would be slow, and create unnecesary overhead on the database. I
do not think this is a good solution.

SOLUTION 2: select all products and then use subselects to get the
photograph information. I do not like this solution either, as there seems
to be no clear way to get multiple fields such as filename and height and
width etc without many subselects, or perhaps a creative concatenation
routine.

SOLUTION 3: I am open to suggestions... please!

The other main task I would like to accomplish is to be able to select all
the product information for a single product and get all the photographs for
the product as well. I cannot think of an efficient way to do this without
issuing two queries (one to get the product, and one to get the photo).

I am very interested to hear how others have tacked simular situations like
this. Any help is greatly appreciated.

Alan



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010322.html">[nycphp-talk] PHP5 vs. JDK5
</A></li>
	<LI>Next message: <A HREF="010324.html">[nycphp-talk] What's the best way query a table with a	&quot;one-to-many&quot;relationship? Suggestions???
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10323">[ date ]</a>
              <a href="thread.html#10323">[ thread ]</a>
              <a href="subject.html#10323">[ subject ]</a>
              <a href="author.html#10323">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
