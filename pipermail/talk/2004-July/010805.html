<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] phantom file writing errors
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2004-July/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20phantom%20file%20writing%20errors&In-Reply-To=%3Cp06110404bd2b91561168%40%5B192.168.1.44%5D%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010803.html">
   <LINK REL="Next"  HREF="010806.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] phantom file writing errors</H1>
    <B>Marc Antony Vose</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20phantom%20file%20writing%20errors&In-Reply-To=%3Cp06110404bd2b91561168%40%5B192.168.1.44%5D%3E"
       TITLE="[nycphp-talk] phantom file writing errors">suzerain at suzerain.com
       </A><BR>
    <I>Tue Jul 27 01:07:15 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="010803.html">[nycphp-talk] phantom file writing errors
</A></li>
        <LI>Next message: <A HREF="010806.html">[nycphp-talk] phantom file writing errors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10805">[ date ]</a>
              <a href="thread.html#10805">[ thread ]</a>
              <a href="subject.html#10805">[ subject ]</a>
              <a href="author.html#10805">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi:

To John:

It's creating directories inside a directory that is chmod 777.  Into 
each directory is placed an HTML file, which is created in the code 
below.  Therefore, all of the directories and files involved are 
owned by the script that is being run (user: apache, grp: apache), 
since the files didn't even exist in the first place.  And it's 
definitely writing to the file, because the contents of the files are 
there.

To inforequest:

Could you explain what you mean by 'file-handle-passed' problem?

Here's the relevant code, which goes through an array of films, reads 
in a template file, and writes out an HTML file containing the list 
of distributors for the film:

----+

// step through the films array and output the file
for( $x=0; $x&lt;count($all_films); $x++ ){


//....snip snip: a few setup variables

// MAIN_ROOT, in this case = $_SERVER['DOCUMENT_ROOT']

// the directory name is the film_id
$output_dir = MAIN_ROOT . '/_admin/distributors/output/' . 
$all_films[$x][&quot;film_id&quot;];
// the file name
$output_file = 'distributors.html';
// build the path, for convenience
$output_path = $output_dir . &quot;/&quot; . $output_file;

// create the directory, if necessary
if( !file_exists($output_dir) &amp;&amp; !is_dir($output_dir) ){
	mkdir($output_dir,0755);
}

//...snip snip: the code that populates the variable $output

// output the file
$output_h = fopen($output_path,&quot;w&quot;);
fwrite($output_h,$output);
fclose($output_h);


//...snip snip: code that copies the file to a remote server


}

----+

Anything crazy in there?



At 12:22 AM -0400 7/27/04, inforequest wrote:
&gt;<i>This is often a file-handle-passed problem. Show us the the code 
</I>&gt;<i>where you assign $output_path, and why not $output as well to be 
</I>&gt;<i>thorough.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>Marc Antony Vose suzerain-at-suzerain.com |nyphp 04/2004| wrote:
</I>&gt;<i>
</I>&gt;&gt;<i>Hi there:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Can anyone tell my why I would get this error:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Warning: fwrite(): supplied argument is not a valid stream resource 
</I>&gt;&gt;<i>in Warning: fclose(): supplied argument is not a valid stream 
</I>&gt;&gt;<i>resource in
</I>&gt;&gt;<i>when the script is in fact opening and writing out the file just fine?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>here's my file handling calls, just for reference:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>// output the file
</I>&gt;&gt;<i>$output_h = fopen($output_path,&quot;w&quot;);
</I>&gt;&gt;<i>fwrite($output_h,$output);
</I>&gt;&gt;<i>fclose($output_h);
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>This is happening on a new server I just moved to, and doesn't 
</I>&gt;&gt;<i>happen on my old server, nor did it happen on my old server.  Must 
</I>&gt;&gt;<i>be some kind of configuration thing...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>--
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Marc Antony Vose
</I>&gt;&gt;<i><A HREF="http://www.suzerain.com/">http://www.suzerain.com/</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>They that can give up essential liberty to obtain a little 
</I>&gt;&gt;<i>temporary safety deserve neither liberty nor safety.
</I>&gt;&gt;<i>-- Benjamin Franklin
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>------------------------------------------------------------------------
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>_______________________________________________
</I>&gt;&gt;<i>New York PHP Talk
</I>&gt;&gt;<i>Supporting AMP Technology (Apache/MySQL/PHP)
</I>&gt;&gt;<i><A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;&gt;<i><A HREF="http://www.newyorkphp.org">http://www.newyorkphp.org</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>_______________________________________________
</I>&gt;<i>New York PHP Talk
</I>&gt;<i>Supporting AMP Technology (Apache/MySQL/PHP)
</I>&gt;<i><A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;<i><A HREF="http://www.newyorkphp.org">http://www.newyorkphp.org</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010803.html">[nycphp-talk] phantom file writing errors
</A></li>
	<LI>Next message: <A HREF="010806.html">[nycphp-talk] phantom file writing errors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10805">[ date ]</a>
              <a href="thread.html#10805">[ thread ]</a>
              <a href="subject.html#10805">[ subject ]</a>
              <a href="author.html#10805">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
