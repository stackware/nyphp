<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] making a manual http POST using a PHP client (USPS web	services)
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2004-July/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20making%20a%20manual%20http%20POST%20using%20a%20PHP%20client%20%28USPS%20web%0A%09services%29&In-Reply-To=%3C40F2ACC9.6070002%40ceruleansky.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010420.html">
   <LINK REL="Next"  HREF="010425.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] making a manual http POST using a PHP client (USPS web	services)</H1>
    <B>Jayesh Sheth</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20making%20a%20manual%20http%20POST%20using%20a%20PHP%20client%20%28USPS%20web%0A%09services%29&In-Reply-To=%3C40F2ACC9.6070002%40ceruleansky.com%3E"
       TITLE="[nycphp-talk] making a manual http POST using a PHP client (USPS web	services)">jayeshsh at ceruleansky.com
       </A><BR>
    <I>Mon Jul 12 11:22:49 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="010420.html">[nycphp-talk] Setting up https as a registered stream
</A></li>
        <LI>Next message: <A HREF="010425.html">[nycphp-talk] making a manual http POST using a PHP client	(USPS web services)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10421">[ date ]</a>
              <a href="thread.html#10421">[ thread ]</a>
              <a href="subject.html#10421">[ subject ]</a>
              <a href="author.html#10421">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello all,

I am trying to build a PHP script that requests information from the 
United States Postal Service (USPS) using their web services interface. 
More specifically, I want to look up 9 digit zip codes for a given 
street address.

The USPS does not use a standard web services protocol such as XML-RPC 
or SOAP. If they were using XML-RPC, then I could just use the PEAR 
XML-RPC library to automatically POST the XML request to their server 
(and also to automatically decode the XML response that I receive from 
them).

The USPS has some documents on this matter, but their (less than 
abundant) code samples are restricted to Perl, ASP, and Visual Basic.

Their Perl code sample looks like this:

--------------------------------------
print &quot;content-type: text/html\n\n&quot;;

print $htmlBegin;

$ua = new LWP::UserAgent;

$req = new HTTP::Request 'POST', '<A HREF="http://SERVERNAME/ShippingAPI.dll">http://SERVERNAME/ShippingAPI.dll</A>';

$req-&gt;content_type('application/x-www-form-urlencoded');

$req-&gt;content('API=Rate&amp;XML=' . $rateReqDoc-&gt;toString);

$response = $ua-&gt;request($req);

if ($response-&gt;is_success) {

     $resp = $response-&gt;content;

} else {

     print &quot;&lt;p&gt;There was an error processing your request&lt;/p&gt;\n&quot;;

     print $htmlEnd;

     exit 0;

}
---------------------------------------------

I have not really used Perl before, but the first time I looked at this 
code, I thought it looked a lot like PHP. Here's what I think is happening:

The Perl script manually opening an HTTP connection and posting a chunk 
of XML encoded text to server using the &quot;LWP::UserAgent&quot; and 
&quot;HTTP::Request&quot; things.

So my question is: which function (or objects) should I use in PHP to do 
something. I know, this is kind of a stupid question - I should probably 
know how to do this, but until now I just let the web services libraries 
do this &quot;dirty work&quot; for me.

On a related note, I was wondering if anyone knows of open source PHP 
code that does what I would like to do.

Thanks in advance.

Best Regards,

- Jay



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010420.html">[nycphp-talk] Setting up https as a registered stream
</A></li>
	<LI>Next message: <A HREF="010425.html">[nycphp-talk] making a manual http POST using a PHP client	(USPS web services)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10421">[ date ]</a>
              <a href="thread.html#10421">[ thread ]</a>
              <a href="subject.html#10421">[ subject ]</a>
              <a href="author.html#10421">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
