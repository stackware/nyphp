<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] mysqldump and foreign keys on InnoDB tables
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2004-July/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20mysqldump%20and%20foreign%20keys%20on%20InnoDB%20tables&In-Reply-To=%3C1089387018.40eeba0a8c355%40webmail.tuffmail.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010411.html">
   <LINK REL="Next"  HREF="010413.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] mysqldump and foreign keys on InnoDB tables</H1>
    <B>csnyder at chxo.com</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20mysqldump%20and%20foreign%20keys%20on%20InnoDB%20tables&In-Reply-To=%3C1089387018.40eeba0a8c355%40webmail.tuffmail.net%3E"
       TITLE="[nycphp-talk] mysqldump and foreign keys on InnoDB tables">csnyder at chxo.com
       </A><BR>
    <I>Fri Jul  9 11:30:18 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="010411.html">[nycphp-talk] firefox security fix
</A></li>
        <LI>Next message: <A HREF="010413.html">[nycphp-talk] mysqldump and foreign keys on InnoDB tables
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10412">[ date ]</a>
              <a href="thread.html#10412">[ thread ]</a>
              <a href="subject.html#10412">[ subject ]</a>
              <a href="author.html#10412">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>As a mysql user from way back, I don't generally hold with all this fancy
FOREIGN KEY stuff. But recently I've has occasion to work on tables that are
heavily keyed to each other, and I've run into a nasty problem when trying to
backup and restore the database using mysqldump --opt 

Despite the fact that the sql file wraps all the inserts in *!40000 ALTER TABLE
tablename DISABLE KEYS */; the inserts are failing on foreign key checks.

I'm using Mysql 4.0.15a ...

Is this expected behavior? Seems to me that if the foreign key indexes aren't
being created until after everything is inserted, the inserts should succeed no
matter what, especially as mysqldump --opt is advertised as the best/fastest
way to backup and restore a database.

   chris.

&gt;<i>From hans not <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">junk at nyphp.com</A>  Fri Jul  9 14:23:33 2004
</I>Return-Path: &lt;hans not <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">junk at nyphp.com</A>&gt;
Received: from smtp11.intermedia.net (smtp11.intermedia.net [64.78.21.10])
	by virtu.nyphp.org (Postfix) with ESMTP id 3FF62A85F0
	for &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk at lists.nyphp.org</A>&gt;; Fri,  9 Jul 2004 14:23:33 -0400 (EDT)
Received: from ehost011-1.exch011.intermedia.net ([64.78.21.3]) by
	smtp11.intermedia.net with Microsoft SMTPSVC(6.0.3790.0); 
	Fri, 9 Jul 2004 11:15:04 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset=&quot;us-ascii&quot;
Content-Transfer-Encoding: quoted-printable
Subject: RE: [nycphp-talk] mysqldump and foreign keys on InnoDB tables
Date: Fri, 9 Jul 2004 11:23:30 -0700
Message-ID: &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">41EE526EC2D3C74286415780D3BA9F8702F7C5E1 at ehost011-1.exch011.intermedia.net</A>&gt;
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [nycphp-talk] mysqldump and foreign keys on InnoDB tables
Thread-Index: AcRlyast2+MXiiTPRoeLQhlNgZ0rGQAFsbEQ
From: &quot;Hans Zaunere&quot; &lt;hans not <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">junk at nyphp.com</A>&gt;
To: &quot;NYPHP Talk&quot; &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk at lists.nyphp.org</A>&gt;
X-OriginalArrivalTime: 09 Jul 2004 18:15:04.0824 (UTC)
	FILETIME=[A88EFF80:01C465E0]
X-BeenThere: <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk at lists.nyphp.org</A>
X-Mailman-Version: 2.1.4
Precedence: list
Reply-To: NYPHP Talk &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk at lists.nyphp.org</A>&gt;
List-Id: NYPHP Talk &lt;talk.lists.nyphp.org&gt;
List-Unsubscribe: &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>&gt;,
	&lt;mailto:<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk-request at lists.nyphp.org</A>?subject=unsubscribe&gt;
List-Archive: &lt;<A HREF="http://lists.nyphp.org/pipermail/talk">http://lists.nyphp.org/pipermail/talk</A>&gt;
List-Post: &lt;mailto:<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk at lists.nyphp.org</A>&gt;
List-Help: &lt;mailto:<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk-request at lists.nyphp.org</A>?subject=help&gt;
List-Subscribe: &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>&gt;,
	&lt;mailto:<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk-request at lists.nyphp.org</A>?subject=subscribe&gt;
X-List-Received-Date: Fri, 09 Jul 2004 18:23:33 -0000


&gt;<i> As a mysql user from way back, I don't generally hold with all this
</I>fancy
&gt;<i> FOREIGN KEY stuff. But recently I've has occasion to work on tables
</I>that are
&gt;<i> heavily keyed to each other, and I've run into a nasty problem when
</I>trying to
&gt;<i> backup and restore the database using mysqldump --opt
</I>&gt;<i>=20
</I>&gt;<i> Despite the fact that the sql file wraps all the inserts in *!40000
</I>ALTER TABLE
&gt;<i> tablename DISABLE KEYS */; the inserts are failing on foreign key
</I>checks.
&gt;<i>=20
</I>&gt;<i> I'm using Mysql 4.0.15a ...
</I>
<A HREF="http://dev.mysql.com/doc/mysql/en/SET_OPTION.html">http://dev.mysql.com/doc/mysql/en/SET_OPTION.html</A>

SET FOREIGN_KEY_CHECKS=3D0;

&gt;<i> Is this expected behavior? Seems to me that if the foreign key indexes
</I>aren't
&gt;<i> being created until after everything is inserted, the inserts should
</I>succeed no
&gt;<i> matter what, especially as mysqldump --opt is advertised as the
</I>best/fastest
&gt;<i> way to backup and restore a database.
</I>
Well:

<A HREF="http://dev.mysql.com/doc/mysql/en/Backing_up.html">http://dev.mysql.com/doc/mysql/en/Backing_up.html</A>

And, when working with InnoDB, see the 8th bullet (AUTOCOMMIT):

<A HREF="http://dev.mysql.com/doc/mysql/en/InnoDB_tuning.html">http://dev.mysql.com/doc/mysql/en/InnoDB_tuning.html</A>

LOAD DATA INFILE and SELECT INTO OUTFILE are also nice.

H


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010411.html">[nycphp-talk] firefox security fix
</A></li>
	<LI>Next message: <A HREF="010413.html">[nycphp-talk] mysqldump and foreign keys on InnoDB tables
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10412">[ date ]</a>
              <a href="thread.html#10412">[ thread ]</a>
              <a href="subject.html#10412">[ subject ]</a>
              <a href="author.html#10412">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
