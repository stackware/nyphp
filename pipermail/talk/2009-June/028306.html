<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Trying to decide between MDB2 and PHP PDO
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2009-June/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Trying%20to%20decide%20between%20MDB2%20and%20PHP%20PDO&In-Reply-To=%3C68de37340906252331u64e513e7p48217a5bbb9a4e5b%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028305.html">
   <LINK REL="Next"  HREF="028309.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Trying to decide between MDB2 and PHP PDO</H1>
    <B>Eddie Drapkin</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Trying%20to%20decide%20between%20MDB2%20and%20PHP%20PDO&In-Reply-To=%3C68de37340906252331u64e513e7p48217a5bbb9a4e5b%40mail.gmail.com%3E"
       TITLE="[nycphp-talk] Trying to decide between MDB2 and PHP PDO">oorza2k5 at gmail.com
       </A><BR>
    <I>Fri Jun 26 02:31:20 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="028305.html">[nycphp-talk] Trying to decide between MDB2 and PHP PDO
</A></li>
        <LI>Next message: <A HREF="028309.html">[nycphp-talk] Trying to decide between MDB2 and PHP PDO
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28306">[ date ]</a>
              <a href="thread.html#28306">[ thread ]</a>
              <a href="subject.html#28306">[ subject ]</a>
              <a href="author.html#28306">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, Jun 26, 2009 at 2:13 AM, Hans Zaunere&lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">lists at zaunere.com</A>&gt; wrote:
&gt;&gt;<i> &gt;&gt; Wait, are you advocating //against// prepared statements?
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Not at all, but when using mysql, you should emulate them. &#160;I am
</I>&gt;&gt;<i> &gt; actually all for &quot;prepared&quot; style queries, if I ever see
</I>&gt;&gt;<i> &gt; &quot;mysqli_real_escape_string&quot; in someone's code, I immediately write the
</I>&gt;&gt;<i> &gt; person off as clueless.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> What's so clueless about using mysql_real_escape_string()? &#160;I would be
</I>&gt;&gt;<i> interested to find out.
</I>&gt;<i>
</I>&gt;<i> Nothing in my opinion. &#160;Prepared statements can be a benefit in various
</I>&gt;<i> situations, with those benefits being largely dictated by the database in
</I>&gt;<i> use. &#160;With MySQL, prepared statements often are an actual drag, rather than
</I>&gt;<i> benefit.
</I>&gt;<i>
</I>&gt;<i> Consider:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://dev.mysql.com/doc/refman/5.1/en/c-api-prepared-statements.html">http://dev.mysql.com/doc/refman/5.1/en/c-api-prepared-statements.html</A>
</I>&gt;<i>
</I>&gt;<i> A key statement being:
</I>&gt;<i>
</I>&gt;<i> &quot;Prepared execution is an efficient way to execute a statement more than
</I>&gt;<i> once.&quot;
</I>&gt;<i>
</I>&gt;<i> Most statements aren't executed more than once in a typical web
</I>&gt;<i> application/request/response cycle.
</I>&gt;<i>
</I>&gt;<i> Cases where I would use prepared statements:
</I>&gt;<i>
</I>&gt;<i> -- batch processes where the same queries are executed numerous times with
</I>&gt;<i> varying data
</I>&gt;<i>
</I>&gt;<i> -- dealing with large data storage (blobs, etc.)
</I>&gt;<i>
</I>&gt;<i> H
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> New York PHP User Group Community Talk Mailing List
</I>&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.nyphp.org/show_participation.php">http://www.nyphp.org/show_participation.php</A>
</I>&gt;<i>
</I>
If, and this is an enormous if, you properly build your application
around persistent connections, you ought to be able to take advantage
of the erm, advantages of preparing your statements.  AFAIK, the cache
for prepared statements (which I'm not entirely sure MySQL even
bothers to build and use, I've heard that it doesn't and after several
hours of searching have given up looking for a conclusive answer)
exists on a per connection basis, so the persistency of your
connection ought to preserve that gain.  As a general rule, I use
parameterized queries with named parameters (a huge advantage PDO has
over MySQLi) in all my queries, because I can afford the extra wait if
the query only runs once on that connection and it's far too easy to
rely on mysqli_real_escape_string and forget to use it once and have
everything come crashing down around you.  As far as portability is
concerned, one thing I've had some level of success with is storing my
queries in XML and fetching them to be prepared, then binding and
executing, which makes it a whole hell of a lot easier to write
queries for two different databases (in my case, PostgreSQL and MySQL)
than try to implement some sort of rewriter, generator, or some other
language that gets compiled into SQL (think Doctrine).

Regarding have another layer between your code and your database
(driver), I would have to disagree (and Hans and I have had a back and
forth off list about this very thing).  Consider PDO:
PDO call -&gt; PDO -&gt; driver -&gt; database
Now consider a userland implemented DBAL:
DBAL call  -&gt; DBAL -&gt; driver -&gt; database

They look exactly the same! The primary difference being whether the
extra layer of abstraction is implemented in C or in the userland and
Common Wisdom has always (as far as I know, once again) suggested that
it's very rare that userland code will outperform something with the
same functionality written in C.  I think the OP's benchmarks agree,
but once again, do a few milliseconds really matter that much when the
actual query is going to steal most of the time? Probably not, unless
you're choking on CPU time, rather than I/O queue, which is very
rarely the case.  And as far as the native driver thing goes, the
difference is how the driver is implemented, but in the end it's the
same driver being used.  The main argument against PDO that I've heard
is that some of the quirks and non-standard behaviors that the various
RDBMS's offer isn't handled, but in writing portable apps, consider
whether or not using database-specific behavior is really a good idea.
 I personally don't think it is.

--Eddie

tl;dr: I'm a PDO fanboy

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028305.html">[nycphp-talk] Trying to decide between MDB2 and PHP PDO
</A></li>
	<LI>Next message: <A HREF="028309.html">[nycphp-talk] Trying to decide between MDB2 and PHP PDO
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28306">[ date ]</a>
              <a href="thread.html#28306">[ thread ]</a>
              <a href="subject.html#28306">[ subject ]</a>
              <a href="author.html#28306">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
