<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Disabling browser back button.
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2008-June/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Disabling%20browser%20back%20button.&In-Reply-To=%3C1214168377.10750%40coral.he.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026083.html">
   <LINK REL="Next"  HREF="026088.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Disabling browser back button.</H1>
    <B>Kristina Anderson</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Disabling%20browser%20back%20button.&In-Reply-To=%3C1214168377.10750%40coral.he.net%3E"
       TITLE="[nycphp-talk] Disabling browser back button.">ka at kacomputerconsulting.com
       </A><BR>
    <I>Sun Jun 22 16:59:37 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="026083.html">[nycphp-talk] Disabling browser back button.
</A></li>
        <LI>Next message: <A HREF="026088.html">[nycphp-talk] mysql only host
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26086">[ date ]</a>
              <a href="thread.html#26086">[ thread ]</a>
              <a href="subject.html#26086">[ subject ]</a>
              <a href="author.html#26086">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Excellent points.  And I will pass the 'double transaction suppression' 
info on to my client so he can enable this.  With reard to storing 
credit card info on customers, I'd in general strongly advise any of my 
clients against going there -- with Paypal's (or whatever vendor they 
end up using) unique transaction ID that information is available in 
some form I'd imagine if requested...and also, that is what you are 
paying Paypal a percentage of the transaction for, so you don't have to 
trouble yourself about needing to store or request such information on 
your end of the app flow.

Interestingly, on this project I learned that there is a thing called 
Paypal Micro, where on transactions under a dollar they only charge 9 
or 10 cents per transaction, which is the only thing that makes it cost 
effective to sell such cheap products through Paypal, as ordinarily 
they'd swoop in and take a higher percentage of such a small sale.  To 
use it, any client has to set up a new Paypal merchant account separate 
from any non-Micro account they might already have, which is a pain, 
but worth it overall with the money saved.

In my app, the actual Paypal form is submitted by an 'invisible' PHP 
page that is never accessible to the user...so it's theoretically 
impossible for them to send it twice...I think.  In any event, this app 
is a single item click &amp; pay thing so from an error handling 
perspective it didn't require as much as some more complicated Paypal 
stuff would.

This is the same method I'm incorporating to handle the error checking 
routine for the two form pages...passing things into hidden fields and 
submitting a second 'invisible' form with the values from the first 
form after the error conditions are satisfied.

I appreciate your coding style, Tedd, because I too am a huge fan of 
keeping it simple -- and also of 'brute force' methods that probably 
are not the most elegant of solutions but the important things (to me) 
are 1.  they work; and 2. when I go back to revisit code I wrote months 
or years ago, it's easier for me to understand what I was doing and 
reuse or enhance it.

-- Kristina

&gt;<i> -- Kristina
</I>&gt;<i> 
</I>&gt;<i> At 10:10 AM -0700 6/22/08, Kristina Anderson wrote:
</I>&gt;<i> &gt;Tedd -- this is very similar to the way you showed me how to use the
</I>&gt;<i> &gt;boolean 'step' value to exit the error checking loop if no error
</I>&gt;<i> &gt;conditions were found -- and just as simple to understand and 
</I>brutally
&gt;<i> &gt;effective...I love it!
</I>&gt;<i> 
</I>&gt;<i> I'm glad that you saw what I was doing. But, in all honesty I write 
</I>&gt;<i> simple code because I look at problems that way -- I'm simple. The 
</I>&gt;<i> complex I find too difficult to write so I pound on a problem until 
</I>&gt;<i> it breaks into a series of simple parts that I can understand. Then I 
</I>&gt;<i> just assemble the solution.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &gt;Im this scenario, if the user for whatever reason needed to reload 
</I>the
&gt;<i> &gt;page because of a malfunction, they'd need to establish a whole new
</I>&gt;<i> &gt;session and start over with everything...and presumably pay a second
</I>&gt;<i> &gt;time to be able to set up another account, which would dissuade them
</I>&gt;<i> &gt;very effectively. 
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;In the Paypal app I recently built, I had them create an account 
</I>and/or
&gt;<i> &gt;log in using their unique email address before they were able to
</I>&gt;<i> &gt;purchase, and then captured their Paypal transaction ID (tx) upon
</I>&gt;<i> &gt;redirect, inserted it into a table along with the ID of the product
</I>&gt;<i> &gt;they had purchased, and authenticated against that for the download.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> What you have described is very similar to what I do. I know you know 
</I>&gt;<i> how to do this, but for the benefit of any readers, I submit the 
</I>&gt;<i> following to consider.
</I>&gt;<i> 
</I>&gt;<i> Before any purchase can be considered, the user must identify 
</I>&gt;<i> his/herself via a logon, membership, or something that allows the 
</I>&gt;<i> process to know this is a real person who wants to purchase something.
</I>&gt;<i> 
</I>&gt;<i> After that step, then comes the selection of product followed by the 
</I>&gt;<i> payment process.
</I>&gt;<i> 
</I>&gt;<i> Once the flow is in the payment process, you don't want the user to 
</I>&gt;<i> hit the back button NOR refresh their browser. So, I make a very 
</I>&gt;<i> prominent warning (large red type) on that page that says if the user 
</I>&gt;<i> clicks the back button or refreshes their browser, then that action 
</I>&gt;<i> will cancel their transaction and they will have to start again. Some 
</I>&gt;<i> actually read the warning and follow directions.
</I>&gt;<i> 
</I>&gt;<i> To accomplish this, I incorporate token checking (as I previously 
</I>&gt;<i> described) to make sure they don't refresh the page as well as using 
</I>&gt;<i> javascript to disable the submit button -- Ialso don't want users to 
</I>&gt;<i> click the purchase button several times. It's really surprising how 
</I>&gt;<i> impatient users can get (click, click, click.....).
</I>&gt;<i> 
</I>&gt;<i> But, regardless of what you do, you still have to plan that users 
</I>&gt;<i> won't follow directions and that's the reason for the token.
</I>&gt;<i> 
</I>&gt;<i> Additionally, what happens IF the user has javascript turned off and 
</I>&gt;<i> can click the purchase button more than once? In that case, I also 
</I>&gt;<i> add another token routine for submitting data to PayPal. That way no 
</I>&gt;<i> matter what happens (many clicks, refresh, back button), the request 
</I>&gt;<i> for authorization is sent to PayPal only ONCE.
</I>&gt;<i> 
</I>&gt;<i> Oddly enough, that still isn't the end of it. You must also contact 
</I>&gt;<i> PayPal (or whatever payment processing you are using) and ask them 
</I>&gt;<i> for &quot;double transaction suppression&quot; to be turned ON at their end. 
</I>&gt;<i> That way, it's almost certain that users won't be charged for the 
</I>&gt;<i> same item more than once.
</I>&gt;<i> 
</I>&gt;<i> After all that, you should receive an authorization back from PayPal 
</I>&gt;<i> that everything is OK. So, record that authorization and whatever 
</I>&gt;<i> other user information you need and supply the user user with their 
</I>&gt;<i> purchase. But note, it is very important that you drop ALL the credit 
</I>&gt;<i> card information you have gathered in your script within 24 hours. 
</I>&gt;<i> Keeping any specific cc information beyond 24 hours is against the 
</I>&gt;<i> law.
</I>&gt;<i> 
</I>&gt;<i> As you well know, with a little work and understanding how the 
</I>&gt;<i> process works, you can anticipate what user may do; gather the data 
</I>&gt;<i> you need; and make the sale.
</I>&gt;<i> 
</I>&gt;<i> Cheers,
</I>&gt;<i> 
</I>&gt;<i> tedd
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> -------
</I>&gt;<i> <A HREF="http://sperling.com">http://sperling.com</A>  <A HREF="http://ancientstones.com">http://ancientstones.com</A>  <A HREF="http://earthstones.com">http://earthstones.com</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> New York PHP Community Talk Mailing List
</I>&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;<i> 
</I>&gt;<i> NYPHPCon 2006 Presentations Online
</I>&gt;<i> <A HREF="http://www.nyphpcon.com">http://www.nyphpcon.com</A>
</I>&gt;<i> 
</I>&gt;<i> Show Your Participation in New York PHP
</I>&gt;<i> <A HREF="http://www.nyphp.org/show_participation.php">http://www.nyphp.org/show_participation.php</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026083.html">[nycphp-talk] Disabling browser back button.
</A></li>
	<LI>Next message: <A HREF="026088.html">[nycphp-talk] mysql only host
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26086">[ date ]</a>
              <a href="thread.html#26086">[ thread ]</a>
              <a href="subject.html#26086">[ subject ]</a>
              <a href="author.html#26086">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
