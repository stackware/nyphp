<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Framework Question - Site Configuration
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2003-December/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Framework%20Question%20-%20Site%20Configuration&In-Reply-To=%3C688BD1502D7CA547800722B3501F62BB295F9F%40ms03.mailstreet2003.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006699.html">
   <LINK REL="Next"  HREF="006705.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Framework Question - Site Configuration</H1>
    <B>Hans Zaunere</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Framework%20Question%20-%20Site%20Configuration&In-Reply-To=%3C688BD1502D7CA547800722B3501F62BB295F9F%40ms03.mailstreet2003.net%3E"
       TITLE="[nycphp-talk] Framework Question - Site Configuration">hans at newyorkphp.com
       </A><BR>
    <I>Sat Dec 13 13:54:14 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="006699.html">[nycphp-talk] Need help with JS
</A></li>
        <LI>Next message: <A HREF="006705.html">[nycphp-talk] What UserLogin/Auth mechanism do you use ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6704">[ date ]</a>
              <a href="thread.html#6704">[ thread ]</a>
              <a href="subject.html#6704">[ subject ]</a>
              <a href="author.html#6704">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> Framework question.
</I>&gt;<i> 
</I>&gt;<i> I had an idea that if I were to store many of the web site 
</I>&gt;<i> configuration
</I>&gt;<i> values in the web server environment, such as database connection
</I>&gt;<i> parameters, default email address, company address and major 
</I>&gt;<i> site links in
</I>&gt;<i> each apache server virtual host environment, this information would be
</I>&gt;<i> resident in the server memory, and subsequent requests would 
</I>&gt;<i> require less
</I>&gt;<i> over head than creating a large configuration file that would 
</I>&gt;<i> be loaded and
</I>&gt;<i> parsed at runtime each time a script on our site ran.
</I>
Very true.  Something to keep in mind, however, is the visibility of
sensitive data (like passwords).  Not only could someone read the
httpd.conf itself (depending on permissions, of course) but the $_SERVER
array containing the passwords, etc. is globally available in any PHP
script running under that environment.

&gt;<i> For example. In my apache config I set the values in the 
</I>&gt;<i> following manner...
</I>&gt;<i> 
</I>&gt;<i> setEnv    DATABASE_NAME    = &quot;somedatabase&quot;
</I>&gt;<i> setEnv    DATABASE_USER    = &quot;someuser&quot;
</I>&gt;<i> setEnv    DATABASE_PASS    = &quot;somepass&quot;
</I>&gt;<i> setEnv    LINK_HOME_PAGE = &quot;/index.php&quot;
</I>&gt;<i> setEnv    LINK_SITE_MAP = &quot;/site-map.php&quot;
</I>&gt;<i> setEnv    EMAIL_DEFAULT = &quot;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">info at foo.com</A>&quot;
</I>&gt;<i> setEnv    EMAIL_SALES = &quot;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">sales at foo.com</A>&quot;
</I>&gt;<i> setEnv    PATH_PHOTOS = &quot;/photos/&quot;
</I>&gt;<i> setEnv    PATH_GIFS = &quot;/gifs/&quot;
</I>&gt;<i> 
</I>&gt;<i> To access these from my scripts, I can use the following...
</I>&gt;<i> 
</I>&gt;<i> $_SERVER['DATABASE_NAME']
</I>&gt;<i> $_SERVER['DATABASE_USER']
</I>&gt;<i> $_SERVER['DATABASE_PASS]
</I>&gt;<i> $_SERVER['LINK_HOME_PAGE']
</I>&gt;<i> $_SERVER['LINK_SITE_MAP]
</I>&gt;<i> 
</I>&gt;<i> Because they are resident in the memory of the server, the 
</I>&gt;<i> server does not
</I>&gt;<i> have to parse the file each time a request is made for the 
</I>&gt;<i> virtual host.
</I>&gt;<i> 
</I>&gt;<i> However, this is proving to be a pain because there are other 
</I>&gt;<i> scripts that
</I>&gt;<i> run from CRON etc, that do not run from the virtual host 
</I>&gt;<i> environment, and
</I>&gt;<i> for those scripts, I have ended up duplicating my efforts by creating
</I>&gt;<i> another configuration file for our site. This means I have to 
</I>&gt;<i> update changes
</I>&gt;<i> to the configuration twice.
</I>&gt;<i> 
</I>&gt;<i> I was thinking that it would may be easier to ditch this 
</I>&gt;<i> effort and go with
</I>&gt;<i> a standard configuration file in PHP that I can include for 
</I>&gt;<i> the site and
</I>&gt;<i> scripts that run outsode the virtual environment. Perhaps 
</I>&gt;<i> something like the
</I>&gt;<i> following...
</I>&gt;<i> 
</I>&gt;<i> &lt;?php
</I>&gt;<i> 
</I>&gt;<i> define(DATABASE_NAME,'somedatabase');
</I>&gt;<i> define(DATABASE_USER,'someuser');
</I>&gt;<i> define(LINK_SITE_MAP,'/site-map.php');
</I>&gt;<i> 
</I>&gt;<i> ?&gt;
</I>&gt;<i> 
</I>&gt;<i> and then access the values in the script using their constant 
</I>&gt;<i> values or
</I>&gt;<i> perhaps store the values in an array such as...
</I>&gt;<i> 
</I>&gt;<i> &lt;?php
</I>&gt;<i> 
</I>&gt;<i> $site = array(
</I>&gt;<i> 'DATABASE_NAME' =&gt; 'somedatabase',
</I>&gt;<i> 'DATABASE_USER' =&gt; 'someuser',
</I>&gt;<i> 'LINK_SITE_MAP' =&gt; '/site_map.php'
</I>&gt;<i> );
</I>&gt;<i> 
</I>&gt;<i> ?&gt;
</I>&gt;<i> 
</I>&gt;<i> I would like to hear all your thoughts on this issue. I have about 100
</I>&gt;<i> configuration directives I would like to be able to store in 
</I>&gt;<i> one place. I
</I>&gt;<i> would be curious how others have dealt with simular issues. Are there
</I>&gt;<i> advantagaes to using an array for config values as mentioned 
</I>&gt;<i> above over lets
</I>&gt;<i> say defining constants?
</I>
While define() is more expensive, performance wise, than simply
declaring a variable, using constants elsewhere in the script is faster
than variables (or so Zeev told me once).

&gt;<i> Ideas, suggestions?
</I>
Don't forget that Apache can include other files as other conf files.
So, for example, you could have a series of php.app.conf files with your
SetEnv directives which could also be included from cron/cli php scripts
and parsed.  True, maybe a little messy on the cli side, but worth some
thought.

Of course, the &quot;cool&quot; way of implementing this is with shared memory.
More complex, but probably the ultimate in speedy configuration and
flexibility.  For instance, you could have a set of scripts to manage
configuration directives, in shared memory - the config could change,
and applications would see them in real time.  I had some scripts to do
this, but they're not ready for show.  That said, PHP's shared memory
extension has some weaknesses for this type of application, and a custom
C extension would really be the way to do it.

Sorry for the crazy wrapping folks - if anyone knows how to get Outlook
2003 to wrap plain-text messages normally, please contact me offlist :)

H


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006699.html">[nycphp-talk] Need help with JS
</A></li>
	<LI>Next message: <A HREF="006705.html">[nycphp-talk] What UserLogin/Auth mechanism do you use ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6704">[ date ]</a>
              <a href="thread.html#6704">[ thread ]</a>
              <a href="subject.html#6704">[ subject ]</a>
              <a href="author.html#6704">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
