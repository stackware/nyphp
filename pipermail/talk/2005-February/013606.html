<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] PHP 5 Throwing Exceptions in Constructors
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2005-February/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20PHP%205%20Throwing%20Exceptions%20in%20Constructors&In-Reply-To=%3Cf1dc81bb0502091833568e6cfc%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013628.html">
   <LINK REL="Next"  HREF="013607.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] PHP 5 Throwing Exceptions in Constructors</H1>
    <B>Ophir Prusak</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20PHP%205%20Throwing%20Exceptions%20in%20Constructors&In-Reply-To=%3Cf1dc81bb0502091833568e6cfc%40mail.gmail.com%3E"
       TITLE="[nycphp-talk] PHP 5 Throwing Exceptions in Constructors">prusak at gmail.com
       </A><BR>
    <I>Wed Feb  9 21:33:39 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="013628.html">[nycphp-talk] PHP 5 Throwing Exceptions in Constructors
</A></li>
        <LI>Next message: <A HREF="013607.html">[nycphp-talk] PHP 5 Throwing Exceptions in Constructors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13606">[ date ]</a>
              <a href="thread.html#13606">[ thread ]</a>
              <a href="subject.html#13606">[ subject ]</a>
              <a href="author.html#13606">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Hans,

I was dealing with this exact same dilemma on a project I'm currently coding.
We ending up going with Adam's option B: move the code which can fail
to outside the constructor.

In the original design the you could create an object where the
constructor could read some information from a database.

In the final design, we moved the database code to a new load()
function that executes the actual database call. This does add an
additional step, but having the constructor throw an execution just
messes things up.

Ophir




On Wed, 9 Feb 2005 15:01:31 -0500, Hans Zaunere &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">lists at zaunere.com</A>&gt; wrote:
&gt;<i> 
</I>&gt;<i> Hi all,
</I>&gt;<i> 
</I>&gt;<i> All PHP 5 code examples I've seen show try/catch pairs like this:
</I>&gt;<i> 
</I>&gt;<i> try {
</I>&gt;<i>        $obj = new MyClass;
</I>&gt;<i>        $obj-&gt;DoSomething();
</I>&gt;<i> } catch( Exception $e ) {
</I>&gt;<i>        echo $e-&gt;getMessage();
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> I am the only one in thinking that these examples are incorrect 99% of the time?  Based on other languages, like Java, exceptions should very very rarely be thrown from a class' constructor.  The simple reason, as in PHP 5, is that the object never gets created if an exception is thrown in the constructor.
</I>&gt;<i> 
</I>&gt;<i> Is there something particular to PHP 5 that I'm missing?  While it could be considered pedantic, PHP 5 code examples should be as:
</I>&gt;<i> 
</I>&gt;<i> $obj = new MyClass;
</I>&gt;<i> 
</I>&gt;<i> try {
</I>&gt;<i>        $obj-&gt;DoSomething();
</I>&gt;<i> } catch( Exception $e ) {
</I>&gt;<i>        echo $e-&gt;getMessage();
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> In fact, in PHP 5 I cannot find anyway to determine the &quot;return&quot; value of the new operator.  This leads me to believe that PHP 5's concept of proper OO is to always assume the object is created successfully, unless a catastrophic event happens, in which case an exception is thrown, and the object isn't created at all.  This of course makes sense, but then I'm confused as to why the code samples all seem a bit incorrect.
</I>&gt;<i> 
</I>&gt;<i> Interested in hearing thoughts on this...
</I>&gt;<i> 
</I>&gt;<i> ---
</I>&gt;<i> Hans Zaunere
</I>&gt;<i> President, Founder
</I>&gt;<i> New York PHP
</I>&gt;<i> <A HREF="http://www.nyphp.org">http://www.nyphp.org</A>
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> New York PHP Talk
</I>&gt;<i> Supporting AMP Technology (Apache/MySQL/PHP)
</I>&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;<i> <A HREF="http://www.nyphp.org">http://www.nyphp.org</A>
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013628.html">[nycphp-talk] PHP 5 Throwing Exceptions in Constructors
</A></li>
	<LI>Next message: <A HREF="013607.html">[nycphp-talk] PHP 5 Throwing Exceptions in Constructors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13606">[ date ]</a>
              <a href="thread.html#13606">[ thread ]</a>
              <a href="subject.html#13606">[ subject ]</a>
              <a href="author.html#13606">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
