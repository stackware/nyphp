<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Thanks in advance
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2007-December/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Thanks%20in%20advance&In-Reply-To=%3C47730CF7.3090502%40o2group.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024344.html">
   <LINK REL="Next"  HREF="024351.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Thanks in advance</H1>
    <B>Tim Lieberman</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Thanks%20in%20advance&In-Reply-To=%3C47730CF7.3090502%40o2group.com%3E"
       TITLE="[nycphp-talk] Thanks in advance">tim_lists at o2group.com
       </A><BR>
    <I>Wed Dec 26 21:24:55 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="024344.html">[nycphp-talk] Thanks in advance
</A></li>
        <LI>Next message: <A HREF="024351.html">[nycphp-talk] Thanks in advance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24350">[ date ]</a>
              <a href="thread.html#24350">[ thread ]</a>
              <a href="subject.html#24350">[ subject ]</a>
              <a href="author.html#24350">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>David Krings wrote:
&gt;<i> chad qian wrote:
</I>&gt;&gt;<i> I get the following source code from internet.It can upload the image 
</I>&gt;&gt;<i> but it can't display the image on the web page.There is always &quot;x&quot; 
</I>&gt;&gt;<i> sign .Any idea?Thanks a lot!
</I>&gt;<i>
</I>&gt;<i> Check the source code of the resulting page and see if the value for 
</I>&gt;<i> the &lt;img&gt; tag points to a location from where the image can be 
</I>&gt;<i> retrieved. When you see the X the browser cannot download the image as 
</I>&gt;<i> the file is not found in the specified location.
</I>More likely in this case, something is causing the image data that gets 
sent to the browser to be corrupted.  Note that he's storing the image 
in the database, and this very same script (with $_GET['gim'] set) is 
outputting those data.

It's a perennial debate, but I'll go there:  Storing image data in the 
database is a bad idea.  You already have a very robust database for 
managing files: the filesystem.  So before you bother debugging this 
code more, you might want to consider changing your implementation.  
Simply write a uniquely named file somewhere on disk, and store the 
filename in the database.  Then you can construct the relevant src 
attributes on image tags, etc, or if you must, run the image data 
through PHP using fpassthru() or similar.


Here are some things I'd look at, if I was debugging your code:

    1) When calling the script with &quot;gim&quot; in the URL (telling it to send 
the image), does any extra data get sent?  Are there spaces before your 
opening &lt;?PHP tag, maybe?  Maybe something else in the code is causing 
warnings or notices to be issued?  If any of that garbage makes it into 
the output stream, you'll be ouputting a corrupt image.
    2) When storing the image in the database, are you doing anything 
that might corrupt it?  Maybe try using mysql_real_escape_string() 
instead of addslashes()

But as I said above, I've not even tried to do anything like this in 
years, since I figured out that it just makes your database sad to deal 
with lots of binary data.  Really -- consider using the filesystem to 
store the files, and the database to store the names of those files, and 
you avoid all of this headache.

-Tim


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024344.html">[nycphp-talk] Thanks in advance
</A></li>
	<LI>Next message: <A HREF="024351.html">[nycphp-talk] Thanks in advance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24350">[ date ]</a>
              <a href="thread.html#24350">[ thread ]</a>
              <a href="subject.html#24350">[ subject ]</a>
              <a href="author.html#24350">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
