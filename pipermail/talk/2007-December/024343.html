<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Thanks in advance
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2007-December/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Thanks%20in%20advance&In-Reply-To=%3CBLU126-W1589F854D1C09B24FAEAC6E85B0%40phx.gbl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024342.html">
   <LINK REL="Next"  HREF="024344.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Thanks in advance</H1>
    <B>chad qian</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Thanks%20in%20advance&In-Reply-To=%3CBLU126-W1589F854D1C09B24FAEAC6E85B0%40phx.gbl%3E"
       TITLE="[nycphp-talk] Thanks in advance">nynj.tech at hotmail.com
       </A><BR>
    <I>Tue Dec 25 22:20:00 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="024342.html">[nycphp-talk] upload and retrieve image
</A></li>
        <LI>Next message: <A HREF="024344.html">[nycphp-talk] Thanks in advance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24343">[ date ]</a>
              <a href="thread.html#24343">[ thread ]</a>
              <a href="subject.html#24343">[ subject ]</a>
              <a href="author.html#24343">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
I get the following source code from internet.It can upload the image but it can't display the image on the web page.There is always &quot;x&quot; sign .Any idea?Thanks a lot!
 
 
 
Here is the source code:
 
&lt;?php
// Connect to database
$errmsg = &quot;&quot;;if (! @mysql_connect(&quot;localhost&quot;,&quot;trainee&quot;,&quot;abc123&quot;)) {$errmsg = &quot;Cannot connect to database&quot;;}//@mysql_select_db(&quot;test&quot;);@mysql_select_db(&quot;logindb&quot;);
// First run ONLY - need to create table by uncommenting this// Or with silent @ we can let it fail every sunsequent time ;-)
$q = &lt;&lt;&lt;CREATEcreate table pix (pid int primary key not null auto_increment,title text,imgdata longblob)CREATE;@mysql_query($q);
// Insert any new image into database
if ($_REQUEST[completed] == 1) {// Need to add - check for large upload. Otherwise the code// will just duplicate old file ;-)// ALSO - note that latest.img must be public write and in a// live appliaction should be in another (safe!) directory.move_uploaded_file($_FILES['imagefile']['tmp_name'],&quot;latest.img&quot;);$instr = fopen(&quot;latest.img&quot;,&quot;rb&quot;);$image = addslashes(fread($instr,filesize(&quot;latest.img&quot;)));if (strlen($instr) &lt; 149000) {mysql_query (&quot;insert into pix (title, imgdata) values (\&quot;&quot;.$_REQUEST[whatsit].&quot;\&quot;, \&quot;&quot;.$image.&quot;\&quot;)&quot;);} else {$errmsg = &quot;Too large!&quot;;}}
// Find out about latest image
$gotten = @mysql_query(&quot;select * from pix order by pid desc limit 1&quot;);if ($row = @mysql_fetch_assoc($gotten)) {$title = htmlspecialchars($row[title]);$bytes = $row[imgdata];} else {$errmsg = &quot;There is no image in the database yet&quot;;$title = &quot;no database image available&quot;;// Put up a picture of our training centre//$instr = fopen(&quot;../wellimg/ctco.jpg&quot;,&quot;rb&quot;);//$bytes = fread($instr,filesize(&quot;../wellimg/ctco.jpg&quot;));}
// If this is the image request, send out the image
if ($_REQUEST[gim] == 1) {header(&quot;Content-type: image/jpeg&quot;);print $bytes;exit ();}?&gt;
&lt;html&gt;&lt;head&gt;&lt;title&gt;Upload an image to a database&lt;/title&gt;&lt;body bgcolor=white&gt;&lt;h2&gt;Here's the latest picture&lt;/h2&gt;&lt;font color=red&gt;&lt;?= $errmsg ?&gt;&lt;/font&gt;&lt;center&gt;&lt;img src= width=144&gt;&lt;br&gt;&lt;b&gt;&lt;?= $title ?&gt;&lt;/center&gt;&lt;hr&gt;&lt;h2&gt;Please upload a new picture and title&lt;/h2&gt;&lt;form enctype=multipart/form-data method=post&gt;&lt;input type=hidden name=MAX_FILE_SIZE value=150000&gt;&lt;input type=hidden name=completed value=1&gt;Please choose an image to upload: &lt;input type=file name=imagefile&gt;&lt;br&gt;Please enter the title of that picture: &lt;input name=whatsit&gt;&lt;br&gt;then: &lt;input type=submit&gt;&lt;/form&gt;&lt;br&gt;&lt;hr&gt;By Graham Ellis - <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">graham at wellho.net</A>&lt;/body&gt;&lt;/html&gt;
 
_________________________________________________________________
Get the power of Windows + Web with the new Windows Live.
<A HREF="http://www.windowslive.com?ocid=TXT_TAGHM_Wave2_powerofwindows_122007">http://www.windowslive.com?ocid=TXT_TAGHM_Wave2_powerofwindows_122007</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.nyphp.org/pipermail/talk/attachments/20071225/e1337929/attachment.html">http://lists.nyphp.org/pipermail/talk/attachments/20071225/e1337929/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024342.html">[nycphp-talk] upload and retrieve image
</A></li>
	<LI>Next message: <A HREF="024344.html">[nycphp-talk] Thanks in advance
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24343">[ date ]</a>
              <a href="thread.html#24343">[ thread ]</a>
              <a href="subject.html#24343">[ subject ]</a>
              <a href="author.html#24343">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
