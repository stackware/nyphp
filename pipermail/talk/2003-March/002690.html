<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] system commands and backups
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2003-March/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20system%20commands%20and%20backups&In-Reply-To=%3C001f01c2e2b3%24bcaf65b0%2476941d18%40enobrev%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002688.html">
   <LINK REL="Next"  HREF="002691.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] system commands and backups</H1>
    <B>Mark Armendariz</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20system%20commands%20and%20backups&In-Reply-To=%3C001f01c2e2b3%24bcaf65b0%2476941d18%40enobrev%3E"
       TITLE="[nycphp-talk] system commands and backups">nyphp at enobrev.com
       </A><BR>
    <I>Tue Mar  4 20:08:31 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="002688.html">[nycphp-talk] system commands and backups
</A></li>
        <LI>Next message: <A HREF="002691.html">[nycphp-talk] system commands and backups
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2690">[ date ]</a>
              <a href="thread.html#2690">[ thread ]</a>
              <a href="subject.html#2690">[ subject ]</a>
              <a href="author.html#2690">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>They are asking for a web interface, but I suppose I could just allow
for settings changes within the interface, while the script uses those
settings to make things happen.  OF course I'll also have to see what
their upgrade schedule is.

Thanks..

Mark

&gt;<i> -----Original Message-----
</I>&gt;<i> From: Weston Houghton [mailto:<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">ucsu at anapraxis.com</A>] 
</I>&gt;<i> Sent: Tuesday, March 04, 2003 8:06 PM
</I>&gt;<i> To: NYPHP Talk
</I>&gt;<i> Subject: Re: [nycphp-talk] system commands and backups
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Well, as of PHP 4.3 you have a command-line interface to PHP. 
</I>&gt;<i> As such  
</I>&gt;<i> it becomes much easier to run a php script as a specific user. The  
</I>&gt;<i> question then becomes do you need a web interface for it?
</I>&gt;<i> 
</I>&gt;<i> Wes
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On Tuesday, March 4, 2003, at 07:49  PM, George Webb wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt;&gt; Is there a way to allow a php script to run
</I>&gt;<i> &gt;&gt; shell commands as an admin or specific user?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Hi Mark.  I have done this, but before anyone would want
</I>&gt;<i> &gt; to do so, they should recognize the security risks 
</I>&gt;<i> involved. It may be 
</I>&gt;<i> &gt; a convenience versus security issue, wherein you may accidentally 
</I>&gt;<i> &gt; allow all of your web users (possibly everyone in the world?) to 
</I>&gt;<i> &gt; access anything that your user (or worse yet, your 'root' user) can.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 	So I hope you already know all about that.  Now,
</I>&gt;<i> &gt; to answer your question, you may be able to set the &quot;setuid&quot; bit on 
</I>&gt;<i> &gt; your PHP CGI executable, together with changing the 
</I>&gt;<i> ownership of the 
</I>&gt;<i> &gt; executable itself.  Then you can associate certain files or 
</I>&gt;<i> &gt; directories to use *this* PHP CGI handler instead of the default 
</I>&gt;<i> &gt; (apache module PHP, correct?).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 	For example, if you want all files ending in '.uphp'
</I>&gt;<i> &gt; to be executed by your special set-user PHP, you might do the 
</I>&gt;<i> &gt; following, which will allow *.php files to be executed 
</I>&gt;<i> normally, but 
</I>&gt;<i> &gt; *.uphp files will be executed by user 'marka' (or whatever):
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 	1/ Add the following Apache .htaccess lines:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Options +ExecCGI
</I>&gt;<i> &gt; AddType cgi-script .cgi
</I>&gt;<i> &gt; Action user-php /php.cgi
</I>&gt;<i> &gt; AddHandler user-php .uphp
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 	2/ Copy your PHP 4.3.1 or later CGI binary to
</I>&gt;<i> &gt; your webserver root, and rename it as described above (php.cgi).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 	3/ Change the ownership as appropriate, and
</I>&gt;<i> &gt; set the setuid bit:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; chown marka php.cgi
</I>&gt;<i> &gt; chmod u+s php.cgi
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 	4/ Sit back and wait to be hacked!
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 	One other nice thing is that this PHP parser can
</I>&gt;<i> &gt; have its own php.ini file, which may be different from the one the 
</I>&gt;<i> &gt; rest of the webserver uses!
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 	Maybe some other better sysadmins can comment on
</I>&gt;<i> &gt; how to make this setup more secure.  Like these ideas:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 	1/ Run a separate httpd server on a special port
</I>&gt;<i> &gt; using this special configuration.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 	2/ Restrict the special port using a firewall or
</I>&gt;<i> &gt; ipchains or whathaveyou.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 	3/ chroot the filesystem for this special config,
</I>&gt;<i> &gt; so that your whole machine won't get hacked.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 	Another approach (which maybe I should have mentioned
</I>&gt;<i> &gt; first) is to use 'sudo' to allow your 'nobody' user to do 
</I>&gt;<i> only certain 
</I>&gt;<i> &gt; special tasks.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 	If your webserver is on a totally private network and
</I>&gt;<i> &gt; you're not worried about system security, you can do a lot 
</I>&gt;<i> more. But 
</I>&gt;<i> &gt; if it's on the Internet, be aware!!!
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Best, George.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; George Webb
</I>&gt;<i> &gt; <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">gw.nyphp at gwprogramming.com</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> 
</I>&gt;<i> --------------------------------------------------------------
</I>&gt;<i> ---------- 
</I>&gt;<i> ---
</I>&gt;<i> The selection and placement of letters on this page was 
</I>&gt;<i> determined automatically by a computer program. Any 
</I>&gt;<i> resemblance to actual words, sentences, or paragraphs is pure 
</I>&gt;<i> coincidence, and no liability will be assumed for such coincidences.
</I>&gt;<i> --------------------------------------------------------------
</I>&gt;<i> ---------- 
</I>&gt;<i> ---
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> --- Unsubscribe at <A HREF="http://nyphp.org/list/">http://nyphp.org/list/</A> ---
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002688.html">[nycphp-talk] system commands and backups
</A></li>
	<LI>Next message: <A HREF="002691.html">[nycphp-talk] system commands and backups
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2690">[ date ]</a>
              <a href="thread.html#2690">[ thread ]</a>
              <a href="subject.html#2690">[ subject ]</a>
              <a href="author.html#2690">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
