<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Setting directory permissions
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2003-April/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Setting%20directory%20permissions&In-Reply-To=%3C200304182334.h3INYFr9088877%40parsec.nyphp.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003146.html">
   <LINK REL="Next"  HREF="003148.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Setting directory permissions</H1>
    <B>Patrick Hunt</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Setting%20directory%20permissions&In-Reply-To=%3C200304182334.h3INYFr9088877%40parsec.nyphp.org%3E"
       TITLE="[nycphp-talk] Setting directory permissions">pat at vote.com
       </A><BR>
    <I>Fri Apr 18 19:34:16 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="003146.html">Setting directory permissions
</A></li>
        <LI>Next message: <A HREF="003148.html">[nycphp-talk] PHP eCommerce Freeware/Shareware
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3147">[ date ]</a>
              <a href="thread.html#3147">[ thread ]</a>
              <a href="subject.html#3147">[ subject ]</a>
              <a href="author.html#3147">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Jeff,

The value you pass into mkdir() is always AND'd with the current
umask. To be certain that the dir's permissions are set to exactly
what you pass, first clear the umask, as in:

if(!is_dir($id)) {
    $root = getenv('DOCUMENT_ROOT');
    $id = $root . '/pic_test/' . $id;
    $old_umask = umask(0000);
    mkdir($id,0777);
    umask($old_umask);
}

You could just set umask to 0000 at the top of your script, but
make sure you understand the full ramifications of doing that. 

Pat Hunt

--------------------------

On Fri, 18 Apr 2003 18:04:54 -0400, <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">jsiegel1 at optonline.net</A> wrote:

&gt;<i>I'm sure this is an easy one but...since I'm still learning PHP...I'm scratching my poor bald head. ;)
</I>&gt;<i>
</I>&gt;<i>Here's a code snippet:
</I>&gt;<i>
</I>&gt;<i>//create new directory with the id name if it doesn't exist, chmod to 777
</I>&gt;<i>if(!is_dir($id)) {
</I>&gt;<i>    $root = getenv('DOCUMENT_ROOT');
</I>&gt;<i>    $id = $root . '/pic_test/' . $id;
</I>&gt;<i>    mkdir($id,0777);
</I>&gt;<i>}&gt;
</I>&gt;<i>The problem is...this only works if I chmod the subdirectory &quot;pic_test&quot; to 777 using my FTP application. However, I want to quickly change the permissions via PHP code, upload some pictures with my form, then change the permissions back to 755.
</I>&gt;<i>
</I>&gt;<i>Thoughts/comments greatly appreciated.
</I>&gt;<i>
</I>&gt;<i>Jeff
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>--- Unsubscribe at <A HREF="http://nyphp.org/list/">http://nyphp.org/list/</A> ---
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003146.html">Setting directory permissions
</A></li>
	<LI>Next message: <A HREF="003148.html">[nycphp-talk] PHP eCommerce Freeware/Shareware
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3147">[ date ]</a>
              <a href="thread.html#3147">[ thread ]</a>
              <a href="subject.html#3147">[ subject ]</a>
              <a href="author.html#3147">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
