<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Setting directory permissions
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2003-April/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Setting%20directory%20permissions&In-Reply-To=%3C20030419002005.99704.qmail%40web12805.mail.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003151.html">
   <LINK REL="Next"  HREF="003153.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Setting directory permissions</H1>
    <B>Hans Zaunere</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Setting%20directory%20permissions&In-Reply-To=%3C20030419002005.99704.qmail%40web12805.mail.yahoo.com%3E"
       TITLE="[nycphp-talk] Setting directory permissions">hans at nyphp.org
       </A><BR>
    <I>Fri Apr 18 20:20:05 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="003151.html">[nycphp-talk] Setting directory permissions
</A></li>
        <LI>Next message: <A HREF="003153.html">[nycphp-talk] PHP eCommerce Freeware/Shareware
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3152">[ date ]</a>
              <a href="thread.html#3152">[ thread ]</a>
              <a href="subject.html#3152">[ subject ]</a>
              <a href="author.html#3152">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi Jeff,

--- <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">jsiegel1 at optonline.net</A> wrote:
&gt;<i> I'm sure this is an easy one but...since I'm still learning PHP...I'm
</I>&gt;<i> scratching my poor bald head. ;)
</I>&gt;<i> 
</I>&gt;<i> Here's a code snippet:
</I>&gt;<i> 
</I>&gt;<i> //create new directory with the id name if it doesn't exist, chmod to 777
</I>&gt;<i> if(!is_dir($id)) {
</I>&gt;<i>     $root = getenv('DOCUMENT_ROOT');
</I>&gt;<i>     $id = $root . '/pic_test/' . $id;
</I>&gt;<i>     mkdir($id,0777);
</I>&gt;<i> }
</I>
Note that the is_dir($id) call isn't nessecarily checking the dir you think
it is.

&gt;<i> The problem is...this only works if I chmod the subdirectory &quot;pic_test&quot; to
</I>&gt;<i> 777 using my FTP application. However, I want to quickly change the
</I>&gt;<i> permissions via PHP code, upload some pictures with my form, then change
</I>&gt;<i> the permissions back to 755.
</I>
Assuming you're running PHP as an Apache module, you'll be limited to the
user priveleges of Apache itself.  While in most cases this is good, for
writing to the filesystem things can get hairy.

For one, you won't be able to change the permissions of a directory/file you
don't own (read: apache's running user doesn't own).  So, trying to change
the permissions from less-restrictive to more-restrictive 'quickly' is a moot
point, since if a malicious page is written, he'd just change the perms if
desired anyway.

It's a catch-22 (as it should be) and is only solvable by having proper
ownership (or improper ownership, depending on your viewpoint), suEXEC
(achtung!) or a daemon to handle file operations.

HTH,

H



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003151.html">[nycphp-talk] Setting directory permissions
</A></li>
	<LI>Next message: <A HREF="003153.html">[nycphp-talk] PHP eCommerce Freeware/Shareware
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3152">[ date ]</a>
              <a href="thread.html#3152">[ thread ]</a>
              <a href="subject.html#3152">[ subject ]</a>
              <a href="author.html#3152">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
