<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Re: New PHundamentals Article
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2004-January/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Re%3A%20New%20PHundamentals%20Article&In-Reply-To=%3C3FF9B43B.10601%40phpwerx.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006964.html">
   <LINK REL="Next"  HREF="006966.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Re: New PHundamentals Article</H1>
    <B>Dan Cech</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Re%3A%20New%20PHundamentals%20Article&In-Reply-To=%3C3FF9B43B.10601%40phpwerx.net%3E"
       TITLE="[nycphp-talk] Re: New PHundamentals Article">dcech at phpwerx.net
       </A><BR>
    <I>Mon Jan  5 14:00:11 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="006964.html">[nycphp-talk] Re: New PHundamentals Article
</A></li>
        <LI>Next message: <A HREF="006966.html">[nycphp-talk] Re: New PHundamentals Article
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6965">[ date ]</a>
              <a href="thread.html#6965">[ thread ]</a>
              <a href="subject.html#6965">[ subject ]</a>
              <a href="author.html#6965">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Chris Shiflett wrote:

&gt;<i> --- Emmanuel D&#233;carie &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">emm at scriptdigital.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i>(1) &quot;Best Practice: Do not use the function addslashes but, instead,
</I>&gt;&gt;<i>use a function that is specific to your database.&quot;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Could the tutorial elaborate a little bit more on this?
</I>&gt;<i> 
</I>&gt;<i> First of all, this looks to be another great phundamentals article. I
</I>&gt;<i> really like this series (or whatever you want to call it).
</I>&gt;<i> 
</I>&gt;<i> I agree with Emmanuel that some elaboration would be useful here. Whenever
</I>&gt;<i> a best practice is seldom followed, a very clear justification can be a
</I>&gt;<i> great thing. Being right and convincing someone else that you're right are
</I>&gt;<i> often very different things. :-)
</I>
See my reply, I am sure jeff is working on a little clarification as I 
type this...

&gt;&gt;<i>(2) htmlentities/htmlspecialchars
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>I think the tutorial should insist that the best practice is not using
</I>&gt;&gt;<i>these functions on data that you want to *insert* in a database.
</I>&gt;<i> 
</I>&gt;<i> More elaboration in general might be good. I would consider these
</I>&gt;<i> functions the &quot;least you can do&quot; when you're displaying potentially
</I>&gt;<i> tainted data to the user. If you're not displaying data, htmlentities()
</I>&gt;<i> probably isn't going to offer you the type of protection you seek.
</I>&gt;<i> 
</I>&gt;<i> There are also two different opinions on this:
</I>&gt;<i> 
</I>&gt;<i> 1. Perform htmlentities() prior to storage.
</I>&gt;<i> 2. Perform htmlentities() prior to display.
</I>&gt;<i> 
</I>&gt;<i> The first can be better if you must display data in HTML very often.
</I>&gt;<i> Rather than perform htmlentities() every time, you can just pull straight
</I>&gt;<i> from the database. 
</I>
The only advantage to this method is the speed increase, you still need 
to use addslashes, it takes up more space in the database, and it is 
only useful if you will only ever be outputting HTML.

&gt;<i> The second is usually best if you have other uses for the data besides
</I>&gt;<i> displaying it in HTML. It is also best if your security model revolves
</I>&gt;<i> around cleaning up data the moment it enters into your application. This
</I>&gt;<i> can be a good approach in terms of keeping things simple for your
</I>&gt;<i> developers.
</I>
This is the recommended procedure.  For the vast majority of scripts the 
speed difference is negligible, especially when the added overhead in 
retrieving the html encoded data from the database is taken into account.

&gt;<i> The best thing to do in general would be to validate your data according
</I>&gt;<i> to exactly what it is supposed to be. I'm not creative enough to think of
</I>&gt;<i> a way to inject some XSS that subverts htmlentities(), but it seems like
</I>&gt;<i> something that might be possible. Also, adhering to strong security
</I>&gt;<i> practices is a good idea in general, since such things can potentially
</I>&gt;<i> protect you from attacks that you're not even aware of.
</I>
htmlentities is designed to prevent ANY characters which have special 
meaning in HTML from being inserted without conversion.  The only way 
you could 'subvert' it in a document would be to exploit a bug in the 
function itself (ie a character which it does not convert.  I would very 
much doubt if this is even possible).

You are absolutely correct though that any data submitted by a user 
should be subject to some form of error checking/cleaning before it it 
used for any purpose.

Dan

&gt;&gt;<i>PS: My spell checker (Grammarian/OS X) flagged 'conspicously' and
</I>&gt;&gt;<i>wanted 'conspicuously' instead.
</I>&gt;<i> 
</I>&gt;<i> Probably because conspicously is not a word. :-)
</I>&gt;<i> 
</I>&gt;<i> Chris
</I>&gt;<i> 
</I>&gt;<i> =====
</I>&gt;<i> Chris Shiflett - <A HREF="http://shiflett.org/">http://shiflett.org/</A>
</I>&gt;<i> 
</I>&gt;<i> PHP Security Handbook
</I>&gt;<i>      Coming mid-2004
</I>&gt;<i> HTTP Developer's Handbook
</I>&gt;<i>      <A HREF="http://httphandbook.org/">http://httphandbook.org/</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> talk mailing list
</I>&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk at lists.nyphp.org</A>
</I>&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006964.html">[nycphp-talk] Re: New PHundamentals Article
</A></li>
	<LI>Next message: <A HREF="006966.html">[nycphp-talk] Re: New PHundamentals Article
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6965">[ date ]</a>
              <a href="thread.html#6965">[ thread ]</a>
              <a href="subject.html#6965">[ subject ]</a>
              <a href="author.html#6965">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
