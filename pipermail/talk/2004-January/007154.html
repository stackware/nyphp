<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Re: IIS 5 and .inc files
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2004-January/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Re%3A%20IIS%205%20and%20.inc%20files&In-Reply-To=%3C40043F1E.4020602%40phpwerx.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007151.html">
   <LINK REL="Next"  HREF="007153.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Re: IIS 5 and .inc files</H1>
    <B>Dan Cech</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Re%3A%20IIS%205%20and%20.inc%20files&In-Reply-To=%3C40043F1E.4020602%40phpwerx.net%3E"
       TITLE="[nycphp-talk] Re: IIS 5 and .inc files">dcech at phpwerx.net
       </A><BR>
    <I>Tue Jan 13 13:55:26 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="007151.html">[nycphp-talk] Re: IIS 5 and .inc files
</A></li>
        <LI>Next message: <A HREF="007153.html">[nycphp-talk] IIS 5 and .inc files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7154">[ date ]</a>
              <a href="thread.html#7154">[ thread ]</a>
              <a href="subject.html#7154">[ subject ]</a>
              <a href="author.html#7154">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Emmanuel,

I do not use IIS myself, so I am not sure if there is a mechanism to 
perform the function you need, though I haven't been able to find 
anything in the documentation.

One solution which may solve the problem is to associate the .inc 
extension with php, and then include the following code at the top of 
your .inc files:

if ( $_SERVER['PHP_SELF'] == __FILE__ )
{
	exit;
}

You can gain similar functionality by defining a constant in your 
index.php with:

define ('MY_CONSTANT', 1);

and then in index.inc:

if ( !defined ('MY_CONSTANT') )
{
	exit;
}

Other than that, my advice is to use a real webserver.

Dan

Emmanuel D&#233;carie wrote:

&gt;<i> Hello Keith, thanks for the reply.
</I>&gt;<i> 
</I>&gt;<i> If I understand you, your suggestion doesn't help to resolve my problem because
</I>&gt;<i> the access control is based on a repertory when I want this access control based
</I>&gt;<i> on the suffix of the file.
</I>&gt;<i> 
</I>&gt;<i> Your solution will not work if I have a repertory with this content:
</I>&gt;<i> <A HREF="http://localhost/testing/index.php">http://localhost/testing/index.php</A>
</I>&gt;<i> <A HREF="http://localhost/testing/index.inc">http://localhost/testing/index.inc</A>
</I>&gt;<i> 
</I>&gt;<i> With Apache, it&#8217;s easy to tell the server not to serve files that ends with
</I>&gt;<i> &quot;.inc&quot;. I'm trying to figure out if this is possible with IIS 5.
</I>&gt;<i> 
</I>&gt;<i> Cheers
</I>&gt;<i> -Emmanuel
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i>Keith J Richardson Keith.Richardson at thompsonhealth.com 
</I>&gt;&gt;<i>Tue Jan 13 13:23:06 EST 2004 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i>1) Need PHP to include a file from a directory. in my example, it is
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://localhost/testing/index.php">http://localhost/testing/index.php</A>
</I>&gt;<i> 
</I>&gt;&gt;<i>2) The include directory needs to have scripts able to read it, but must deny
</I>&gt;<i> 
</I>&gt;<i> browsing to those pages. - <A HREF="http://localhost/testing/include/lib.inc">http://localhost/testing/include/lib.inc</A>
</I>&gt;<i> 
</I>&gt;&gt;<i>What I did:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>1) Go into IIS management, and select the directory that you want to change the
</I>&gt;<i> 
</I>&gt;<i> persmissions on, and in my example, it is /testing/include/
</I>&gt;<i> 
</I>&gt;&gt;<i>2) Right click on the folder, and select properties.
</I>&gt;&gt;<i>3) Uncheck read access. There should be nothing in the checkboxes.
</I>&gt;&gt;<i>4) Test!
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>You disabled read access from IIS to access those files, so when you type in
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://localhost/testing/include/lib.inc">http://localhost/testing/include/lib.inc</A> - it will give you a HTTP 403.2 -
</I>&gt;<i> Forbidden: Read Access Forbidden error. The reason why PHP can read the files,
</I>&gt;<i> is that the system has NTFS permissions to read the file. When php opens a file
</I>&gt;<i> to read, unless it opens it via a <A HREF="http://">http://</A> command, it will read it locally,
</I>&gt;<i> which IIS has no control over.
</I>&gt;<i> --
</I>&gt;<i> Emmanuel D&#233;carie / Programmation pour le Web - Programming for the Web
</I>&gt;<i> &lt;<A HREF="http://scriptdigital.com/">http://scriptdigital.com/</A>&gt; - Blog: &lt;<A HREF="http://blog.scriptdigital.com">http://blog.scriptdigital.com</A>&gt; - AIM: scriptdigital
</I>&gt;<i> _______________________________________________
</I>&gt;<i> talk mailing list
</I>&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk at lists.nyphp.org</A>
</I>&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007151.html">[nycphp-talk] Re: IIS 5 and .inc files
</A></li>
	<LI>Next message: <A HREF="007153.html">[nycphp-talk] IIS 5 and .inc files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7154">[ date ]</a>
              <a href="thread.html#7154">[ thread ]</a>
              <a href="subject.html#7154">[ subject ]</a>
              <a href="author.html#7154">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
