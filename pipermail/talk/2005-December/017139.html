<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] importing 650,000 records
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2005-December/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20importing%20650%2C000%20records&In-Reply-To=%3C87e6ded30512311224y4aede108nb544fca75f02c9b5%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017138.html">
   
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] importing 650,000 records</H1>
    <B>max goldberg</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20importing%20650%2C000%20records&In-Reply-To=%3C87e6ded30512311224y4aede108nb544fca75f02c9b5%40mail.gmail.com%3E"
       TITLE="[nycphp-talk] importing 650,000 records">max.goldberg at gmail.com
       </A><BR>
    <I>Sat Dec 31 15:24:40 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="017138.html">[nycphp-talk] importing 650,000 records
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17139">[ date ]</a>
              <a href="thread.html#17139">[ thread ]</a>
              <a href="subject.html#17139">[ subject ]</a>
              <a href="author.html#17139">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>It depends on where the slowdown is. I'd agree with Chris, it would probably
be best to put an index on the email field (if there isnt one already), and
echo out the INSERTs with a newline. At that point you can just do php
script.php &gt; import.sql. Just keep in mind indexes play a major role when
importing large amounts of data, especially when SELECTs are needed for each
row.

If the table isn't live or in production, it may go a lot faster if you drop
all the indexes on the table other than the primary key once you are ready
to run your INSERTs and re-add them when you are done.


On 12/31/05, Chris Shiflett &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">shiflett at php.net</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> Joseph Crawford wrote:
</I>&gt;<i> &gt; $link = mysql_connect('localhost', 'root', '********');
</I>&gt;<i>
</I>&gt;<i> You should change this password, even if you only allow local
</I>&gt;<i> connections. You might also want to check to see if you use a similar
</I>&gt;<i> password or naming convention in other places.
</I>&gt;<i>
</I>&gt;<i> As for your question, does fgetcsv() perform better? It would require
</I>&gt;<i> you to process your file a line at a time rather than load it all into
</I>&gt;<i> memory, but the actual parsing should be much faster.
</I>&gt;<i>
</I>&gt;<i> Another idea is to write out a file with your SQL statements. Executing
</I>&gt;<i> each query, one at a time, sounds really slow. Regardless of how
</I>&gt;<i> complicated your queries are, you can still process them in a single
</I>&gt;<i> batch. This would probably be as simple as:
</I>&gt;<i>
</I>&gt;<i> $sql .=
</I>&gt;<i>
</I>&gt;<i> You can write $sql to a file and let MySQL slurp it up in one go.
</I>&gt;<i>
</I>&gt;<i> Hope that helps.
</I>&gt;<i>
</I>&gt;<i> Chris
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Chris Shiflett
</I>&gt;<i> Brain Bulb, The PHP Consultancy
</I>&gt;<i> <A HREF="http://brainbulb.com/">http://brainbulb.com/</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> New York PHP Talk Mailing List
</I>&gt;<i> AMP Technology
</I>&gt;<i> Supporting Apache, MySQL and PHP
</I>&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;<i> <A HREF="http://www.nyphp.org">http://www.nyphp.org</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.nyphp.org/pipermail/talk/attachments/20051231/1acec2c1/attachment.html">http://lists.nyphp.org/pipermail/talk/attachments/20051231/1acec2c1/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017138.html">[nycphp-talk] importing 650,000 records
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17139">[ date ]</a>
              <a href="thread.html#17139">[ thread ]</a>
              <a href="subject.html#17139">[ subject ]</a>
              <a href="author.html#17139">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
