<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Form not working as expected
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2008-March/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Form%20not%20working%20as%20expected&In-Reply-To=%3C1289907876.20080314102115%40qualityadvantages.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025078.html">
   <LINK REL="Next"  HREF="025080.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Form not working as expected</H1>
    <B>mikesz at qualityadvantages.com</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Form%20not%20working%20as%20expected&In-Reply-To=%3C1289907876.20080314102115%40qualityadvantages.com%3E"
       TITLE="[nycphp-talk] Form not working as expected">mikesz at qualityadvantages.com
       </A><BR>
    <I>Thu Mar 13 22:21:15 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="025078.html">[nycphp-talk] Slightly OT - Apache Stress Test
</A></li>
        <LI>Next message: <A HREF="025080.html">[nycphp-talk] Form not working as expected
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25079">[ date ]</a>
              <a href="thread.html#25079">[ thread ]</a>
              <a href="subject.html#25079">[ subject ]</a>
              <a href="author.html#25079">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello and Warm Greetings,

I have a form that I have been asked to modify and thought it was a
straight forward and simple MOD but it seems to have some a condition
that I didn't count on when I agreed to make the change and I need
some advice.

The situation is that the form (which is using the output buffer)has a
birthday input.

Almost forgot, this is a complex login form that has an IP Address
check in it. If the &quot;expected&quot; IP address is different that the one
stored in the database, it loops back and adds a test for the users
birthdate which does a different database lookup. This one form is
used to manage both conditions.

The form was originally designed to use a text box and the request was
to replace it with a drop down because his users didn't follow the
instructions for formatting most of the time, even with an example
provided. The form does a lookup to see if the birthdate matches the
one that is stored in the database. In the lookup, it compares the
value in $_POST['birthdate'] with the value in the database. The text
box works fine if you enter the correct yyyy-mm-dd format.

The replacement dropdown has three $_POST values very creatively
assigned, $_POST['year'],$_POST['month'],$_POST['day']. To compensate
for the replacement of $_POST['birthdate'] and try to make the change
transparent to the rest of the script I generated it manually in a
hidden field (I actually thought this one WAS creative until I
discovered that it didn't work as I expected, lol),

&lt;input type=&quot;hidden&quot;  value=&quot;&lt;?=$_POST['year'] . &quot;-&quot; . $_POST['month'] . &quot;-&quot; . $_POST['day'];?&gt;&quot; name=&quot;birthdate&quot;&gt;

The problem, as you may have already guessed is that
$_POST['birthdate'] gets no date values until AFTER the submit button
and that is too late for it to do its database compare so it fails. If
you rerun the form entry a second time the script works, no problem
but the first time through nada.

I have placed several print_r statements to see what is going on and
the very last I have just after the submit and just after the
ob_get_content and just before the return and $_POST['birthdate'] has
the correct value in it but apparently the script compare function
isn't see it for some reason. If, like I say, I run the input again,
it works fine?

I have tried replacing the $_POST['birthdate'] with a variable
$birthdate that I generate manually with the correct data and pass it
to the diff function but that breaks the script so that it doesn't work
at all no matter how many times you run it. I would really appreciate
someone who might have done something like this and solved it to give
me an idea of where I need to go with it.

Many thanks for your attention,

-- 
Best regards,
 mikesz                          mailto:<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">mikesz at qualityadvantages.com</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025078.html">[nycphp-talk] Slightly OT - Apache Stress Test
</A></li>
	<LI>Next message: <A HREF="025080.html">[nycphp-talk] Form not working as expected
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25079">[ date ]</a>
              <a href="thread.html#25079">[ thread ]</a>
              <a href="subject.html#25079">[ subject ]</a>
              <a href="author.html#25079">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
