<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] best practice for detecting ip
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2008-March/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20best%20practice%20for%20detecting%20ip&In-Reply-To=%3C00eb01c88fc3%24e93a0eb0%240605a8c0%40tank%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025151.html">
   <LINK REL="Next"  HREF="025167.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] best practice for detecting ip</H1>
    <B>Larry Ludwig</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20best%20practice%20for%20detecting%20ip&In-Reply-To=%3C00eb01c88fc3%24e93a0eb0%240605a8c0%40tank%3E"
       TITLE="[nycphp-talk] best practice for detecting ip">larrylud at gmail.com
       </A><BR>
    <I>Thu Mar 27 00:34:56 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="025151.html">[nycphp-talk] sun and mysql acquisition for non-enterprise users
</A></li>
        <LI>Next message: <A HREF="025167.html">[nycphp-talk] best practice for detecting ip
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25153">[ date ]</a>
              <a href="thread.html#25153">[ thread ]</a>
              <a href="subject.html#25153">[ subject ]</a>
              <a href="author.html#25153">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE> 

Hey everyone,

Does someone know the best practice for detecting ip addresses with 
php/apache for use in reporting/metrics?

I'm re-evaluating our code for detecting ips and I see it's built 
towards getting a unique browser ip without regard for how easily it 
can be spoofed.  For example, we're using X-FORWARDED-FOR which I know 
can be very easily spoofed by proxy servers so it should only be done 
with trusted proxies like AOL.  Does anyone know where to find a good 
list of ips of trusted proxies (as well as maybe a list of known 
anonymous proxy servers)?

Also, is there any reason to use HTTP_CLIENT_IP?  The current code we 
have looks to use that first if it's available.  But I'm not exactly 
sure the difference between that header and REMOTE_ADDR.

Thanks a lot,
Rob

Hi Rob,

Yes I assuming you are partly asking this based upon the amount of form spam
and the amount of people using anonymous proxing.

Some RBLs that might be of help
 
Some of the public ones out there (not complete)
<A HREF="http://www.dronebl.org/">http://www.dronebl.org/</A>
<A HREF="http://www.stopforumspam.com/">http://www.stopforumspam.com/</A>  (which we have converted into a local RBL)
<A HREF="http://rbl.efnetrbl.org/">http://rbl.efnetrbl.org/</A>
 
As of previous RBLs were designed to be for only SMTP but as the botnets
progress to web based attacks/spam they are being reused for other proposes.
 
Here is the obligatory PHP code to test RBLs and if a proxy service
 
<A HREF="http://www.jhurliman.org/index.php/2005/open-proxy-rbl-lookups-in-php/">http://www.jhurliman.org/index.php/2005/open-proxy-rbl-lookups-in-php/</A>
<A HREF="http://w-shadow.com/blog/2007/11/23/detect-users-accessing-your-site-via-a-p">http://w-shadow.com/blog/2007/11/23/detect-users-accessing-your-site-via-a-p</A>
roxy/

There also exists apache plugins to block/redirect to other web pages if on
a specified RBLs
 
Offline I can discuss other things we are developing to help protect our
network by using RBLs
 
RBLs aren't just for SMTP anymore.

-L

--
Larry Ludwig
Empowering Media
1-866-792-0489 x600
Managed and Unmanaged Xen VPSes
<A HREF="http://www.hostcube.com/">http://www.hostcube.com/</A>


-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.nyphp.org/pipermail/talk/attachments/20080327/6f256cee/attachment.html">http://lists.nyphp.org/pipermail/talk/attachments/20080327/6f256cee/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025151.html">[nycphp-talk] sun and mysql acquisition for non-enterprise users
</A></li>
	<LI>Next message: <A HREF="025167.html">[nycphp-talk] best practice for detecting ip
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25153">[ date ]</a>
              <a href="thread.html#25153">[ thread ]</a>
              <a href="subject.html#25153">[ subject ]</a>
              <a href="author.html#25153">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
