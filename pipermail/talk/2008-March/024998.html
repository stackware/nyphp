<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] PHP/MySQL environment problem??
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2008-March/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20PHP/MySQL%20environment%20problem%3F%3F&In-Reply-To=%3C47CC3FB1.9080002%40gmx.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024995.html">
   <LINK REL="Next"  HREF="025005.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] PHP/MySQL environment problem??</H1>
    <B>David Krings</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20PHP/MySQL%20environment%20problem%3F%3F&In-Reply-To=%3C47CC3FB1.9080002%40gmx.net%3E"
       TITLE="[nycphp-talk] PHP/MySQL environment problem??">ramons at gmx.net
       </A><BR>
    <I>Mon Mar  3 13:13:05 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="024995.html">[nycphp-talk] PHP/MySQL environment problem??
</A></li>
        <LI>Next message: <A HREF="025005.html">[nycphp-talk] PHP/MySQL environment problem??
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24998">[ date ]</a>
              <a href="thread.html#24998">[ thread ]</a>
              <a href="subject.html#24998">[ subject ]</a>
              <a href="author.html#24998">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>PaulCheung wrote:
I looked over the code and a few things struck me odd (which doesn't mean they 
are wrong!).


&gt;<i> //
</I>
You add this between each handful of lines without adding any informative 
comment. I'd remove those slashes and make the code easier to read - or even 
better add commentary.

&gt;<i> @ $cps;  //Current Page Starting row number
</I>&gt;<i> @ $lps;  //Last Page Starting row number
</I>&gt;<i> @ $rpp;  //Records Per Page
</I>
I have no idea what the significance of these lines is. The @ is usually used 
to suppress error message output (IMHO a bad idea), but the statement (or lack 
thereof) doesn't do anything.


&gt;<i> $q=&quot;SELECT SQL_CALC_FOUND_ROWS *
</I>&gt;<i>     FROM tr_test_record
</I>&gt;<i>  WHERE $access = tr_access&quot;;
</I>&gt;<i> //
</I>&gt;<i> $rs=mysql_query($q) or die(mysql_error());
</I>&gt;<i> //
</I>&gt;<i> $q0=&quot;Select FOUND_ROWS()&quot;;
</I>
When you run the query in the MySQL query editor, how many rows does MySQL return?
I always burn extra cycles and read the query results in a loop and increase a 
counter. All the MySQL functions that return a count do that for the last 
query run under the current connection, which may or may not be the last query 
that your code ran.
I am not that familiar with all the SQL keywords, but it strikes me that 
SQL_CALC_FOUND_ROWS returns already the count that you are looking for, which 
is one result row. So counting that result later on will always be 1.
I rather have some of the SQL epxerts chime in here as I quickly move into an 
area that I have no clue about.

&gt;<i> //
</I>&gt;<i> $rs0=mysql_query($q0) or die(mysql_error());
</I>&gt;<i> //
</I>&gt;<i> $row0=mysql_fetch_array($rs0);
</I>&gt;<i> //
</I>&gt;<i> $nr0 = $row0[&quot;FOUND_ROWS()&quot;];  //Number of rows found without LIMIT in 
</I>&gt;<i> action
</I>&gt;<i> ?&gt;
</I>
As mentioned above, I run a plain simple select query and increase a counter 
while looping through the results returned. May not be as elegant and 
efficient, but works reliably. I just don't gtee away from thinking that 
SELECT SQL_CALC_FOUND_ROWS * FROM tr_test_record WHERE $access = tr_access 
doesn't return what you expect it should (as far as I understand it thsi 
already counts the rows that would be returned when running the query without 
SQL_CALC_FOUND_ROWS). Plug that into the query browser and see what happens. 
My uneducated guss is that you basically count how many row counts (not 
rows!!!) there were in the last query, which should always be 1. But then 
again, you say it works on Windoze....


David

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024995.html">[nycphp-talk] PHP/MySQL environment problem??
</A></li>
	<LI>Next message: <A HREF="025005.html">[nycphp-talk] PHP/MySQL environment problem??
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24998">[ date ]</a>
              <a href="thread.html#24998">[ thread ]</a>
              <a href="subject.html#24998">[ subject ]</a>
              <a href="author.html#24998">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
