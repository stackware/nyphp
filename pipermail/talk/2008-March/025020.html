<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] OT - PHP portlet in Java's Liferay portal
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2008-March/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20OT%20-%20PHP%20portlet%20in%20Java%27s%20Liferay%20portal&In-Reply-To=%3Cc7c53eda0803040612i5b1fd530t6f357bea71817cef%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025016.html">
   <LINK REL="Next"  HREF="025021.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] OT - PHP portlet in Java's Liferay portal</H1>
    <B>Brian D.</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20OT%20-%20PHP%20portlet%20in%20Java%27s%20Liferay%20portal&In-Reply-To=%3Cc7c53eda0803040612i5b1fd530t6f357bea71817cef%40mail.gmail.com%3E"
       TITLE="[nycphp-talk] OT - PHP portlet in Java's Liferay portal">brian at realm3.com
       </A><BR>
    <I>Tue Mar  4 09:12:31 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="025016.html">[nycphp-talk] OT - PHP portlet in Java's Liferay portal
</A></li>
        <LI>Next message: <A HREF="025021.html">[nycphp-talk] OT - PHP portlet in Java's Liferay portal
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25020">[ date ]</a>
              <a href="thread.html#25020">[ thread ]</a>
              <a href="subject.html#25020">[ subject ]</a>
              <a href="author.html#25020">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Why are you using JSP (Java servlet pages) alongside PHP?

Either way, your problem is probably related to not sending headers
along with the image. If you're generating the chart, make sure it's
sending mime-type (Content-type) headers before sending the binary PNG
data. Otherwise the browser doesn't know what it's receiving and it
will garble it.

It's been a couple of years since I've written Java applications, but
the relevant PHP function is here:
<A HREF="http://us3.php.net/header">http://us3.php.net/header</A>
Take a look at Example #1.

- Brian

On Tue, Mar 4, 2008 at 2:43 AM, N&#233;stor &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">rotsen at gmail.com</A>&gt; wrote:
&gt;<i>  I am in need of help. I have created a chart PHP portlet and I am able to
</I>&gt;<i> deploy. The problem is that the PNG image file
</I>&gt;<i> displays as binary. I know that the file is created and is there and I can
</I>&gt;<i> open it with my browser and it displays the Pie chart
</I>&gt;<i>
</I>&gt;<i> My php code:
</I>&gt;<i> &lt;html xmlns=&quot;<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>&quot;&gt;
</I>&gt;<i> &lt;head&gt;
</I>&gt;<i>  &lt;title&gt;Libchart pie chart demonstration&lt;/title&gt;
</I>&gt;<i>  &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=ISO-8859-15&quot; /&gt;
</I>&gt;<i> &lt;/head&gt;
</I>&gt;<i> &lt;body&gt;
</I>&gt;<i>  &lt;img alt=&quot;Pie chart&quot; src=&quot;&lt;%=renderRequest.getContextPath()%&gt;/demo3.png&quot; /&gt;
</I>&gt;<i>  &lt;/body&gt;
</I>&gt;<i> &lt;/html&gt;
</I>&gt;<i>
</I>&gt;<i> I read in some articles that you need to use the jsp code
</I>&gt;<i> &lt;%=renderRequest.getContextPath()%&gt;
</I>&gt;<i> but is not working. I also try it without the JSP code and I get the same
</I>&gt;<i> result.
</I>&gt;<i>
</I>&gt;<i> This is what is displayed
</I>&gt;<i> -----------------
</I>&gt;<i> &#65533;PNG &#65533;&#65533;&#65533; IHDR&#65533;&#65533; X&#65533;&#65533;&#65533;&#65533; &#65533;&#65533;&#65533;&#65533;O&#65533;G&#65533;&#65533; ]IDATx&#65533;&#65533;&#65533;}&#65533;U&#65533;&#65533;&#65533; &#65533;&#65533;pI&#65533;&#65533;]&#65533;&quot; &#65533;&#65533;&#65533;KE&quot;
</I>&gt;<i> l*Y&#65533;X&#65533;T&#65533;&amp;Z&#65533;BL&#65533; &#65533;&#65533;&#65533;&#65533;E;&#65533; !m&#65533;1&#65533;HcT &#65533;&#65533;&#65533;n0 Q&#65533;&#65533; &#65533;&#65533;M6&#65533;&#65533;d&#65533;&#65533;5&#65533;Y &#65533;&#65533;&#65533;R
</I>&gt;<i> l&#65533;p&#65533;&#65533;&#861;q&#65533;3s&#65533;s&#65533;s&#65533;&#65533;''f&#65533; 3&#65533;&#65533; &#65533;&#65533;&#65533;w&#989;&#65533;? @&#65533;z&#65533;'&#65533;@ @ @ @ ?u&#65533;&#65533;&#65533; &#65533;&#65533;
</I>&gt;<i> 8x&#65533;&#65533;&#65533;.&#65533;&#65533;&#487;&#65533;Zv&#65533;sN&lt;&#65533;kSf_z&#1970;&#65533;M&#65533;_ &#65533;s&#65533;&#65533;7&#65533;&#65533;&#65533;&#65533;&#65533;M&#65533;&#65533;&#65533;&#65533;=a&#65533;&#65533;&#65533;#&#65533;0&#65533;&#65533;&#65533;&#65533;&#65533;&#65533;&#65533;s&#65533; &#65533;7/ !&#65533;&#65533;
</I>&gt;<i> &#65533;eW&#65533;&#65533;I3&gt;M&#65533;&#17995;&#65533;&#65533;v&#65533;&#65533;g&#65533;ye&#65533; &#65533;&#1911; T!&#65533;&#65533;&#65533;Y&#65533;`L 3&#65533;&#65533;&#65533;&#65533;O&#65533;&#65533; &#65533;m&#65533;&#65533;p&#65533;!&lt; &#65533;o4*8&#65533;&#65533;l&#65533;m; &#65533;&#65533; &#65533;&#65533;&#65533;
</I>&gt;<i> &gt;&#65533;`&#65533;&#265;B @5B8&#65533;&#65533;&#65533;&#65533;&#65533; &#65533;M&#65533;7=&#65533;&#65533;&#14495;
</I>&gt;<i> &lt;A bunch of other stufff and then the last part of what it is displayed&gt;
</I>&gt;<i> &#65533;&#65533;!&#65533;H &#65533;1{&#65533;m&#65533; va2&#65533;&#65533;&#65533;&#65533;&#65533;&quot; g# B&#65533;&#65533;&#65533; ag'&#65533;&#779;&#65533;O&#65533;&#65533;Z &#65533;l&#65533; &#65533;u&#65533; KZ 3,b &#65533;Kp &#65533;&#65533; &#65533; &#65533;
</I>&gt;<i> #,o5&#807;&#65533;&#65533;&#65533;_&#65533;&#65533;`&#65533;&#65533; &#65533;0&#65533;&#65533;&#65533;&#65533;&#65533;0&#65533;(&#65533;2~)&#961;&#65533;6B &#65533;\6&#65533;h&#65533;a]&#65533;X&#65533;&#65533;? &#65533; &#65533;FX&#65533;&#65533;fQ&#65533;G&#65533; &#65533; &#65533;FX&#65533;&#65533; Q&#65533;A&#65533;*&#65533;
</I>&gt;<i> &#65533; &#65533;FX&#65533;&#65533;&#65533;u&#65533;h&#65533; &#65533; &#65533;F&#65533;&#65533;vX&#65533;4V&#65533;yU&#65533; m&#65533;`#&#65533;n;&#65533;D &#65533;]&#65533;&#65533;@ !&#65533; &#65533;&#65533; &#65533; &#65533;v&#65533;N&#65533;&#1643;&#65533; h# &#65533;&#65533;0&#65533;#&#65533;&#65533;&#65533;&#65533;
</I>&gt;<i> (&#65533;`#4 a&#65533;'@ !&#65533; -&#65533;B&#65533;&#65533;&#65533;g# &#65533; Q &#65533;&#65533;&#65533;l&#65533;`#4&quot; a&#65533;&#65533; l&#65533;&#65533;D!&#65533;w&#65533; &#65533;&#65533;&#1056;(&#65533;&#65533;&#65533;~6B&#65533; &#65533; s &#65533;&#1731;&#65533;
</I>&gt;<i> l&#65533;&#65533;&#65533;*&#65533;&#65533;&#65533;6B&#65533; R&#1353;&#65533;&#65533;g# !&#65533; f&#65533;2Z&#65533;l&#65533; &#65533;6&#172; H&#222;&#65533; &#65533;&#65533;F 6B B !&#65533; A m&#65533;`# !&#65533; &#65533;&#65533; &#65533;&#65533;F 6B B !&#65533;
</I>&gt;<i> &#65533;F &#65533; &#65533;F &#65533; &#65533;F &#65533; &#65533;F &#65533; &#65533;F &#65533; &#65533;F &#65533; &#65533;&#65533;! &#65533;&#65533; $ &#65533; &#65533;&#65533;&#65533; &#65533;&#65533;&#65533;Y&#65533; ! !&#65533;R @ @ @ @ @ @ @ @ @ @
</I>&gt;<i> @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ B&#65533; B&#65533; B&#65533; B&#65533;&#65533;&#543;&#65533;&#65533;9&#65533;&#65533;(e&#65533;&#65533;&#65533;&#65533;&#65533;IEND&#65533;B`&#65533;
</I>&gt;<i> Pie chart
</I>&gt;<i> document.getElementById(&quot;p_p_id_libchartportlet_WAR_libchartportlet_&quot;).portletId
</I>&gt;<i> = &quot;libchartportlet_WAR_libchartportlet&quot;;
</I>&gt;<i> document.getElementById(&quot;p_p_id_libchartportlet_WAR_libchartportlet_&quot;).columnPos
</I>&gt;<i> = 5; if (!Liferay.Portlet.isAjax(&quot;libchartportlet_WAR_libchartportlet&quot;)) {
</I>&gt;<i> Liferay.Portlet.process(&quot;libchartportlet_WAR_libchartportlet&quot;); } jQuery(
</I>&gt;<i> function() { Liferay.Util.portletTitleEdit( { obj:
</I>&gt;<i> jQuery(&quot;#p_p_id_libchartportlet_WAR_libchartportlet_&quot;), plid: &quot;10133&quot;,
</I>&gt;<i> doAsUserId: &quot;&quot;, portletId: &quot;libchartportlet_WAR_libchartportlet&quot; } ); } );
</I>&gt;<i> -----------------
</I>&gt;<i>
</I>&gt;<i> I do not get all of the the javascript stuff after &quot;Pie chart&quot; above if I do
</I>&gt;<i> not use the JSP code.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Any ideas of what is wrong with my PHP displaying of the PNG file.
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i>
</I>&gt;<i> rotseN
</I>&gt;<i> _______________________________________________
</I>&gt;<i>  New York PHP Community Talk Mailing List
</I>&gt;<i>  <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;<i>
</I>&gt;<i>  NYPHPCon 2006 Presentations Online
</I>&gt;<i>  <A HREF="http://www.nyphpcon.com">http://www.nyphpcon.com</A>
</I>&gt;<i>
</I>&gt;<i>  Show Your Participation in New York PHP
</I>&gt;<i>  <A HREF="http://www.nyphp.org/show_participation.php">http://www.nyphp.org/show_participation.php</A>
</I>&gt;<i>
</I>


-- 
realm3 web applications [realm3.com]
freelance consulting, application development
(917) 512-3594
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025016.html">[nycphp-talk] OT - PHP portlet in Java's Liferay portal
</A></li>
	<LI>Next message: <A HREF="025021.html">[nycphp-talk] OT - PHP portlet in Java's Liferay portal
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25020">[ date ]</a>
              <a href="thread.html#25020">[ thread ]</a>
              <a href="subject.html#25020">[ subject ]</a>
              <a href="author.html#25020">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
