<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] ./configure, PHP, SuSE and the AMD64
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2004-September/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20./configure%2C%20PHP%2C%20SuSE%20and%20the%20AMD64&In-Reply-To=%3C41EE526EC2D3C74286415780D3BA9F87045A64F9%40ehost011-1.exch011.intermedia.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011762.html">
   <LINK REL="Next"  HREF="011766.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] ./configure, PHP, SuSE and the AMD64</H1>
    <B>Hans Zaunere</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20./configure%2C%20PHP%2C%20SuSE%20and%20the%20AMD64&In-Reply-To=%3C41EE526EC2D3C74286415780D3BA9F87045A64F9%40ehost011-1.exch011.intermedia.net%3E"
       TITLE="[nycphp-talk] ./configure, PHP, SuSE and the AMD64">hans at nyphp.com
       </A><BR>
    <I>Tue Sep 21 18:00:59 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="011762.html">[nycphp-talk] Exporting csv 
</A></li>
        <LI>Next message: <A HREF="011766.html">[nycphp-talk] Re: free hosting account
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11764">[ date ]</a>
              <a href="thread.html#11764">[ thread ]</a>
              <a href="subject.html#11764">[ subject ]</a>
              <a href="author.html#11764">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
I'm sorry for the reply to myself folks, but does anyone have any hints
on the below?  It's a daunting post, I know, but also a daunting problem
:<i>)  Thoughts on any of the points mentioned would be helpful.
</I>
Thanks all,

H

&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk-bounces at lists.nyphp.org</A>
</I>[mailto:<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk-bounces at lists.nyphp.org</A>] On Behalf Of Hans Zaunere
&gt;<i> Sent: Sunday, September 19, 2004 4:47 PM
</I>&gt;<i> To: NYPHP Talk
</I>&gt;<i> Subject: [nycphp-talk] ./configure, PHP, SuSE and the AMD64
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Hey everyone,
</I>&gt;<i> 
</I>&gt;<i> I'm doing a PHP compile for New York PHP's AMD64 Project.  The goal is
</I>&gt;<i> to enable all the hottest and modern extensions, and then let people
</I>&gt;<i> hack with their favorite extensions to find problems and bugs under a
</I>&gt;<i> 64bit architecture.  We're running SuSE Enterprise 9.1 on a dual AMD64
</I>&gt;<i> Opteron box, with 4GB of RAM.
</I>&gt;<i> 
</I>&gt;<i> I notice a number of strange issues while running ./configure.  Most
</I>of
&gt;<i> which I've been able to work through, and which I've documented to be
</I>&gt;<i> revisited later (the complete process of setting the box up is
</I>&gt;<i> documented and will be on nyphp.org when completed).
</I>&gt;<i> 
</I>&gt;<i> However, there is one issue I'm pretty unclear on - and, unfortunately
</I>&gt;<i> it might relate to some of the other issues, which makes matters more
</I>&gt;<i> confusion.
</I>&gt;<i> 
</I>&gt;<i> I can post the entire ./configure if requested, but this is pertinent
</I>at
&gt;<i> this point:
</I>&gt;<i> 
</I>&gt;<i> ....&lt;snip&gt;
</I>&gt;<i> --with-dom=/usr/lib64 --with-zlib-dir=/usr/lib64 \
</I>&gt;<i> --with-dom-xslt=/usr/lib64 --with-dom-exslt=/usr/lib64 \
</I>&gt;<i> --enable-exif --enable-ftp \
</I>&gt;<i> --with-gd=/usr/lib64 --with-jpeg-dir=/usr/lib64 \
</I>&gt;<i> --with-png-dir=/usr/lib64 --with-zlib-dir=/usr/lib64 \
</I>&gt;<i> --with-freetype-dir=/usr/lib64 \
</I>&gt;<i> ....&lt;/snip&gt;
</I>&gt;<i> 
</I>&gt;<i> The ./configure stops with this error message:
</I>&gt;<i> 
</I>&gt;<i> checking whether to enable truetype string function in GD... no
</I>&gt;<i> checking whether to enable JIS-mapped Japanese font support in GD...
</I>no
&gt;<i> checking for jpeg_read_header in -ljpeg... no
</I>&gt;<i> configure: error: Problem with libjpeg.(a|so). Please check config.log
</I>&gt;<i> for more information.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> And config.log contains this relevant snippet at the end:
</I>&gt;<i> 
</I>&gt;<i> configure:29794: checking whether to enable truetype string function
</I>in
&gt;<i> GD
</I>&gt;<i> configure:29819: checking whether to enable JIS-mapped Japanese font
</I>&gt;<i> support in GD
</I>&gt;<i> configure:31813: checking for jpeg_read_header in -ljpeg
</I>&gt;<i> configure:31832: gcc -o conftest -g -O2   -Wl,-rpath,/usr/lib64
</I>&gt;<i> -L/usr/lib64 -Wl,-rpath,/usr/ssl/lib -L/usr/ssl/lib conftest.c -ljpeg
</I>&gt;<i> -lexslt -lxml -lxslt -lz -lcurl -lbz2 -lz -lresolv -lm -ldl -lnsl
</I>-lssl
&gt;<i> -lcrypto -ldl -lcurl -lz -lssl -lcrypto -ldl -lxml2 -lz -lm 1&gt;&amp;5
</I>&gt;<i>
</I>/usr/lib64/gcc-lib/x86_64-suse-linux/3.3.3/../../../../x86_64-suse-linux
&gt;<i> /bin/ld: cannot find -lxml
</I>&gt;<i> collect2: ld returned 1 exit status
</I>&gt;<i> configure: failed program was:
</I>&gt;<i> #line 31821 &quot;configure&quot;
</I>&gt;<i> #include &quot;confdefs.h&quot;
</I>&gt;<i> /* Override any gcc2 internal prototype to avoid an error.  */
</I>&gt;<i> /* We use char because int might match the return type of a gcc2
</I>&gt;<i>     builtin and then its argument prototype would still apply.  */
</I>&gt;<i> char jpeg_read_header();
</I>&gt;<i> 
</I>&gt;<i> int main() {
</I>&gt;<i> jpeg_read_header()
</I>&gt;<i> ; return 0; }
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> At first glance, it appears the problem is in libjpeg - but it's not.
</I>&gt;<i> Notice &quot;cannot find -lxml&quot;
</I>&gt;<i> 
</I>&gt;<i> I have only libxml2 installed:
</I>&gt;<i> 
</I>&gt;<i> amd:~/INSTALLED/php-4.3.8 # ldconfig -p | grep -i libxml
</I>&gt;<i>         libxml2.so.2 (libc6,x86-64) =&gt; /usr/lib64/libxml2.so.2
</I>&gt;<i>         libxml2.so.2 (libc6) =&gt; /usr/lib/libxml2.so.2
</I>&gt;<i>         libxml2.so (libc6,x86-64) =&gt; /usr/lib64/libxml2.so
</I>&gt;<i> amd:~/INSTALLED/php-4.3.8 #
</I>&gt;<i> 
</I>&gt;<i> So why is it looking for -lxml?  There is also the link flag of
</I>-lxml2,
&gt;<i> which is correct.  Am I missing something here, or do I really need to
</I>&gt;<i> install libxml in addition to libxml2 (which totally doesn't seem
</I>&gt;<i> right)?
</I>&gt;<i> 
</I>&gt;<i> So that's the main question right now.
</I>&gt;<i> 
</I>&gt;<i> There are some other issues that I've mostly worked around, but figure
</I>&gt;<i> I'll drop by this list for additional comments and thoughts.
</I>&gt;<i> 
</I>&gt;<i> -- In general, I've found that PHP's ./configure tends to assume
</I>things
&gt;<i> are in /usr/lib.  However, on this and other 64bit x86 platforms, what
</I>&gt;<i> we want is typically in /usr/lib64.  A prime example of this is
</I>libjpeg.
&gt;<i> After the RPM's install, ./configure couldn't find libjpeg, even
</I>though
&gt;<i> ldconfig knew where it was - it was in /usr/lib64.  The error:
</I>&gt;<i> 
</I>&gt;<i> configure: error: libjpeg.(a|so) not found.
</I>&gt;<i> 
</I>&gt;<i> The solution: symlink libjpeg.so from /usr/lib64 into /usr/lib - but
</I>is
&gt;<i> this right?  I've tried numerous flags to configure, but nothing
</I>worked.
&gt;<i> When examining config.log in this case, I see &quot;gcc -o conftest
</I>&gt;<i> -L/usr/lib64....&quot;  which looks to be on the right track, yet
</I>./configure
&gt;<i> is still breaking.
</I>&gt;<i> 
</I>&gt;<i> -- On a similar note is the specifying of specific directories.  In
</I>the
&gt;<i> ./configure snippet above, you'll notice I typically use /usr/lib64
</I>with
&gt;<i> any --with directive.  I know this might be wrong, but using /usr
</I>&gt;<i> doesn't help either (for instance, --with-jpeg-dir=/usr doesn't work).
</I>&gt;<i> 
</I>&gt;<i> In fact, there appear to be some inconstancies, and certainly some
</I>&gt;<i> questions:
</I>&gt;<i> 
</I>&gt;<i> --with-openssl  (must not have any directory after it, which isn't
</I>&gt;<i> inline with what ./configure --help says).
</I>&gt;<i> 
</I>&gt;<i> --with-zlib=/usr  (this works - but what if I want to force the 64bit
</I>&gt;<i> library version, in /usr/lib64?)
</I>&gt;<i> 
</I>&gt;<i> --with-bz2=/usr/lib64  (and this also works - which you would think it
</I>&gt;<i> shouldn't, compared to the zlib above?)
</I>&gt;<i> 
</I>&gt;<i> And lastly, take these:
</I>&gt;<i> 
</I>&gt;<i> --with-curl=/usr/lib64
</I>&gt;<i> --with-zlib-dir=/usr/lib64
</I>&gt;<i> 
</I>&gt;<i> Both seem to work (so far).  So what is the difference between a
</I>&gt;<i> directive having the -dir suffix and not?
</I>&gt;<i> 
</I>&gt;<i> For most compiles, I just set everything to /usr/local and /usr and it
</I>&gt;<i> works.  Occasionally, there are problems, but they are usually easily
</I>&gt;<i> resolved with ldconfig runs, etc.  However, in this case, having lib64
</I>&gt;<i> seems to have added another level of complexities and possible
</I>&gt;<i> permutations of what doing The Right Thing really is.  Are these
</I>&gt;<i> potentially bugs and mis-documentations, or simply me missing the
</I>&gt;<i> obvious?
</I>&gt;<i> 
</I>&gt;<i> Any thoughts appreciated, thanks all,
</I>&gt;<i> 
</I>&gt;<i> ---
</I>&gt;<i> Hans Zaunere
</I>&gt;<i> President
</I>&gt;<i> New York PHP
</I>&gt;<i> <A HREF="../../../index.html">http://nyphp.org</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> New York PHP Talk
</I>&gt;<i> Supporting AMP Technology (Apache/MySQL/PHP)
</I>&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;<i> <A HREF="http://www.newyorkphp.org">http://www.newyorkphp.org</A>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011762.html">[nycphp-talk] Exporting csv 
</A></li>
	<LI>Next message: <A HREF="011766.html">[nycphp-talk] Re: free hosting account
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11764">[ date ]</a>
              <a href="thread.html#11764">[ thread ]</a>
              <a href="subject.html#11764">[ subject ]</a>
              <a href="author.html#11764">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
