<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Articles/Code i have Written
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2004-September/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Articles/Code%20i%20have%20Written&In-Reply-To=%3C41518605.8090905%40phpwerx.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011773.html">
   <LINK REL="Next"  HREF="011775.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Articles/Code i have Written</H1>
    <B>Dan Cech</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Articles/Code%20i%20have%20Written&In-Reply-To=%3C41518605.8090905%40phpwerx.net%3E"
       TITLE="[nycphp-talk] Articles/Code i have Written">dcech at phpwerx.net
       </A><BR>
    <I>Wed Sep 22 10:02:45 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="011773.html">[nycphp-talk] Articles/Code i have Written
</A></li>
        <LI>Next message: <A HREF="011775.html">[nycphp-talk] Articles/Code i have Written
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11774">[ date ]</a>
              <a href="thread.html#11774">[ thread ]</a>
              <a href="subject.html#11774">[ subject ]</a>
              <a href="author.html#11774">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Joseph Crawford wrote:
&gt;<i> Dan,
</I>&gt;<i> 
</I>&gt;<i> thanks for pointing this out, however one question,  I have been told
</I>&gt;<i> that in PHP 4 static variables in functions are not stored from page
</I>&gt;<i> to page request, if this is true you will need to use a session anyhow
</I>&gt;<i> so why would singletons be of use in php 4?
</I>
Joseph,

Singleton classes can be very handy for things like database access and 
error handling, where it is convenient to be able to access the same 
object from many different areas of the code.  You could use a global 
variable for the same job, but that is really a matter of taste.

If you want your singleton objects to propagate across the session, then 
you can use something like:

function &amp;session_singleton($class) {
     if (!isset($_SESSION['_singleton'])) {
         $_SESSION['_singleton'] = array();
     }

     if (!isset($_SESSION['_singleton'][$class])) {
         $_SESSION['_singleton'][$class] =&amp; new $class;
     }

     return $_SESSION['_singleton'][$class];
}

Dan

&gt;<i> the article you saw is one that was not updated yet, i sent an email
</I>&gt;<i> to the site admin with corrections for the article that also showed a
</I>&gt;<i> way to use a session to store the object.
</I>&gt;<i> 
</I>&gt;<i> i will add your code to the code example and note your name ;)
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On Wed, 22 Sep 2004 09:22:07 -0400, Dan Cech &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">dcech at phpwerx.net</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i>Joseph Crawford wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>also i would like to note that i havent really found a use for that
</I>&gt;&gt;&gt;<i>singleton pattern shown before in php 4, rather here is another code
</I>&gt;&gt;&gt;<i>example i posted that will show a better way to use a method to get
</I>&gt;&gt;&gt;<i>similar results.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i><A HREF="http://www.weberdev.com/get_example-4014.html">http://www.weberdev.com/get_example-4014.html</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>You may be better off with something like this:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>function &amp;singleton($class) {
</I>&gt;&gt;<i>     static $instances;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     if (!is_array($instances)) {
</I>&gt;&gt;<i>         $instances = array();
</I>&gt;&gt;<i>     }
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     if (!isset($instances[$class])) {
</I>&gt;&gt;<i>         $instances[$class] =&amp; new $class;
</I>&gt;&gt;<i>     }
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     return $instances[$class];
</I>&gt;&gt;<i>}
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>This function will correctly manage multiple singleton objects for
</I>&gt;&gt;<i>multiple classes, thus:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>$mysingle =&amp; singleton('myclass');
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>$myother =&amp; singleton('anotherclass');
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Will both be valid singleton instances of their respective class.  With
</I>&gt;&gt;<i>the function in your example the second call to singleton would change
</I>&gt;&gt;<i>the object referenced by $mysingle.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>I also changed the way the function returns the reference slightly to
</I>&gt;&gt;<i>reflect the preferred syntax in php4.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Dan
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>_______________________________________________
</I>&gt;&gt;<i>New York PHP Talk
</I>&gt;&gt;<i>Supporting AMP Technology (Apache/MySQL/PHP)
</I>&gt;&gt;<i><A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;&gt;<i><A HREF="http://www.newyorkphp.org">http://www.newyorkphp.org</A>
</I>&gt;&gt;<i>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011773.html">[nycphp-talk] Articles/Code i have Written
</A></li>
	<LI>Next message: <A HREF="011775.html">[nycphp-talk] Articles/Code i have Written
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11774">[ date ]</a>
              <a href="thread.html#11774">[ thread ]</a>
              <a href="subject.html#11774">[ subject ]</a>
              <a href="author.html#11774">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
