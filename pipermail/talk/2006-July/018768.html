<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] uploaded files
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2006-July/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20uploaded%20files&In-Reply-To=%3Cp0623090ec0ed50c330e6%40%5B192.168.1.100%5D%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018767.html">
   <LINK REL="Next"  HREF="018769.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] uploaded files</H1>
    <B>tedd</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20uploaded%20files&In-Reply-To=%3Cp0623090ec0ed50c330e6%40%5B192.168.1.100%5D%3E"
       TITLE="[nycphp-talk] uploaded files">tedd at sperling.com
       </A><BR>
    <I>Wed Jul 26 13:21:19 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="018767.html">[nycphp-talk] uploaded files
</A></li>
        <LI>Next message: <A HREF="018769.html">[nycphp-talk] uploaded files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18768">[ date ]</a>
              <a href="thread.html#18768">[ thread ]</a>
              <a href="subject.html#18768">[ subject ]</a>
              <a href="author.html#18768">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>At 12:23 PM -0400 7/26/06, Rahmin Pavlovic wrote:
&gt;<i>On 7/26/06 11:37 AM, &quot;Daniela Gutierrez&quot; &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">daniela at ula.ve</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i>  Hi everybody!
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  I would like to know how to verify that the files they had been uploaded
</I>&gt;&gt;<i>  by some user are j peg, because I only want them to upload images and I
</I>&gt;<i>  &gt; also want to be sure that they are not uploading some kind of malicious
</I>&gt;<i>  &gt; files.
</I>&gt;<i>
</I>&gt;<i>if (stristr($_FILES['file_field']['name'],'.jpg')=='' &amp;&amp;
</I>&gt;<i>     stristr($_FILES['file_field']['name'],'.jpeg')=='') {
</I>&gt;<i>     // not okay
</I>&gt;<i>}
</I>&gt;<i>else {
</I>&gt;<i>     // okay
</I>&gt;<i>}
</I>&gt;<i>
</I>&gt;<i>That just checks for the existence of the file-extension in the filename
</I>&gt;<i>(which you can tighten up), but I'm guessing you can do something similar to
</I>&gt;<i>the following if you have a recent version of GD installed:
</I>&gt;<i>
</I>&gt;<i>if(!imagecreatefromjpeg($_FILES['file_field']['tmp_name'])) {
</I>&gt;<i>     // file doesn't appear to be a valid jpeg
</I>&gt;<i>}
</I>
In addition to that, you might resample the image to a different 
size, or convert to another format, or cut, or crop, or merge with 
another image (i.e., copyright). If it is malicious code, then that 
should cause the offending code some problems -- however -- I've 
never encountered any malicious code, it's just an idea.

Furthermore, if you get the image size via:

$imageArray = getimagesize(&quot;the.jpg&quot;);

and dump the array.

print_r($imageArray);

You will see several data that you could test for.

I'm entertaining the same problem.

hth's

tedd
-- 
-------
<A HREF="http://sperling.com">http://sperling.com</A>  <A HREF="http://ancientstones.com">http://ancientstones.com</A>  <A HREF="http://earthstones.com">http://earthstones.com</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018767.html">[nycphp-talk] uploaded files
</A></li>
	<LI>Next message: <A HREF="018769.html">[nycphp-talk] uploaded files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18768">[ date ]</a>
              <a href="thread.html#18768">[ thread ]</a>
              <a href="subject.html#18768">[ subject ]</a>
              <a href="author.html#18768">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
