<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] bounced email and Mail::send()
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2005-October/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20bounced%20email%20and%20Mail%3A%3Asend%28%29&In-Reply-To=%3C48544.38.117.147.25.1130106609.squirrel%4038.117.147.25%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016309.html">
   <LINK REL="Next"  HREF="016313.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] bounced email and Mail::send()</H1>
    <B>Kenneth Downs</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20bounced%20email%20and%20Mail%3A%3Asend%28%29&In-Reply-To=%3C48544.38.117.147.25.1130106609.squirrel%4038.117.147.25%3E"
       TITLE="[nycphp-talk] bounced email and Mail::send()">ken at secdat.com
       </A><BR>
    <I>Sun Oct 23 18:30:09 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="016309.html">[nycphp-talk] bounced email and Mail::send()
</A></li>
        <LI>Next message: <A HREF="016313.html">[nycphp-talk] bounced email and Mail::send()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16311">[ date ]</a>
              <a href="thread.html#16311">[ thread ]</a>
              <a href="subject.html#16311">[ subject ]</a>
              <a href="author.html#16311">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I went nuts with this until I gave up on shell emails and used TCP.  The
TCP option requires you to have your email server running, but on the
other hand, the shell method made it impossible to get the Return path
right, and that was a deal-breaker.  Using the PEAR package the code is
this:

// Assume an array $em() that has some stuff in it
include_once('Mail.php');
$recipients =$em[&quot;email_to&quot;];
$headers['From']    = $from_name. &quot;&lt;&quot;.$from_addr.&quot;&gt;&quot;;
$headers['To']      = $em[&quot;email_to&quot;];
$headers['Subject'] = $em[&quot;email_subject&quot;];
$headers['Date']    = date(&quot;D, j M Y H:i:s O&quot;,time());
$body = $em[&quot;email_message&quot;];
$mail_object = Mail::factory('smtp', $params);
$mail_object-&gt;send($recipients, $headers, $body);

Once I got this running I've never looked back.

&gt;<i> Thanks, Anirudh.  I'll look into this some more.  To pass the -f flag to
</I>&gt;<i> the PHP mail() function might work, but also I am trying to do this with
</I>&gt;<i> PEAR Mail::send(), so I will dig deeper into that codebase to look for
</I>&gt;<i> clues.
</I>&gt;<i>
</I>&gt;<i> Still mystified,
</I>&gt;<i> Allen
</I>&gt;<i>
</I>&gt;<i> Anirudh Zala wrote:
</I>&gt;&gt;<i> Normally you do not require to set header &quot;Return-path&quot; because return
</I>&gt;&gt;<i> path address is automatically taken by Sendmail as the user who sends
</I>&gt;&gt;<i> emails. Hence in your case it is &quot;apache&quot; when when sending mail from
</I>&gt;&gt;<i> web and &quot;shell user&quot; while sending mail from shell.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hence now you have only 2 options. To set above header in desired way,
</I>&gt;&gt;<i> do not pass &quot;Return-path&quot; header while sending email. Instead in mail
</I>&gt;&gt;<i> function use 5th arguments like below.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> mail('To mail', 'Subject', 'Message', 'All required header', '-f
</I>&gt;&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">bounce at someone.some</A>');
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This fifth parameter (was added in PHP 4.0.5) is your Return-Path. Here
</I>&gt;&gt;<i> &quot;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">bounce at someone.some</A>&quot; is your bounce mail address. Alternatively you can
</I>&gt;&gt;<i> set permanent address in your php.ini or httpd.conf like below.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /usr/sbin/sendmail -f '<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">bounce at someone.some</A>'
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Please note that I have not tested above, so you have to try. But it
</I>&gt;&gt;<i> will work most probably or you may have to change syntax according to
</I>&gt;&gt;<i> php.ini or httpd.conf.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> And sending mail from shell, invoke sendail command by using &quot;-f&quot; option
</I>&gt;&gt;<i> and specify bounced email adress. See below.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> [...]# /usr/sbin/sendmail -f '<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">bounce at someone.some</A>' REST OF ARGUMENTS
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Anirudh Zala
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> ---------------------------------
</I>&gt;&gt;<i> Anirudh Zala (Production Manager)
</I>&gt;&gt;<i> Ph: +91 281 245 1894
</I>&gt;&gt;<i> anirudh at aspl.in
</I>&gt;&gt;<i> <A HREF="http://www.aspl.in">http://www.aspl.in</A>
</I>&gt;&gt;<i> ---------------------------------
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Allen Shaw
</I>&gt;<i> Polymer (<A HREF="http://polymerdb.org">http://polymerdb.org</A>)
</I>&gt;<i> _______________________________________________
</I>&gt;<i> New York PHP Talk Mailing List
</I>&gt;<i> AMP Technology
</I>&gt;<i> Supporting Apache, MySQL and PHP
</I>&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;<i> <A HREF="http://www.nyphp.org">http://www.nyphp.org</A>
</I>&gt;<i>
</I>

-- 
Kenneth Downs
Secure Data Software
631-379-0010
<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">ken at secdat.com</A>
PO Box 708
East Setauket, NY 11733


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016309.html">[nycphp-talk] bounced email and Mail::send()
</A></li>
	<LI>Next message: <A HREF="016313.html">[nycphp-talk] bounced email and Mail::send()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16311">[ date ]</a>
              <a href="thread.html#16311">[ thread ]</a>
              <a href="subject.html#16311">[ subject ]</a>
              <a href="author.html#16311">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
