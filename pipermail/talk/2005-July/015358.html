<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] strpos with space
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2005-July/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20strpos%20with%20space&In-Reply-To=%3C200507251601.29155.jellicle%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015369.html">
   <LINK REL="Next"  HREF="015360.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] strpos with space</H1>
    <B>Michael Sims</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20strpos%20with%20space&In-Reply-To=%3C200507251601.29155.jellicle%40gmail.com%3E"
       TITLE="[nycphp-talk] strpos with space">jellicle at gmail.com
       </A><BR>
    <I>Mon Jul 25 16:01:28 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="015369.html">[nycphp-talk] strpos with space
</A></li>
        <LI>Next message: <A HREF="015360.html">[nycphp-talk] strpos with space
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15358">[ date ]</a>
              <a href="thread.html#15358">[ thread ]</a>
              <a href="subject.html#15358">[ subject ]</a>
              <a href="author.html#15358">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Monday 25 July 2005 14:41, Brian O'Connor wrote:

&gt;<i> Here is the function, maybe I am misunderstanding something:
</I>&gt;<i>
</I>&gt;<i> function createTextPreview($text, $words = 250)
</I>&gt;<i> {
</I>&gt;<i> if(str_word_count($text) &lt; $words) {
</I>&gt;<i> return $text;
</I>&gt;<i> } else {
</I>&gt;<i> return substr($text, 0, strpos($text, ' ', $words)) . ' ... [ &lt;a
</I>&gt;<i> href=&quot;link&quot;&gt;full text&lt;/a&gt; ]' . str_word_count($text);
</I>
Note that str_word_count($foo) returns the number of words found, with 
no indication of anything else (such as where the 250th word might be).  
Your strpos() function counts characters, not words.

What you want:

<A HREF="http://php.net/str_word_count">http://php.net/str_word_count</A>

is str_word_count($foo,2), which according to the docs returns an array 
with the words and their position in the string.  So if you looked at 
the key for the 251st element of that array, and subtracted one, that 
would be the place to break the string between the 250th and 251st 
words.  Then you can just use substr($foo, 0, ($keyvalue-1)) to dump 
the first part of the text string...  Since I'm guessing that 
str_word_count() is slow, to avoid running it twice you could use 
array_count_values() to count the elements of the returned array.  If 
it's more than 250, then do the above.  If the returned array has less 
than 250 elements, you can output the entire string since it's less 
than 250 words.

All of this implies that you're happy with what str_word_count defines 
as a &quot;word&quot;.  If you need to be more picky, the function Hans Zaunere 
linked to would let you choose exactly what constitutes a word 
boundary.

Food for thought: what does your application do if it receives a 10,000 
character sequence of A's in a row without spaces?  Might it be that 
you want to break at 250 words OR a maximum number of characters?

Michael Sims

 

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015369.html">[nycphp-talk] strpos with space
</A></li>
	<LI>Next message: <A HREF="015360.html">[nycphp-talk] strpos with space
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15358">[ date ]</a>
              <a href="thread.html#15358">[ thread ]</a>
              <a href="subject.html#15358">[ subject ]</a>
              <a href="author.html#15358">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
