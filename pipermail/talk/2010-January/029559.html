<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] IIS 7, trigger_error, and Large File Uploads
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2010-January/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20IIS%207%2C%20trigger_error%2C%20and%20Large%20File%20Uploads&In-Reply-To=%3C4B4129A0.8020709%40gmx.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029553.html">
   <LINK REL="Next"  HREF="029560.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] IIS 7, trigger_error, and Large File Uploads</H1>
    <B>David Krings</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20IIS%207%2C%20trigger_error%2C%20and%20Large%20File%20Uploads&In-Reply-To=%3C4B4129A0.8020709%40gmx.net%3E"
       TITLE="[nycphp-talk] IIS 7, trigger_error, and Large File Uploads">ramons at gmx.net
       </A><BR>
    <I>Sun Jan  3 18:34:56 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="029553.html">[nycphp-talk] IIS 7, trigger_error, and Large File Uploads
</A></li>
        <LI>Next message: <A HREF="029560.html">[nycphp-talk] IIS 7, trigger_error, and Large File Uploads
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29559">[ date ]</a>
              <a href="thread.html#29559">[ thread ]</a>
              <a href="subject.html#29559">[ subject ]</a>
              <a href="author.html#29559">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 1/3/2010 5:41 PM, Hans Zaunere wrote:
&gt;<i> Oh my :)
</I>
That applies to IIS, right? I just have to ask the question: can't you just 
use a real web server that actually works, like, let's say, Apache? I 'work' 
with IIS at work and it is a totally dysfunctional kludge.


&gt;<i> 2.  I need to handle 200mb+ file uploads.  I'm aware of the all the caveats
</I>&gt;<i> to this, and have set what I've thought to be appropriate limits in php.ini.
</I>&gt;<i> I'm apparently hitting some other timeout/limit from IIS 7, though.  After
</I>&gt;<i> roughly 60 seconds, I get a server 404 message.  I've done some research and
</I>&gt;<i> have seen this error comes up with ASP developers, and so I don't think I'm
</I>&gt;<i> hitting a PHP limit/timeout (yet).  I've looked at IIS setting
</I>&gt;<i> MaxAllowedContentLength, but it's default value is apparently at 2gb.  Any
</I>&gt;<i> thoughts on how a resolution, or at least how to debug what limit is getting
</I>&gt;<i> hit?
</I>
Well, circumventing an issue is also a valid approach. Does the upload have to 
happen via HTTP? Maybe uploading via FTP to the same box (or one on the same 
local network) may be a workaround. The script can then later 'upload' from 
that local resource or directly access the file, which should bring the final 
upload process close to local file copy speed. Using HTTP for uploading files 
of that size is very inefficient, but may be convenient.

I did search around a bit and came across one comment in the PHP manual 
dealing with IIS having PHP installed as CGI. It is a bit older, but may still 
apply, load <A HREF="http://us2.php.net/features.file-upload">http://us2.php.net/features.file-upload</A> and go to the comment from 
2003-March-09...or just keep reading here, I copied verbatim:

This took me a few days to find out: when uploading large files with a slow 
connection to my WIN2K/IIS5/PHP4 server the POST form kept timing out at 
exactly 5 minutes. All PHP.INI settings were large enough to accomodate huge 
file uploads. Searched like hell with keywords like &quot;file upload php timeout 
script&quot; until I realised that I installed PHP as CGI and added that as a 
keyword. This was the solution:

To set the timeout value:
1. In the Internet Information Services snap-in, select the computer icon and 
open its property sheets.
2. Under Master Properties, select WWW Service, and then click the Edit button
3. Click the Home Directory tab.
4. Click the Configuration button.
5. Click the Process Options tab, and then type the timeout period in the CGI 
Script Timeout box.


&gt;<i>
</I>&gt;<i> Of course, if I could figure out #1, I may be better able to debug #2 :)
</I>
Can't help you with #1 other than to see what the IIS and system logs state.


Good luck!

David

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029553.html">[nycphp-talk] IIS 7, trigger_error, and Large File Uploads
</A></li>
	<LI>Next message: <A HREF="029560.html">[nycphp-talk] IIS 7, trigger_error, and Large File Uploads
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29559">[ date ]</a>
              <a href="thread.html#29559">[ thread ]</a>
              <a href="subject.html#29559">[ subject ]</a>
              <a href="author.html#29559">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
