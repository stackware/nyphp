<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Htaccess and php user account
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2008-December/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Htaccess%20and%20php%20user%20account&In-Reply-To=%3CC2D41DAC-42F6-4827-8CBF-7AB869C46034%40o2group.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027125.html">
   <LINK REL="Next"  HREF="027134.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Htaccess and php user account</H1>
    <B>Tim Lieberman</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Htaccess%20and%20php%20user%20account&In-Reply-To=%3CC2D41DAC-42F6-4827-8CBF-7AB869C46034%40o2group.com%3E"
       TITLE="[nycphp-talk] Htaccess and php user account">tim_lists at o2group.com
       </A><BR>
    <I>Mon Dec  1 23:19:44 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="027125.html">[nycphp-talk] Htaccess and php user account
</A></li>
        <LI>Next message: <A HREF="027134.html">[nycphp-talk] Htaccess and php user account
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27128">[ date ]</a>
              <a href="thread.html#27128">[ thread ]</a>
              <a href="subject.html#27128">[ subject ]</a>
              <a href="author.html#27128">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Following up on my previous, more general post.

If you're just using PHP to control access to html content, and you're  
worried that your shared host is going to bork your apache  
configuration (which clearly is what happened in your case, assuming  
apache), you basically do the following:

1) Do a typical PHP auth setup of whatever design.  User accounts in  
mysql, with md5'd passwords.
2) Keep anything sensitive out of the web root.

So, very simplified, you've got something like this:

/some/dir/webroot -- webroot
/some/dir/secure -- not accessible by apache
/some/dir/lib/db.php - php script that contains any sensitive database  
connection information (note: your database shouldn't be accepting  
connections from just anyone, either.  That's why there's a &quot;host&quot;  
field in mysql.user.
/some/dir/webroot/page.php might look like:

&lt;?PHP
// make sure the user has authenticated.
if (! auth() ){
	header(&quot;Location: login.php&quot;);
	exit();
}

//include the protected content
include &quot;../lib/page.html&quot;;
?&gt;

So even if your apache config goes south and spits out PHP code, all  
anyone sees is the content of page.php, above.

Exercise: Find the vulnerability in page.php that anyone can exploit.   
It must be useful.  The fact that there's a &quot;lib&quot; directory above the  
webroot is not really something that needs to be a secret.

Many PHP frameworks out there (cake and zend come to mind) use exactly  
this approach.

-Tim


/some/dir/webroot/page.php
On Dec 1, 2008, at 8:14 PM, Michele Waldman wrote:

&gt;<i> I&#8217;m trying to set up a user account with htaccess and mysql.
</I>&gt;<i>
</I>&gt;<i> But the shared hosting account doesn&#8217;t have mod_auth_mysql htaccess  
</I>&gt;<i> module installed on the machines and I can&#8217;t get root access.
</I>&gt;<i>
</I>&gt;<i> How else are folks implementing accounts?
</I>&gt;<i>
</I>&gt;<i> In php?
</I>&gt;<i>
</I>&gt;<i> If so, what&#8217;s the best general way to implement that.  Do you use  
</I>&gt;<i> session variables for that?
</I>&gt;<i>
</I>&gt;<i> My primary concern about implementing accounts in php is that php  
</I>&gt;<i> can stop running on the server.  If that happens, the security  
</I>&gt;<i> becomes non-existent.  Plus, the php code can be dumped right to the  
</I>&gt;<i> browser.
</I>&gt;<i>
</I>&gt;<i> I&#8217;d much rather server level security than in processes that can stop.
</I>&gt;<i>
</I>&gt;<i> Thoughts on account security approaches, please.
</I>&gt;<i>
</I>&gt;<i> Michele
</I>&gt;<i> _______________________________________________
</I>&gt;<i> New York PHP User Group Community Talk Mailing List
</I>&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.nyphp.org/show_participation.php">http://www.nyphp.org/show_participation.php</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027125.html">[nycphp-talk] Htaccess and php user account
</A></li>
	<LI>Next message: <A HREF="027134.html">[nycphp-talk] Htaccess and php user account
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27128">[ date ]</a>
              <a href="thread.html#27128">[ thread ]</a>
              <a href="subject.html#27128">[ subject ]</a>
              <a href="author.html#27128">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
