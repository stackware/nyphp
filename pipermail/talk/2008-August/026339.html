<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] nested set tree sorting
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2008-August/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20nested%20set%20tree%20sorting&In-Reply-To=%3Cb76252690808011343i12ab0faatedeb996b6c8e85cc%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="026340.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] nested set tree sorting</H1>
    <B>csnyder</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20nested%20set%20tree%20sorting&In-Reply-To=%3Cb76252690808011343i12ab0faatedeb996b6c8e85cc%40mail.gmail.com%3E"
       TITLE="[nycphp-talk] nested set tree sorting">chsnyder at gmail.com
       </A><BR>
    <I>Fri Aug  1 16:43:34 EDT 2008</I>
    <P><UL>
        
        <LI>Next message: <A HREF="026340.html">[nycphp-talk] nested set tree sorting
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26339">[ date ]</a>
              <a href="thread.html#26339">[ thread ]</a>
              <a href="subject.html#26339">[ subject ]</a>
              <a href="author.html#26339">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Jul 31, 2008 at 2:06 AM, Marc Antony Vose &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">suzerain at suzerain.com</A>&gt; wrote:
&gt;<i> Has anyone previously tackled this problem
</I>&gt;<i> before, and have some sample code to rebuild the entire tree, but
</I>&gt;<i> alphabetize or sort the entries in each level?
</I>&gt;<i>
</I>
Heh, that's a nice problem.

You could write a recursive function that builds a new tree by walking
the existing one, but with everything properly alphabetized. This is
expensive, and memory could be an issue if you have a lot of
categories at high depths, but it's a straightforward approach.

You could also create a hierarchical naming scheme for the categories
( /fruit/apples, /fruit/organges, etc ) and rebuild the tree in chunks
based on name. That gets around memory limitations, but of course it
still takes time to build the new tree.

If you don't want to build a new tree each time, you'll need a way to
move the categories around arbitrarily. I can point you to my
implementation at
<A HREF="http://trac.dey.fcny.org/browser/fcnyl3/lib/fcnyNode.php#L505">http://trac.dey.fcny.org/browser/fcnyl3/lib/fcnyNode.php#L505</A>
It's a bit mind-bending, but the general idea is to move the set you
are working with out of the tree, move the nodes around (update the
left and right values) within the set, and then move the reorganized
set back into its old place in the tree.

In practice, it might not be that big a deal to leave them out of
order and use an ORDER BY clause to sort the categories at runtime.

Chris Snyder
<A HREF="http://chxor.chxo.com/">http://chxor.chxo.com/</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="026340.html">[nycphp-talk] nested set tree sorting
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26339">[ date ]</a>
              <a href="thread.html#26339">[ thread ]</a>
              <a href="subject.html#26339">[ subject ]</a>
              <a href="author.html#26339">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
