<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] preventing randomized session variable from	changing	when page is refreshed
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2008-August/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20preventing%20randomized%20session%20variable%20from%09changing%0A%09when%20page%20is%20refreshed&In-Reply-To=%3C48AC7D48.6070209%40bzcode.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026558.html">
   <LINK REL="Next"  HREF="026560.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] preventing randomized session variable from	changing	when page is refreshed</H1>
    <B>bzcoder</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20preventing%20randomized%20session%20variable%20from%09changing%0A%09when%20page%20is%20refreshed&In-Reply-To=%3C48AC7D48.6070209%40bzcode.com%3E"
       TITLE="[nycphp-talk] preventing randomized session variable from	changing	when page is refreshed">bzcoder at bzcode.com
       </A><BR>
    <I>Wed Aug 20 16:23:36 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="026558.html">[nycphp-talk] preventing randomized session variable from	changing	when page is refreshed
</A></li>
        <LI>Next message: <A HREF="026560.html">[nycphp-talk] preventing randomized session variable from changing	when page is refreshed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26559">[ date ]</a>
              <a href="thread.html#26559">[ thread ]</a>
              <a href="subject.html#26559">[ subject ]</a>
              <a href="author.html#26559">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Kristina Anderson wrote:
&gt;<i> That's what I want to do, but I need to prevent the value of session id 
</I>&gt;<i> from changing if for some reason they revisit or refresh the index.php 
</I>&gt;<i> page...as that is where the value is created.
</I>&gt;<i>
</I>&gt;<i> I've seen discussions on here about populating a hidden field and then 
</I>&gt;<i> testing that to see if it's not empty as a way to handle this, I think. 
</I>&gt;<i>
</I>&gt;<i>   
</I>
Well, first off you can take a minimal step towards avoiding session 
fixation[someone sending someone to your website with a made up session 
id in the url, thus they now know what the session is] by using:

session_start();

if (!isset($_SESSION['initiated']))
{
    session_regenerate_id();
    $_SESSION['initiated'] = true;

}


from <A HREF="http://phpsec.org/projects/guide/4.html">http://phpsec.org/projects/guide/4.html</A>

This doesn't prevent all session fixation attacks, as the attacker can 
still initialize a legitimate session and then send the user to your 
site, but it does stop the easy ones - while at the same time solving 
your problem[when you create a session id on index.php you set a session 
variable. Than on subsequent loads of the index page, if that variable 
is set they will keep the same id they had].

You can also go further and whenever the person does something on the 
site that is meaningful[for example, adds something to the shopping 
cart] you can regenerate the session id, giving them a new one that now 
no attacker knows.

Since your putting some work into handling sessions, check out the rest 
of the page for how to deal with minimizing session hijacking as well.




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026558.html">[nycphp-talk] preventing randomized session variable from	changing	when page is refreshed
</A></li>
	<LI>Next message: <A HREF="026560.html">[nycphp-talk] preventing randomized session variable from changing	when page is refreshed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26559">[ date ]</a>
              <a href="thread.html#26559">[ thread ]</a>
              <a href="subject.html#26559">[ subject ]</a>
              <a href="author.html#26559">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
