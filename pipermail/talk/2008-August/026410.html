<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Switching Forth and Back Between HTTP and HTTPS
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2008-August/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Switching%20Forth%20and%20Back%20Between%20HTTP%20and%20HTTPS&In-Reply-To=%3C78c6bd860808101652y5dec8ffax63d9083bf6e38172%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026405.html">
   <LINK REL="Next"  HREF="026412.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Switching Forth and Back Between HTTP and HTTPS</H1>
    <B>Michael B Allen</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Switching%20Forth%20and%20Back%20Between%20HTTP%20and%20HTTPS&In-Reply-To=%3C78c6bd860808101652y5dec8ffax63d9083bf6e38172%40mail.gmail.com%3E"
       TITLE="[nycphp-talk] Switching Forth and Back Between HTTP and HTTPS">ioplex at gmail.com
       </A><BR>
    <I>Sun Aug 10 19:52:17 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="026405.html">[nycphp-talk] Switching Forth and Back Between HTTP and HTTPS
</A></li>
        <LI>Next message: <A HREF="026412.html">[nycphp-talk] Switching Forth and Back Between HTTP and HTTPS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26410">[ date ]</a>
              <a href="thread.html#26410">[ thread ]</a>
              <a href="subject.html#26410">[ subject ]</a>
              <a href="author.html#26410">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, Aug 10, 2008 at 2:41 PM, John Campbell &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">jcampbell1 at gmail.com</A>&gt; wrote:
&gt;&gt;<i>  How do you handle this scenario?
</I>&gt;<i>
</I>&gt;<i> I looked at what amazon.com does and assumed they have it right.  The
</I>&gt;<i> only process that is https is the checkout process.  Once you enter
</I>&gt;<i> the checkout process, there are essentially zero links on the https
</I>&gt;<i> pages.
</I>&gt;<i>
</I>&gt;<i> I feel that once someone clicks &quot;checkout&quot;, there should be zero
</I>&gt;<i> distractions.  Amazon does a really good job with this; most of the
</I>&gt;<i> airlines have checkout processes that include unnecessary stuff like
</I>&gt;<i> site navigation.
</I>&gt;<i>
</I>&gt;<i> This doesn't really answer your question, but if the checkout process
</I>&gt;<i> is really simple, the problem of http/https switching tends to go
</I>&gt;<i> away.
</I>
The &quot;no distractions&quot; method is pretty much what my current site does.

But now I'm developing a generic framework and my new site will have
other pages aside from the cart that need to be protected. So I'm
trying to normalize things a little. I'd rather not use an application
specific solution.

I'm starting to think that the redirect technique is the way to go
since it can be cleanly implemented (see pseudo code below) in the
bootstrap orthogonally to everything else and can give total
separation regarding host, cookies sessions and so on if security is
critical.

$https_routes = array(
    'cart' =&gt; true,
    'account/logon' =&gt; true,
    'contacts' =&gt; true,
);
$scheme = false;
if (does_request_target_match_route($https_routes)) {
    if (!is_https()) {
        $scheme = '<A HREF="https://">https://</A>';
    }
} else {
    if (is_https()) {
        $scheme = '<A HREF="http://">http://</A>';
    }
}
if ($scheme) {
    header('Location: ' . rebuild_url_with_new_scheme($scheme));
    exit();
}

Mike

-- 
Michael B Allen
PHP Active Directory SPNEGO SSO
<A HREF="http://www.ioplex.com/">http://www.ioplex.com/</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026405.html">[nycphp-talk] Switching Forth and Back Between HTTP and HTTPS
</A></li>
	<LI>Next message: <A HREF="026412.html">[nycphp-talk] Switching Forth and Back Between HTTP and HTTPS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26410">[ date ]</a>
              <a href="thread.html#26410">[ thread ]</a>
              <a href="subject.html#26410">[ subject ]</a>
              <a href="author.html#26410">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
