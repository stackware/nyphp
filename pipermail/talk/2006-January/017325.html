<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] An Email Architecture Puzzle
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2006-January/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20An%20Email%20Architecture%20Puzzle&In-Reply-To=%3C20060123004239.GJ12736%40desario.homelinux.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017312.html">
   <LINK REL="Next"  HREF="017329.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] An Email Architecture Puzzle</H1>
    <B>Andrew Yochum</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20An%20Email%20Architecture%20Puzzle&In-Reply-To=%3C20060123004239.GJ12736%40desario.homelinux.net%3E"
       TITLE="[nycphp-talk] An Email Architecture Puzzle">andrew at plexpod.com
       </A><BR>
    <I>Sun Jan 22 19:42:40 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="017312.html">[nycphp-talk] An Email Architecture Puzzle
</A></li>
        <LI>Next message: <A HREF="017329.html">[nycphp-talk] An Email Architecture Puzzle
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17325">[ date ]</a>
              <a href="thread.html#17325">[ thread ]</a>
              <a href="subject.html#17325">[ subject ]</a>
              <a href="author.html#17325">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, Jan 21, 2006 at 11:13:17AM -0500, csnyder wrote:
&gt;<i> On 1/13/06, Andrew Yochum &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">andrew at plexpod.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; Configure your SMTP server or procmail to filter all email through a PHP
</I>&gt;<i> &gt; script.  Parse, munge (like adding a tracking number to the subject),
</I>&gt;<i> &gt; store it in your DB &amp; pass it through to the recipient.  This is much
</I>&gt;<i> &gt; the same way many spam filters and email-based help desk apps work...
</I>&gt;<i> &gt; and CLEW.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; HTH,
</I>&gt;<i> &gt; Andrew
</I>&gt;<i> 
</I>&gt;<i> Sorry to jump in so late on this, had my head down this week.
</I>&gt;<i> 
</I>&gt;<i> I like this approach because it adds a header which can be used by the
</I>&gt;<i> recipient of the email to verify that it was assigned to the proper
</I>&gt;<i> job. You could also add a footer to &quot;unassigned&quot; messages, to include
</I>&gt;<i> a link to the assignment interface.
</I>&gt;<i> 
</I>&gt;<i> For efficiency's sake, I might opt for a different system, using an
</I>&gt;<i> IMAP mailbox so that the messages could queue under heavy load without
</I>&gt;<i> affecting the timely delivery of mail. Your PHP app would simply read
</I>&gt;<i> its inbox every so often, process any new messages, and either delete
</I>&gt;<i> them or move them to one or more folders within the mailbox based on
</I>&gt;<i> how they are assigned (or not assigned).
</I>&gt;<i> 
</I>&gt;<i> There is a nice tradeoff here which can help you decide: pass-through
</I>&gt;<i> SMTP has fewer moving parts, whereas IMAP queueing has fault tolerance
</I>&gt;<i> and a built-in message store.
</I>
I like the IMAP idea.  However, the delayed/queuing nature of it has the
downside of not allow you to drop in the connective tissue (header
and/or body tags) to messages on-the-fly before they're delivered.

Regular subjects and message IDs/in-reply-to headers can help
thread stuff for the IMAP config, but from what I've seen it helps to
build in your own for these kinds of apps.

If you're dealing with high volumes, speed is a concern and the setup
time of your mail filter is a hinderance... run it as a daemon.  Your
actual filter can be very light weight and just connect to the daemon
over unix or tcp sockets.  And you get a way to scale the app at the
same time.

Andrew

-- 
Andrew Yochum
Plexpod
<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">andrew at plexpod.com</A>
718-360-0879

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017312.html">[nycphp-talk] An Email Architecture Puzzle
</A></li>
	<LI>Next message: <A HREF="017329.html">[nycphp-talk] An Email Architecture Puzzle
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17325">[ date ]</a>
              <a href="thread.html#17325">[ thread ]</a>
              <a href="subject.html#17325">[ subject ]</a>
              <a href="author.html#17325">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
