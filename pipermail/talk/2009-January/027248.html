<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] escapeshellcmd stupidity?
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2009-January/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20escapeshellcmd%20stupidity%3F&In-Reply-To=%3C495E7B17.9020908%40polymerdb.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027247.html">
   <LINK REL="Next"  HREF="027249.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] escapeshellcmd stupidity?</H1>
    <B>Allen Shaw</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20escapeshellcmd%20stupidity%3F&In-Reply-To=%3C495E7B17.9020908%40polymerdb.org%3E"
       TITLE="[nycphp-talk] escapeshellcmd stupidity?">ashaw at polymerdb.org
       </A><BR>
    <I>Fri Jan  2 15:37:43 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="027247.html">[nycphp-talk] escapeshellcmd stupidity?
</A></li>
        <LI>Next message: <A HREF="027249.html">[nycphp-talk] escapeshellcmd stupidity?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27248">[ date ]</a>
              <a href="thread.html#27248">[ thread ]</a>
              <a href="subject.html#27248">[ subject ]</a>
              <a href="author.html#27248">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Chris,

Thanks for your helpful input. Some follow-up from me:

csnyder wrote:
&gt;<i>  Allen Shaw wrote:
</I>&gt;<i> &gt; Can anyone here comment on the wisdom of relying on
</I>&gt;<i> &gt; escapeshellcmd() in a situation like this? ...
</I>&gt;<i>
</I>&gt;<i>  First, escapeshellarg() is more specific, and therefore *possibly*
</I>&gt;<i>  safer. Rather than escaping the whole thing, just escape the user
</I>&gt;<i>  input.
</I>
In my case, I'm passing multiple arguments, but I'm now regexing them 
apart into separate arguments, so escapeshellarg() does work. For 
forward compat with the wrapped shell script, I'm hoping to avoid 
checking for valid arguments and instead just escaping each argument and 
letting the shell script do its own checking.

&gt;<i>  Second, it would be MUCH safer to determine an acceptable range of
</I>&gt;<i>  possibilities for the user input... In your case you want to pass
</I>&gt;<i>  arbitrary strings, so validation becomes more difficult. You could
</I>&gt;<i>  still validate the input so that it only contains printable ascii and
</I>&gt;<i>  simple punctuation, no unprintable characters or newlines or any of
</I>&gt;<i>  that.
</I>Okay, good thought. For this I'll remove the first 32 non-printing ASCII 
chars, and DEL:
&lt;?
$user_input = preg_replace('/[\000-\037\127]/', '', $user_input);
?&gt;

If I'm thinking straight, the above will strip most obviously useless 
chars but still allow lots of chars (e.g. i18n stuff) that I'll never be 
able to whitelist.

Thanks again for your input.

- Allen
-- 
Allen Shaw, UPF Data Services
<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">ashaw at upf.org</A> | 914.826.4622 | <A HREF="http://www.upf.org">http://www.upf.org</A>

-- 
Allen Shaw
slidePresenter (<A HREF="http://slides.sourceforge.net">http://slides.sourceforge.net</A>)



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027247.html">[nycphp-talk] escapeshellcmd stupidity?
</A></li>
	<LI>Next message: <A HREF="027249.html">[nycphp-talk] escapeshellcmd stupidity?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27248">[ date ]</a>
              <a href="thread.html#27248">[ thread ]</a>
              <a href="subject.html#27248">[ subject ]</a>
              <a href="author.html#27248">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
