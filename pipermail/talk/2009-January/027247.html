<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] escapeshellcmd stupidity?
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2009-January/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20escapeshellcmd%20stupidity%3F&In-Reply-To=%3Cb76252690901021024h3e51e44dvc03e5477d85b1b70%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027246.html">
   <LINK REL="Next"  HREF="027248.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] escapeshellcmd stupidity?</H1>
    <B>csnyder</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20escapeshellcmd%20stupidity%3F&In-Reply-To=%3Cb76252690901021024h3e51e44dvc03e5477d85b1b70%40mail.gmail.com%3E"
       TITLE="[nycphp-talk] escapeshellcmd stupidity?">chsnyder at gmail.com
       </A><BR>
    <I>Fri Jan  2 13:24:23 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="027246.html">[nycphp-talk] escapeshellcmd stupidity?
</A></li>
        <LI>Next message: <A HREF="027248.html">[nycphp-talk] escapeshellcmd stupidity?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27247">[ date ]</a>
              <a href="thread.html#27247">[ thread ]</a>
              <a href="subject.html#27247">[ subject ]</a>
              <a href="author.html#27247">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, Jan 2, 2009 at 12:05 PM, Allen Shaw &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">ashaw at polymerdb.org</A>&gt; wrote:

&gt;<i> Can anyone here comment on the wisdom of relying on escapeshellcmd() in a
</I>&gt;<i> situation like this?  For example:
</I>&gt;<i> &lt;?
</I>&gt;<i>   $script_path = '/path/to/shell/script';
</I>&gt;<i>   shell_exec(escapeshellcmd(&quot;$script_path {$_POST['user_input']}&quot;));
</I>&gt;<i> ?&gt;
</I>&gt;<i>
</I>&gt;<i> It looks right to me, and I've confirmed that it &quot;works,&quot; but I can't test
</I>&gt;<i> to confirm it's &quot;safe.&quot;  I'd appreciate it if someone more experienced could
</I>&gt;<i> tell me if this is just a Bad Idea.
</I>&gt;<i>
</I>
First, escapeshellarg() is more specific, and therefore *possibly*
safer. Rather than escaping the whole thing, just escape the user
input.

Second, it would be MUCH safer to determine an acceptable range of
possibilities for the user input, or a pattern (regex or otherwise)
that it should match before being passed to the shell. In other words,
validate the input first, and then filter it when you pass it to the
shell.

In your case you want to pass arbitrary strings, so validation becomes
more difficult. You could still validate the input so that it only
contains printable ascii and simple punctuation, no unprintable
characters or newlines or any of that.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027246.html">[nycphp-talk] escapeshellcmd stupidity?
</A></li>
	<LI>Next message: <A HREF="027248.html">[nycphp-talk] escapeshellcmd stupidity?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27247">[ date ]</a>
              <a href="thread.html#27247">[ thread ]</a>
              <a href="subject.html#27247">[ subject ]</a>
              <a href="author.html#27247">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
