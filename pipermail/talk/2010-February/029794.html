<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Best way to accomplish this task
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2010-February/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Best%20way%20to%20accomplish%20this%20task&In-Reply-To=%3C22.EA.04308.C1FA87B4%40hrndva-omtalb.mail.rr.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029793.html">
   <LINK REL="Next"  HREF="029790.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Best way to accomplish this task</H1>
    <B>Michele Waldman</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Best%20way%20to%20accomplish%20this%20task&In-Reply-To=%3C22.EA.04308.C1FA87B4%40hrndva-omtalb.mail.rr.com%3E"
       TITLE="[nycphp-talk] Best way to accomplish this task">mmwaldman at nyc.rr.com
       </A><BR>
    <I>Sun Feb 14 21:19:12 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="029793.html">[nycphp-talk] Best way to accomplish this task
</A></li>
        <LI>Next message: <A HREF="029790.html">[nycphp-talk] Best way to accomplish this task
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29794">[ date ]</a>
              <a href="thread.html#29794">[ thread ]</a>
              <a href="subject.html#29794">[ subject ]</a>
              <a href="author.html#29794">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Anthony,
 
I'd have to actually look, but you may be able to kick the process off with
a system command and grab the process id at the same time.
 
Or kick the process off with some unique id that will help you grab the
exact process id after the fact.
 
One of the other guys, may have a more practice approach to this.

Michele


  _____  

From: <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk-bounces at lists.nyphp.org</A> [mailto:<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk-bounces at lists.nyphp.org</A>] On
Behalf Of Michele Waldman
Sent: Sunday, February 14, 2010 9:11 PM
To: 'NYPHP Talk'
Subject: Re: [nycphp-talk] Best way to accomplish this task


Anthony,
 
I'd actually have to put some real thought into it.  I'm watching tv.
 
But, I think a timestamp would actually be ugly.
 
Some random id doesn't really tell you anything.
 
When I work with shell scripts, I actually capture the process id.
 
Then if the records are unprocessed and the process id is not running, then
I'd reprocess.
 
For some backend jobs, I use php.  Other times, I use bash or some other
scripting language.
 
That's actually what I believe the correct process is.  As jobs grow time
can grow as well, time stamps are not reliable.
 
Michele
 


  _____  

From: <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk-bounces at lists.nyphp.org</A> [mailto:<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk-bounces at lists.nyphp.org</A>] On
Behalf Of Anthony Papillion
Sent: Sunday, February 14, 2010 9:00 PM
To: NYPHP Talk
Subject: Re: [nycphp-talk] Best way to accomplish this task


Michele,
 
Thank you for your input. I'm glad I seem to be on the right track here and
I'm curious about what others might think of this method of walking the
database too.
 
I hadn't thought about the additional logic part in the event of an error.
How would you propose that be handled? Perhaps a 'current time' field that's
updated after each operation?  We could assume that a 'current time' that's
more than, say 15 minutes, is an indication of the row needing to be
processed even though the status might be 'processing'. What do you think
about that?
 
Thanks,
Anthony

----- Original Message ----- 
From: Michele Waldman 
To: 'NYPHP Talk' 
Sent: Sunday, February 14, 2010 7:55 PM
Subject: Re: [nycphp-talk] Best way to accomplish this task


As I was reading, I was thinking that would be my approach.

I'm not seeing anything ugly about it.  Records being processed should have
a status as such.

You might have some additional logic, that picks up records in the event one
of the processes fail for some reason.   Sever goes down or some one
accidently kills the process, etc.

We'll see what the other folks think.

Michele



From: <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk-bounces at lists.nyphp.org</A> [mailto:<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk-bounces at lists.nyphp.org</A>] On
Behalf Of Anthony Papillion
Sent: Sunday, February 14, 2010 8:50 PM
To: 'NYPHP Talk'
Subject: [nycphp-talk] Best way to accomplish this task


Hello Everyone,

I'm designing a system that will work on a schedule. Users will submit data
for processing into the database and then, every minute, a PHP script will
pass through the db looking for unprocessed rows (marked pending) and
process them.

The problem is, I may eventually have a few million records to process at a
time. Each record could take anywhere from a few seconds to a few minutes to
perform the required operations on. My concern is making sure that the
script, on the next scheduled pass, doesn't grab the records currently being
processed and start processing them again.

Right now, I'm thinking of accomplishing this by updating a 'status' field
in the database. So unprocessed records would have a status of 'pending',
records being processed would have a status of 'processing' and completly
processed record will have a status of 'complete'.

For some reason, I see this as ugly but that's the only way I can think of
making sure that records aren't duplicatly processed. So when I select
records to process, I'm ONLY selecting one's with the status of 'pending'
which means they are new, unprocessed.

Is there a better, more eleqent way of doing this or is this pretty much it?

Thanks!
Anthony Papillion



_______________________________________________
New York PHP Users Group Community Talk Mailing List
<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>

<A HREF="http://www.nyphp.org/Show-Participation">http://www.nyphp.org/Show-Participation</A>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.nyphp.org/pipermail/talk/attachments/20100214/b7330a72/attachment.html">http://lists.nyphp.org/pipermail/talk/attachments/20100214/b7330a72/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029793.html">[nycphp-talk] Best way to accomplish this task
</A></li>
	<LI>Next message: <A HREF="029790.html">[nycphp-talk] Best way to accomplish this task
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29794">[ date ]</a>
              <a href="thread.html#29794">[ thread ]</a>
              <a href="subject.html#29794">[ subject ]</a>
              <a href="author.html#29794">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
