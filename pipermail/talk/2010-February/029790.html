<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Best way to accomplish this task
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2010-February/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Best%20way%20to%20accomplish%20this%20task&In-Reply-To=%3Ca35950461002141756l7a115ebal7bee45a12d7b3707%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029794.html">
   <LINK REL="Next"  HREF="029792.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Best way to accomplish this task</H1>
    <B>Andy Dirnberger</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Best%20way%20to%20accomplish%20this%20task&In-Reply-To=%3Ca35950461002141756l7a115ebal7bee45a12d7b3707%40mail.gmail.com%3E"
       TITLE="[nycphp-talk] Best way to accomplish this task">dirn at dirnonline.com
       </A><BR>
    <I>Sun Feb 14 20:56:12 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="029794.html">[nycphp-talk] Best way to accomplish this task
</A></li>
        <LI>Next message: <A HREF="029792.html">[nycphp-talk] Best way to accomplish this task
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29790">[ date ]</a>
              <a href="thread.html#29790">[ thread ]</a>
              <a href="subject.html#29790">[ subject ]</a>
              <a href="author.html#29790">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, Feb 14, 2010 at 8:49 PM, Anthony Papillion &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">papillion at gmail.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> Hello Everyone,
</I>&gt;<i>
</I>&gt;<i> I'm designing a system that will work on a schedule. Users will submit data for processing into the database and then, every minute, a PHP script will pass through the db looking for unprocessed rows (marked pending) and process them.
</I>&gt;<i>
</I>&gt;<i> The problem is, I may eventually have a few million records to process at a time. Each record could take anywhere from a few seconds to a few minutes to perform the required operations on. My concern is making sure that the script, on the next scheduled pass, doesn't grab the records currently being processed and start processing them again.
</I>&gt;<i>
</I>&gt;<i> Right now, I'm thinking of accomplishing this by updating a 'status' field in the database. So unprocessed records would have a status of 'pending', records being processed would have a status of 'processing' and completly processed record will have a status of 'complete'.
</I>&gt;<i>
</I>&gt;<i> For some reason, I see this as ugly but that's the only way I can think of making sure that records aren't duplicatly processed. So when I select records to process, I'm ONLY selecting one's with the status of 'pending' which means they are new, unprocessed.
</I>&gt;<i>
</I>&gt;<i> Is there a better, more eleqent way of doing this or is this pretty much it?
</I>&gt;<i>
</I>&gt;<i> Thanks!
</I>&gt;<i> Anthony Papillion
</I>
I would generate a unique value for each pass (whether that's an auto
increment field in a table, a UUID, or something else is up to you). I
would add a field to your table(s), just like you were going to do
with status, to store this value.

When processing, do something along the lines of UPDATE table SET
new_field = unique_value WHERE new_field IS NULL (make sure new_field
is indexed). Then you process any records with a matching value in the
new field. This also has the benefit that, should a pass fail, you can
identify which records were part of that pass.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029794.html">[nycphp-talk] Best way to accomplish this task
</A></li>
	<LI>Next message: <A HREF="029792.html">[nycphp-talk] Best way to accomplish this task
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29790">[ date ]</a>
              <a href="thread.html#29790">[ thread ]</a>
              <a href="subject.html#29790">[ subject ]</a>
              <a href="author.html#29790">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
