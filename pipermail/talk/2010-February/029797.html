<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Best way to accomplish this task
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2010-February/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Best%20way%20to%20accomplish%20this%20task&In-Reply-To=%3C4bffc351002141935t61f00551se476c4eef683e878%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029796.html">
   <LINK REL="Next"  HREF="029798.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Best way to accomplish this task</H1>
    <B>Gary Mort</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Best%20way%20to%20accomplish%20this%20task&In-Reply-To=%3C4bffc351002141935t61f00551se476c4eef683e878%40mail.gmail.com%3E"
       TITLE="[nycphp-talk] Best way to accomplish this task">garyamort at gmail.com
       </A><BR>
    <I>Sun Feb 14 22:35:23 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="029796.html">[nycphp-talk] Best way to accomplish this task
</A></li>
        <LI>Next message: <A HREF="029798.html">[nycphp-talk] Best way to accomplish this task
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29797">[ date ]</a>
              <a href="thread.html#29797">[ thread ]</a>
              <a href="subject.html#29797">[ subject ]</a>
              <a href="author.html#29797">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>First off, always process in the smallest increment you can.  So don't grab
EVERY row, just grab ONE row and process it, then grab the next row and
process it... That allows you to run multiple, concurrent processors and
each one can grab the data they want.

Secondly....  there are many queing services already written,
<A HREF="http://en.wikipedia.org/wiki/Message_queue">http://en.wikipedia.org/wiki/Message_queue</A>

As an oddball idea, instead of using a database store, to add an item to the
queue, json encode it and email it to a special address on the processing
server(s)....then configure your mail server to trigger a PHP script for
each email received and process it from there.  Then your email server will
give you queueing for free..

On Sun, Feb 14, 2010 at 8:49 PM, Anthony Papillion &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">papillion at gmail.com</A>&gt;wrote:

&gt;<i>  Hello Everyone,
</I>&gt;<i>
</I>&gt;<i> I'm designing a system that will work on a schedule. Users will submit data
</I>&gt;<i> for processing into the database and then, every minute, a PHP script will
</I>&gt;<i> pass through the db looking for unprocessed rows (marked pending) and
</I>&gt;<i> process them.
</I>&gt;<i>
</I>&gt;<i> The problem is, I may eventually have a few million records to process at a
</I>&gt;<i> time. Each record could take anywhere from a few seconds to a few minutes to
</I>&gt;<i> perform the required operations on. My concern is making sure that the
</I>&gt;<i> script, on the next scheduled pass, doesn't grab the records currently being
</I>&gt;<i> processed and start processing them again.
</I>&gt;<i>
</I>&gt;<i> Right now, I'm thinking of accomplishing this by updating a 'status' field
</I>&gt;<i> in the database. So unprocessed records would have a status of 'pending',
</I>&gt;<i> records being processed would have a status of 'processing' and completly
</I>&gt;<i> processed record will have a status of 'complete'.
</I>&gt;<i>
</I>&gt;<i> For some reason, I see this as ugly but that's the only way I can think of
</I>&gt;<i> making sure that records aren't duplicatly processed. So when I select
</I>&gt;<i> records to process, I'm ONLY selecting one's with the status of 'pending'
</I>&gt;<i> which means they are new, unprocessed.
</I>&gt;<i>
</I>&gt;<i> Is there a better, more eleqent way of doing this or is this pretty much
</I>&gt;<i> it?
</I>&gt;<i>
</I>&gt;<i> Thanks!
</I>&gt;<i> Anthony Papillion
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> New York PHP Users Group Community Talk Mailing List
</I>&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.nyphp.org/Show-Participation">http://www.nyphp.org/Show-Participation</A>
</I>&gt;<i>
</I>


-- 
----
Hudson Valley Sudbury School
What GPL is for application users
Our school is for students
Help your children grow, change, and learn
Let your child direct, control, amend
Check out <A HREF="http://www.sudburyschool.org">http://www.sudburyschool.org</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.nyphp.org/pipermail/talk/attachments/20100214/cff583c3/attachment.html">http://lists.nyphp.org/pipermail/talk/attachments/20100214/cff583c3/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029796.html">[nycphp-talk] Best way to accomplish this task
</A></li>
	<LI>Next message: <A HREF="029798.html">[nycphp-talk] Best way to accomplish this task
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29797">[ date ]</a>
              <a href="thread.html#29797">[ thread ]</a>
              <a href="subject.html#29797">[ subject ]</a>
              <a href="author.html#29797">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
