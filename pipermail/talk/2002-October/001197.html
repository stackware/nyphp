<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Building trees
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2002-October/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Building%20trees&In-Reply-To=%3C20021016195629.GG23049%40eye.surgam.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000943.html">
   <LINK REL="Next"  HREF="001198.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Building trees</H1>
    <B>Adam Fields</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Building%20trees&In-Reply-To=%3C20021016195629.GG23049%40eye.surgam.net%3E"
       TITLE="[nycphp-talk] Building trees">fields at surgam.net
       </A><BR>
    <I>Wed Oct 16 15:56:30 EDT 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="000943.html">[nycphp-talk] find php script
</A></li>
        <LI>Next message: <A HREF="001198.html">[nycphp-talk] Building trees
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1197">[ date ]</a>
              <a href="thread.html#1197">[ thread ]</a>
              <a href="subject.html#1197">[ subject ]</a>
              <a href="author.html#1197">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Oct 16, 2002 at 03:09:17PM -0400, Jim Hendricks wrote:
&gt;<i> I'm thinking now along the lines of adding a tierlevel field to my table 
</I>&gt;<i> design.  In that way I can do 1 query for each tier. Like:
</I>&gt;<i> 
</I>&gt;<i> // get top tier
</I>&gt;<i> $oRS1 = mysql_query(&quot;SELECT ID, Name FROM Projects WHERE TierLevel = 1 
</I>&gt;<i> ORDER BY Name&quot;) ;
</I>&gt;<i> // get second tier
</I>&gt;<i> $oRS2 = mysql_query(&quot;SELECT ParentID, ID, Name FROM Projects WHERE 
</I>&gt;<i> TierLevel = 2 ORDER BY ParentID, Name&quot;) ;
</I>&gt;<i> // get third tier
</I>&gt;<i> $oRS2 = mysql_query(&quot;SELECT ParentID, ID, Name FROM Projects WHERE 
</I>&gt;<i> TierLevel = 3 ORDER BY ParentID, Name&quot;) ;
</I>&gt;<i> // get fourth tier
</I>&gt;<i> $oRS2 = mysql_query(&quot;SELECT ParentID, ID, Name FROM Projects WHERE 
</I>&gt;<i> TierLevel = 4 ORDER BY ParentID, Name&quot;) ;
</I>&gt;<i> 
</I>&gt;<i> Now as I iterate through $oRS1, display Name, I then look at $oRS2, if 
</I>&gt;<i> oRS2.ParentID == oRS1.ID, then dip down into iterating $oRS2 until the 
</I>&gt;<i> ParentID == something other than oRS1.ID.  At each level the logic would 
</I>&gt;<i> be the same.
</I>
I'd wrap a class around the whole thing. Use that class to broker
reads and writes to the tree table. Add a &quot;changed&quot; timestamp to the
tree, and have a read from the class only reload the tree from the
database if it's changed since the last read. Stash the object in the
session for reuse, or serialize it to another table (or file, or
whatever) for quick retrieval.

&gt;<i> This would require 1 query per level, and it would require choosing a 
</I>&gt;<i> maximum tree depth at design time.  The code might even be simple enough 
</I>&gt;<i> to write through a recursive algorithm, although I have yet to attempt 
</I>&gt;<i> any recursing in PHP so I'm ignorant if this would be the easiest and 
</I>&gt;<i> cleanest way to do it.
</I>&gt;<i> 
</I>&gt;<i> Figuring out the level at the time a Project is saved is simple since I 
</I>&gt;<i> have a parent ID, I can walk the tree backwards until I get a 0 ParentID 
</I>&gt;<i> ( 0 is not a legal ProjectID in my design ).  The number of queries I 
</I>&gt;<i> had to do plus one would be the level of this new item.
</I>
You don't even have to do that. You can just take the level of the
parent node + 1.

&gt;<i> What think ye all?
</I>


-- 
				- Adam

-----
Adam Fields, Managing Partner, <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">fields at surgam.net</A>
Surgam, Inc. is a technology consulting firm with strong background in
delivering scalable and robust enterprise web and IT applications.
<A HREF="http://www.adamfields.com">http://www.adamfields.com</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000943.html">[nycphp-talk] find php script
</A></li>
	<LI>Next message: <A HREF="001198.html">[nycphp-talk] Building trees
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1197">[ date ]</a>
              <a href="thread.html#1197">[ thread ]</a>
              <a href="subject.html#1197">[ subject ]</a>
              <a href="author.html#1197">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
