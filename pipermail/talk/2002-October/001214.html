<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Building trees
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2002-October/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Building%20trees&In-Reply-To=%3C3DADF84E.5000306%40bizcomputinginc.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001213.html">
   <LINK REL="Next"  HREF="001215.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Building trees</H1>
    <B>Jim Hendricks(Biz Computing)</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Building%20trees&In-Reply-To=%3C3DADF84E.5000306%40bizcomputinginc.com%3E"
       TITLE="[nycphp-talk] Building trees">jim at bizcomputinginc.com
       </A><BR>
    <I>Wed Oct 16 19:37:50 EDT 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="001213.html">[nycphp-talk] Building trees
</A></li>
        <LI>Next message: <A HREF="001215.html">[nycphp-talk] Building trees
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1214">[ date ]</a>
              <a href="thread.html#1214">[ thread ]</a>
              <a href="subject.html#1214">[ subject ]</a>
              <a href="author.html#1214">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Agreed that session variables aren't stored in memory between pages, but 
they are fully in memory for the life of every page while the session 
variable exists.  And as a session variable, the space would be consumed 
for each page currently being processed, so for 5 active connections, 
you would have 5 copies in memory.  I've seen discussion of a static 
memory area that can be used to simulate application scoped variables, 
but from what I've seen so far, that solution doesn't seem ready for 
primetime.  By storing the tree in a table, I eliminate the memory 
requirments, It would only be in memory when I need to display the tree 
&amp; will build the display.  The table version of the tree would also be 
very simple since I don't need any linking information, just a key field 
to ensure the proper sortation, and depth indicator so I know how far to 
indent or what graphics to display etc.  

Lastly, from a memory standpoint, I have been burned too many times by 
knowing I work within a constrained environment but then design with 
false assumptions.  Here the assumption is that the memory for the class 
is not that much and that the total size of the tree will not be that 
great.  The first assumption could be answered by the php team, or 
someone else familure with the php memory model and therefore would no 
longer be an assumption.  The second assumption cannot be answered 
without putting a limit on the number of total items to be handled. 
 Putting a limit then creates the next assumption and that is choosing a 
limit everyone can live with for the life of the app ( with the 
assumption as to how long that life is ).  All these assumptions scare 
the crap out of me as a professional software developer because Mr. 
Murphy will screw me in the end.

Please don't take this as a flame, I think you have a great idea, just 
not an idea I think will fit in with what I am comfortable with.

Jim

Adam Fields wrote:

&gt;<i>On Wed, Oct 16, 2002 at 05:40:53PM -0400, Jim Hendricks wrote:
</I>&gt;<i>  
</I>&gt;<i>
</I>&gt;&gt;<i>The other reason for avoiding this is my Host Provider would croak if I 
</I>&gt;&gt;<i>build too much in memory thus hogging the memory shared across many 
</I>&gt;&gt;<i>sites.  I avoid as much memory use as I can so when I really need it 
</I>&gt;&gt;<i>it's available.
</I>&gt;&gt;<i>    
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>Seems reasonable. I don't know how much memory overhead the class
</I>&gt;<i>implementation adds. I wouldn't think too much. Anyone?
</I>&gt;<i>
</I>&gt;<i>Even session variables aren't stored in memory though - they're
</I>&gt;<i>written out to temp space on disk (at least, that's how I read the
</I>&gt;<i>docs).
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>&gt;&gt;<i>Adam Fields wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>On Wed, Oct 16, 2002 at 04:22:11PM -0400, Jim Hendricks wrote:
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>      
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>Adam Fields wrote:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>   
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>        
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>I'd wrap a class around the whole thing. Use that class to broker
</I>&gt;&gt;&gt;&gt;&gt;<i>reads and writes to the tree table. Add a &quot;changed&quot; timestamp to the
</I>&gt;&gt;&gt;&gt;&gt;<i>tree, and have a read from the class only reload the tree from the
</I>&gt;&gt;&gt;&gt;&gt;<i>database if it's changed since the last read. Stash the object in the
</I>&gt;&gt;&gt;&gt;&gt;<i>session for reuse, or serialize it to another table (or file, or
</I>&gt;&gt;&gt;&gt;&gt;<i>whatever) for quick retrieval.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>     
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>          
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>I don't know about the class thing since it adds a level of complexity 
</I>&gt;&gt;&gt;&gt;<i>to the code that I don't know
</I>&gt;&gt;&gt;&gt;<i>if it's waranted.  
</I>&gt;&gt;&gt;&gt;<i>   
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>        
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>I would argue that this will actually make the majority of your code
</I>&gt;&gt;&gt;<i>simpler, because you're encapsulating the complexity. :)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>I'm the first to admit that classes aren't appropriate for everything,
</I>&gt;&gt;&gt;<i>but they're the right approach for this kind of stuff.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>I'd do something like this:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>class tree {
</I>&gt;&gt;&gt;<i>     var nodemap;
</I>&gt;&gt;&gt;<i>     # and whatever else you want
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>     function tree () {
</I>&gt;&gt;&gt;<i>     # maybe some init code
</I>&gt;&gt;&gt;<i>     }
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>     function get_tree () {
</I>&gt;&gt;&gt;<i>     # check if tree has changed or isn't populated yet
</I>&gt;&gt;&gt;<i>     # if yes to either, get tree from db
</I>&gt;&gt;&gt;<i>     # otherwise, maybe get tree from intermediate storage if you're
</I>&gt;&gt;&gt;<i>     doing that
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>     }
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>     function save_tree () {
</I>&gt;&gt;&gt;<i>     # write tree to db
</I>&gt;&gt;&gt;<i>     }
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>     function store_tree () {
</I>&gt;&gt;&gt;<i>     # write tree to intermediate storage
</I>&gt;&gt;&gt;<i>     }
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>     function render_tree () {
</I>&gt;&gt;&gt;<i>     # if tree isn't populated, get tree
</I>&gt;&gt;&gt;<i>     # output tree html or tree values or whatever
</I>&gt;&gt;&gt;<i>     }
</I>&gt;&gt;&gt;<i>     
</I>&gt;&gt;&gt;<i>     function get_tree_values () {
</I>&gt;&gt;&gt;<i>     # return raw node data for the tree
</I>&gt;&gt;&gt;<i>     }
</I>&gt;&gt;&gt;<i>}
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>Then, in your page:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>$mytree = new tree();
</I>&gt;&gt;&gt;<i>$mytree-&gt;render_tree();
</I>&gt;&gt;&gt;<i>or
</I>&gt;&gt;&gt;<i>$mytree-&gt;get_tree_values();
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>      
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>I do like the idea of caching the tree though.  I 
</I>&gt;&gt;&gt;&gt;<i>would cache it in the DB so that the
</I>&gt;&gt;&gt;&gt;<i>tree does not need to be generated at all when the request to display it 
</I>&gt;&gt;&gt;&gt;<i>occurs.  The tree would
</I>&gt;&gt;&gt;&gt;<i>be regenerated everytime a change occurs to the underlying data ( which 
</I>&gt;&gt;&gt;&gt;<i>is a low volume data set )
</I>&gt;&gt;&gt;&gt;<i>This may not be a good idea for items that have a higher change velocity.
</I>&gt;&gt;&gt;&gt;<i>   
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>        
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>While I wouldn't advocate this approach for something that changes
</I>&gt;&gt;&gt;<i>once a minute or so, if it changes less than once an hour, this will
</I>&gt;&gt;&gt;<i>probably still result in a performance gain, and it will be easier to
</I>&gt;&gt;&gt;<i>maintain.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>      
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.nyphp.org/pipermail/talk/attachments/20021016/92d12837/attachment.html">http://lists.nyphp.org/pipermail/talk/attachments/20021016/92d12837/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001213.html">[nycphp-talk] Building trees
</A></li>
	<LI>Next message: <A HREF="001215.html">[nycphp-talk] Building trees
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1214">[ date ]</a>
              <a href="thread.html#1214">[ thread ]</a>
              <a href="subject.html#1214">[ subject ]</a>
              <a href="author.html#1214">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
