<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Building trees
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2002-October/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Building%20trees&In-Reply-To=%3C20021017022354.GD22881%40eye.surgam.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001221.html">
   <LINK REL="Next"  HREF="001223.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Building trees</H1>
    <B>Adam Fields</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Building%20trees&In-Reply-To=%3C20021017022354.GD22881%40eye.surgam.net%3E"
       TITLE="[nycphp-talk] Building trees">fields at surgam.net
       </A><BR>
    <I>Wed Oct 16 22:23:54 EDT 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="001221.html">[nycphp-talk] Building trees
</A></li>
        <LI>Next message: <A HREF="001223.html">[nycphp-talk] Building trees
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1222">[ date ]</a>
              <a href="thread.html#1222">[ thread ]</a>
              <a href="subject.html#1222">[ subject ]</a>
              <a href="author.html#1222">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Oct 16, 2002 at 07:38:00PM -0400, Jim Hendricks wrote:
&gt;<i> Agreed that session variables aren't stored in memory between pages, but 
</I>&gt;<i> they are fully in memory for the life of every page while the session 
</I>&gt;<i> variable exists.  And as a session variable, the space would be consumed 
</I>&gt;<i> for each page currently being processed, so for 5 active connections, 
</I>&gt;<i> you would have 5 copies in memory.  I've seen discussion of a static 
</I>&gt;<i> memory area that can be used to simulate application scoped variables, 
</I>&gt;<i> but from what I've seen so far, that solution doesn't seem ready for 
</I>&gt;<i> primetime.  By storing the tree in a table, I eliminate the memory 
</I>&gt;<i> requirments, It would only be in memory when I need to display the tree 
</I>&gt;<i> &amp; will build the display.  The table version of the tree would also be 
</I>&gt;<i> very simple since I don't need any linking information, just a key field 
</I>&gt;<i> to ensure the proper sortation, and depth indicator so I know how far to 
</I>&gt;<i> indent or what graphics to display etc.  
</I>
Because there are no application scope variables or the like, I don't
think the decision of whether you do this with classes is mutually
exclusive with the above. You could wrap a class around it, and
serialize/deserialize the tree class to the database as easily as you
could (more easily, in fact, since PHP includes an object
serialization routine, if you wanted to go that route) with straight
db access. Anyway, I think we've beaten this one to death. Good luck!

&gt;<i> Lastly, from a memory standpoint, I have been burned too many times by 
</I>&gt;<i> knowing I work within a constrained environment but then design with 
</I>&gt;<i> false assumptions.  Here the assumption is that the memory for the class 
</I>&gt;<i> is not that much and that the total size of the tree will not be that 
</I>&gt;<i> great.  The first assumption could be answered by the php team, or 
</I>&gt;<i> someone else familure with the php memory model and therefore would no 
</I>&gt;<i> longer be an assumption.  The second assumption cannot be answered 
</I>&gt;<i> without putting a limit on the number of total items to be handled. 
</I>&gt;<i>  Putting a limit then creates the next assumption and that is choosing a 
</I>&gt;<i> limit everyone can live with for the life of the app ( with the 
</I>&gt;<i> assumption as to how long that life is ).  All these assumptions scare 
</I>&gt;<i> the crap out of me as a professional software developer because Mr. 
</I>&gt;<i> Murphy will screw me in the end.
</I>&gt;<i> 
</I>&gt;<i> Please don't take this as a flame, I think you have a great idea, just 
</I>&gt;<i> not an idea I think will fit in with what I am comfortable with.
</I>
Nope. Just enjoying the discussion.

&gt;<i> Adam Fields wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt;On Wed, Oct 16, 2002 at 05:40:53PM -0400, Jim Hendricks wrote:
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt;The other reason for avoiding this is my Host Provider would croak if I 
</I>&gt;<i> &gt;&gt;build too much in memory thus hogging the memory shared across many 
</I>&gt;<i> &gt;&gt;sites.  I avoid as much memory use as I can so when I really need it 
</I>&gt;<i> &gt;&gt;it's available.
</I>&gt;<i> &gt;&gt;    
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;Seems reasonable. I don't know how much memory overhead the class
</I>&gt;<i> &gt;implementation adds. I wouldn't think too much. Anyone?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;Even session variables aren't stored in memory though - they're
</I>&gt;<i> &gt;written out to temp space on disk (at least, that's how I read the
</I>&gt;<i> &gt;docs).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt;Adam Fields wrote:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;    
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;On Wed, Oct 16, 2002 at 04:22:11PM -0400, Jim Hendricks wrote:
</I>&gt;<i> &gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;      
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;Adam Fields wrote:
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;   
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;        
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;I'd wrap a class around the whole thing. Use that class to broker
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;reads and writes to the tree table. Add a &quot;changed&quot; timestamp to the
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;tree, and have a read from the class only reload the tree from the
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;database if it's changed since the last read. Stash the object in the
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;session for reuse, or serialize it to another table (or file, or
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;whatever) for quick retrieval.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;     
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;          
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;I don't know about the class thing since it adds a level of complexity 
</I>&gt;<i> &gt;&gt;&gt;&gt;to the code that I don't know
</I>&gt;<i> &gt;&gt;&gt;&gt;if it's waranted.  
</I>&gt;<i> &gt;&gt;&gt;&gt;   
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;        
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;I would argue that this will actually make the majority of your code
</I>&gt;<i> &gt;&gt;&gt;simpler, because you're encapsulating the complexity. :)
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;I'm the first to admit that classes aren't appropriate for everything,
</I>&gt;<i> &gt;&gt;&gt;but they're the right approach for this kind of stuff.
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;I'd do something like this:
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;class tree {
</I>&gt;<i> &gt;&gt;&gt;     var nodemap;
</I>&gt;<i> &gt;&gt;&gt;     # and whatever else you want
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;     function tree () {
</I>&gt;<i> &gt;&gt;&gt;     # maybe some init code
</I>&gt;<i> &gt;&gt;&gt;     }
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;     function get_tree () {
</I>&gt;<i> &gt;&gt;&gt;     # check if tree has changed or isn't populated yet
</I>&gt;<i> &gt;&gt;&gt;     # if yes to either, get tree from db
</I>&gt;<i> &gt;&gt;&gt;     # otherwise, maybe get tree from intermediate storage if you're
</I>&gt;<i> &gt;&gt;&gt;     doing that
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;     }
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;     function save_tree () {
</I>&gt;<i> &gt;&gt;&gt;     # write tree to db
</I>&gt;<i> &gt;&gt;&gt;     }
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;     function store_tree () {
</I>&gt;<i> &gt;&gt;&gt;     # write tree to intermediate storage
</I>&gt;<i> &gt;&gt;&gt;     }
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;     function render_tree () {
</I>&gt;<i> &gt;&gt;&gt;     # if tree isn't populated, get tree
</I>&gt;<i> &gt;&gt;&gt;     # output tree html or tree values or whatever
</I>&gt;<i> &gt;&gt;&gt;     }
</I>&gt;<i> &gt;&gt;&gt;     
</I>&gt;<i> &gt;&gt;&gt;     function get_tree_values () {
</I>&gt;<i> &gt;&gt;&gt;     # return raw node data for the tree
</I>&gt;<i> &gt;&gt;&gt;     }
</I>&gt;<i> &gt;&gt;&gt;}
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;Then, in your page:
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;$mytree = new tree();
</I>&gt;<i> &gt;&gt;&gt;$mytree-&gt;render_tree();
</I>&gt;<i> &gt;&gt;&gt;or
</I>&gt;<i> &gt;&gt;&gt;$mytree-&gt;get_tree_values();
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;      
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;I do like the idea of caching the tree though.  I 
</I>&gt;<i> &gt;&gt;&gt;&gt;would cache it in the DB so that the
</I>&gt;<i> &gt;&gt;&gt;&gt;tree does not need to be generated at all when the request to display it 
</I>&gt;<i> &gt;&gt;&gt;&gt;occurs.  The tree would
</I>&gt;<i> &gt;&gt;&gt;&gt;be regenerated everytime a change occurs to the underlying data ( which 
</I>&gt;<i> &gt;&gt;&gt;&gt;is a low volume data set )
</I>&gt;<i> &gt;&gt;&gt;&gt;This may not be a good idea for items that have a higher change velocity.
</I>&gt;<i> &gt;&gt;&gt;&gt;   
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;        
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;While I wouldn't advocate this approach for something that changes
</I>&gt;<i> &gt;&gt;&gt;once a minute or so, if it changes less than once an hour, this will
</I>&gt;<i> &gt;&gt;&gt;probably still result in a performance gain, and it will be easier to
</I>&gt;<i> &gt;&gt;&gt;maintain.
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;      
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;    
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> --- Unsubscribe at <A HREF="http://nyphp.org/list">http://nyphp.org/list</A> ---
</I>&gt;<i> 
</I>&gt;<i> 
</I>
-- 
				- Adam

-----
Adam Fields, Managing Partner, <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">fields at surgam.net</A>
Surgam, Inc. is a technology consulting firm with strong background in
delivering scalable and robust enterprise web and IT applications.
<A HREF="http://www.adamfields.com">http://www.adamfields.com</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001221.html">[nycphp-talk] Building trees
</A></li>
	<LI>Next message: <A HREF="001223.html">[nycphp-talk] Building trees
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1222">[ date ]</a>
              <a href="thread.html#1222">[ thread ]</a>
              <a href="subject.html#1222">[ subject ]</a>
              <a href="author.html#1222">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
