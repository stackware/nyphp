<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Bizarro Bug trying to insert after	using	mysql_insert_row
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2008-April/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Bizarro%20Bug%20trying%20to%20insert%20after%0A%09using%09mysql_insert_row&In-Reply-To=%3C1207149246.23678%40coral.he.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025221.html">
   <LINK REL="Next"  HREF="025207.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Bizarro Bug trying to insert after	using	mysql_insert_row</H1>
    <B>Kristina Anderson</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Bizarro%20Bug%20trying%20to%20insert%20after%0A%09using%09mysql_insert_row&In-Reply-To=%3C1207149246.23678%40coral.he.net%3E"
       TITLE="[nycphp-talk] Bizarro Bug trying to insert after	using	mysql_insert_row">ka at kacomputerconsulting.com
       </A><BR>
    <I>Wed Apr  2 11:14:06 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="025221.html">[nycphp-talk] ajax and un-breaking the ol' back button
</A></li>
        <LI>Next message: <A HREF="025207.html">[nycphp-talk] Bizarro Bug trying to insert after	using	mysql_insert_row
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25205">[ date ]</a>
              <a href="thread.html#25205">[ thread ]</a>
              <a href="subject.html#25205">[ subject ]</a>
              <a href="author.html#25205">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Yes, sorry, I meant to say mysql_insert_id and corrected myself (it was 
late and I was working on this nonstop).

The ID value is correctly returned and the INSERT string builds 
correctly, so those are not the problems.  For whatever reason, after 
the INSERT is processed, the field that should contain the ID of the 
last record is not updating but remains the default value.

I inherited the system from others to debug, and because this is the 
last functionality that needs to be delivered before completion.  My 
best guess is that it might be something in the table structure that 
I'm missing, I've set up two fields one varchar and one int(11) to try 
to capture the returned ID value.  Both remain blank at this point.

&gt;<i> Hi Kristina:
</I>&gt;<i> 
</I>&gt;<i> On Tue, Apr 01, 2008 at 07:57:48PM -0700, Kristina Anderson wrote:
</I>&gt;<i> &gt; I'm pulling out the ID of the previously inserted row and then 
</I>&gt;<i> &gt; inserting that as a lookup value in a duplicate row (two rows one 
</I>for 
&gt;<i> &gt; edit mode one for published mode).
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Various other places in the app this works fine and there really 
</I>isn't 
&gt;<i> &gt; any reason this should be happening.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; The query runs fine if I do it from within phpMyAdmin -- but from 
</I>the 
&gt;<i> &gt; PHP page the query does not error out but the value in the lookup 
</I>field 
&gt;<i> &gt; remains the default value
</I>&gt;<i> 
</I>&gt;<i> You say you're using &quot;mysql_insert_row.&quot;  I assume you mean PHP's 
</I>&gt;<i> mysql_insert_id() function.  If so, there are two possible bugs that 
</I>come 
&gt;<i> to mind.
</I>&gt;<i> 
</I>&gt;<i> 1) The table in question does not have auto_increment set for the 
</I>primary 
&gt;<i> key on that table.  If that's not it...
</I>&gt;<i> 
</I>&gt;<i> 2) The PHP code has a bug...
</I>&gt;<i> 
</I>&gt;<i> You say this same logic works on other parts of the site.  So, do the 
</I>&gt;<i> various parts of the site use the _same_ _exact_ 
</I>files/lines/functions or 
&gt;<i> do you have separate function/include/whatever for each section of 
</I>the 
&gt;<i> application?
</I>&gt;<i> 
</I>&gt;<i> If you're using separate code for different sections, obviously the 
</I>PHP 
&gt;<i> code you're using for the problematic insert is where the bug is.  
</I>&gt;<i> Perhaps the variable you assign the id to is different than the 
</I>variable 
&gt;<i> you're using as the lookup value in the second query.
</I>&gt;<i> 
</I>&gt;<i> Again, if you're using separate code, you should refactor the system 
</I>to 
&gt;<i> allow you to use the same code for the same purpose throughout the 
</I>&gt;<i> system.
</I>&gt;<i> 
</I>&gt;<i> --Dan
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i>  T H E   A N A L Y S I S   A N D   S O L U T I O N S   C O M P A N Y
</I>&gt;<i>             data intensive web and database programming
</I>&gt;<i>                 <A HREF="http://www.AnalysisAndSolutions.com/">http://www.AnalysisAndSolutions.com/</A>
</I>&gt;<i>  4015 7th Ave #4, Brooklyn NY 11232  v: 718-854-0335 f: 718-854-0409
</I>&gt;<i> _______________________________________________
</I>&gt;<i> New York PHP Community Talk Mailing List
</I>&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;<i> 
</I>&gt;<i> NYPHPCon 2006 Presentations Online
</I>&gt;<i> <A HREF="http://www.nyphpcon.com">http://www.nyphpcon.com</A>
</I>&gt;<i> 
</I>&gt;<i> Show Your Participation in New York PHP
</I>&gt;<i> <A HREF="http://www.nyphp.org/show_participation.php">http://www.nyphp.org/show_participation.php</A>
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025221.html">[nycphp-talk] ajax and un-breaking the ol' back button
</A></li>
	<LI>Next message: <A HREF="025207.html">[nycphp-talk] Bizarro Bug trying to insert after	using	mysql_insert_row
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25205">[ date ]</a>
              <a href="thread.html#25205">[ thread ]</a>
              <a href="subject.html#25205">[ subject ]</a>
              <a href="author.html#25205">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
