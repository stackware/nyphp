<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Bizarro Bug trying to insert after using	mysql_insert_row
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2008-April/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Bizarro%20Bug%20trying%20to%20insert%20after%20using%0A%09mysql_insert_row&In-Reply-To=%3C20080402150754.GA15483%40panix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025199.html">
   <LINK REL="Next"  HREF="025200.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Bizarro Bug trying to insert after using	mysql_insert_row</H1>
    <B>Daniel Convissor</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Bizarro%20Bug%20trying%20to%20insert%20after%20using%0A%09mysql_insert_row&In-Reply-To=%3C20080402150754.GA15483%40panix.com%3E"
       TITLE="[nycphp-talk] Bizarro Bug trying to insert after using	mysql_insert_row">danielc at analysisandsolutions.com
       </A><BR>
    <I>Wed Apr  2 11:07:54 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="025199.html">[nycphp-talk] Bizarro Bug trying to insert after using	mysql_insert_row
</A></li>
        <LI>Next message: <A HREF="025200.html">[nycphp-talk] Correction: Bizarro Bug trying to insert after using	mysql_insert_id
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25204">[ date ]</a>
              <a href="thread.html#25204">[ thread ]</a>
              <a href="subject.html#25204">[ subject ]</a>
              <a href="author.html#25204">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Kristina:

On Tue, Apr 01, 2008 at 07:57:48PM -0700, Kristina Anderson wrote:
&gt;<i> I'm pulling out the ID of the previously inserted row and then 
</I>&gt;<i> inserting that as a lookup value in a duplicate row (two rows one for 
</I>&gt;<i> edit mode one for published mode).
</I>&gt;<i> 
</I>&gt;<i> Various other places in the app this works fine and there really isn't 
</I>&gt;<i> any reason this should be happening.
</I>&gt;<i> 
</I>&gt;<i> The query runs fine if I do it from within phpMyAdmin -- but from the 
</I>&gt;<i> PHP page the query does not error out but the value in the lookup field 
</I>&gt;<i> remains the default value
</I>
You say you're using &quot;mysql_insert_row.&quot;  I assume you mean PHP's 
mysql_insert_id() function.  If so, there are two possible bugs that come 
to mind.

1) The table in question does not have auto_increment set for the primary 
key on that table.  If that's not it...

2) The PHP code has a bug...

You say this same logic works on other parts of the site.  So, do the 
various parts of the site use the _same_ _exact_ files/lines/functions or 
do you have separate function/include/whatever for each section of the 
application?

If you're using separate code for different sections, obviously the PHP 
code you're using for the problematic insert is where the bug is.  
Perhaps the variable you assign the id to is different than the variable 
you're using as the lookup value in the second query.

Again, if you're using separate code, you should refactor the system to 
allow you to use the same code for the same purpose throughout the 
system.

--Dan

-- 
 T H E   A N A L Y S I S   A N D   S O L U T I O N S   C O M P A N Y
            data intensive web and database programming
                <A HREF="http://www.AnalysisAndSolutions.com/">http://www.AnalysisAndSolutions.com/</A>
 4015 7th Ave #4, Brooklyn NY 11232  v: 718-854-0335 f: 718-854-0409

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025199.html">[nycphp-talk] Bizarro Bug trying to insert after using	mysql_insert_row
</A></li>
	<LI>Next message: <A HREF="025200.html">[nycphp-talk] Correction: Bizarro Bug trying to insert after using	mysql_insert_id
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25204">[ date ]</a>
              <a href="thread.html#25204">[ thread ]</a>
              <a href="subject.html#25204">[ subject ]</a>
              <a href="author.html#25204">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
