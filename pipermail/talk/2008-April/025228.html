<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Bizarro Bug -- AHA!!!!!!!
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2008-April/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Bizarro%20Bug%20--%20AHA%21%21%21%21%21%21%21&In-Reply-To=%3C47F3F70D.40909%40magpie.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025218.html">
   <LINK REL="Next"  HREF="025212.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Bizarro Bug -- AHA!!!!!!!</H1>
    <B>Steve Manes</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Bizarro%20Bug%20--%20AHA%21%21%21%21%21%21%21&In-Reply-To=%3C47F3F70D.40909%40magpie.com%3E"
       TITLE="[nycphp-talk] Bizarro Bug -- AHA!!!!!!!">smanes at magpie.com
       </A><BR>
    <I>Wed Apr  2 17:13:49 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="025218.html">[nycphp-talk] Bizarro Bug -- AHA!!!!!!!
</A></li>
        <LI>Next message: <A HREF="025212.html">[nycphp-talk] Bizarro Bug -- AHA!!!!!!!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25228">[ date ]</a>
              <a href="thread.html#25228">[ thread ]</a>
              <a href="subject.html#25228">[ subject ]</a>
              <a href="author.html#25228">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Daniel Convissor wrote:
&gt;<i> On Wed, Apr 02, 2008 at 12:14:08PM -0400, Steve Manes wrote:
</I>&gt;&gt;<i> I generally wrap all database calls in API functions specific to the 
</I>&gt;&gt;<i> task being performed, i.e. get_patient_referrals_list(), 
</I>&gt;&gt;<i> put_private_transport_segment(), update_clinic_demographic().  That way 
</I>&gt;&gt;<i> the logging is specific to the task and any specialized processing that 
</I>&gt;&gt;<i> needs to be done to the data can be done in one place.
</I>&gt;<i> 
</I>&gt;<i> That's good.  That still doens't obviate the need to have those functions 
</I>&gt;<i> then call one central function that actually runs the query.
</I>
I've never had much need to generalize the database API functions more 
than that if I'm already wrapping them inside dedicated application API 
functions.  I always parameterize the queries so the only potentially 
reusable components would be:

   $result = pg_query_params($db, $sql, $array);

   if (!$result) {
      return array(false, pg_last_error($db));
   }

   $rows = array();

   while ($row = pg_fetch_assoc($result)) {
      $rows[] = $row;
   }

   return array(true, $rows);

But that's limiting as well because some queries are expected to return 
only one row, some return many rows, some result sets are enumerated, 
some are hashes, some need to return the exit code of a stored 
procedure, not the database function.  Also, I like the function to 
return database errors branded with the __FUNCTION__ or __CLASS__ name 
where the error occurred.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025218.html">[nycphp-talk] Bizarro Bug -- AHA!!!!!!!
</A></li>
	<LI>Next message: <A HREF="025212.html">[nycphp-talk] Bizarro Bug -- AHA!!!!!!!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25228">[ date ]</a>
              <a href="thread.html#25228">[ thread ]</a>
              <a href="subject.html#25228">[ subject ]</a>
              <a href="author.html#25228">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
