<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] user authentication security structure
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2004-February/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20user%20authentication%20security%20structure&In-Reply-To=%3C402135DE.8060004%40next-online.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007583.html">
   <LINK REL="Next"  HREF="007604.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] user authentication security structure</H1>
    <B>Chris Hubbard</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20user%20authentication%20security%20structure&In-Reply-To=%3C402135DE.8060004%40next-online.net%3E"
       TITLE="[nycphp-talk] user authentication security structure">chubbard at next-online.net
       </A><BR>
    <I>Wed Feb  4 13:11:42 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="007583.html">[nycphp-talk] Zend Studio and Oracle
</A></li>
        <LI>Next message: <A HREF="007604.html">[nycphp-talk] user authentication security structure
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7584">[ date ]</a>
              <a href="thread.html#7584">[ thread ]</a>
              <a href="subject.html#7584">[ subject ]</a>
              <a href="author.html#7584">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>All,
Thanks for all your suggestions and feedback to date.  The following is 
a description of the login and user-authentication mechanism I'm 
planning to implement in our application, based on the discussion here 
and other research I've done.  If you've got ways to improve it, please 
make suggestions.

Assumptions:
* all client browsers will have cookies enabled.  If they don't they get 
redirected to a page that tells them to enable cookies before they have 
the chance to log in.
* all pages (especially login) will be within SSL
* will be using custom session handlers (aka Sean's article in php|arch)

Requirements:
* users can bookmark any page in the application.  When the user tries 
to return to a bookmarked page after the session has expired, then they 
are presented with the login page.  after a successful login they're 
redirected to the bookmarked page.

Flow:
* user enters their username and password and submits the form
* code makes sure the data submitted is &quot;clean&quot;
* code checks username and password against values in db
* if they match create a cookie that will expire in 10 (or so) seconds
* create a session
* redirect to home page or bookmarked page.
* at home page read the temp cookie and the session data, if they 
correspond create a new cookie that will expire in N minutes.
* when user clicks &quot;log out&quot; destroy the session and either empty the 
cookie or fill it with garbage.

Thoughts:
I'm thinking of putting a timestamp into the login cookie, so if it's 
presented and it's too old, I can redirect to the login page
I may add a counter to the login cookie, if you don't get in after 3 or 
N attempts you get redirected to some (random) web address.
I've been thinking about using the cookie ID to sign and encrypt the 
session ID and then using the session ID to sign and encrypt the cookie 
ID but that might be overkill.
I may put the login page into it's own folder ./login/login.php, and 
have the login cookie be specific to that folder.

Once I get this flat I'll make the pattern publicly available with 
diagrams and documentation.  I'm not sure whether it makes sense to 
include the code (we use Oracle with some internal classes), so probably 
won't include complete code.

Thoughts, comments, suggestions?
Chris


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007583.html">[nycphp-talk] Zend Studio and Oracle
</A></li>
	<LI>Next message: <A HREF="007604.html">[nycphp-talk] user authentication security structure
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7584">[ date ]</a>
              <a href="thread.html#7584">[ thread ]</a>
              <a href="subject.html#7584">[ subject ]</a>
              <a href="author.html#7584">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
