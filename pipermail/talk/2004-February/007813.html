<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] How to create a singleton class in PHP
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2004-February/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20How%20to%20create%20a%20singleton%20class%20in%20PHP&In-Reply-To=%3C402BCD71.7040408%40adnet-sys.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007810.html">
   <LINK REL="Next"  HREF="007814.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] How to create a singleton class in PHP</H1>
    <B>Phil Powell</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20How%20to%20create%20a%20singleton%20class%20in%20PHP&In-Reply-To=%3C402BCD71.7040408%40adnet-sys.com%3E"
       TITLE="[nycphp-talk] How to create a singleton class in PHP">phillip.powell at adnet-sys.com
       </A><BR>
    <I>Thu Feb 12 14:01:05 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="007810.html">[nycphp-talk] How to create a singleton class in PHP
</A></li>
        <LI>Next message: <A HREF="007814.html">[nycphp-talk] How to create a singleton class in PHP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7813">[ date ]</a>
              <a href="thread.html#7813">[ thread ]</a>
              <a href="subject.html#7813">[ subject ]</a>
              <a href="author.html#7813">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is what I wrote based on your code:

class ActionHandler {
 
  function &amp;ActionHandler() {} // LEAVE IT EMPTY

  function &amp;getErrorArray() {
    return ActionHandler::setErrorArray();
  }

  function &amp;setErrorArray($additionalErrorArray = null) {
   static $errorArray = array();
   if (is_array($additionalErrorArray)) $errorArray += 
$additionalErrorArray;
   return $errorArray;
  }

}

so basically I am assuming that ActionHandler does not create a static 
instance of $this-&gt;errorArray but instead ActionHandler::setErrorArray() 
creates a static instance of a localized $errorArray which, since only 
one instance of ActionHandler exists, only one instance of the method 
exists, then only one instance of the localized variable exists and and 
that is that.  Am I off-base?

Phil

Dan Cech wrote:

&gt;<i> Ok, now we have something that works!  Which one works?
</I>&gt;<i>
</I>&gt;<i> Both should function just fine, in each case there should only ever be 
</I>&gt;<i> one instance of the $errorArray variable, whether it is a static or 
</I>&gt;<i> global.
</I>&gt;<i>
</I>&gt;<i> The reason the code is much simpler than what you had previously is 
</I>&gt;<i> that it is not designed to try and store an instance of ActionHandler, 
</I>&gt;<i> but only an instance of the errorArray variable.
</I>&gt;<i>
</I>&gt;<i> Dan
</I>&gt;<i>
</I>&gt;<i> Phil Powell wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Dan Cech wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Hmm, that is very similar to the GLOBALS kludge I posted, although 
</I>&gt;&gt;&gt;<i> it doesn't work on my machine.  Each subsequent call to 
</I>&gt;&gt;&gt;<i> setErrorArray is overwriting the error array.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Thus far the best I've got is:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> class ActionHandler {
</I>&gt;&gt;&gt;<i>   function &amp;getErrorArray () {
</I>&gt;&gt;&gt;<i>     return ActionHandler::setErrorArray ();
</I>&gt;&gt;&gt;<i>   }
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>   function &amp;setErrorArray ($additionalErrorArray = NULL) {
</I>&gt;&gt;&gt;<i>     static $errorArray = array ();
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>     if ( is_array ($additionalErrorArray) ) {
</I>&gt;&gt;&gt;<i>       $errorArray += $additionalErrorArray;
</I>&gt;&gt;&gt;<i>     }
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>     return $errorArray;
</I>&gt;&gt;&gt;<i>   }
</I>&gt;&gt;&gt;<i> }
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> and for the $GLOBALS kludge:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> class ActionHandler {
</I>&gt;&gt;&gt;<i>   function &amp;getErrorArray () {
</I>&gt;&gt;&gt;<i>     return ActionHandler::setErrorArray ();
</I>&gt;&gt;&gt;<i>   }
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>   function &amp;setErrorArray ($additionalErrorArray = NULL) {
</I>&gt;&gt;&gt;<i>     if ( !isset ($GLOBALS['errorArray']) ) {
</I>&gt;&gt;&gt;<i>       $GLOBALS['errorArray'] = array ();
</I>&gt;&gt;&gt;<i>     }
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>     if ( is_array ($additionalErrorArray) ) {
</I>&gt;&gt;&gt;<i>       $GLOBALS['errorArray'] += $additionalErrorArray;
</I>&gt;&gt;&gt;<i>     }
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>     return $GLOBALS['errorArray'];
</I>&gt;&gt;&gt;<i>   }
</I>&gt;&gt;&gt;<i> }
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Both of those functions work 100% for anything I've thrown at them. 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It works on mine as well.  How it works is a mystery to me, how is it 
</I>&gt;&gt;<i> working?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Phil
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> talk mailing list
</I>&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk at lists.nyphp.org</A>
</I>&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;<i>
</I>

-- 
Phil Powell
Web Developer
  ADNET Systems, Inc.
  11260 Roger Bacon Drive, Suite 403
  Reston, VA  20190-5203
Phone: (703) 709-7218 x107   Cell: (571) 437-4430   FAX: (703) 709-7219
EMail:  <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">Phillip.Powell at adnet-sys.com</A>      AOL IM: SOA Dude






</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007810.html">[nycphp-talk] How to create a singleton class in PHP
</A></li>
	<LI>Next message: <A HREF="007814.html">[nycphp-talk] How to create a singleton class in PHP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7813">[ date ]</a>
              <a href="thread.html#7813">[ thread ]</a>
              <a href="subject.html#7813">[ subject ]</a>
              <a href="author.html#7813">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
