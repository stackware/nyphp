<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] How to create a singleton class in PHP
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2004-February/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20How%20to%20create%20a%20singleton%20class%20in%20PHP&In-Reply-To=%3C402BD4BA.4030003%40phpwerx.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007813.html">
   <LINK REL="Next"  HREF="007815.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] How to create a singleton class in PHP</H1>
    <B>Dan Cech</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20How%20to%20create%20a%20singleton%20class%20in%20PHP&In-Reply-To=%3C402BD4BA.4030003%40phpwerx.net%3E"
       TITLE="[nycphp-talk] How to create a singleton class in PHP">dcech at phpwerx.net
       </A><BR>
    <I>Thu Feb 12 14:32:10 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="007813.html">[nycphp-talk] How to create a singleton class in PHP
</A></li>
        <LI>Next message: <A HREF="007815.html">[nycphp-talk] How to create a singleton class in PHP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7814">[ date ]</a>
              <a href="thread.html#7814">[ thread ]</a>
              <a href="subject.html#7814">[ subject ]</a>
              <a href="author.html#7814">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>You shouldn't need the constructor, because the methods are only ever 
called as class methods, so it will never be executed.

But you are absolutely correct about the fact that that there is only 
ever one instance of the $errorArray created within the setErrorArray 
function.

Dan

PS, if you wanted to be able to extend this class, you could use:

class ActionHandler {
   function &amp;getErrorArray() {
     return ActionHandler::_ErrorArray();
   }

   function &amp;setErrorArray($additionalErrorArray = null) {
     return ActionHandler::_ErrorArray($additionalErrorArray);
   }

   function &amp;_ErrorArray ($additionalErrorArray = null) {
     static $errorArray = array();
     if (is_array($additionalErrorArray)) {
       $errorArray += $additionalErrorArray;
     }
     return $errorArray;
   }
}

You could then do:

class myclass extends ActionHandler {
}

$myobj = new myclass ();
$myobj-&gt;setErrorArray (array ('test' =&gt; 'test'));

$myobj2 = new myclass ();
$myobj2-&gt;setErrorArray (array('hello' =&gt; 'tiger'));

print_r (ActionHandler::getErrorArray ());

Phil Powell wrote:
&gt;<i> This is what I wrote based on your code:
</I>&gt;<i> 
</I>&gt;<i> class ActionHandler {
</I>&gt;<i> 
</I>&gt;<i>  function &amp;ActionHandler() {} // LEAVE IT EMPTY
</I>&gt;<i> 
</I>&gt;<i>  function &amp;getErrorArray() {
</I>&gt;<i>    return ActionHandler::setErrorArray();
</I>&gt;<i>  }
</I>&gt;<i> 
</I>&gt;<i>  function &amp;setErrorArray($additionalErrorArray = null) {
</I>&gt;<i>   static $errorArray = array();
</I>&gt;<i>   if (is_array($additionalErrorArray)) $errorArray += 
</I>&gt;<i> $additionalErrorArray;
</I>&gt;<i>   return $errorArray;
</I>&gt;<i>  }
</I>&gt;<i> 
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> so basically I am assuming that ActionHandler does not create a static 
</I>&gt;<i> instance of $this-&gt;errorArray but instead ActionHandler::setErrorArray() 
</I>&gt;<i> creates a static instance of a localized $errorArray which, since only 
</I>&gt;<i> one instance of ActionHandler exists, only one instance of the method 
</I>&gt;<i> exists, then only one instance of the localized variable exists and and 
</I>&gt;<i> that is that.  Am I off-base?
</I>&gt;<i> 
</I>&gt;<i> Phil
</I>&gt;<i> 
</I>&gt;<i> Dan Cech wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> Ok, now we have something that works!  Which one works?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Both should function just fine, in each case there should only ever be 
</I>&gt;&gt;<i> one instance of the $errorArray variable, whether it is a static or 
</I>&gt;&gt;<i> global.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The reason the code is much simpler than what you had previously is 
</I>&gt;&gt;<i> that it is not designed to try and store an instance of ActionHandler, 
</I>&gt;&gt;<i> but only an instance of the errorArray variable.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Dan
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Phil Powell wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Dan Cech wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Hmm, that is very similar to the GLOBALS kludge I posted, although 
</I>&gt;&gt;&gt;&gt;<i> it doesn't work on my machine.  Each subsequent call to 
</I>&gt;&gt;&gt;&gt;<i> setErrorArray is overwriting the error array.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Thus far the best I've got is:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> class ActionHandler {
</I>&gt;&gt;&gt;&gt;<i>   function &amp;getErrorArray () {
</I>&gt;&gt;&gt;&gt;<i>     return ActionHandler::setErrorArray ();
</I>&gt;&gt;&gt;&gt;<i>   }
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>   function &amp;setErrorArray ($additionalErrorArray = NULL) {
</I>&gt;&gt;&gt;&gt;<i>     static $errorArray = array ();
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>     if ( is_array ($additionalErrorArray) ) {
</I>&gt;&gt;&gt;&gt;<i>       $errorArray += $additionalErrorArray;
</I>&gt;&gt;&gt;&gt;<i>     }
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>     return $errorArray;
</I>&gt;&gt;&gt;&gt;<i>   }
</I>&gt;&gt;&gt;&gt;<i> }
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> and for the $GLOBALS kludge:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> class ActionHandler {
</I>&gt;&gt;&gt;&gt;<i>   function &amp;getErrorArray () {
</I>&gt;&gt;&gt;&gt;<i>     return ActionHandler::setErrorArray ();
</I>&gt;&gt;&gt;&gt;<i>   }
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>   function &amp;setErrorArray ($additionalErrorArray = NULL) {
</I>&gt;&gt;&gt;&gt;<i>     if ( !isset ($GLOBALS['errorArray']) ) {
</I>&gt;&gt;&gt;&gt;<i>       $GLOBALS['errorArray'] = array ();
</I>&gt;&gt;&gt;&gt;<i>     }
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>     if ( is_array ($additionalErrorArray) ) {
</I>&gt;&gt;&gt;&gt;<i>       $GLOBALS['errorArray'] += $additionalErrorArray;
</I>&gt;&gt;&gt;&gt;<i>     }
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>     return $GLOBALS['errorArray'];
</I>&gt;&gt;&gt;&gt;<i>   }
</I>&gt;&gt;&gt;&gt;<i> }
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Both of those functions work 100% for anything I've thrown at them. 
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> It works on mine as well.  How it works is a mystery to me, how is it 
</I>&gt;&gt;&gt;<i> working?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Phil
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> talk mailing list
</I>&gt;&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk at lists.nyphp.org</A>
</I>&gt;&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;&gt;<i>
</I>&gt;<i> 
</I>&gt;<i> 
</I>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007813.html">[nycphp-talk] How to create a singleton class in PHP
</A></li>
	<LI>Next message: <A HREF="007815.html">[nycphp-talk] How to create a singleton class in PHP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7814">[ date ]</a>
              <a href="thread.html#7814">[ thread ]</a>
              <a href="subject.html#7814">[ subject ]</a>
              <a href="author.html#7814">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
