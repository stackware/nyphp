<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] How to create a singleton class in PHP
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2004-February/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20How%20to%20create%20a%20singleton%20class%20in%20PHP&In-Reply-To=%3C402BC886.7010309%40phpwerx.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007808.html">
   <LINK REL="Next"  HREF="007813.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] How to create a singleton class in PHP</H1>
    <B>Dan Cech</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20How%20to%20create%20a%20singleton%20class%20in%20PHP&In-Reply-To=%3C402BC886.7010309%40phpwerx.net%3E"
       TITLE="[nycphp-talk] How to create a singleton class in PHP">dcech at phpwerx.net
       </A><BR>
    <I>Thu Feb 12 13:40:06 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="007808.html">[nycphp-talk] How to create a singleton class in PHP
</A></li>
        <LI>Next message: <A HREF="007813.html">[nycphp-talk] How to create a singleton class in PHP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7810">[ date ]</a>
              <a href="thread.html#7810">[ thread ]</a>
              <a href="subject.html#7810">[ subject ]</a>
              <a href="author.html#7810">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ok, now we have something that works!  Which one works?

Both should function just fine, in each case there should only ever be 
one instance of the $errorArray variable, whether it is a static or global.

The reason the code is much simpler than what you had previously is that 
it is not designed to try and store an instance of ActionHandler, but 
only an instance of the errorArray variable.

Dan

Phil Powell wrote:
&gt;<i> Dan Cech wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> Hmm, that is very similar to the GLOBALS kludge I posted, although it 
</I>&gt;&gt;<i> doesn't work on my machine.  Each subsequent call to setErrorArray is 
</I>&gt;&gt;<i> overwriting the error array.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thus far the best I've got is:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> class ActionHandler {
</I>&gt;&gt;<i>   function &amp;getErrorArray () {
</I>&gt;&gt;<i>     return ActionHandler::setErrorArray ();
</I>&gt;&gt;<i>   }
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   function &amp;setErrorArray ($additionalErrorArray = NULL) {
</I>&gt;&gt;<i>     static $errorArray = array ();
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     if ( is_array ($additionalErrorArray) ) {
</I>&gt;&gt;<i>       $errorArray += $additionalErrorArray;
</I>&gt;&gt;<i>     }
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     return $errorArray;
</I>&gt;&gt;<i>   }
</I>&gt;&gt;<i> }
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> and for the $GLOBALS kludge:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> class ActionHandler {
</I>&gt;&gt;<i>   function &amp;getErrorArray () {
</I>&gt;&gt;<i>     return ActionHandler::setErrorArray ();
</I>&gt;&gt;<i>   }
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   function &amp;setErrorArray ($additionalErrorArray = NULL) {
</I>&gt;&gt;<i>     if ( !isset ($GLOBALS['errorArray']) ) {
</I>&gt;&gt;<i>       $GLOBALS['errorArray'] = array ();
</I>&gt;&gt;<i>     }
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     if ( is_array ($additionalErrorArray) ) {
</I>&gt;&gt;<i>       $GLOBALS['errorArray'] += $additionalErrorArray;
</I>&gt;&gt;<i>     }
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     return $GLOBALS['errorArray'];
</I>&gt;&gt;<i>   }
</I>&gt;&gt;<i> }
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Both of those functions work 100% for anything I've thrown at them. 
</I>&gt;<i> 
</I>&gt;<i> It works on mine as well.  How it works is a mystery to me, how is it 
</I>&gt;<i> working?
</I>&gt;<i> 
</I>&gt;<i> Phil
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007808.html">[nycphp-talk] How to create a singleton class in PHP
</A></li>
	<LI>Next message: <A HREF="007813.html">[nycphp-talk] How to create a singleton class in PHP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7810">[ date ]</a>
              <a href="thread.html#7810">[ thread ]</a>
              <a href="subject.html#7810">[ subject ]</a>
              <a href="author.html#7810">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
