<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Array handling - Why does this happen?
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2004-February/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Array%20handling%20-%20Why%20does%20this%20happen%3F&In-Reply-To=%3C402BBEC8.2070708%40phpwerx.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007795.html">
   <LINK REL="Next"  HREF="007807.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Array handling - Why does this happen?</H1>
    <B>Dan Cech</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Array%20handling%20-%20Why%20does%20this%20happen%3F&In-Reply-To=%3C402BBEC8.2070708%40phpwerx.net%3E"
       TITLE="[nycphp-talk] Array handling - Why does this happen?">dcech at phpwerx.net
       </A><BR>
    <I>Thu Feb 12 12:58:32 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="007795.html">[nycphp-talk] Array handling - Why does this happen?
</A></li>
        <LI>Next message: <A HREF="007807.html">[nycphp-talk] (OT/LUG-ish) Location of php engine/exe for comand	line use in Ma ndrake
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7799">[ date ]</a>
              <a href="thread.html#7799">[ thread ]</a>
              <a href="subject.html#7799">[ subject ]</a>
              <a href="author.html#7799">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>It's not immediately clear what's going on in the code you presented, 
but I have extracted the relevant code, which is:

$answer = array (
   'Yes' =&gt; array (
     'Yes' =&gt; 'Yes',
     'count' =&gt; 0
   ),
   'No' =&gt; array (
     'No' =&gt; 'No',
     'count' =&gt; 0
   )
);

$val='Yes';
$val1='No';

$answer[$val]['count']=8888;
echo $answer[$val]['count'].&quot;&lt;br&gt;&quot;;

$answer[$val1]['count']=9999;
echo $answer[$val1]['count'].&quot;&lt;br&gt;&quot;;

$answer = array (
   'Yes' =&gt; 'Yes',
   'No' =&gt; 'No'
);

$val='Yes';
$val1='No';

$answer[$val]['count']=8888;
echo $answer[$val]['count'].&quot;&lt;br&gt;&quot;;

$answer[$val1]['count']=9999;
echo $answer[$val1]['count'].&quot;&lt;br&gt;&quot;;

As you can see, in the first case $answer[$val] is an array, whereas in 
the second case $answer[$val] is a string.

What's happening I think is that you are unwittingly invoking the 
(deprecated) syntax for accessing a string by character:

$mystring = 'hello';

echo $mystring{0};
echo $mystring[0];

both should result in 'h';

This syntax can also be used to assign into a string...which is what is 
happening here.

The 'count' is being to converted to the integer 0, and the first 
character in the string is being overwritten with the first character 
from the value you are assigning.

So in the second example:

$answer[$val] is 'Yes'

Then we do:

$answer[$val]['count'] = 8888;

which is equivalent to:

$answer[$val]{0} = 8888;

so $answer[$val] is now '8es'

then we do:

echo $answer[$val]['count'];

which is equivalent to:

echo $answer[$val]{0};

which results in '8'

An interesting little problem for sure.

Dan

DeWitt, Michael wrote:
&gt;<i> I have run into a situation with arrays that I can't figure out why value
</I>&gt;<i> assigments are truncated down to one byte.
</I>&gt;<i> 
</I>&gt;<i> Consider the array
</I>&gt;<i> 
</I>&gt;<i> $question['1']=array('type'=&gt;'radio','showresults'=&gt;1,'required'=&gt;0,'questio
</I>&gt;<i> n'=&gt;'Does your community post signs on neglected properties with the
</I>&gt;<i> owner&amp;#146;s name and address clearly visible to all passersby?',
</I>&gt;<i> 'answer'=&gt;array('Yes'=&gt;array('Yes'=&gt;'Yes','count'=&gt;0),'No'=&gt;array('No'=&gt;'No'
</I>&gt;<i> ,'count'=&gt;0)));
</I>&gt;<i> 
</I>&gt;<i> $q_id=1;
</I>&gt;<i> $val='Yes';
</I>&gt;<i> $val1='No';
</I>&gt;<i> 
</I>&gt;<i> $question[$q_id]['answer'][$val]['count']=8888;
</I>&gt;<i> 
</I>&gt;<i> echo $question[$q_id]['answer'][$val]['count'].&quot;&lt;br&gt;&quot;;
</I>&gt;<i> 
</I>&gt;<i> $question[$q_id]['answer'][$val1]['count']=9999;
</I>&gt;<i> 
</I>&gt;<i> echo $question[$q_id]['answer'][$val1]['count'].&quot;&lt;br&gt;&quot;;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> will echo correctly the numbers assigned to 'count' of 8888 and 9999
</I>&gt;<i> 
</I>&gt;<i> However for this array,
</I>&gt;<i> 
</I>&gt;<i> $question['1']=array('type'=&gt;'radio','showresults'=&gt;1,'required'=&gt;0,'questio
</I>&gt;<i> n'=&gt;'Does your community post signs on neglected properties with the
</I>&gt;<i> owner&amp;#146;s name and address clearly visible to all passersby?',
</I>&gt;<i> 'answer'=&gt;array('Yes'=&gt;'Yes','No'=&gt;'No'));
</I>&gt;<i> 
</I>&gt;<i> $q_id=1;
</I>&gt;<i> $val='Yes';
</I>&gt;<i> $val1='No';
</I>&gt;<i> 
</I>&gt;<i> $question[$q_id]['answer'][$val]['count']=8888;
</I>&gt;<i> 
</I>&gt;<i> echo $question[$q_id]['answer'][$val]['count'].&quot;&lt;br&gt;&quot;;
</I>&gt;<i> 
</I>&gt;<i> $question[$q_id]['answer'][$val1]['count']=9999;
</I>&gt;<i> 
</I>&gt;<i> echo $question[$q_id]['answer'][$val1]['count'].&quot;&lt;br&gt;&quot;;
</I>&gt;<i> 
</I>&gt;<i> will echo back 'count' as being 8 and 9
</I>&gt;<i> 
</I>&gt;<i> I thought in PHP you could extend arrays with new elements dynamically on
</I>&gt;<i> assignment and if you can't, why wouldn't this error out rather than merely
</I>&gt;<i> truncating to one byte?
</I>&gt;<i> 
</I>&gt;<i> Or, perhaps, I am thinking about this all wrong???
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Mike
</I>&gt;<i> _______________________________________________
</I>&gt;<i> talk mailing list
</I>&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk at lists.nyphp.org</A>
</I>&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;<i> 
</I>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007795.html">[nycphp-talk] Array handling - Why does this happen?
</A></li>
	<LI>Next message: <A HREF="007807.html">[nycphp-talk] (OT/LUG-ish) Location of php engine/exe for comand	line use in Ma ndrake
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7799">[ date ]</a>
              <a href="thread.html#7799">[ thread ]</a>
              <a href="subject.html#7799">[ subject ]</a>
              <a href="author.html#7799">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
