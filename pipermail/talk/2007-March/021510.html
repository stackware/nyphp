<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] mail problems
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2007-March/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20mail%20problems&In-Reply-To=%3C6.2.3.4.2.20070327173311.028c5ab0%40mail.optonline.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021509.html">
   <LINK REL="Next"  HREF="021511.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] mail problems</H1>
    <B>Michael Southwell</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20mail%20problems&In-Reply-To=%3C6.2.3.4.2.20070327173311.028c5ab0%40mail.optonline.net%3E"
       TITLE="[nycphp-talk] mail problems">michael.southwell at nyphp.com
       </A><BR>
    <I>Tue Mar 27 18:35:04 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="021509.html">[nycphp-talk] sorry, just testing - IGNORE
</A></li>
        <LI>Next message: <A HREF="021511.html">[nycphp-talk] mail problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21510">[ date ]</a>
              <a href="thread.html#21510">[ thread ]</a>
              <a href="subject.html#21510">[ subject ]</a>
              <a href="author.html#21510">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I am having a baffling problem with a script that sends an html email.
It seems to work sometimes and not at other times. My (unhappy) client
is seeing headers when she gets anything. Multiple recipients seem to
handled randomly. What can you see here that's wrong? I have tested
$addresses and it is the properly comma-delimited string.
============================
......
$addresses = $_POST['addresses'];
$addresses = str_replace( ' ', '', $addresses );
$addresses = str_replace( &quot;\r\n&quot;, '', $addresses );
$addresses = str_replace( &quot;\n&quot;, '', $addresses );

$to = 'Undisclosed Recipients &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">ronnie at ronnieschultz.com</A>&gt;';
$subject = 'Spring Arrives';

$headers = &quot;From: <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">ronnie at ronnieschultz.com</A>\n&quot;;
$headers .= &quot;Bcc: $addresses\n&quot;;
$headers .= &quot;MIME-Version: 1.0\n&quot;;
$headers .= &quot;Content-Type: text/html; charset=ISO-8859-1\n\n&quot;;
$headers .= '
          &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 
Transitional//EN&quot; &quot;<A HREF="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd</A>&quot;&gt;
          &lt;x-html&gt;
          &lt;head&gt;
          &lt;style&gt;
                  #content {position:absolute; top:100px; left:25px; }
                  a {text-decoration:none;}
                  .fallback a:link,a:visited,a:hover {color:#00f;}
                  p {font-family:sans-serif;font-size:.8em; margin-left:2em; }
          &lt;/style&gt;
          &lt;/head&gt;

          &lt;body&gt;

          &lt;p class=&quot;fallback&quot;&gt;
          [If you are not seeing graphics in this message, please 
click &lt;a href=&quot;<A HREF="http://dneba.com/rs/2007/sp07.php">http://dneba.com/rs/2007/sp07.php</A>&quot;&gt;here&lt;/a&gt;.]&lt;br /&gt;
          &lt;/p&gt;

          &lt;div id=&quot;content&quot;&gt;
          &lt;a href=&quot;<A HREF="http://ronnieschultz.com">http://ronnieschultz.com</A>&quot;&gt;
          &lt;img src=&quot;<A HREF="http://lauratheodore.com/test/sp07.jpg">http://lauratheodore.com/test/sp07.jpg</A>&quot; 
width=&quot;750&quot; height=&quot;1050&quot; border=&quot;0&quot; alt=&quot;We are pleased to offer you 
a Spring Photography Session&quot; title=&quot;We are pleased to offer you a 
Spring Photography Session&quot; /&gt;
          &lt;/a&gt;
          &lt;/div&gt;

          &lt;/body&gt;
';

if ( ! mail( $to, $subject, '', $headers ) ) {
          exit( 'There has been an error sending your mail. Please 
report this.' );
}
else {
          $addresses = str_replace( ',', '&lt;br /&gt;', $addresses );
          echo '&lt;p&gt;The card has been sent to:&lt;br /&gt;' . $addresses . '&lt;/p&gt;';
} // no error sending
====================

You can try this for yourselves at <A HREF="http://lauratheodore.com/test/xms.php.">http://lauratheodore.com/test/xms.php.</A>



Michael Southwell, Vice President for Education
New York PHP
<A HREF="http://www.nyphp.com/training">http://www.nyphp.com/training</A> - In-depth PHP Training Courses



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021509.html">[nycphp-talk] sorry, just testing - IGNORE
</A></li>
	<LI>Next message: <A HREF="021511.html">[nycphp-talk] mail problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21510">[ date ]</a>
              <a href="thread.html#21510">[ thread ]</a>
              <a href="subject.html#21510">[ subject ]</a>
              <a href="author.html#21510">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
