<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Issues with server getting hacked
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2009-September/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Issues%20with%20server%20getting%20hacked&In-Reply-To=%3C68de37340909111320h108393ecke93a8791d7e95465%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028972.html">
   <LINK REL="Next"  HREF="028975.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Issues with server getting hacked</H1>
    <B>Eddie Drapkin</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Issues%20with%20server%20getting%20hacked&In-Reply-To=%3C68de37340909111320h108393ecke93a8791d7e95465%40mail.gmail.com%3E"
       TITLE="[nycphp-talk] Issues with server getting hacked">oorza2k5 at gmail.com
       </A><BR>
    <I>Fri Sep 11 16:20:38 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="028972.html">[nycphp-talk] Issues with server getting hacked
</A></li>
        <LI>Next message: <A HREF="028975.html">[nycphp-talk] Issues with server getting hacked
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28973">[ date ]</a>
              <a href="thread.html#28973">[ thread ]</a>
              <a href="subject.html#28973">[ subject ]</a>
              <a href="author.html#28973">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, Sep 11, 2009 at 4:11 PM, Ajai Khattri &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">ajai at bitblit.net</A>&gt; wrote:
&gt;<i> On Fri, 11 Sep 2009, Randal Rust wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> That's what I was thinking actually. There has to be something
</I>&gt;&gt;<i> *somewhere* that would give me an indication of where the issue lies.
</I>&gt;<i>
</I>&gt;<i> Finding the source of a break-in like this can be notoriously difficult.
</I>&gt;<i> Much better to wipe the drive and reinstall using the latest OS and
</I>&gt;<i> software that can run your app (because you have no idea if any system
</I>&gt;<i> binaries have been replaced with trojans).
</I>&gt;<i>
</I>&gt;<i> If the breakin is through an OS vulnerability then keeping it up to date
</I>&gt;<i> will help. Obviously, if it happens again with a up-to-date OS, then its
</I>&gt;<i> possible its a vulnerability in PHP and/or your application code (in which
</I>&gt;<i> case looking at POST requests in logs might help).
</I>&gt;<i>
</I>&gt;<i> I once had an old server that had an IRC process running disguised as a
</I>&gt;<i> regular Apache process. I only figured it out by observing open port
</I>&gt;<i> numbers using netstat and finding the process with lsof. In the end I
</I>&gt;<i> narrowed the problem down to an old component in a Joomla install that
</I>&gt;<i> had a known vulnerability - updating that component fixed the problem.
</I>&gt;<i>
</I>&gt;<i> But servers are constantly fending off brute-force ssh attacks (denyhosts
</I>&gt;<i> is your friend for that kind of crap). These days I switch off all
</I>&gt;<i> unnecessary services and make sure needed services are not exposed to the
</I>&gt;<i> outside (MySQL listening on localhost, Postfix too is its just used for
</I>&gt;<i> sending out, etc). On many systems this might been running a firewall
</I>&gt;<i> with a very locked down configuration (protocol tracking is also my
</I>&gt;<i> friend).
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Aj.
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> New York PHP User Group Community Talk Mailing List
</I>&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.nyphp.org/show_participation.php">http://www.nyphp.org/show_participation.php</A>
</I>&gt;<i>
</I>

Speaking of firewall lock down, I'm a big fan of the iptables
configurations that deny access to ALL ports that aren't explicitly
allowed, which for a vanilla web server would be 443/80 and 22 for ssh
(and if you're crazy deny access to 22 save for an IP-based whitelist,
I use a dyndns entry and re-resolve it every 15 minutes, so I can get
in wherever, but I'm the only person to ever have ssh access to the
server).  I'd make sure password authentication is off for ssh as well
and only use keyfile auth, as it's inherently more secure and less
prone to attack.  If you set your firewall up this way, you're pretty
much guaranteed that an exploit is in your webapp, as webservers and
openssh are very rarely open to exploits.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028972.html">[nycphp-talk] Issues with server getting hacked
</A></li>
	<LI>Next message: <A HREF="028975.html">[nycphp-talk] Issues with server getting hacked
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28973">[ date ]</a>
              <a href="thread.html#28973">[ thread ]</a>
              <a href="subject.html#28973">[ subject ]</a>
              <a href="author.html#28973">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
