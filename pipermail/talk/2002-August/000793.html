<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Warning: Page has expired!!
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2002-August/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Warning%3A%20Page%20has%20expired%21%21&In-Reply-To=%3COF374B2639.6E65205B-ON85256C0C.006B15E8%40pok.ibm.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000792.html">
   <LINK REL="Next"  HREF="000794.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Warning: Page has expired!!</H1>
    <B>Carlos A Hoyos</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Warning%3A%20Page%20has%20expired%21%21&In-Reply-To=%3COF374B2639.6E65205B-ON85256C0C.006B15E8%40pok.ibm.com%3E"
       TITLE="[nycphp-talk] Warning: Page has expired!!">cahoyos at us.ibm.com
       </A><BR>
    <I>Mon Aug  5 16:22:51 EDT 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="000792.html">[nycphp-talk] Opening windows &amp; such
</A></li>
        <LI>Next message: <A HREF="000794.html">simple mysql query help
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#793">[ date ]</a>
              <a href="thread.html#793">[ thread ]</a>
              <a href="subject.html#793">[ subject ]</a>
              <a href="author.html#793">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

Say you have a php page like this:

/* test.php */
&lt;?php
if($submit){
      // process form
      echo(&quot;you typed: $myvariable&quot;);

} else {
      // print form
      echo &quot;\
&lt;FORM METHOD=POST ACTION=\\&quot;<A HREF="http://localhost/test.php\\">http://localhost/test.php\\</A>&quot;&gt;&quot;;
      echo &quot;\
&lt;INPUT TYPE=\\&quot;text\\&quot; NAME=\\&quot;myvariable\\&quot;&gt;&quot;;
      echo &quot;\
&lt;INPUT TYPE=\\&quot;submit\\&quot; name=\\&quot;submit\\&quot; value=\\&quot;submit\\&quot;&gt;&quot;;
      echo &quot;\
&lt;/FORM&gt;&quot;;
}
?&gt;

The first time you call this page it will execute the 'else' part, thus
printing the form.
If you hit the submit button, it will execute the if part. Now, if you hit
refresh, you will get a 'page expired' error.

So one work around:

/* test.php */
&lt;?php
session_start();
if($submit){
      // process form
      session_register(&quot;myvariable&quot;);
      header(&quot;Location: <A HREF="http://localhost/test1.php">http://localhost/test1.php</A>&quot;);

} else {
      session_unregister(&quot;myvariable&quot;);
      // print form
      echo &quot;\
&lt;FORM METHOD=POST ACTION=\\&quot;<A HREF="http://localhost/test.php\\">http://localhost/test.php\\</A>&quot;&gt;&quot;;
      echo &quot;\
&lt;INPUT TYPE=\\&quot;text\\&quot; NAME=\\&quot;myvariable\\&quot;&gt;&quot;;
      echo &quot;\
&lt;INPUT TYPE=\\&quot;submit\\&quot; name=\\&quot;submit\\&quot; value=\\&quot;submit\\&quot;&gt;&quot;;
      echo &quot;\
&lt;/FORM&gt;&quot;;
}
?&gt;

and then,

/* test1.php */
&lt;?php
session_start();
echo(&quot;you typed: &quot;.$_SESSION[&quot;myvariable&quot;]);
?&gt;

when you hit submit, you will get test1.php on your browser, with the right
content from the posted variables. When you hit refresh, no 'page expired'
error.



                                                                                                                                    
                      Oktay Altunergil                                                                                              
                      &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">nyphp at altunergil</A>        To:       NYPHP Talk &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">talk at nyphp.org</A>&gt;                                                
                      .com&gt;                    cc:                                                                                  
                                               Subject:  Re: [nycphp-talk] Warning: Page has expired!!                               
                      08/05/2002 01:24                                                                                              
                      PM                                                                                                            
                      Please respond to                                                                                             
                      talk                                                                                                          
                                                                                                                                    
                                                                                                                                    



Might you be referring to a 'session expired' issues rather than the 'page
expired' issue caused by trying to post a form twice ? If not, please
elaborate cause I don't see how this method will fix the latter.

Oktay

On Mon, 05 Aug 2002 12:39:35 -0400
Carlos A Hoyos &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">cahoyos at us.ibm.com</A>&gt; wrote:

&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I once wrote a task managing application where users would login to see
</I>in
&gt;<i> the home page a queue of incoming tasks and work on them.
</I>&gt;<i> Many users would hit the refresh button on home page, or hit the back
</I>&gt;<i> button after reading a task, and because the home page was reached after
</I>a
&gt;<i> login screen (username &amp; password posted), they would get the &quot;page has
</I>&gt;<i> expired message&quot;, very annoying.
</I>&gt;<i>
</I>&gt;<i> The way I solved it:
</I>&gt;<i> 1- I coded an authenticate function: User name &amp; password get validated,
</I>&gt;<i> and if OK, some important user data gets saved as session variables.
</I>&gt;<i> 2- On top of each page, I call a validate function that starts the
</I>session
&gt;<i> and checks the session variables in (1). If they're not registered, it
</I>will
&gt;<i> display login page, otherwise continues with validation (acls,
</I>&gt;<i> initialization, etc....)
</I>&gt;<i>
</I>&gt;<i> When user first logins (in index.php), I get their username/password via
</I>a
&gt;<i> POST form. If authentication (2) returns true, I use &quot;header&quot; to forward
</I>&gt;<i> them to the mainpage (main.php), free of all forms and thus, free of the
</I>&gt;<i> &quot;expired&quot; problem when refresh/back buttons are hit.
</I>&gt;<i>
</I>&gt;<i> Because on top of mainpage validation function gets called, nobody can
</I>&gt;<i> access it without passing first through authentication.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> So, you can save your post variables (either in the DB with session as a
</I>&gt;<i> key, or link them to session variables (as cookies)) and then send a
</I>header
&gt;<i> that forwards to a new php page that will fetch your variables and
</I>display
&gt;<i> the page. Since this new page would not be associated to any post action
</I>--
&gt;<i> your variables came from the DB, not from post --, reloading or going out
</I>&gt;<i> and back in with the back button will not give any &quot;expired&quot; problem.
</I>&gt;<i>
</I>&gt;<i> Voila!!!!
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>






</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000792.html">[nycphp-talk] Opening windows &amp; such
</A></li>
	<LI>Next message: <A HREF="000794.html">simple mysql query help
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#793">[ date ]</a>
              <a href="thread.html#793">[ thread ]</a>
              <a href="subject.html#793">[ subject ]</a>
              <a href="author.html#793">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
