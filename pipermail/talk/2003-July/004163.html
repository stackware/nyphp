<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Proper File Downloads Across Browsers
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2003-July/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Proper%20File%20Downloads%20Across%20Browsers&In-Reply-To=%3C3F0C34E1.3060509%40nyphp.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004162.html">
   <LINK REL="Next"  HREF="004165.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Proper File Downloads Across Browsers</H1>
    <B>Hans Zaunere</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Proper%20File%20Downloads%20Across%20Browsers&In-Reply-To=%3C3F0C34E1.3060509%40nyphp.org%3E"
       TITLE="[nycphp-talk] Proper File Downloads Across Browsers">hans at nyphp.org
       </A><BR>
    <I>Wed Jul  9 11:29:37 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="004162.html">[nycphp-talk] Job offer - Two Senior Developers
</A></li>
        <LI>Next message: <A HREF="004165.html">[nycphp-talk] Proper File Downloads Across Browsers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4163">[ date ]</a>
              <a href="thread.html#4163">[ thread ]</a>
              <a href="subject.html#4163">[ subject ]</a>
              <a href="author.html#4163">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hey all,

I've written a file/report manager for our Intranet, and it entails mostly of presenting a directory listing, some meta data, and then allowing the user to download the file, or if it's a zip, to browse it online.  Things have worked out smashingly, but I ran into some oddities when presenting a file for download.

I currently have something along the lines of:

      header('Content-type: application/x-download');
      header(&quot;Content-Disposition: attachment; filename={$meta['filesaveas']}&quot;);
      readfile(DATADIR.$meta[FILE]);

This causes both IE and Mozilla to properly present the Save As dialog box, and save the file without munging the extension, etc.  However, I realize that application/x-download isn't a valid MIME type, so it's basically working by default, rather than by design.

I had originally used application/octet-stream for the Content-type, which worked with Mozilla, but IE 6.0 insisted it was a WinZip file and would append .zip to my prepared filename (which is generally .rpt for Crystal Reports).

If anyone has any best-practice ideas for the proper MIME type to use, I'd appreciate it.  To be safe, I'll need to support Netscape 4.7 and IE 5.5 or better versions of either.  I'd like to avoid browser detection if possible, but if someone has a surefire Browser Version =&gt; Content-Type mapping, I would toss get_browser() into the mix.


Thanks,

H





</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004162.html">[nycphp-talk] Job offer - Two Senior Developers
</A></li>
	<LI>Next message: <A HREF="004165.html">[nycphp-talk] Proper File Downloads Across Browsers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4163">[ date ]</a>
              <a href="thread.html#4163">[ thread ]</a>
              <a href="subject.html#4163">[ subject ]</a>
              <a href="author.html#4163">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
