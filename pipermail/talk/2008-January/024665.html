<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] htmlentities charset bug
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2008-January/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20htmlentities%20charset%20bug&In-Reply-To=%3C8f0676b40801231043n45ecfceck7ef0d4f18238ee73%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024664.html">
   <LINK REL="Next"  HREF="024666.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] htmlentities charset bug</H1>
    <B>John Campbell</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20htmlentities%20charset%20bug&In-Reply-To=%3C8f0676b40801231043n45ecfceck7ef0d4f18238ee73%40mail.gmail.com%3E"
       TITLE="[nycphp-talk] htmlentities charset bug">jcampbell1 at gmail.com
       </A><BR>
    <I>Wed Jan 23 13:43:44 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="024664.html">[nycphp-talk] htmlentities charset bug
</A></li>
        <LI>Next message: <A HREF="024666.html">[nycphp-talk] htmlentities charset bug
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24665">[ date ]</a>
              <a href="thread.html#24665">[ thread ]</a>
              <a href="subject.html#24665">[ subject ]</a>
              <a href="author.html#24665">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Jan 23, 2008 1:16 PM, Cliff Hirsch &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">cliff at pinestream.com</A>&gt; wrote:
&gt;<i> On 1/23/08 12:58 PM, &quot;Michael B Allen&quot; &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">ioplex at gmail.com</A>&gt; wrote:&gt;&gt;  Reason:
</I>&gt;<i> &gt;&gt;Invalid multibyte sequence in argument
</I>&gt;<i> &gt;&gt; Those curly single and double quotes are killers.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The problem isn't htmlentities, it's the charset you're pages are
</I>&gt;<i> &gt; emitted in. If you emit an HTML form in ISO-8859-1 and then submit
</I>&gt;<i> &gt; garbage data, the database may store it as garbage and now you have a
</I>&gt;<i> &gt; simple garbage-in / garbage-out scenario. Feed that to htmlentites and
</I>&gt;<i> &gt; tell it it's ISO-8859-1 and you'll get an &quot;Invalid multibyte sequence&quot;
</I>&gt;<i> &gt; error.
</I>
&gt;<i> &gt; if the browser was really sophisticated about it
</I>&gt;<i> &gt; it could pop-up a dialog that warns you and asks you if you would like
</I>&gt;<i> &gt; to transliterate those characters to ISO-8859-1 equivalent glyphs.
</I>&gt;<i> I wonder if there is any way to detect this on the server side. Htmlentities
</I>&gt;<i> certainly catches the problem, but returns an empty string. Some sort of
</I>&gt;<i> friendlier filter that strips characters that are the wrong charset would be
</I>&gt;<i> very cool.
</I>
The clipboard on any modern OS automatically takes care of this.
Encode your pages in utf-8 and you will never have a problem in the
first place.  If you still want to check the encoding, use
mb_check_encoding()

Also, why are you using htmlhentities?  It is a useless function.  If
you want to escape html, the correct function is htmlspecialchars.
Htmlentities should never be used... it is slower, adds no security
benefit, and it unnecessarily makes the data unreadable.

&gt;<i> &gt; I always use UTF-8.
</I>&gt;<i> I think I will too! Seems to be the way to go.
</I>
+1 for utf-8

It is not really optional for modern web development because XMLHTTP
auto converts everything to utf8 no matter what encoding you use on
your page.  If you are not using UTF-8, any data that is not 7-bit
ascii will get screwed up if it is submitted using ajax.

Regards,
John Campbell

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024664.html">[nycphp-talk] htmlentities charset bug
</A></li>
	<LI>Next message: <A HREF="024666.html">[nycphp-talk] htmlentities charset bug
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24665">[ date ]</a>
              <a href="thread.html#24665">[ thread ]</a>
              <a href="subject.html#24665">[ subject ]</a>
              <a href="author.html#24665">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
