<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] htmlentities charset bug
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2008-January/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20htmlentities%20charset%20bug&In-Reply-To=%3C78c6bd860801230958w48175f7ewe401741f1be8280a%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024660.html">
   <LINK REL="Next"  HREF="024664.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] htmlentities charset bug</H1>
    <B>Michael B Allen</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20htmlentities%20charset%20bug&In-Reply-To=%3C78c6bd860801230958w48175f7ewe401741f1be8280a%40mail.gmail.com%3E"
       TITLE="[nycphp-talk] htmlentities charset bug">ioplex at gmail.com
       </A><BR>
    <I>Wed Jan 23 12:58:17 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="024660.html">[nycphp-talk] htmlentities charset bug
</A></li>
        <LI>Next message: <A HREF="024664.html">[nycphp-talk] htmlentities charset bug
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24663">[ date ]</a>
              <a href="thread.html#24663">[ thread ]</a>
              <a href="subject.html#24663">[ subject ]</a>
              <a href="author.html#24663">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 1/23/08, Cliff Hirsch &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">cliff at pinestream.com</A>&gt; wrote:
&gt;<i> On 1/23/08 10:10 AM, &quot;csnyder&quot; &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">chsnyder at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; On Jan 22, 2008 4:11 PM, Cliff Hirsch &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">cliff at pinestream.com</A>&gt; wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt;  Reason: Invalid multibyte sequence in argument
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;  Root cause: cut and pasting text from MS Word in XP.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Neat. Any idea what the offending character or sequence was?
</I>&gt;<i> Oh yeah, curly single and double quotes, or whatever the proper name for
</I>&gt;<i> them is.
</I>&gt;<i>
</I>&gt;<i> The sequence was:
</I>&gt;<i> 1. Wrote FAQ in Word on Windows XP.
</I>&gt;<i> 2. Cut and pasted entries into database (can't recall whether it was through
</I>&gt;<i> my app or phpMyAdmin)
</I>&gt;<i> 3. Errors start appearing.
</I>&gt;<i>
</I>&gt;<i> Those curly single and double quotes are killers.
</I>
The problem isn't htmlentities, it's the charset you're pages are
emitted in. If you emit an HTML form in ISO-8859-1 and then submit
garbage data, the database may store it as garbage and now you have a
simple garbage-in / garbage-out scenario. Feed that to htmlentites and
tell it it's ISO-8859-1 and you'll get an &quot;Invalid multibyte sequence&quot;
error.

Technically I think the browser should see that the page is ISO-8859-1
and squash invalid sequences to some default character like '?' when
you paste it into the form but accepting the data as-is is more
forgiving I suppose. If the browser was really sophisticated about it
it could pop-up a dialog that warns you and asks you if you would like
to transliterate those characters to ISO-8859-1 equivalent glyphs.

Use UTF-8 and the problem will go away. At least you won't get an
error. The curly quotes will remain curly quotes which means if you
don't see them and fix them and someone swipes that text off the page
and pastes it into an email that's ISO-8859-1 then they'll be squashed
to '?' or sometimes ugly rectangles.

I always use UTF-8.

Mike

-- 
Michael B Allen
PHP Active Directory SPNEGO SSO
<A HREF="http://www.ioplex.com/">http://www.ioplex.com/</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024660.html">[nycphp-talk] htmlentities charset bug
</A></li>
	<LI>Next message: <A HREF="024664.html">[nycphp-talk] htmlentities charset bug
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24663">[ date ]</a>
              <a href="thread.html#24663">[ thread ]</a>
              <a href="subject.html#24663">[ subject ]</a>
              <a href="author.html#24663">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
