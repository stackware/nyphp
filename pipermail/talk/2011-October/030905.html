<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Insert updating instead of inserting
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2011-October/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Insert%20updating%20instead%20of%20inserting&In-Reply-To=%3C5e967c4a-9fa2-6541-8284-d680747d0a90%40me.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="030906.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Insert updating instead of inserting</H1>
    <B>Bruce Martin</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Insert%20updating%20instead%20of%20inserting&In-Reply-To=%3C5e967c4a-9fa2-6541-8284-d680747d0a90%40me.com%3E"
       TITLE="[nycphp-talk] Insert updating instead of inserting">bmartin at mac.com
       </A><BR>
    <I>Mon Oct  3 09:03:25 EDT 2011</I>
    <P><UL>
        
        <LI>Next message: <A HREF="030906.html">[nycphp-talk] somewhat OT Re: validating proper name	capitalization
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30905">[ date ]</a>
              <a href="thread.html#30905">[ thread ]</a>
              <a href="subject.html#30905">[ subject ]</a>
              <a href="author.html#30905">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I think, I have resolved the issue. I was not using on duplicate key, but after reading through the documentation about auto_increment, I decided to include an Id, the primary auto_incremented field in the insert statement and assign it a value of null. This seems to force the auto_increment&#160;to do it's thing instead of updating.

Bruce Martin
The Martin Solution
<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">Bruce at martinsolution.com</A>
<A HREF="http://www.martinsolution.com">http://www.martinsolution.com</A>

On Sep 30, 2011, at 07:13 PM, Federico Ulfo &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">rainelemental at gmail.com</A>&gt; wrote:

Weird issue, are you using INSERT INTO ... ON DUPLICATE KEY ... UPDATE?
<A HREF="http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html">http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html</A>

Also if you don't want to receive any MySql error from the INSERT query you might want to user INSERT IGNORE, it won't do nothing if the row you're inserting is already there.

Just in case you don't find a simple solution, you can create a pipeline for the chron job and let him handle all the insert queries.



On Fri, Sep 30, 2011 at 7:00 PM, Dan Cech &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">dcech at phpwerx.net</A>&gt; wrote:
Bruce,


I have an issue I hope someone can help me figure out. We have a Mysql database
two php processes that insert new records into a table. There should never be a
time when these processes update a record they should only insert a new one.
These processes run simultaneously one running from a cron job and the other
running when requested is made via an ajax call.

For some reason when each process is working at the same time It seems to not
insert a new record but update a similar record. I am explicitly calling insert
and I do not include the primary_key id in the insert statement.

Can you post the output from SHOW CREATE TABLE and an example of the queries you're running?

Also, please don't create a new topic by hitting reply and changing the subject, it breaks threading in most mail clients.

Dan
_______________________________________________
New York PHP Users Group Community Talk Mailing List
<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>

<A HREF="http://www.nyphp.org/Show-Participation">http://www.nyphp.org/Show-Participation</A>

_______________________________________________
New York PHP Users Group Community Talk Mailing List
<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>

<A HREF="http://www.nyphp.org/Show-Participation">http://www.nyphp.org/Show-Participation</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.nyphp.org/pipermail/talk/attachments/20111003/7aeafaf0/attachment.html">http://lists.nyphp.org/pipermail/talk/attachments/20111003/7aeafaf0/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="030906.html">[nycphp-talk] somewhat OT Re: validating proper name	capitalization
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30905">[ date ]</a>
              <a href="thread.html#30905">[ thread ]</a>
              <a href="subject.html#30905">[ subject ]</a>
              <a href="author.html#30905">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
