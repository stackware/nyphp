<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Using APC to improve performance.
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2009-March/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Using%20APC%20to%20improve%20performance.&In-Reply-To=%3Cf9948c350903302130p44f00b8bg487f22b9042ae315%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027796.html">
   <LINK REL="Next"  HREF="027799.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Using APC to improve performance.</H1>
    <B>Che Hodgins</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Using%20APC%20to%20improve%20performance.&In-Reply-To=%3Cf9948c350903302130p44f00b8bg487f22b9042ae315%40mail.gmail.com%3E"
       TITLE="[nycphp-talk] Using APC to improve performance.">chehodgins at gmail.com
       </A><BR>
    <I>Tue Mar 31 00:30:56 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="027796.html">[nycphp-talk] Using APC to improve performance.
</A></li>
        <LI>Next message: <A HREF="027799.html">[nycphp-talk] Using APC to improve performance.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27798">[ date ]</a>
              <a href="thread.html#27798">[ thread ]</a>
              <a href="subject.html#27798">[ subject ]</a>
              <a href="author.html#27798">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Konstantin,

On Mon, Mar 30, 2009 at 8:03 PM, Konstantin Rozinov &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">krozinov at gmail.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> Hi folks,
</I>&gt;<i>
</I>&gt;<i> I recently installed APC (<A HREF="http://pecl.php.net/package/APC">http://pecl.php.net/package/APC</A>) to see how
</I>&gt;<i> it works. &#160;Currently, I'm just using the opcode (file) caching and
</I>&gt;<i> already the response time is about 4x faster. &#160;No code changes were
</I>&gt;<i> required and it was as easy as just enabling APC in php.ini. &#160;Now I'm
</I>&gt;<i> interested in trying out the &quot;user variable caching&quot; to see if I can
</I>&gt;<i> get any more improvement in response time. &#160;I know that this will
</I>&gt;<i> require code changes and the use of the APC functions (like apc_add(),
</I>&gt;<i> apc_fetch(), etc.)
</I>&gt;<i>
</I>&gt;<i> For example, I have a configuration file, which has about 400+ defined
</I>&gt;<i> constants for the web application I'm working on. &#160;I've read in the
</I>&gt;<i> APC documentation and elsewhere that define() is notoriously slow (not
</I>&gt;<i> sure why??).
</I>&gt;<i>
</I>&gt;<i> 1. Will storing these constants in APC help?
</I>
Although I don't use apc_define_constants(), I'm sure some gains can
be achieved. The question is whether Cost &gt; Reward. I recommend
profiling your code with an extension such as Xdebug to see how much
you can save by using apc_define_constants.

&gt;<i>
</I>&gt;<i> 2. How would you store these constants? &#160;Just use apc_add()? &#160;Or use
</I>&gt;<i> apc_ load_ constants() (the APC docs say that this doesn't work as
</I>&gt;<i> well as expected?!)?
</I>
You should use apc_define_constants() and apc_load_constants(). Since
you won't know if they are already loaded you will need something
like:

&lt;?php

$loaded = apc_load_constants('my_app');
if ($loaded == false) {
&#160;&#160;&#160; $configuration = parse_ini_file('configuration.ini');
&#160;&#160;&#160; apc_define_constants('my_app', $configuration);
}

After which you will can access the constants as you normally would.

&gt;<i>
</I>&gt;<i> 3. If I'm already using the opcode (file) caching, will it make any
</I>&gt;<i> difference store the 400+ defined constans in APC?
</I>
It should, if not I don't see why they would have created these two functions.

&gt;<i>
</I>&gt;<i> 4. Any links to really good APC howtos or tutorials would be greatly
</I>&gt;<i> appreciated!
</I>
Before starting to optimize where you think there may be problems, I
recommend you actually find out where the problems are. Using tools
like xdebug and kcachegrind you can pretty quickly find bottlenecks
and you won't waste as much time guessing.

Good luck!

Che

&gt;<i>
</I>&gt;<i> Thanks for any help and tips.
</I>&gt;<i> Konstantin
</I>&gt;<i> _______________________________________________
</I>&gt;<i> New York PHP User Group Community Talk Mailing List
</I>&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.nyphp.org/show_participation.php">http://www.nyphp.org/show_participation.php</A>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027796.html">[nycphp-talk] Using APC to improve performance.
</A></li>
	<LI>Next message: <A HREF="027799.html">[nycphp-talk] Using APC to improve performance.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27798">[ date ]</a>
              <a href="thread.html#27798">[ thread ]</a>
              <a href="subject.html#27798">[ subject ]</a>
              <a href="author.html#27798">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
