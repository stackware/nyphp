<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] the stale V in MVC web apps
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2009-March/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20the%20stale%20V%20in%20MVC%20web%20apps&In-Reply-To=%3C8f0676b40903041030n422417b9ucb15c877a9f9d611%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027608.html">
   <LINK REL="Next"  HREF="027612.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] the stale V in MVC web apps</H1>
    <B>John Campbell</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20the%20stale%20V%20in%20MVC%20web%20apps&In-Reply-To=%3C8f0676b40903041030n422417b9ucb15c877a9f9d611%40mail.gmail.com%3E"
       TITLE="[nycphp-talk] the stale V in MVC web apps">jcampbell1 at gmail.com
       </A><BR>
    <I>Wed Mar  4 13:30:05 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="027608.html">[nycphp-talk] the stale V in MVC web apps
</A></li>
        <LI>Next message: <A HREF="027612.html">[nycphp-talk] the stale V in MVC web apps
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27611">[ date ]</a>
              <a href="thread.html#27611">[ thread ]</a>
              <a href="subject.html#27611">[ subject ]</a>
              <a href="author.html#27611">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Mar 4, 2009 at 12:48 PM, David Mintz &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">vtbludgeon at gmail.com</A>&gt; wrote:
&gt;<i> // on load
</I>&gt;<i>
</I>&gt;<i> window.updater = window.setInterval(submitForm,updateInterval);
</I>&gt;<i>
</I>&gt;<i> // and...
</I>&gt;<i>
</I>&gt;<i> submitForm = function(){
</I>&gt;<i> 	
</I>&gt;<i> 	$('searchForm').request({
</I>&gt;<i> 		onCreate:function(response){$('formSubmit').value=&quot;Processing...&quot;},
</I>&gt;<i>
</I>&gt;<i> 		onComplete:function(xhr){
</I>&gt;<i> 			// reset timer
</I>&gt;<i>   			window.clearInterval(updater);
</I>&gt;<i>   			window.updater = window.setInterval(submitForm,updateInterval);
</I>&gt;<i> 			$('formSubmit').value=&quot;Search&quot; // reset button's value
</I>&gt;<i>
</I>&gt;<i> 			// etc
</I>&gt;<i> 			
</I>&gt;<i> 		}
</I>&gt;<i> 	});
</I>&gt;<i> 		
</I>&gt;<i> };
</I>
I don't think your code is quite right.  To validate polling code,
just add &quot;sleep(2)&quot; to your php code, and set the updateInterval to 1
second.  If it doesn't work under these conditions, then the code is
not quite right.

The problem with your code is that you clear the interval onComplete,
rather than onCreate.  It is possible that the interval keeps firing
while onComplete has not been run because the ajax requests are taking
a long time due to a network issue.

To fix it... just change setInterval to setTimeout everywhere, and get
rid if the clearInterval code.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027608.html">[nycphp-talk] the stale V in MVC web apps
</A></li>
	<LI>Next message: <A HREF="027612.html">[nycphp-talk] the stale V in MVC web apps
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27611">[ date ]</a>
              <a href="thread.html#27611">[ thread ]</a>
              <a href="subject.html#27611">[ subject ]</a>
              <a href="author.html#27611">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
