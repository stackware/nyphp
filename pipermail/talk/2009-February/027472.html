<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] slow php (slow database)
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2009-February/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20slow%20php%20%28slow%20database%29&In-Reply-To=%3C4995DA96.5050405%40secdat.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027473.html">
   <LINK REL="Next"  HREF="027476.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] slow php (slow database)</H1>
    <B>Kenneth Downs</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20slow%20php%20%28slow%20database%29&In-Reply-To=%3C4995DA96.5050405%40secdat.com%3E"
       TITLE="[nycphp-talk] slow php (slow database)">ken at secdat.com
       </A><BR>
    <I>Fri Feb 13 15:39:50 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="027473.html">[nycphp-talk] slow php
</A></li>
        <LI>Next message: <A HREF="027476.html">[nycphp-talk] slow php (slow database)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27472">[ date ]</a>
              <a href="thread.html#27472">[ thread ]</a>
              <a href="subject.html#27472">[ subject ]</a>
              <a href="author.html#27472">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This ain't PHP,and Python won't help.  Inserting 2.4 million rows into a 
database will take hours if you go line by line.  You are paying a big 
overhead of a round trip to the server for each row.

The best way to speed it up is to use what they call &quot;bulk copy&quot; on MS 
SQL Server and &quot;copy&quot; on PostgreSQL.  I'd have to assume mySQL has 
something by the same name.

Also, it may be that mySQL supports multiple inserts per line, in which 
case you can do 10 inserts per round trip.  This will speed it up w/o 
requiring you to do to a different command for the bulk copy.

Nicholas Hart wrote:
&gt;<i> I have a php 'cron job' script which is inserting some records.  It 
</I>&gt;<i> uses arrays to store 12 field records along with several nested loops 
</I>&gt;<i> in which it tests various currency values from a separate 4 field 
</I>&gt;<i> table and sorts them to get the lowest one for insert into a new 4 
</I>&gt;<i> field table record.  It has about 640,000 Product records per 4 
</I>&gt;<i> Customers or apporx. 2.4 million records to insert.  It takes several 
</I>&gt;<i> hours+ to complete and I am hoping there is a way to speed it up. 
</I>&gt;<i>
</I>&gt;<i> So far, I've tried updating instead of inserting records and changing 
</I>&gt;<i> a few functions but nothing seems to make much difference.  Am I being 
</I>&gt;<i> unreasonable for the size of the files here?  I'm considering using a 
</I>&gt;<i> Derived Table in mySQL and will also consider another language such as 
</I>&gt;<i> python.  Please let me know if you have any suggestions.  Thanks.
</I>&gt;<i>
</I>&gt;<i> Nicholas Hart
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ------------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> New York PHP User Group Community Talk Mailing List
</I>&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.nyphp.org/show_participation.php">http://www.nyphp.org/show_participation.php</A>
</I>

-- 
Kenneth Downs
Secure Data Software, Inc.
www.secdat.com    www.andromeda-project.org
631-689-7200   Fax: 631-689-0527
cell: 631-379-0010

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.nyphp.org/pipermail/talk/attachments/20090213/bc37053a/attachment.html">http://lists.nyphp.org/pipermail/talk/attachments/20090213/bc37053a/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027473.html">[nycphp-talk] slow php
</A></li>
	<LI>Next message: <A HREF="027476.html">[nycphp-talk] slow php (slow database)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27472">[ date ]</a>
              <a href="thread.html#27472">[ thread ]</a>
              <a href="subject.html#27472">[ subject ]</a>
              <a href="author.html#27472">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
