<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] lost sessions on redirect
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2009-February/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20lost%20sessions%20on%20redirect&In-Reply-To=%3C4990EDDA.9000908%40gmx.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027457.html">
   <LINK REL="Next"  HREF="027456.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] lost sessions on redirect</H1>
    <B>David Krings</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20lost%20sessions%20on%20redirect&In-Reply-To=%3C4990EDDA.9000908%40gmx.net%3E"
       TITLE="[nycphp-talk] lost sessions on redirect">ramons at gmx.net
       </A><BR>
    <I>Mon Feb  9 22:00:42 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="027457.html">[nycphp-talk] lost sessions on redirect
</A></li>
        <LI>Next message: <A HREF="027456.html">[nycphp-talk] lost sessions on redirect
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27459">[ date ]</a>
              <a href="thread.html#27459">[ thread ]</a>
              <a href="subject.html#27459">[ subject ]</a>
              <a href="author.html#27459">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Michael Southwell wrote:
&gt;<i> Christina Karlhoff wrote:
</I>&gt;&gt;<i> About a year ago NYPHP created a captcha form for our website.  The 
</I>&gt;&gt;<i> html has undergone quite a few changes.  Unfortunately in that process 
</I>&gt;&gt;<i> we've lost some function...when a user submits the form, forgetting a 
</I>&gt;&gt;<i> required field, the session is lost; on the redirect the data that was 
</I>&gt;&gt;<i> input by the user is gone.  Needing some guidance as to how to fix 
</I>&gt;&gt;<i> this.  Help please?
</I>&gt;<i> 
</I>&gt;<i> Carry the session id along as a get variable in the redirect, something 
</I>&gt;<i> like this:
</I>&gt;<i> header( 'Location: somewhere.php?PHPSESSID=' . session_id() );
</I>

Also, upon calling a script that is dependent on the session make sure that 
the session is picked up again before doing anything else. I use redirects 
frequently (back when I had time to code) and typically did this:

Script A
session_write_close
redirect to Script B

Script B
Session_start

I found that the session_write_close wasn't always necessary, but a few tests 
turned up that variables were still written to the file while the redirect 
already completed. The session_start is then always the first line of code to 
get executed, even before initializing variables, including files, or doing 
anything else.

My approach relies in cookies being set for passing the session_id along. I 
guess the more solid approach is to go with what Michael proposed. I am sure 
that when you use both approaches session data will be preserved and will 
remain available.

Alternatively, anything that is stored in a session can also be stored 
temporarily on the server. You can create your own random IDs and start 
stuffing data into database tables or flat files. That may have other 
disadvantages. I find session handling in PHP to be very convenient, almost 
too convenient as one is tempted to load all kinds of crap into the session 
and piggyback it through all scripts.

HTH

David




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027457.html">[nycphp-talk] lost sessions on redirect
</A></li>
	<LI>Next message: <A HREF="027456.html">[nycphp-talk] lost sessions on redirect
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27459">[ date ]</a>
              <a href="thread.html#27459">[ thread ]</a>
              <a href="subject.html#27459">[ subject ]</a>
              <a href="author.html#27459">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
