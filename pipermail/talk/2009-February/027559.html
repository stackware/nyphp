<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Parse HTML Files as PHP
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2009-February/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Parse%20HTML%20Files%20as%20PHP&In-Reply-To=%3C5e2aaca40902221952r6086036dp5f5ae0b449904226%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027556.html">
   <LINK REL="Next"  HREF="027560.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Parse HTML Files as PHP</H1>
    <B>Greg Rundlett</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Parse%20HTML%20Files%20as%20PHP&In-Reply-To=%3C5e2aaca40902221952r6086036dp5f5ae0b449904226%40mail.gmail.com%3E"
       TITLE="[nycphp-talk] Parse HTML Files as PHP">greg_rundlett at harvard.edu
       </A><BR>
    <I>Sun Feb 22 22:52:27 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="027556.html">[nycphp-talk] Parse HTML Files as PHP
</A></li>
        <LI>Next message: <A HREF="027560.html">[nycphp-talk] PHP scripts running in JBoss
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27559">[ date ]</a>
              <a href="thread.html#27559">[ thread ]</a>
              <a href="subject.html#27559">[ subject ]</a>
              <a href="author.html#27559">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, Feb 22, 2009 at 3:31 PM, Tim Lieberman &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">tim_lists at o2group.com</A>&gt; wrote:
&gt;<i> On Feb 22, 2009, at 3:04 PM, Greg Rundlett wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> On Sat, Feb 21, 2009 at 11:15 PM, Ajai Khattri &lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">ajai at bitblit.net</A>&gt; wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On Fri, 20 Feb 2009, Peter Sawczynec wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Anyone have any comment on this strategy pro or con?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Not good for performance or scalability.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Why exactly?  mod_php is both performant and scalable.
</I>&gt;<i>
</I>&gt;<i> mod_php can be a memory hog, bloating your httpd processes.  Who needs that
</I>&gt;<i> bloat to serve static content?
</I>&gt;<i>
</I>&gt;<i> Nice little webcast about this here:
</I>&gt;<i>
</I>&gt;<i> &lt;<A HREF="http://www.joomlaperformance.com/articles/webcasts/why_mod_php_is_bad_for_performance_52_58.html">http://www.joomlaperformance.com/articles/webcasts/why_mod_php_is_bad_for_performance_52_58.html</A>&gt;
</I>&gt;<i>
</I>
Thanks for the link Tim.  That webcast offers a good explanation of
the differences between a couple options for running PHP (Apache
Module v. FastCGI implementation).  However, the OP was looking to add
PHP capabilities (e.g. logic, dynamic content, navigation, sessions,
whatever) to a collection of static html files.  That means he must
use PHP -- either mod_php or fastcgi and will take on some performance
overhead.  And the question is whether he should just turn on the PHP
interpreter for requests to *.html or some other approach.  Saying
fastcgi is faster than mod_php doesn't offer a solution to the
original question.  To add the php interpreter to a collection .html
URIs, you can turn it on at the server configuration level (with the
AddHandler directive &quot;plan
A&quot;<A HREF="http://httpd.apache.org/docs/2.0/mod/mod_mime.html#addhandler">http://httpd.apache.org/docs/2.0/mod/mod_mime.html#addhandler</A> ) or
you could do it in a few other ways.

I think the most commonly seen method is to abandon the original URIs.
E.g. &quot;Due to a &quot;site upgrade&quot; our homepage home.html has now moved to
home.php, please update your bookmarks&quot;. But I must say that is a bad
idea.

One alternate way (that has been suggested and even seconded) is to
use an application framework (assuming that it has some dispatcher
mechanism that maps the request to the original content) so that it
can respond appropriately to requests for your original URIs.  This
could be implemented with many PHP frameworks (or Python etc.)  The
business case for &quot;creating an application&quot; depends on many factors we
don't know about -- so I'd hesitate to recommend it apriori.  In fact,
I'd say that is a answer to a problem that hasn't been asked yet.

Besides telling Apache to handle *.html requests with the php
interpreter via the AddHandler directive (either as an Apache module,
or fastcgi implementation, or perhaps using lighthttpd...) another
option is to use content negotiation (which is more often used for
translations but works just as well for mime types).   Rename all the
.html files as .php and let Apache serve the mapped file.
<A HREF="http://www.w3.org/QA/2006/02/content_negotiation.html">http://www.w3.org/QA/2006/02/content_negotiation.html</A> and
<A HREF="http://httpd.apache.org/docs/2.0/mod/mod_negotiation.html">http://httpd.apache.org/docs/2.0/mod/mod_negotiation.html</A>  This
approach will not change the requested URIs, so it is SEO-neutral.
I'd recommend using this approach while simultaneously updating all
internal references to be technology-agnostic.  Client requests
foo.html --&gt; Apache finds foo.php and serves it as foo.html.  bar.php
should link to &quot;foo&quot; rather than foo.html or foo.php  The resource on
disk should be foo.php so that developers can know the technology in
use, and IDEs can easily identify the mime-type.

You could rename all the files (*.html -&gt; *.php) and use mod_rewrite
under the covers but that would be a double performance hit: once for
mod_rewrite execution; the other intentional performance hit for
invoking PHP.

I'm assuming that static or anonymous content serving (e.g.
about.us.html which is now about.us.php on disk and served through the
php interpreter in response to requests to either about.us or
about.us.html) would be optimized using php caching, or other caching
strategies.  Info at
<A HREF="http://freephile.com/wiki/index.php/PHP_Accelerator">http://freephile.com/wiki/index.php/PHP_Accelerator</A>

It's been a while since I dug into the current link juice algorithms,
but I'd say that as long as external links to your content still work
with a 200 response, then you're good.  If you're implementing visible
(to the client) redirects or changing URIs then you're in for a hit.

Also, for those interested in benchmarking performance of different
servers (Apache v. Lighty), deployment options for PHP (cgi v. module)
or PHP versions (php4 v. php5) here are a couple of good links:
<A HREF="http://buytaert.net/drupal-webserver-configurations-compared">http://buytaert.net/drupal-webserver-configurations-compared</A>
<A HREF="http://sebastian-bergmann.de/archives/634-PHP-GCC-ICC-Benchmark.html">http://sebastian-bergmann.de/archives/634-PHP-GCC-ICC-Benchmark.html</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027556.html">[nycphp-talk] Parse HTML Files as PHP
</A></li>
	<LI>Next message: <A HREF="027560.html">[nycphp-talk] PHP scripts running in JBoss
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27559">[ date ]</a>
              <a href="thread.html#27559">[ thread ]</a>
              <a href="subject.html#27559">[ subject ]</a>
              <a href="author.html#27559">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
