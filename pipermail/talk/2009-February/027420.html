<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Mod_auth_digest/mysql works!
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2009-February/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Mod_auth_digest/mysql%20works%21&In-Reply-To=%3C78c6bd860902031535k1dbccc12ha26b5dd992493cb%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027419.html">
   <LINK REL="Next"  HREF="027424.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Mod_auth_digest/mysql works!</H1>
    <B>Michael B Allen</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Mod_auth_digest/mysql%20works%21&In-Reply-To=%3C78c6bd860902031535k1dbccc12ha26b5dd992493cb%40mail.gmail.com%3E"
       TITLE="[nycphp-talk] Mod_auth_digest/mysql works!">ioplex at gmail.com
       </A><BR>
    <I>Tue Feb  3 18:35:15 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="027419.html">[nycphp-talk] Mod_auth_digest/mysql works!
</A></li>
        <LI>Next message: <A HREF="027424.html">[nycphp-talk] Mod_auth_digest/mysql works!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27420">[ date ]</a>
              <a href="thread.html#27420">[ thread ]</a>
              <a href="subject.html#27420">[ subject ]</a>
              <a href="author.html#27420">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Feb 3, 2009 at 5:26 PM, Daniel Convissor
&lt;<A HREF="http://lists.nyphp.org/mailman/listinfo/talk">danielc at analysisandsolutions.com</A>&gt; wrote:
&gt;<i> Hey Again Mike:
</I>&gt;<i>
</I>&gt;<i> On Tue, Feb 03, 2009 at 05:21:52PM -0500, Daniel Convissor wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Tue, Feb 03, 2009 at 03:29:09PM -0500, Michael B Allen wrote:
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;  3. PHP does not have garbage collection
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Yes it does.  That's what the various gc_* php.ini settings are for:
</I>&gt;&gt;<i> <A HREF="http://php.net/session.configuration">http://php.net/session.configuration</A>
</I>&gt;<i>
</I>&gt;<i> Doh!  Those are for session garbage collection.  None the less, PHP does
</I>&gt;<i> have garbage collection.
</I>
Not really. But it wouldn't be hard to split some hairs in this conversation.

My understanding is that true &quot;garbage collection&quot; doesn't immediately
free objects when they fall out of scope or when they're set to nil
but rather maintains table references that can be used to periodically
figure out how to efficiently free things later. Usually there's a
background process that does this in a way that allows programs to
&quot;run wild&quot; but then free things when the CPU becomes idle or if free
memory runs low.

I'm not an expert on this stuff so my description is probably
oversimplified but PHP does not do the above. It just frees everything
as soon as it's unset. Or maybe it waits to some degree but I don't
think there's a sophisticated algorithm behind it, it doesn't maintain
a separate table of allocations (the zvals and resources *are* the
allocation table) and it doesn't use a separate process to do any of
this. GC has never been a really high priority since PHP scripts are
usually fairly short lived.

An important implication of this is that I would imagine if you tried
to write a long-lived PHP script that did a lot of work like a CLI
script run from cron, you'd find the script would behave poorly after
a while and may even just run out of memory entirely if you didn't
aggressively unset() things. With proper GC that would not happen.

I have written PHP extensions and to do that you need to know how
things are allocated internally. There are two types of memory objects
- zvals and resources. The zvals are used to represent arrays,
objects, variable length data (strings), integers and doubles. Since
you can completely traverse a zval and all descendants, PHP can
automatically delete the entire tree when the root zval is unset().
Resources are managed by extensions and have deconstructors that are
responsible for freeing all memory associated with them. These are
used for things like file handles, database connections, drawing
contexts and so on. If you unset a resource it fires the deconstructor
which must explicitily go through and free any memory that has been
allocated by the resource.

My instinct is that PHP probably does delay deallocation of things
that are unset for a short time reasoning that the script will
probably complete by the time it needs to actually free things. But
that's pure speculation on my part. It just seems like a smart thing
to do. Then again, if you unset() something and then look at
memory_get_usage it shows the memory has been deallocated (although it
could just be lying or call the &quot;collection&quot; routine first).

Again, I'm not an expert on this so I've probably trampled some truth
in a message this size. But I know for sure that it is not accurate to
say that &quot;PHP uses garbage collection&quot;.

Mike

-- 
Michael B Allen
Java Active Directory Integration
<A HREF="http://www.ioplex.com/">http://www.ioplex.com/</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027419.html">[nycphp-talk] Mod_auth_digest/mysql works!
</A></li>
	<LI>Next message: <A HREF="027424.html">[nycphp-talk] Mod_auth_digest/mysql works!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27420">[ date ]</a>
              <a href="thread.html#27420">[ thread ]</a>
              <a href="subject.html#27420">[ subject ]</a>
              <a href="author.html#27420">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
