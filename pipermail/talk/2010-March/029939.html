<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Adding indexes
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2010-March/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Adding%20indexes&In-Reply-To=%3C79359172-35F1-4689-AE38-7208E178673A%40beaffinitive.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029938.html">
   <LINK REL="Next"  HREF="029937.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Adding indexes</H1>
    <B>Rob Marscher</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Adding%20indexes&In-Reply-To=%3C79359172-35F1-4689-AE38-7208E178673A%40beaffinitive.com%3E"
       TITLE="[nycphp-talk] Adding indexes">rmarscher at beaffinitive.com
       </A><BR>
    <I>Tue Mar 23 12:02:31 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="029938.html">[nycphp-talk] Adding indexes
</A></li>
        <LI>Next message: <A HREF="029937.html">[nycphp-talk] Adding indexes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29939">[ date ]</a>
              <a href="thread.html#29939">[ thread ]</a>
              <a href="subject.html#29939">[ subject ]</a>
              <a href="author.html#29939">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mar 23, 2010, at 11:50 AM, Daniel Convissor wrote:
&gt;<i> On Tue, Mar 23, 2010 at 11:12:57AM -0400, Rob Marscher wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I'm having trouble finding exactly where it says it.
</I>&gt;<i> ...
</I>&gt;&gt;<i> If you run EXPLAIN, you'll see it only picks one index to use for each 
</I>&gt;&gt;<i> table.
</I>&gt;<i> 
</I>&gt;<i> That may be true for the queries you ran.  If that's the case, you don't 
</I>&gt;<i> have enough rows for the optimizer to realize that using more than one 
</I>&gt;<i> indexes makes a difference.  Once you do, your EXPLAIN output will look 
</I>&gt;<i> something like this...
</I>
You have two tables here and you'll see the second table is using the &quot;index_merge&quot; optimization that I mentioned.  So you're right, there is a few ways that mysql can use more than one index.

If you don't have enough rows, then the index is probably not being used because mysql only uses the indexes when they provide a significant enhancement over a full table scan (I know... throwing out another statement without a reference, but I think this is stated in the documentation page I send on how mysql uses indexes).

&gt;<i> EXPLAIN
</I>&gt;<i> SELECT person_id
</I>&gt;<i> FROM person
</I>&gt;<i> JOIN person_status USING (status_id)
</I>&gt;<i> WHERE department_id = 11 AND status_id = 10 \G
</I>&gt;<i> 
</I>&gt;<i> *************************** 1. row ***************************
</I>&gt;<i>           id: 1
</I>&gt;<i>  select_type: SIMPLE
</I>&gt;<i>        table: person_status
</I>&gt;<i>         type: const
</I>&gt;<i> possible_keys: PRIMARY
</I>&gt;<i>          key: PRIMARY
</I>&gt;<i>      key_len: 4
</I>&gt;<i>          ref: const
</I>&gt;<i>         rows: 1
</I>&gt;<i>        Extra: Using index
</I>&gt;<i> *************************** 2. row ***************************
</I>&gt;<i>           id: 1
</I>&gt;<i>  select_type: SIMPLE
</I>&gt;<i>        table: person
</I>&gt;<i>         type: index_merge
</I>&gt;<i> possible_keys: status_id,department_id
</I>&gt;<i>          key: department_id,status_id
</I>&gt;<i>      key_len: 4,5
</I>&gt;<i>          ref: NULL
</I>&gt;<i>         rows: 1
</I>&gt;<i>        Extra: Using intersect(department_id,status_id); Using
</I>&gt;<i>               where; Using index
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029938.html">[nycphp-talk] Adding indexes
</A></li>
	<LI>Next message: <A HREF="029937.html">[nycphp-talk] Adding indexes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29939">[ date ]</a>
              <a href="thread.html#29939">[ thread ]</a>
              <a href="subject.html#29939">[ subject ]</a>
              <a href="author.html#29939">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
