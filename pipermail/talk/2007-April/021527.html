<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] DB-based sessions and destructing objects problem
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2007-April/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20DB-based%20sessions%20and%20destructing%20objects%20problem&In-Reply-To=%3C20070402142706.M83063%40pinestream.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021526.html">
   <LINK REL="Next"  HREF="021528.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] DB-based sessions and destructing objects problem</H1>
    <B>Cliff Hirsch</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20DB-based%20sessions%20and%20destructing%20objects%20problem&In-Reply-To=%3C20070402142706.M83063%40pinestream.com%3E"
       TITLE="[nycphp-talk] DB-based sessions and destructing objects problem">cliff at pinestream.com
       </A><BR>
    <I>Mon Apr  2 10:27:06 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="021526.html">[nycphp-talk] Creating database tables when deploying products
</A></li>
        <LI>Next message: <A HREF="021528.html">[nycphp-talk] PHP auction software / experiance &amp; comments
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21527">[ date ]</a>
              <a href="thread.html#21527">[ thread ]</a>
              <a href="subject.html#21527">[ subject ]</a>
              <a href="author.html#21527">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I am implementing a MySQL-based session handler and am confused by the dialog
in the PHP manual regarding this issue:

&quot;Write and Close handlers are called after destructing objects since PHP
5.0.5. Thus destructors can use sessions but session handler can't use
objects. In prior versions, they were called in the opposite order. It is
possible to call session_write_close() from the destructor to solve this
chicken and egg problem.&quot;

The English please....

First, my app uses PEAR DB. So should I use PEAR DB for access, or use the
mysql or mysqli primitives and open a new connection? It seems like opening a
new connection would be a waste of resources. But using PEAR DB adds overhead
and brings up this object destruction problem.

I've seen register_shutdown_function('session_write_close'); as a way to get
around the destructor issue, but what is the PEAR DB class is destructed
before the session handler?

Thoroughly confused...

Thoughts?

Cliff

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021526.html">[nycphp-talk] Creating database tables when deploying products
</A></li>
	<LI>Next message: <A HREF="021528.html">[nycphp-talk] PHP auction software / experiance &amp; comments
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21527">[ date ]</a>
              <a href="thread.html#21527">[ thread ]</a>
              <a href="subject.html#21527">[ subject ]</a>
              <a href="author.html#21527">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
