<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Copying file from HTTP/FTP using copy()
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2007-April/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Copying%20file%20from%20HTTP/FTP%20using%20copy%28%29&In-Reply-To=%3C463330C1.3020404%40gmx.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021729.html">
   <LINK REL="Next"  HREF="021737.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Copying file from HTTP/FTP using copy()</H1>
    <B>David Krings</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Copying%20file%20from%20HTTP/FTP%20using%20copy%28%29&In-Reply-To=%3C463330C1.3020404%40gmx.net%3E"
       TITLE="[nycphp-talk] Copying file from HTTP/FTP using copy()">ramons at gmx.net
       </A><BR>
    <I>Sat Apr 28 07:32:17 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="021729.html">[nycphp-talk] Send HTML mail with Javascript function
</A></li>
        <LI>Next message: <A HREF="021737.html">[nycphp-talk] Copying file from HTTP/FTP using copy()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21736">[ date ]</a>
              <a href="thread.html#21736">[ thread ]</a>
              <a href="subject.html#21736">[ subject ]</a>
              <a href="author.html#21736">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi!

Here is what I like to do:
Get a user entry (text string) that is either an HTTP or FTP url to a 
file, for example
<A HREF="http://my.server.gov/download">http://my.server.gov/download</A> this.zip
or
<A HREF="ftp://username:password@your.server.gov/download">ftp://username:password@your.server.gov/download</A> that.zip
and then use the copy() function to download it and store it locally on 
my server.

This is the piece of my code that is supposed to do the copying:

if ($nourl == FALSE) {
   // Make local zip file path and name
   $localzipfile = sessiondir.DIRECTORY_SEPARATOR.$sessionid.&quot;.zip&quot;;
   // urlencode url
   $urlupload = urlencode($urlupload);
   // Copy file
   if(!copy($urlupload, $localzipfile)) $nourl = TRUE;
}
   // Check if error occured
   if($nourl == TRUE) {
   errmessage(&quot;OUCH - Downloading the file from &quot;.$urlupload.
              &quot; to temporary storage failed! Try again!&quot;);
}

$nourl is an error flag, $localzipfile is the path and name of the local 
file (directory exists, I created it earlier), $urlupload is the 
submission from the user (file on my own web server, if I put the url in 
a browser, the download works), errmessage is a function that displays a 
nice  error message and some buttons to go back.
The PHP manual claims that copy() handles the same wrappers that fopen 
supports. Unfortunately, the response from copy() is either 'worked' or 
'did not work', not much to go by.

The questions of the day:
Why does copy($urlupload, $localzipfile) fail?
Is copy() even the right command to use?

I found a piece of code here
<A HREF="http://sandalian.com/11/php/copy-remote-file-into-local-directory.htm">http://sandalian.com/11/php/copy-remote-file-into-local-directory.htm</A>
but I wonder if that works for binary files as well.

As usual, any help is greatly appreciated.

David

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021729.html">[nycphp-talk] Send HTML mail with Javascript function
</A></li>
	<LI>Next message: <A HREF="021737.html">[nycphp-talk] Copying file from HTTP/FTP using copy()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21736">[ date ]</a>
              <a href="thread.html#21736">[ thread ]</a>
              <a href="subject.html#21736">[ subject ]</a>
              <a href="author.html#21736">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
