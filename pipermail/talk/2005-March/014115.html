<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] AddType application/x-httpd-php .gif .jpg .etc
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2005-March/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20AddType%20application/x-httpd-php%20.gif%20.jpg%20.etc&In-Reply-To=%3C20050329220440.GI25473%40zoidberg.digitalpulp.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014109.html">
   <LINK REL="Next"  HREF="014119.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] AddType application/x-httpd-php .gif .jpg .etc</H1>
    <B>Andrew Yochum</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20AddType%20application/x-httpd-php%20.gif%20.jpg%20.etc&In-Reply-To=%3C20050329220440.GI25473%40zoidberg.digitalpulp.com%3E"
       TITLE="[nycphp-talk] AddType application/x-httpd-php .gif .jpg .etc">andrew at plexpod.com
       </A><BR>
    <I>Tue Mar 29 17:04:40 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="014109.html">[nycphp-talk] AddType application/x-httpd-php .gif .jpg .etc
</A></li>
        <LI>Next message: <A HREF="014119.html">[nycphp-talk] AddType application/x-httpd-php .gif .jpg .etc
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14115">[ date ]</a>
              <a href="thread.html#14115">[ thread ]</a>
              <a href="subject.html#14115">[ subject ]</a>
              <a href="author.html#14115">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Mar 29, 2005 at 04:13:39PM -0500, Adam Fields wrote:
&gt;<i> On Tue, Mar 29, 2005 at 04:08:38PM -0500, Andrew Yochum wrote:
</I>&gt;<i> &gt; I thought I'd ping the list about this before I dive into this idea.
</I>&gt;<i> &gt; Has anyone ever tried to set the PHP module as a handler for images?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I have something like this in mind:
</I>&gt;<i> &gt; 	AddType application/x-httpd-php .gif
</I>&gt;<i> &gt; 	AddType application/x-httpd-php .jpg
</I>&gt;<i> &gt; 	AddType application/x-httpd-php .png
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Did you have actual binaries behind the requests or scripts?  Google
</I>&gt;<i> &gt; turned up some of the latter, though nothing terribly interesting.  I'm
</I>&gt;<i> &gt; interested in the former - binaries.  Were you successful?  Any hiccups
</I>&gt;<i> &gt; or pointers?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Yeah, I'm probably crazy.
</I>&gt;<i> 
</I>&gt;<i> I've never done this with php, but we used to do it all the time in
</I>&gt;<i> Vignette. You can use this technique to do some cookie get/set for
</I>&gt;<i> custom images.
</I>
I did some of that in Vignette StoryServer waaay back, too.  IIRC they
went so far as to call them &quot;chips&quot;.

&gt;<i> I see no reason why it wouldn't work with php, although I don't
</I>&gt;<i> understand your question about binaries.
</I>
Well, basically I want to insert PHP before and after an image is served
with a prepend / postpend script.  I had output buffering in my mind
because I figured the script flow at some point would be turned to the
image itself and this is where I think some possible quirkiness may
arise.  I imagined something like this:

- prepend script runs
	- sets up session
	- checks auth
	- output might be sent and script execution stopped for some
	  reason
	- starts output buffering
- requested &quot;script&quot; runs (the image!)
- postpend script runs
	- grabs output buffer
	- modifies, replaces, etc the image
	- caches the result given context
	- sends image to the browser

I can see not actually having to do the output buffering by having the
execution always stop in the prepend.  If the image itself is to be used
in the output, you can grab it from REUQUEST_URI and read it off the
filesystem. Something like: 

- prepend script runs
	- sets up session
	- checks auth
	- generate output, might modify, replace, etc the image
	- caches the result given context
	- sends image to the browser
	- exit()
- requested &quot;script&quot; never runs (the image!)

This is probably the more sane approach to this.

The end-game is to insert some functionality in place of images without
moving them/replacing them in the docroot.

Andrew


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014109.html">[nycphp-talk] AddType application/x-httpd-php .gif .jpg .etc
</A></li>
	<LI>Next message: <A HREF="014119.html">[nycphp-talk] AddType application/x-httpd-php .gif .jpg .etc
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14115">[ date ]</a>
              <a href="thread.html#14115">[ thread ]</a>
              <a href="subject.html#14115">[ subject ]</a>
              <a href="author.html#14115">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
