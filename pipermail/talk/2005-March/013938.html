<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Q: How can I get all of the articles under a	certaincategory?
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2005-March/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Q%3A%20How%20can%20I%20get%20all%20of%20the%20articles%20under%20a%0A%09certaincategory%3F&In-Reply-To=%3C0MKz1m-1D9s8b3MVz-0006rD%40mrelay.perfora.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013935.html">
   <LINK REL="Next"  HREF="013943.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Q: How can I get all of the articles under a	certaincategory?</H1>
    <B>Hans Zaunere</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Q%3A%20How%20can%20I%20get%20all%20of%20the%20articles%20under%20a%0A%09certaincategory%3F&In-Reply-To=%3C0MKz1m-1D9s8b3MVz-0006rD%40mrelay.perfora.net%3E"
       TITLE="[nycphp-talk] Q: How can I get all of the articles under a	certaincategory?">lists at zaunere.com
       </A><BR>
    <I>Fri Mar 11 16:57:38 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="013935.html">[nycphp-talk] Q: How can I get all of the articles under a certain	category?
</A></li>
        <LI>Next message: <A HREF="013943.html">[nycphp-talk] Q: How can I get all of the articles under a	certaincategory?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13938">[ date ]</a>
              <a href="thread.html#13938">[ thread ]</a>
              <a href="subject.html#13938">[ subject ]</a>
              <a href="author.html#13938">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> Unfortunately there is no easy way that I know of to do this with the
</I>&gt;<i> structure you are using, because it's not a 'true' hierarchy.
</I>&gt;<i> 
</I>&gt;<i> My favorite solution is a modified version of Joe Celko's Nested Sets.
</I>&gt;<i> 
</I>&gt;<i> Basically there is no elegant way to do it without changing your
</I>&gt;<i> database structure.
</I>&gt;<i> 
</I>&gt;<i> Dan
</I>&gt;<i> 
</I>&gt;<i> John Nunez wrote:
</I>&gt;<i> &gt; Hi Guys,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; How can I get all of the articles under a certain category?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I have a table with the following structure:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Categories
</I>&gt;<i> &gt; ID - int
</I>&gt;<i> &gt; CategoryName - varchar(128)
</I>&gt;<i> &gt; ParentID - int [Foreign Key to Categories-&gt;ID]
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Articles
</I>&gt;<i> &gt; ID - int
</I>&gt;<i> &gt; Category_ID - int [Foreign Key to Categories-&gt;ID]
</I>&gt;<i> &gt; Article_Name - varchar(128)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Sample Category Tree
</I>&gt;<i> &gt; --------------------
</I>&gt;<i> &gt; Food[1]
</I>&gt;<i> &gt; --Natural[2]
</I>&gt;<i> &gt; ----Fruits[3]
</I>&gt;<i> &gt; ------Apples[4]
</I>&gt;<i> &gt; ------Pears[5]
</I>&gt;<i> &gt; ------Oranges[6]
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Now the client wants to be able to click on &quot;Natural&quot; and if there are
</I>&gt;<i> &gt; no articles listed directly under it get all the articles for &quot;Fruits&quot;,
</I>&gt;<i> &gt; &quot;Apples&quot;, &quot;Pears&quot;, &quot;Oranges&quot;.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The only solution I have is to write a recursive function that will
</I>&gt;<i> &gt; retrieve each CategoryID that has the ParentID of the argument passed.
</I>&gt;<i> &gt; Once I have this array of CategoryIDs can then run a query on the
</I>&gt;<i> &gt; Articles table.  As this tree grows it can amount to tons of MySQL
</I>&gt;<i> &gt; Queries for each click that might be skipped anyway. Is there anyway to
</I>&gt;<i> &gt; do this with one or two calls in MySQL?
</I>
If you're using MySQL 4.1 you can use subqueries, which will reduce the number of distinct queries you're hitting the database with.  There are essentially two forms:

derived tables

SELECT * FROM (SELECT * FROM othertable)

and regular:

SELECT * FROM mytable WHERE column1 = (SELECT column1 FROM othertable)

There are also many variations:

<A HREF="http://dev.mysql.com/doc/mysql/en/subqueries.html">http://dev.mysql.com/doc/mysql/en/subqueries.html</A>

At the end of the day, however, with the structure you have in place, you'll be somewhat limited.  NSM (nested set model) is the way to go if possible.  Here's an implementation of it that I did, although it needs to be updated:

<A HREF="http://pcomd.net/pcom.php?pcomname=pnsm">http://pcomd.net/pcom.php?pcomname=pnsm</A>

and could be optimized for MySQL 4.1.


---
Hans Zaunere
President, Founder

New York PHP
<A HREF="http://www.nyphp.org">http://www.nyphp.org</A>

AMP Technology
Supporting Apache, MySQL and PHP





</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013935.html">[nycphp-talk] Q: How can I get all of the articles under a certain	category?
</A></li>
	<LI>Next message: <A HREF="013943.html">[nycphp-talk] Q: How can I get all of the articles under a	certaincategory?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13938">[ date ]</a>
              <a href="thread.html#13938">[ thread ]</a>
              <a href="subject.html#13938">[ subject ]</a>
              <a href="author.html#13938">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
