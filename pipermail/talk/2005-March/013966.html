<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Changing UNIX shadow passwords with PHP
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2005-March/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Changing%20UNIX%20shadow%20passwords%20with%20PHP&In-Reply-To=%3C42373571.1040707%40omnistep.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013965.html">
   <LINK REL="Next"  HREF="013967.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Changing UNIX shadow passwords with PHP</H1>
    <B>Rolan Yang</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Changing%20UNIX%20shadow%20passwords%20with%20PHP&In-Reply-To=%3C42373571.1040707%40omnistep.com%3E"
       TITLE="[nycphp-talk] Changing UNIX shadow passwords with PHP">rolan at omnistep.com
       </A><BR>
    <I>Tue Mar 15 14:20:17 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="013965.html">[nycphp-talk] Changing UNIX shadow passwords with PHP
</A></li>
        <LI>Next message: <A HREF="013967.html">[nycphp-talk] Changing UNIX shadow passwords with PHP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13966">[ date ]</a>
              <a href="thread.html#13966">[ thread ]</a>
              <a href="subject.html#13966">[ subject ]</a>
              <a href="author.html#13966">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Look into sudo. You can sudo the &quot;/usr/bin/passwd&quot; file so that it can 
be run as the user of your apache (probably &quot;nobody&quot; or &quot;apache&quot; or 
&quot;http&quot;), then do a
system(&quot;/usr/bin/passwd $user $password&quot;);
in php. This method would make a sysadmin a bit nervous though.

Another safer way to go about it would be to append all password 
requests to a designated file, in the format &quot;username:password&quot; then 
create a root owned cron script which runs &quot;/usr/sbin/chpasswd 
&lt;thefile&gt;&quot; every minute or so. You would want to employ some method of 
file locking within the cron script and also the php script because if 
the job runs while the php script is writing to the file, odd things can 
happen.

~Rolan

Atul Ohri wrote:

&gt;<i> Hey Everyone&#8230;
</I>&gt;<i>
</I>&gt;<i> I&#8217;ve been trying to figure out a simple yet secure way to allow user&#8217;s 
</I>&gt;<i> with mailboxes on any of our servers to change their passwords via the 
</I>&gt;<i> web. I have done extensive research on the web and haven&#8217;t found 
</I>&gt;<i> anything promising regarding doing this in PHP. It seems I may be able 
</I>&gt;<i> to accomplish it with a Perl script and then I could wrap that Perl 
</I>&gt;<i> script around a PHP interface but I&#8217;m not even sure that would work. 
</I>&gt;<i> The passwords are stored in a shadow passwd file format so however I 
</I>&gt;<i> accomplish this I would have to change to root to make changes to the 
</I>&gt;<i> /etc/shadow file. Would I have to use SUID to accomplish this? Does 
</I>&gt;<i> anyone know of any PHP scripts that could help me accomplish my goal? 
</I>&gt;<i> I&#8217;m sure someone somewhere has the need for a script like this&#8230; 
</I>&gt;<i> Naturally all of this would take place over a secure connection.
</I>&gt;<i>
</I>&gt;<i> So does anyone have any advice on how I can accomplish this in PHP?
</I>&gt;<i>
</I>&gt;<i> Atul
</I>&gt;<i>
</I>&gt;<i>------------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013965.html">[nycphp-talk] Changing UNIX shadow passwords with PHP
</A></li>
	<LI>Next message: <A HREF="013967.html">[nycphp-talk] Changing UNIX shadow passwords with PHP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13966">[ date ]</a>
              <a href="thread.html#13966">[ thread ]</a>
              <a href="subject.html#13966">[ subject ]</a>
              <a href="author.html#13966">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
