<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Changing UNIX shadow passwords with PHP
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2005-March/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Changing%20UNIX%20shadow%20passwords%20with%20PHP&In-Reply-To=%3C20050316231012.GB2890%40leitz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013974.html">
   <LINK REL="Next"  HREF="013968.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Changing UNIX shadow passwords with PHP</H1>
    <B>leam at reuel.net</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Changing%20UNIX%20shadow%20passwords%20with%20PHP&In-Reply-To=%3C20050316231012.GB2890%40leitz%3E"
       TITLE="[nycphp-talk] Changing UNIX shadow passwords with PHP">leam at reuel.net
       </A><BR>
    <I>Wed Mar 16 18:10:12 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="013974.html">[nycphp-talk] search engine suggestion
</A></li>
        <LI>Next message: <A HREF="013968.html">[nycphp-talk] Changing UNIX shadow passwords with PHP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13984">[ date ]</a>
              <a href="thread.html#13984">[ thread ]</a>
              <a href="subject.html#13984">[ subject ]</a>
              <a href="author.html#13984">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Pardon the newbieness, but is there an expect like extension to php that would let you interact with the regular password program? 

ciao!

leam

On Tue, Mar 15, 2005 at 02:20:17PM -0500, Rolan Yang wrote:
&gt;<i> Look into sudo. You can sudo the &quot;/usr/bin/passwd&quot; file so that it can 
</I>&gt;<i> be run as the user of your apache (probably &quot;nobody&quot; or &quot;apache&quot; or 
</I>&gt;<i> &quot;http&quot;), then do a
</I>&gt;<i> system(&quot;/usr/bin/passwd $user $password&quot;);
</I>&gt;<i> in php. This method would make a sysadmin a bit nervous though.
</I>&gt;<i> 
</I>&gt;<i> Another safer way to go about it would be to append all password 
</I>&gt;<i> requests to a designated file, in the format &quot;username:password&quot; then 
</I>&gt;<i> create a root owned cron script which runs &quot;/usr/sbin/chpasswd 
</I>&gt;<i> &lt;thefile&gt;&quot; every minute or so. You would want to employ some method of 
</I>&gt;<i> file locking within the cron script and also the php script because if 
</I>&gt;<i> the job runs while the php script is writing to the file, odd things can 
</I>&gt;<i> happen.
</I>&gt;<i> 
</I>&gt;<i> ~Rolan
</I>&gt;<i> 
</I>&gt;<i> Atul Ohri wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt;Hey Everyone&#8230;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;I&#8217;ve been trying to figure out a simple yet secure way to allow user&#8217;s 
</I>&gt;<i> &gt;with mailboxes on any of our servers to change their passwords via the 
</I>&gt;<i> &gt;web. I have done extensive research on the web and haven&#8217;t found 
</I>&gt;<i> &gt;anything promising regarding doing this in PHP. It seems I may be able 
</I>&gt;<i> &gt;to accomplish it with a Perl script and then I could wrap that Perl 
</I>&gt;<i> &gt;script around a PHP interface but I&#8217;m not even sure that would work. 
</I>&gt;<i> &gt;The passwords are stored in a shadow passwd file format so however I 
</I>&gt;<i> &gt;accomplish this I would have to change to root to make changes to the 
</I>&gt;<i> &gt;/etc/shadow file. Would I have to use SUID to accomplish this? Does 
</I>&gt;<i> &gt;anyone know of any PHP scripts that could help me accomplish my goal? 
</I>&gt;<i> &gt;I&#8217;m sure someone somewhere has the need for a script like this&#8230; 
</I>&gt;<i> &gt;Naturally all of this would take place over a secure connection.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;So does anyone have any advice on how I can accomplish this in PHP?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;Atul
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;------------------------------------------------------------------------
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;
</I>&gt;<i> _______________________________________________
</I>&gt;<i> New York PHP Talk Mailing List
</I>&gt;<i> AMP Technology
</I>&gt;<i> Supporting Apache, MySQL and PHP
</I>&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;<i> <A HREF="http://www.nyphp.org">http://www.nyphp.org</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013974.html">[nycphp-talk] search engine suggestion
</A></li>
	<LI>Next message: <A HREF="013968.html">[nycphp-talk] Changing UNIX shadow passwords with PHP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13984">[ date ]</a>
              <a href="thread.html#13984">[ thread ]</a>
              <a href="subject.html#13984">[ subject ]</a>
              <a href="author.html#13984">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
