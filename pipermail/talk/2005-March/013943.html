<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [nycphp-talk] Q: How can I get all of the articles under a	certaincategory?
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/talk/2005-March/index.html" >
   <LINK REL="made" HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Q%3A%20How%20can%20I%20get%20all%20of%20the%20articles%20under%20a%0A%09certaincategory%3F&In-Reply-To=%3C418e97bd78ae2cb7bf7fda5d77e20b7d%40cyber-ny.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013938.html">
   <LINK REL="Next"  HREF="013939.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[nycphp-talk] Q: How can I get all of the articles under a	certaincategory?</H1>
    <B>John Nunez</B> 
    <A HREF="mailto:talk%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bnyphp-talk%5D%20Q%3A%20How%20can%20I%20get%20all%20of%20the%20articles%20under%20a%0A%09certaincategory%3F&In-Reply-To=%3C418e97bd78ae2cb7bf7fda5d77e20b7d%40cyber-ny.com%3E"
       TITLE="[nycphp-talk] Q: How can I get all of the articles under a	certaincategory?">john at cyber-ny.com
       </A><BR>
    <I>Fri Mar 11 23:45:35 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="013938.html">[nycphp-talk] Q: How can I get all of the articles under a	certaincategory?
</A></li>
        <LI>Next message: <A HREF="013939.html">[nycphp-talk] questions --
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13943">[ date ]</a>
              <a href="thread.html#13943">[ thread ]</a>
              <a href="subject.html#13943">[ subject ]</a>
              <a href="author.html#13943">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I want to thanks everyone for their comments!  The client and my boss 
decided to drop this feature.  Notch one for the developer.

I want to learn more about Nested Set Models so I have been googling 
around on this. This project would take a lot of work to convert (270 
category entries, 57 on the root). It was the fact that 3000 articles 
would be displayed on the click of Root that made the client change 
their minds. Their board members are still on AOL Dial Up.

Thanks,
John


On Mar 11, 2005, at 4:57 PM, Hans Zaunere wrote:

&gt;<i>
</I>&gt;&gt;<i> Unfortunately there is no easy way that I know of to do this with the
</I>&gt;&gt;<i> structure you are using, because it's not a 'true' hierarchy.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> My favorite solution is a modified version of Joe Celko's Nested Sets.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Basically there is no elegant way to do it without changing your
</I>&gt;&gt;<i> database structure.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Dan
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> John Nunez wrote:
</I>&gt;&gt;&gt;<i> Hi Guys,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> How can I get all of the articles under a certain category?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I have a table with the following structure:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Categories
</I>&gt;&gt;&gt;<i> ID - int
</I>&gt;&gt;&gt;<i> CategoryName - varchar(128)
</I>&gt;&gt;&gt;<i> ParentID - int [Foreign Key to Categories-&gt;ID]
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Articles
</I>&gt;&gt;&gt;<i> ID - int
</I>&gt;&gt;&gt;<i> Category_ID - int [Foreign Key to Categories-&gt;ID]
</I>&gt;&gt;&gt;<i> Article_Name - varchar(128)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Sample Category Tree
</I>&gt;&gt;&gt;<i> --------------------
</I>&gt;&gt;&gt;<i> Food[1]
</I>&gt;&gt;&gt;<i> --Natural[2]
</I>&gt;&gt;&gt;<i> ----Fruits[3]
</I>&gt;&gt;&gt;<i> ------Apples[4]
</I>&gt;&gt;&gt;<i> ------Pears[5]
</I>&gt;&gt;&gt;<i> ------Oranges[6]
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Now the client wants to be able to click on &quot;Natural&quot; and if there 
</I>&gt;&gt;&gt;<i> are
</I>&gt;&gt;&gt;<i> no articles listed directly under it get all the articles for 
</I>&gt;&gt;&gt;<i> &quot;Fruits&quot;,
</I>&gt;&gt;&gt;<i> &quot;Apples&quot;, &quot;Pears&quot;, &quot;Oranges&quot;.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The only solution I have is to write a recursive function that will
</I>&gt;&gt;&gt;<i> retrieve each CategoryID that has the ParentID of the argument 
</I>&gt;&gt;&gt;<i> passed.
</I>&gt;&gt;&gt;<i> Once I have this array of CategoryIDs can then run a query on the
</I>&gt;&gt;&gt;<i> Articles table.  As this tree grows it can amount to tons of MySQL
</I>&gt;&gt;&gt;<i> Queries for each click that might be skipped anyway. Is there anyway 
</I>&gt;&gt;&gt;<i> to
</I>&gt;&gt;&gt;<i> do this with one or two calls in MySQL?
</I>&gt;<i>
</I>&gt;<i> If you're using MySQL 4.1 you can use subqueries, which will reduce 
</I>&gt;<i> the number of distinct queries you're hitting the database with.  
</I>&gt;<i> There are essentially two forms:
</I>&gt;<i>
</I>&gt;<i> derived tables
</I>&gt;<i>
</I>&gt;<i> SELECT * FROM (SELECT * FROM othertable)
</I>&gt;<i>
</I>&gt;<i> and regular:
</I>&gt;<i>
</I>&gt;<i> SELECT * FROM mytable WHERE column1 = (SELECT column1 FROM othertable)
</I>&gt;<i>
</I>&gt;<i> There are also many variations:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://dev.mysql.com/doc/mysql/en/subqueries.html">http://dev.mysql.com/doc/mysql/en/subqueries.html</A>
</I>&gt;<i>
</I>&gt;<i> At the end of the day, however, with the structure you have in place, 
</I>&gt;<i> you'll be somewhat limited.  NSM (nested set model) is the way to go 
</I>&gt;<i> if possible.  Here's an implementation of it that I did, although it 
</I>&gt;<i> needs to be updated:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://pcomd.net/pcom.php?pcomname=pnsm">http://pcomd.net/pcom.php?pcomname=pnsm</A>
</I>&gt;<i>
</I>&gt;<i> and could be optimized for MySQL 4.1.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ---
</I>&gt;<i> Hans Zaunere
</I>&gt;<i> President, Founder
</I>&gt;<i>
</I>&gt;<i> New York PHP
</I>&gt;<i> <A HREF="http://www.nyphp.org">http://www.nyphp.org</A>
</I>&gt;<i>
</I>&gt;<i> AMP Technology
</I>&gt;<i> Supporting Apache, MySQL and PHP
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> New York PHP Talk Mailing List
</I>&gt;<i> AMP Technology
</I>&gt;<i> Supporting Apache, MySQL and PHP
</I>&gt;<i> <A HREF="http://lists.nyphp.org/mailman/listinfo/talk">http://lists.nyphp.org/mailman/listinfo/talk</A>
</I>&gt;<i> <A HREF="http://www.nyphp.org">http://www.nyphp.org</A>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013938.html">[nycphp-talk] Q: How can I get all of the articles under a	certaincategory?
</A></li>
	<LI>Next message: <A HREF="013939.html">[nycphp-talk] questions --
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13943">[ date ]</a>
              <a href="thread.html#13943">[ thread ]</a>
              <a href="subject.html#13943">[ subject ]</a>
              <a href="author.html#13943">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/talk">More information about the talk
mailing list</a><br>
</body></html>
