<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>
   <TITLE> [joomla] Pre-Announcement: Crafty CMS
   </TITLE>
   <LINK REL="Index" HREF="http://nyphp.org/pipermail/joomla/2012-April/index.html" >
   <LINK REL="made" HREF="mailto:joomla%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bjoomla%5D%20Pre-Announcement%3A%20Crafty%20CMS&In-Reply-To=%3C4F882C43.1090907%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003942.html">
   <LINK REL="Next"  HREF="003944.html">
 <meta name="description" content="PHP jobs stackware web application support and development forums for Mongo LAMP MySQL SQL Windows IIS Linux." />
<meta name="author" content="Stackware Web Development - http://stackware.com" />
<meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
<meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
<meta name="y_key" content="265502be3db4fb6e" />
</HEAD>
         <BODY BGCOLOR="#ffffff">
<h1 style="float: right; margin: 0; padding: 0 0 0 15px;"><a href="https://www.meetup.com/new-york-php/">NYCPHP Meetup</a></h1><h1><a href="http://www.nyphp.org">NYPHP.org</a></h1>
   <H1>[joomla] Pre-Announcement: Crafty CMS</H1>
    <B>Gary Mort</B> 
    <A HREF="mailto:joomla%40lists.nyphp.org?Subject=Re:%20Re%3A%20%5Bjoomla%5D%20Pre-Announcement%3A%20Crafty%20CMS&In-Reply-To=%3C4F882C43.1090907%40gmail.com%3E"
       TITLE="[joomla] Pre-Announcement: Crafty CMS">garyamort at gmail.com
       </A><BR>
    <I>Fri Apr 13 09:38:11 EDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="003942.html">[joomla] 2D Charts
</A></li>
        <LI>Next message: <A HREF="003944.html">[joomla] Pre-Announcement: Crafty CMS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3943">[ date ]</a>
              <a href="thread.html#3943">[ thread ]</a>
              <a href="subject.html#3943">[ subject ]</a>
              <a href="author.html#3943">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I wanted to gauge interest here.  I'm setting up my own personal 
websites and I find:
Joomla! is 60% of what I want
20% of what I want can be handled with custom components, templates, 
modules, and plugins
5% of what I want is either in the next platform or cms release
10% of what I want can be handled with autoloaders and overrides
5% of what I want requires hacking core code

Now, if I was my client, I'd tell myself to focus on what I /need/ not 
what I want and try to eliminate any core hacks and most of the overrides..

But I'm not a client, I'm me.  And everytime I start setting this up I 
get frustrated because it doesn't meet my artistic vision - and I'm not 
willing to compromise my vision[wow, I sound like a silly *artiste* 
don't I?]

So the solution is simple, fork Joomla!
Not in a competitive way, but in the way I've seen done on countless 
client projects where they have some custom code they use in house and 
no one else ever see's the code.

My plan is to create a fork of the Joomla! repository.  Then in that 
fork create 2 new branches, one for dev/hacks and one for 
releases...ideally 80% of released code could be pulled right back into 
Joomla!...and if it's pulled properly, when I update my fork from their 
it will integrate seamlessly and override my own code.

My question is, how many people are truly interested in playing around 
with it?  Not just a cursory glance, but truly looking it over and 
testing it out?  Because my early code will often have stuff I don't 
want publicly available, I'll be placing it all in a private github 
repository...and I'm not willing to pay for that so it means charging a 
nominal annual fee for repository access[say 24$/year to make sure 
people are serious and make sure I don't end up losing money to 
Github].  Almost everything there will....eventually make it out into 
the public either as an installable Joomla! extension, or pull requests 
back to the source.

As a quick summary of what I &quot;want&quot;:
Multi-site single installation codebase: All Joomla needs is 2 changes 
to support multiple domains from the same codebase.  It needs a 
hook/plugin for the query builder so a domain filter can be added to 
when using specific tables[for example, where DOMAIN='mydomain.com'] and 
a pre-system setup call to set the domain.  That is it.  Everything else 
is in there, plugins for editors can add the domain selector.  Plugins 
for forms can filter out domain specific info, etc.

Unified Content: Taking a leaf from Drupal, instead of storing raw 
content in the content table, I'd much rather store content that has 
already been formatted for display and is searchable.  All it requires 
is adding an content type mapping to map content to different components 
for editing and in one swell fwoop you get rid of 90% of the SEF 
headaches...SEF now can almost /always/ use content sef mapping.  Other 
components augment content rather then display different content.  It 
also solves 75% of searching issues as all searching can be done on the 
content itself, not different searches.

Null Storage engine for Caching:  Over and over in the codebase there 
are all these components that store objects they retrieve so they don't 
retrieve them over and over.  But we already have a class that does 
this, Cache....the only problem is that cache is for storing data TO 
somewhere.  But in this case, we only want to store data in memory.  So 
use cache.

Caching priorities:  TTL SUCKS as a caching strategy.  Basically it says 
'save this for 15 minutes, then throw it away'.   As long as I am 
caching data, I want it to be intelligent!

A typical Joomla! Caching snippet:
   $cache = JFactory::getCache(&quot;com_mycomponent&quot;, &quot;&quot;);
   $cacheKey = $this-&gt;getId();
   $item = $cache-&gt;get($cacheKey);
    if (empty($item)) {
    // do some stuff to get the item
    $cache-&gt;store($item);
   }
   // do something with the item

How...wasteful.  Why not:
   $cache = JFactory::getCache(&quot;com_mycomponent&quot;, &quot;&quot;);
   $cacheKey = $this-&gt;getId();
    $importance = JCache::HIGH;
    $softLimit = '360';
    $hardLimit = '3600'
   $item = $cache-&gt;get($cacheKey, $importance, $softLimit, $hardLimit);
   $p = JProfiler::getInstance(cacheKey);
$p-&gt;mark('Start');
    if (empty($item)) {
    // do some stuff to get the item
$p-&gt;mark('Stop');
    $retrievalTime = $p-&gt;buffer;
    $cache-&gt;store($item, $importance, $softLimit, $hardLimit, 
$retrievalTime);
   }
   // do something with the item

Wow...NOW we have some metrics.  We know how LONG an item took to 
retrieve.  All things being equal, objects with the same importance 
should be expired based on the time they take to generate, not FIFO.  So 
if you have 2 objects and one takes a millisecond to generate, and the 
other takes 1 minute[think an internal db call vs an external REST call 
to grab a chart image from Google] - isn't it obvious which one to throw 
away first?

And by using soft and hard limits, instead of simple TTL, we can keep 
'stale' data until it gets updated.  A stock price from Google is just 
as valid an hour from now as 10 minutes from now - but maybe we want to 
retrieve it every 10 minutes if possible, but will settle for older data 
in some circumstances.

Lastly, passing the importance flag to the retrieval as well as the 
storage allows different items to 'upgrade' cached data.  Maybe it 
wasn't important to one section of code, but another call on a different 
page really needs the cached data if at all possible because otherwise 
it bogs down.

Speaking of Cache...  PHPSerialize is wonderful...if everything is 
running PHP.  But what if you have a caching proxy sitting up front?  
For a stupid logon module, you destroy caching for logged in users since 
the upper right hand corner of the screen changes from: Login... to: 
Hello Gary, you have no new messages

A caching server could use esi:include 
url=&quot;<A HREF="http://mydomain.com/userwelcome">http://mydomain.com/userwelcome</A>&quot; and cache everything else but grab 
that info from the server.  Even better though, since you have a 
sessionid cookie, instead it could be: 
src=&quot;memcache:get(sessionid-&gt;userwelcome)&quot; and if the data is stored in 
memcache with a sessionid in json format, poof!  It appears.  No server 
hit needed.

And why should we lose the ability to count hits just for the sake of 
caching a page?  Almost every caching system today allows for that!
esi:include src=&quot;memcache:incr(&lt;articleId&gt;Hits)&quot;

Sure you occasionally have to sync that data back to the database....but 
its much more fun!

Just figured I'd throw it out there.  If there is stuff others &quot;want&quot; 
that would make them willing to pay $24/year for feel free to throw it 
on the pile and if it's amusing enough it will probably get in there.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.nyphp.org/pipermail/joomla/attachments/20120413/4358bfc9/attachment.html">http://lists.nyphp.org/pipermail/joomla/attachments/20120413/4358bfc9/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003942.html">[joomla] 2D Charts
</A></li>
	<LI>Next message: <A HREF="003944.html">[joomla] Pre-Announcement: Crafty CMS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3943">[ date ]</a>
              <a href="thread.html#3943">[ thread ]</a>
              <a href="subject.html#3943">[ subject ]</a>
              <a href="author.html#3943">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.nyphp.org/mailman/listinfo/joomla">More information about the Joomla
mailing list</a><br>
</body></html>
