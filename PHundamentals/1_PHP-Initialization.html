<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-51353372-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-51353372-3');
</script>

    <script src="http://cdn.speedr.io/speeder.js"></script>
    <script>speeder('55730cc6','df9');</script>
    
    <meta name="verify-v1" content="zWMoPwMn/dolscLkjLXTpRqgr9K8bzlzL1vM9WTjpHc=" />
    <meta name="msvalidate.01" content="F85F81C1D0BAB5C349E8395628845E27" />
    <meta name="y_key" content="265502be3db4fb6e" />

    <link rel="icon" type="image/vnd.microsoft.icon" href="/img/favicon.ico">

    <title>PHP Initialization and php.ini - PHundamental PHP Best Practices -</title>

    <link href="../css/nyphp2.css" rel="stylesheet" media="screen" type="text/css" />
    <link href="../css/nyphp2_print.css" rel="stylesheet" media="print" type="text/css" />

    <meta name="robots" content="index,follow" />
    <meta name="description" content="PHP Initialization and php.ini - PHP best practices and LAMP stack strategy." />
    <meta name="author" content="Stackware Web Development - http://stackware.com" />
</head>


<body>


<div id="GlobalContainer">

    <div id="Header">
        
<div class="HeaderContainer">
    <div class="HeaderLeft">
        <a href="../index.html"><img src="../img/new_york_php.gif" alt="New York PHP User Group Community" /></a>
    </div>
    <div class="HeaderRight">
        <h1><a href="http://stackware.com/nyc-php-training">PHP Training</a></h1>
    </div>
    <div class="HeaderFirstBar" style="padding: 0; margin: 0 0 0 -6px;">
    <ul>
        <li>
            <a  href="../index.html" title="Home">Home</a>
        </li>
        <li>
            <a  href="../mailing-lists.html" title="PHP Mailing Lists">Mailing Lists</a>
        </li>
        <li>
            <a style="text-decoration: underline;" href="../phunny/err_sample_include.php.html" title="PHundamentals">PHundamentals</a>
        </li>
        <li>
            <a  href="../php-presentations/index.html" title="Presentations">Presentations</a>
        </li>
        <li>
            <a href="http://www.meetup.com/new-york-php/" title="NY PHP Meetup">Contact Us</a>
        </li>
    </ul>
    </div>

    <div class="HeaderSecondBar">
        <div style="margin: 11px 0 0 -4px; padding: 0;">
        <small>don't forget to</small>
        <a style="font-weight: bold;" href="https://www.facebook.com/groups/367255050049061/">facebook friend</a> -
        <a style="font-weight: bold;" href="http://twitter.com/nyphp">twitter follow</a> -
        <a style="font-weight: bold;" href="http://www.meetup.com/new-york-php/">NYC PHP meetup</a>
        </div>
    </div>
</div>



    </div>

    <div id="MainLayout">
    <div id="TwoColumn">
        <div id="LeftColumn">
            
<div class="LeftNav">

    <div class="NowLinks">


        <div class="ShowParticipation">
        <a href="../show-participation.html">Show Your Participation
        <img style="margin: 2px;" alt="NYPHP Member" src="../img/nyphporgmember.gif" />
        Click for Details</a>
        </div>

        <div style="height: 15px;"></div>

    </div>

    <div style="height: 15px;"></div>

<div class="LeftNavSection">

    <div class="LeftNavSubSection">
        <a target="_blank" href="https://www.meetup.com/tampa-bay-php/">
            <img width="120px" src="../img/tbphp.gif" alt="Tampa Bay Florida PHP" title="Tampa Bay Florida PHP" />
        </a>
        <a target="_blank" title="Tampa Bay Florida PHP" href="http://www.tbphp.org/">
            Tampa Bay<br />Florida PHP
        </a>
    </div>


    <div class="LeftNavSubSection">
        <a href="http://www.flickr.com/groups/nyphp/">
        <img src="../img/flickr.logo.gif" alt="NYPHP flickr Group" title="New York PHP flickr Group" />
        </a>
        Browse and upload photos of events, at the
        <a href="http://www.flickr.com/groups/nyphp/">NYPHP flickr Group</a>.
    </div>
    <div class="LeftNavSubSection">
        <a href="http://www.linkedin.com/e/gis/110439">
        <img src="../img/linkedin.logo.gif" alt="PHP Community" title="New York PHP Community LinkedIn" />
        </a>
        Link up with NYPHP at the
        <a href="http://www.linkedin.com/groups?about=&amp;gid=110439">PHP LinkedIn Group</a>.
    </div>

</div>


<div class="BoxLinks" style="text-align: left;">
    <p class="BoxLinkHeader">About NYPHP</p>
    <p><a href="../about-us/charter.html">&raquo; Charter</a></p>
    <p><a href="../about-us/mission.html">&raquo; Mission</a></p>
    <p><a href="../about-us/index.html">&raquo; What is NYPHP?</a></p>
    <p><a href="../about-us/principals.html">&raquo; Principals</a></p>
    <p><a href="../about-us/sponsors.html">&raquo; Sponsors</a></p>
</div>


</div>

            <div class="SubLeftColumn">
            
<div class="Event">

<h1>PHP Initialization and Configuration</h1>
<h2>NYPHP - <span style="color: rgb(0, 0, 153);">PH</span>undamentals</h2>

<p>
The settings in <em>php.ini</em> control various aspects of PHP&#8217;s behavior.
The default settings are not always optimal for a production environment.
Here we present NYPHP&#8217;s recommendations for setting key initialization parameters.
</p>


<h3>Essential Settings</h3>

<ol>
<li>
Always set <em>register_globals</em> to <em>off</em>.  Setting it to <em>on</em> may make it easier to
pass variables from one script to another, but it opens unacceptable security vulnerabilities.
Zend&#8217;s rationale for turning this value off by default is
<a href="http://www.zend.com/manual/security.globals.php" target="_newwin">here</a>.
</li>

<li>
Always set <em>magic_quotes_gpc</em> and <em>magic_quotes_runtime</em> and <em>magic_quotes_sybase</em> to
<em>off</em>.  See <a href="5_Storing-Data-Submitted-From-a-Form-and-Displaying-Data-from-a-Database.html">
the PHundamentals article on storing and retrieving/displaying data</a> for
further information on managing these complex settings.
</li>

<li>
Always set <em>log_errors</em> to <em>on</em>, and set <em>error_log</em> to an appropriate path
if the default is not suitable.
</li>

<li>
Set any necessary extensions to be loaded automatically.
</li>
</ol>


<h3>Convenience Settings</h3>

<p>
Set these <strong>file settings</strong> to appropriate values if for some reason the defaults are not acceptable:
</p>

<ol>
<li><em>include_path</em>  PHP will look for files here when you use the <em>require</em> or <em>include</em>
or <em>require_once</em> or <em>include_once</em> directives.</li>

<li><em>extension_dir</em></li>

<li><em>upload_tmp_dir</em>  Probably should be changed in a shared server environment.</li>

<li><em>sendmail_from</em></li>

<li><em>session.save_path</em>  Probably should be changed in a shared server environment.</li>

<li><em>auto_prepend_file</em>  PHP will run this file before it runs your script.</li>

<li><em>auto_append_file</em>  PHP will run this file after it runs your script.</li>
</ol>

<p>
Set these <strong>execution settings</strong> to appropriate values:
</p>

<ol>
<li><em>upload_max_filesize</em> (which defaults to 2M) if you expect
large file uploads (for example, graphics files)</li>

<li><em>max_execution_time</em> (which defaults to 30 seconds), usually
smaller unless you are doing heavy calculations
</li>
</ol>


<h3>Settings for Development Environments</h3>

<ol>
<li>Set <em>memory_limit</em> (which defaults to 8M) to a large enough value
to avoid any potential problem.
</li>

<li>
Set <em>display-errors</em> and <em>track_errors</em> to <em>on</em>.
Set <em>error_reporting</em> to <em>E_ALL &amp; ~E_NOTICE</em>.
These settings facilitate debugging, and should be set to <em>off</em> in a production environment.
</li>
</ol>


<h3>How to Modify Settings</h3>
<h4>When You Control the Server</h4>

<ol>
<li>The simplest solution is to <strong>modify <em>php.ini</em></strong>,
changing appropriate settings to <em>on</em> or <em>off</em>, and
enabling extensions by removing the semi-colon <em>;</em> which comments them out.
One problem with this solution is that this makes these settings global to the server,
whereas it might be more appropriate to have different settings for different applications.</li>

<li>
If so, an alternate solution is to <strong>modify Apache&#8217;s <em>httpd.conf</em></strong>.
You may do this using the &lt;VirtualHost&gt; directive to point the modifications to a specific application, or you
may use the &lt;Directory&gt; or &lt;Files&gt; directives to limit them to a specific directory or files.  In order
to use these directives, you must run Apache with DEFINE EV (that is, define environment) set.  The command line for
this would be <em>/usr/bin/httpd -DEV</em> (or whatever the path to httpd is).  Then a sample httpd.conf entry would
be as follows:

<pre>
# make sure that you're running with -DEV
&lt;IfDefine EV&gt;
  # point modifications at a virtual host or a directory or specific files
  &lt;VirtualHost *&gt;
    ServerAdmin foo at SpecificApplication.com
    DocumentRoot "/var/dev/www"
    ServerName dev
    # PHP stuff goes here
    php_value auto_append_file "/var/dev/dev.inc"
    php_value error_reporting "E_ALL"
    # end of PHP stuff
  &lt;/VirtualHost&gt;
&lt;/IfDefine&gt;
</pre>
</li>
</ol>


<h4>When You Don&#8217;t Control the Server</h4>

<p>
First use the <em>phpinfo()</em> function on the server to determine exactly how PHP is configured there; and
then decide which values you will need to reset.
NYPHP members recommend a variety of techniques to accomplish the actual resetting.
Among them are the following:
</p>

<ol>
<li>
You can <strong>use a local <em>php.ini</em></strong> when running PHP as a cli or cgi binary
by using the -c switch upon invocation.  More information is
<a href="http://www.php.net/manual/en/configuration.php" target="_newwin">here</a>.  A sample local <em>php.ini</em> would be as follows:

<pre>
include_path = .:/path/to/global/includes:/path/to/local/includes
register_globals = 0
error_reporting = E_ALL
display_errors = 1
</pre>
</li>

<li>
Or you can <strong>use the <em>ini_set()</em> function</strong>.  More information is
<a href="http://www.php.net/manual/en/function.ini-set.php" target="_newwin">here</a>.
Notice that some directives can&#8217;t be set at all with <em>ini_set()</em>, and that these settings
are valid only while the script in which they were set is running (so it will need to be called repeatedly
for changes to be valid during a whole session).  Further, using
this function may affect the loading and running of PHP, so it should be used with extreme care.</li>

<li>
Or you can <strong>use an <em>.htaccess</em> file</strong>.  This is exactly the same as modifying httpd.conf
with the &lt;Directory&gt; directive; therefore,
everything in <em>.htaccess</em> applies to both the directory the file is in and all directories below it.
Note also that not all servers allow setting PHP values in <em>.htaccess</em> files.  A sample
<em>.htaccess</em> would be as follows:

<pre>
php_value include_path .:/path/to/global/includes:/path/to/local/includes
php_value register_globals 0
php_value error_reporting E_ALL
php_value display_errors 1
php_value auto_prepend_file path/to/my/functions/library/masterfile.php
</pre>
</li>

<li>
Finally, you can <strong>use a text file in <em>parse_ini_file</em> format</strong>,
which can then be inserted into a script like this:
<pre>
$cfg = parse_ini_file('/path/to/config.conf');
foreach($cfg as $key => $value) {
	define($key,$value);
}
</pre>
More information is <a href="http://www.php.net/manual/en/function.parse-ini-file.php" target="_newwin">here</a>.
</li>
</ol>


<hr />
<p>
For further information:<br />
A list of which <em>php.ini</em> settings can be overridden by the user is
<a href="http://www.php.net/ini_set" target="_newwin">here</a>.<br />
Information on using Apache&#8217;s <em>httpd.conf</em> is
<a href="http://us3.php.net/configuration.changes" target="_newwin">here</a>.<br />
PHP.NET&#8217;s own recommended <em>php.ini</em> is
<a href="http://cvs.php.net/co.php/php-src/php.ini-recommended?login=2&amp;r=1.148" target="_newwin">here</a>.
</p>


<hr />

<p>
Contributors to this article include the following:<br />
Mark Armendariz<br />
Jon Baer<br />
Jeff Barrett<br />
Daniel Convissor<br />
John Corry<br />
John Lacey<br />
Alan T. Miller<br />
David Mintz<br />
Brian Pang<br />
Chris Shiflett<br />
Felix Zaslavskiy<br />
Hans Zaunere<br />
Nasir Zubair<br />
and the PHundamentals team:  Jeff Siegel and Mike Southwell<br />
</p>

</div>

            </div>

        </div>
        <div id="RightColumn">
            

<div class="RightColumnContent">

   
   
       <div class="MiniCal" style="margin: 0px 0 15px 0;">

        <h2>RELATED ARTICLES</h2>
               <div class="MiniCalOdd">
            <p>
                <a title="From Zero to AMP with XAMPP - Installing PHP and MySQL on Windows with XAMPP" href="../PHundamentals/0_Zero-AMP-XAMPP-Installing-PHP-MySQL-Windows.html">From Zero to AMP with XAMPP - Installing PHP and MySQL on Windows with XAMPP</a>
            </p>
        </div>
               <div class="MiniCalEven">
            <p>
                <a title="PHP Initialization and php.ini" href="../PHundamentals/1_PHP-Initialization-phpini.html">PHP Initialization and php.ini</a>
            </p>
        </div>
               <div class="MiniCalOdd">
            <p>
                <a title="Virtual Hosting with PHP" href="../PHundamentals/2_Virtual-Hosting-PHP.html">Virtual Hosting with PHP</a>
            </p>
        </div>
               <div class="MiniCalEven">
            <p>
                <a title="PHP Site Structure: Where to Locate Includes?" href="../PHundamentals/3_PHP-Site-Structure-Where-Locate-Includes.html">PHP Site Structure: Where to Locate Includes?</a>
            </p>
        </div>
               <div class="MiniCalOdd">
            <p>
                <a title="Variable Evaluation in PHP" href="../PHundamentals/4_Variable-Evaluation-in-PHP.html">Variable Evaluation in PHP</a>
            </p>
        </div>
               <div class="MiniCalEven">
            <p>
                <a title="Storing Data Submitted From a Form and Displaying Data from a Database" href="../PHundamentals/5_Storing-Data-Submitted-Form-Displaying-Database.html">Storing Data Submitted From a Form and Displaying Data from a Database</a>
            </p>
        </div>
               <div class="MiniCalOdd">
            <p>
                <a title="Spoofed Form Submissions" href="../PHundamentals/6_Spoofed-Form-Submissions.html">Spoofed Form Submissions</a>
            </p>
        </div>
               <div class="MiniCalEven">
            <p>
                <a title="PHP Error Handling" href="../PHundamentals/7_PHP-Error-Handling.html">PHP Error Handling</a>
            </p>
        </div>
               <div class="MiniCalOdd">
            <p>
                <a title="Preventing Email Header Injection" href="../PHundamentals/8_Preventing-Email-Header-Injection.html">Preventing Email Header Injection</a>
            </p>
        </div>
    </div>
   


    <div class="RightColumnSubSection" style="text-align: center; margin: 35px 0 25px 0; ">
        <a href="http://cnvyr.io/">
        <img src="../img/cnvyrio.logo.sm.png" alt="CSS JS minify thumbnail maker online API" title="CSS JS minify thumbnail maker online API" />
        </a>
        <p><a href="http://cnvyr.io/">free PHP thumbnail maker CSS &amp; Javascript minify gzip pipeline online API and console</a>
        <br />
        <br />Free API and developer tools console for PageSpeed optimization.
        </p>
    </div>



   
</div>

        </div>
    </div>
    </div>

    <div id="Footer">
        
<div style="float: left;">
11.9</div>

<a href="http://www.meetup.com/new-york-php">NYC PHP Meetup Community </a>
    </div>

</div>

</body>
</html>

